var fU=Object.defineProperty;var hU=(e,t,n)=>t in e?fU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S0=(e,t,n)=>hU(e,typeof t!="symbol"?t+"":t,n);function pU(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function UP(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var k0={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function mU(){if(DE)return nc;DE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return nc.Fragment=t,nc.jsx=n,nc.jsxs=n,nc}var LE;function gU(){return LE||(LE=1,k0.exports=mU()),k0.exports}var c=gU(),E0={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function yU(){if(UE)return Ke;UE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(H,Z,I){this.props=H,this.context=Z,this.refs=C,this.updater=I||k}T.prototype.isReactComponent={},T.prototype.setState=function(H,Z){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Z,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function A(){}A.prototype=T.prototype;function N(H,Z,I){this.props=H,this.context=Z,this.refs=C,this.updater=I||k}var O=N.prototype=new A;O.constructor=N,S(O,T.prototype),O.isPureReactComponent=!0;var M=Array.isArray;function P(){}var D={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function q(H,Z,I){var X=I.ref;return{$$typeof:e,type:H,key:Z,ref:X!==void 0?X:null,props:I}}function W(H,Z){return q(H.type,Z,H.props)}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function $(H){var Z={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(I){return Z[I]})}var R=/\/+/g;function z(H,Z){return typeof H=="object"&&H!==null&&H.key!=null?$(""+H.key):Z.toString(36)}function V(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(P,P):(H.status="pending",H.then(function(Z){H.status==="pending"&&(H.status="fulfilled",H.value=Z)},function(Z){H.status==="pending"&&(H.status="rejected",H.reason=Z)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function U(H,Z,I,X,re){var me=typeof H;(me==="undefined"||me==="boolean")&&(H=null);var we=!1;if(H===null)we=!0;else switch(me){case"bigint":case"string":case"number":we=!0;break;case"object":switch(H.$$typeof){case e:case t:we=!0;break;case h:return we=H._init,U(we(H._payload),Z,I,X,re)}}if(we)return re=re(H),we=X===""?"."+z(H,0):X,M(re)?(I="",we!=null&&(I=we.replace(R,"$&/")+"/"),U(re,Z,I,"",function(Se){return Se})):re!=null&&(F(re)&&(re=W(re,I+(re.key==null||H&&H.key===re.key?"":(""+re.key).replace(R,"$&/")+"/")+we)),Z.push(re)),1;we=0;var $e=X===""?".":X+":";if(M(H))for(var ne=0;ne<H.length;ne++)X=H[ne],me=$e+z(X,ne),we+=U(X,Z,I,me,re);else if(ne=v(H),typeof ne=="function")for(H=ne.call(H),ne=0;!(X=H.next()).done;)X=X.value,me=$e+z(X,ne++),we+=U(X,Z,I,me,re);else if(me==="object"){if(typeof H.then=="function")return U(V(H),Z,I,X,re);throw Z=String(H),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return we}function G(H,Z,I){if(H==null)return H;var X=[],re=0;return U(H,X,"","",function(me){return Z.call(I,me,re++)}),X}function le(H){if(H._status===-1){var Z=H._result;Z=Z(),Z.then(function(I){(H._status===0||H._status===-1)&&(H._status=1,H._result=I)},function(I){(H._status===0||H._status===-1)&&(H._status=2,H._result=I)}),H._status===-1&&(H._status=0,H._result=Z)}if(H._status===1)return H._result.default;throw H._result}var ye=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},B={map:G,forEach:function(H,Z,I){G(H,function(){Z.apply(this,arguments)},I)},count:function(H){var Z=0;return G(H,function(){Z++}),Z},toArray:function(H){return G(H,function(Z){return Z})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ke.Activity=m,Ke.Children=B,Ke.Component=T,Ke.Fragment=n,Ke.Profiler=i,Ke.PureComponent=N,Ke.StrictMode=r,Ke.Suspense=f,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},Ke.cache=function(H){return function(){return H.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(H,Z,I){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var X=S({},H.props),re=H.key;if(Z!=null)for(me in Z.key!==void 0&&(re=""+Z.key),Z)!Y.call(Z,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&Z.ref===void 0||(X[me]=Z[me]);var me=arguments.length-2;if(me===1)X.children=I;else if(1<me){for(var we=Array(me),$e=0;$e<me;$e++)we[$e]=arguments[$e+2];X.children=we}return q(H.type,re,X)},Ke.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Ke.createElement=function(H,Z,I){var X,re={},me=null;if(Z!=null)for(X in Z.key!==void 0&&(me=""+Z.key),Z)Y.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(re[X]=Z[X]);var we=arguments.length-2;if(we===1)re.children=I;else if(1<we){for(var $e=Array(we),ne=0;ne<we;ne++)$e[ne]=arguments[ne+2];re.children=$e}if(H&&H.defaultProps)for(X in we=H.defaultProps,we)re[X]===void 0&&(re[X]=we[X]);return q(H,me,re)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(H){return{$$typeof:u,render:H}},Ke.isValidElement=F,Ke.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:le}},Ke.memo=function(H,Z){return{$$typeof:d,type:H,compare:Z===void 0?null:Z}},Ke.startTransition=function(H){var Z=D.T,I={};D.T=I;try{var X=H(),re=D.S;re!==null&&re(I,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(P,ye)}catch(me){ye(me)}finally{Z!==null&&I.types!==null&&(Z.types=I.types),D.T=Z}},Ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ke.use=function(H){return D.H.use(H)},Ke.useActionState=function(H,Z,I){return D.H.useActionState(H,Z,I)},Ke.useCallback=function(H,Z){return D.H.useCallback(H,Z)},Ke.useContext=function(H){return D.H.useContext(H)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(H,Z){return D.H.useDeferredValue(H,Z)},Ke.useEffect=function(H,Z){return D.H.useEffect(H,Z)},Ke.useEffectEvent=function(H){return D.H.useEffectEvent(H)},Ke.useId=function(){return D.H.useId()},Ke.useImperativeHandle=function(H,Z,I){return D.H.useImperativeHandle(H,Z,I)},Ke.useInsertionEffect=function(H,Z){return D.H.useInsertionEffect(H,Z)},Ke.useLayoutEffect=function(H,Z){return D.H.useLayoutEffect(H,Z)},Ke.useMemo=function(H,Z){return D.H.useMemo(H,Z)},Ke.useOptimistic=function(H,Z){return D.H.useOptimistic(H,Z)},Ke.useReducer=function(H,Z,I){return D.H.useReducer(H,Z,I)},Ke.useRef=function(H){return D.H.useRef(H)},Ke.useState=function(H){return D.H.useState(H)},Ke.useSyncExternalStore=function(H,Z,I){return D.H.useSyncExternalStore(H,Z,I)},Ke.useTransition=function(){return D.H.useTransition()},Ke.version="19.2.0",Ke}var qE;function $l(){return qE||(qE=1,E0.exports=yU()),E0.exports}var _=$l();const qP=Ur(_),vU=pU({__proto__:null,default:qP},[_]);var C0={exports:{}},rc={},T0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function xU(){return $E||($E=1,(function(e){function t(U,G){var le=U.length;U.push(G);e:for(;0<le;){var ye=le-1>>>1,B=U[ye];if(0<i(B,G))U[ye]=G,U[le]=B,le=ye;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],le=U.pop();if(le!==G){U[0]=le;e:for(var ye=0,B=U.length,H=B>>>1;ye<H;){var Z=2*(ye+1)-1,I=U[Z],X=Z+1,re=U[X];if(0>i(I,le))X<B&&0>i(re,I)?(U[ye]=re,U[X]=le,ye=X):(U[ye]=I,U[Z]=le,ye=Z);else if(X<B&&0>i(re,le))U[ye]=re,U[X]=le,ye=X;else break e}}return G}function i(U,G){var le=U.sortIndex-G.sortIndex;return le!==0?le:U.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var f=[],d=[],h=1,m=null,y=3,v=!1,k=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(U){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=U)r(d),G.sortIndex=G.expirationTime,t(f,G);else break;G=n(d)}}function M(U){if(S=!1,O(U),!k)if(n(f)!==null)k=!0,P||(P=!0,$());else{var G=n(d);G!==null&&V(M,G.startTime-U)}}var P=!1,D=-1,Y=5,q=-1;function W(){return C?!0:!(e.unstable_now()-q<Y)}function F(){if(C=!1,P){var U=e.unstable_now();q=U;var G=!0;try{e:{k=!1,S&&(S=!1,A(D),D=-1),v=!0;var le=y;try{t:{for(O(U),m=n(f);m!==null&&!(m.expirationTime>U&&W());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,y=m.priorityLevel;var B=ye(m.expirationTime<=U);if(U=e.unstable_now(),typeof B=="function"){m.callback=B,O(U),G=!0;break t}m===n(f)&&r(f),O(U)}else r(f);m=n(f)}if(m!==null)G=!0;else{var H=n(d);H!==null&&V(M,H.startTime-U),G=!1}}break e}finally{m=null,y=le,v=!1}G=void 0}}finally{G?$():P=!1}}}var $;if(typeof N=="function")$=function(){N(F)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,z=R.port2;R.port1.onmessage=F,$=function(){z.postMessage(null)}}else $=function(){T(F,0)};function V(U,G){D=T(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(U){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var le=y;y=G;try{return U()}finally{y=le}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=y;y=U;try{return G()}finally{y=le}},e.unstable_scheduleCallback=function(U,G,le){var ye=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ye+le:ye):le=ye,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=le+B,U={id:h++,callback:G,priorityLevel:U,startTime:le,expirationTime:B,sortIndex:-1},le>ye?(U.sortIndex=le,t(d,U),n(f)===null&&U===n(d)&&(S?(A(D),D=-1):S=!0,V(M,le-ye))):(U.sortIndex=B,t(f,U),k||v||(k=!0,P||(P=!0,$()))),U},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(U){var G=y;return function(){var le=y;y=G;try{return U.apply(this,arguments)}finally{y=le}}}})(N0)),N0}var BE;function bU(){return BE||(BE=1,T0.exports=xU()),T0.exports}var A0={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function wU(){if(zE)return Fn;zE=1;var e=$l();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fn.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(f,d,null,h)},Fn.flushSync=function(f){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,f)return f()}finally{o.T=d,r.p=h,r.d.f()}},Fn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Fn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Fn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,m=u(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):h==="script"&&r.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Fn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Fn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=u(h,d.crossOrigin);r.d.L(f,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Fn.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Fn.requestFormReset=function(f){r.d.r(f)},Fn.unstable_batchedUpdates=function(f,d){return f(d)},Fn.useFormState=function(f,d,h){return o.H.useFormState(f,d,h)},Fn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Fn.version="19.2.0",Fn}var FE;function $P(){if(FE)return A0.exports;FE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),A0.exports=wU(),A0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function _U(){if(VE)return rc;VE=1;var e=bU(),t=$l(),n=$P();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var p=s,g=l;;){var b=p.return;if(b===null)break;var E=b.alternate;if(E===null){if(g=b.return,g!==null){p=g;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===p)return f(b),s;if(E===g)return f(b),l;E=E.sibling}throw Error(r(188))}if(p.return!==g.return)p=b,g=E;else{for(var j=!1,L=b.child;L;){if(L===p){j=!0,p=b,g=E;break}if(L===g){j=!0,g=b,p=E;break}L=L.sibling}if(!j){for(L=E.child;L;){if(L===p){j=!0,p=E,g=b;break}if(L===g){j=!0,g=E,p=b;break}L=L.sibling}if(!j)throw Error(r(189))}}if(p.alternate!==g)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var R=Symbol.for("react.client.reference");function z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===R?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case q:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case N:return s.displayName||"Context";case A:return(s._context.displayName||"Context")+".Consumer";case O:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:z(s.type)||"Memo";case Y:l=s._payload,s=s._init;try{return z(s(l))}catch{}}return null}var V=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ye=[],B=-1;function H(s){return{current:s}}function Z(s){0>B||(s.current=ye[B],ye[B]=null,B--)}function I(s,l){B++,ye[B]=s.current,s.current=l}var X=H(null),re=H(null),me=H(null),we=H(null);function $e(s,l){switch(I(me,l),I(re,s),I(X,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?aE(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=aE(l),s=sE(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(X),I(X,s)}function ne(){Z(X),Z(re),Z(me)}function Se(s){s.memoizedState!==null&&I(we,s);var l=X.current,p=sE(l,s.type);l!==p&&(I(re,s),I(X,p))}function Ee(s){re.current===s&&(Z(X),Z(re)),we.current===s&&(Z(we),Qu._currentValue=le)}var ge,bt;function We(s){if(ge===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);ge=l&&l[1]||"",bt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+s+bt}var ct=!1;function Ft(s,l){if(!s||ct)return"";ct=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var se=ce}Reflect.construct(s,[],pe)}else{try{pe.call()}catch(ce){se=ce}s.call(pe.prototype)}}else{try{throw Error()}catch(ce){se=ce}(pe=s())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=g.DetermineComponentFrameRoot(),j=E[0],L=E[1];if(j&&L){var K=j.split(`
`),ae=L.split(`
`);for(b=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ae.length&&!ae[b].includes("DetermineComponentFrameRoot");)b++;if(g===K.length||b===ae.length)for(g=K.length-1,b=ae.length-1;1<=g&&0<=b&&K[g]!==ae[b];)b--;for(;1<=g&&0<=b;g--,b--)if(K[g]!==ae[b]){if(g!==1||b!==1)do if(g--,b--,0>b||K[g]!==ae[b]){var de=`
`+K[g].replace(" at new "," at ");return s.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",s.displayName)),de}while(1<=g&&0<=b);break}}}finally{ct=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?We(p):""}function Pn(s,l){switch(s.tag){case 26:case 27:case 5:return We(s.type);case 16:return We("Lazy");case 13:return s.child!==l&&l!==null?We("Suspense Fallback"):We("Suspense");case 19:return We("SuspenseList");case 0:case 15:return Ft(s.type,!1);case 11:return Ft(s.type.render,!1);case 1:return Ft(s.type,!0);case 31:return We("Activity");default:return""}}function Xn(s){try{var l="",p=null;do l+=Pn(s,p),p=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ni=Object.prototype.hasOwnProperty,ci=e.unstable_scheduleCallback,di=e.unstable_cancelCallback,Pa=e.unstable_shouldYield,ws=e.unstable_requestPaint,nn=e.unstable_now,_s=e.unstable_getCurrentPriorityLevel,fe=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,Ue=e.unstable_NormalPriority,Xe=e.unstable_LowPriority,tt=e.unstable_IdlePriority,Mn=e.log,vr=e.unstable_setDisableYieldValue,Ot=null,Et=null;function ve(s){if(typeof Mn=="function"&&vr(s),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Ot,s)}catch{}}var Ie=Math.clz32?Math.clz32:On,et=Math.log,Te=Math.LN2;function On(s){return s>>>=0,s===0?32:31-(et(s)/Te|0)|0}var Ai=256,Bi=262144,Ma=4194304;function xr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function zi(s,l,p){var g=s.pendingLanes;if(g===0)return 0;var b=0,E=s.suspendedLanes,j=s.pingedLanes;s=s.warmLanes;var L=g&134217727;return L!==0?(g=L&~E,g!==0?b=xr(g):(j&=L,j!==0?b=xr(j):p||(p=L&~s,p!==0&&(b=xr(p))))):(L=g&~E,L!==0?b=xr(L):j!==0?b=xr(j):p||(p=g&~s,p!==0&&(b=xr(p)))),b===0?0:l!==0&&l!==b&&(l&E)===0&&(E=b&-b,p=l&-l,E>=p||E===32&&(p&4194048)!==0)?l:b}function Fi(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function on(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var s=Ma;return Ma<<=1,(Ma&62914560)===0&&(Ma=4194304),s}function uu(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function fi(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function gm(s,l,p,g,b,E){var j=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var L=s.entanglements,K=s.expirationTimes,ae=s.hiddenUpdates;for(p=j&~p;0<p;){var de=31-Ie(p),pe=1<<de;L[de]=0,K[de]=-1;var se=ae[de];if(se!==null)for(ae[de]=null,de=0;de<se.length;de++){var ce=se[de];ce!==null&&(ce.lane&=-536870913)}p&=~pe}g!==0&&Vi(s,g,0),E!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=E&~(j&~l))}function Vi(s,l,p){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-Ie(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|p&261930}function vd(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var g=31-Ie(p),b=1<<g;b&l|s[g]&l&&(s[g]|=l),p&=~b}}function cu(s,l){var p=l&-l;return p=(p&42)!==0?1:du(p),(p&(s.suspendedLanes|l))!==0?0:p}function du(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function fu(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function xd(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:AE(s.type))}function bd(s,l){var p=G.p;try{return G.p=s,l()}finally{G.p=p}}var hi=Math.random().toString(36).slice(2),yn="__reactFiber$"+hi,zn="__reactProps$"+hi,Oa="__reactContainer$"+hi,hu="__reactEvents$"+hi,Ss="__reactListeners$"+hi,ks="__reactHandles$"+hi,Q="__reactResources$"+hi,ue="__reactMarker$"+hi;function ke(s){delete s[yn],delete s[zn],delete s[hu],delete s[Ss],delete s[ks]}function xe(s){var l=s[yn];if(l)return l;for(var p=s.parentNode;p;){if(l=p[Oa]||p[yn]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=hE(s);s!==null;){if(p=s[yn])return p;s=hE(s)}return l}s=p,p=s.parentNode}return null}function je(s){if(s=s[yn]||s[Oa]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function He(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Fe(s){var l=s[Q];return l||(l=s[Q]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ne(s){s[ue]=!0}var lt=new Set,ut={};function gt(s,l){Ce(s,l),Ce(s+"Capture",l)}function Ce(s,l){for(ut[s]=l,s=0;s<l.length;s++)lt.add(l[s])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},Ge={};function ln(s){return Ni.call(Ge,s)?!0:Ni.call(Vt,s)?!1:it.test(s)?Ge[s]=!0:(Vt[s]=!0,!1)}function pi(s,l,p){if(ln(l))if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+p)}}function Hi(s,l,p){if(p===null)s.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+p)}}function Qn(s,l,p,g){if(g===null)s.removeAttribute(p);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(l,p,""+g)}}function ar(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wd(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function _d(s,l,p){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,E=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(j){p=""+j,E.call(this,j)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return p},setValue:function(j){p=""+j},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function pu(s){if(!s._valueTracker){var l=wd(s)?"checked":"value";s._valueTracker=_d(s,l,""+s[l])}}function Eo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),g="";return s&&(g=wd(s)?s.checked?"true":"false":s.value),s=g,s!==p?(l.setValue(s),!0):!1}function Sd(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var s3=/[\n"\\]/g;function Br(s){return s.replace(s3,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ym(s,l,p,g,b,E,j,L){s.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.type=j:s.removeAttribute("type"),l!=null?j==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+ar(l)):s.value!==""+ar(l)&&(s.value=""+ar(l)):j!=="submit"&&j!=="reset"||s.removeAttribute("value"),l!=null?vm(s,j,ar(l)):p!=null?vm(s,j,ar(p)):g!=null&&s.removeAttribute("value"),b==null&&E!=null&&(s.defaultChecked=!!E),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+ar(L):s.removeAttribute("name")}function Z1(s,l,p,g,b,E,j,L){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),l!=null||p!=null){if(!(E!=="submit"&&E!=="reset"||l!=null)){pu(s);return}p=p!=null?""+ar(p):"",l=l!=null?""+ar(l):p,L||l===s.value||(s.value=l),s.defaultValue=l}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=L?s.checked:!!g,s.defaultChecked=!!g,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.name=j),pu(s)}function vm(s,l,p){l==="number"&&Sd(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function Co(s,l,p,g){if(s=s.options,l){l={};for(var b=0;b<p.length;b++)l["$"+p[b]]=!0;for(p=0;p<s.length;p++)b=l.hasOwnProperty("$"+s[p].value),s[p].selected!==b&&(s[p].selected=b),b&&g&&(s[p].defaultSelected=!0)}else{for(p=""+ar(p),l=null,b=0;b<s.length;b++){if(s[b].value===p){s[b].selected=!0,g&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function e_(s,l,p){if(l!=null&&(l=""+ar(l),l!==s.value&&(s.value=l),p==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=p!=null?""+ar(p):""}function t_(s,l,p,g){if(l==null){if(g!=null){if(p!=null)throw Error(r(92));if(V(g)){if(1<g.length)throw Error(r(93));g=g[0]}p=g}p==null&&(p=""),l=p}p=ar(l),s.defaultValue=p,g=s.textContent,g===p&&g!==""&&g!==null&&(s.value=g),pu(s)}function To(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var o3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function n_(s,l,p){var g=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,p):typeof p!="number"||p===0||o3.has(l)?l==="float"?s.cssFloat=p:s[l]=(""+p).trim():s[l]=p+"px"}function r_(s,l,p){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,p!=null){for(var g in p)!p.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var b in l)g=l[b],l.hasOwnProperty(b)&&p[b]!==g&&n_(s,b,g)}else for(var E in l)l.hasOwnProperty(E)&&n_(s,E,l[E])}function xm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kd(s){return u3.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gi(){}var bm=null;function wm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var No=null,Ao=null;function i_(s){var l=je(s);if(l&&(s=l.stateNode)){var p=s[zn]||null;e:switch(s=l.stateNode,l.type){case"input":if(ym(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var g=p[l];if(g!==s&&g.form===s.form){var b=g[zn]||null;if(!b)throw Error(r(90));ym(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<p.length;l++)g=p[l],g.form===s.form&&Eo(g)}break e;case"textarea":e_(s,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&Co(s,!!p.multiple,l,!1)}}}var _m=!1;function a_(s,l,p){if(_m)return s(l,p);_m=!0;try{var g=s(l);return g}finally{if(_m=!1,(No!==null||Ao!==null)&&(ff(),No&&(l=No,s=Ao,Ao=No=null,i_(l),s)))for(l=0;l<s.length;l++)i_(s[l])}}function mu(s,l){var p=s.stateNode;if(p===null)return null;var g=p[zn]||null;if(g===null)return null;p=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(r(231,l,typeof p));return p}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=!1;if(Ki)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{Sm=!1}var Ra=null,km=null,Ed=null;function s_(){if(Ed)return Ed;var s,l=km,p=l.length,g,b="value"in Ra?Ra.value:Ra.textContent,E=b.length;for(s=0;s<p&&l[s]===b[s];s++);var j=p-s;for(g=1;g<=j&&l[p-g]===b[E-g];g++);return Ed=b.slice(s,1<g?1-g:void 0)}function Cd(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Td(){return!0}function o_(){return!1}function sr(s){function l(p,g,b,E,j){this._reactName=p,this._targetInst=b,this.type=g,this.nativeEvent=E,this.target=j,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(p=s[L],this[L]=p?p(E):E[L]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Td:o_,this.isPropagationStopped=o_,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),l}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nd=sr(Es),yu=m({},Es,{view:0,detail:0}),c3=sr(yu),Em,Cm,vu,Ad=m({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vu&&(vu&&s.type==="mousemove"?(Em=s.screenX-vu.screenX,Cm=s.screenY-vu.screenY):Cm=Em=0,vu=s),Em)},movementY:function(s){return"movementY"in s?s.movementY:Cm}}),l_=sr(Ad),d3=m({},Ad,{dataTransfer:0}),f3=sr(d3),h3=m({},yu,{relatedTarget:0}),Tm=sr(h3),p3=m({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),m3=sr(p3),g3=m({},Es,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),y3=sr(g3),v3=m({},Es,{data:0}),u_=sr(v3),x3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _3(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=w3[s])?!!l[s]:!1}function Nm(){return _3}var S3=m({},yu,{key:function(s){if(s.key){var l=x3[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Cd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?b3[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(s){return s.type==="keypress"?Cd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Cd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),k3=sr(S3),E3=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c_=sr(E3),C3=m({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),T3=sr(C3),N3=m({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),A3=sr(N3),j3=m({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),P3=sr(j3),M3=m({},Es,{newState:0,oldState:0}),O3=sr(M3),R3=[9,13,27,32],Am=Ki&&"CompositionEvent"in window,xu=null;Ki&&"documentMode"in document&&(xu=document.documentMode);var I3=Ki&&"TextEvent"in window&&!xu,d_=Ki&&(!Am||xu&&8<xu&&11>=xu),f_=" ",h_=!1;function p_(s,l){switch(s){case"keyup":return R3.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jo=!1;function D3(s,l){switch(s){case"compositionend":return m_(l);case"keypress":return l.which!==32?null:(h_=!0,f_);case"textInput":return s=l.data,s===f_&&h_?null:s;default:return null}}function L3(s,l){if(jo)return s==="compositionend"||!Am&&p_(s,l)?(s=s_(),Ed=km=Ra=null,jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return d_&&l.locale!=="ko"?null:l.data;default:return null}}var U3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g_(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!U3[s.type]:l==="textarea"}function y_(s,l,p,g){No?Ao?Ao.push(g):Ao=[g]:No=g,l=xf(l,"onChange"),0<l.length&&(p=new Nd("onChange","change",null,p,g),s.push({event:p,listeners:l}))}var bu=null,wu=null;function q3(s){Zk(s,0)}function jd(s){var l=He(s);if(Eo(l))return s}function v_(s,l){if(s==="change")return l}var x_=!1;if(Ki){var jm;if(Ki){var Pm="oninput"in document;if(!Pm){var b_=document.createElement("div");b_.setAttribute("oninput","return;"),Pm=typeof b_.oninput=="function"}jm=Pm}else jm=!1;x_=jm&&(!document.documentMode||9<document.documentMode)}function w_(){bu&&(bu.detachEvent("onpropertychange",__),wu=bu=null)}function __(s){if(s.propertyName==="value"&&jd(wu)){var l=[];y_(l,wu,s,wm(s)),a_(q3,l)}}function $3(s,l,p){s==="focusin"?(w_(),bu=l,wu=p,bu.attachEvent("onpropertychange",__)):s==="focusout"&&w_()}function B3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jd(wu)}function z3(s,l){if(s==="click")return jd(l)}function F3(s,l){if(s==="input"||s==="change")return jd(l)}function V3(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var br=typeof Object.is=="function"?Object.is:V3;function _u(s,l){if(br(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),g=Object.keys(l);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var b=p[g];if(!Ni.call(l,b)||!br(s[b],l[b]))return!1}return!0}function S_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function k_(s,l){var p=S_(s);s=0;for(var g;p;){if(p.nodeType===3){if(g=s+p.textContent.length,s<=l&&g>=l)return{node:p,offset:l-s};s=g}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=S_(p)}}function E_(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?E_(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function C_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Sd(s.document);l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=Sd(s.document)}return l}function Mm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var H3=Ki&&"documentMode"in document&&11>=document.documentMode,Po=null,Om=null,Su=null,Rm=!1;function T_(s,l,p){var g=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Rm||Po==null||Po!==Sd(g)||(g=Po,"selectionStart"in g&&Mm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Su&&_u(Su,g)||(Su=g,g=xf(Om,"onSelect"),0<g.length&&(l=new Nd("onSelect","select",null,l,p),s.push({event:l,listeners:g}),l.target=Po)))}function Cs(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var Mo={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionrun:Cs("Transition","TransitionRun"),transitionstart:Cs("Transition","TransitionStart"),transitioncancel:Cs("Transition","TransitionCancel"),transitionend:Cs("Transition","TransitionEnd")},Im={},N_={};Ki&&(N_=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Ts(s){if(Im[s])return Im[s];if(!Mo[s])return s;var l=Mo[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in N_)return Im[s]=l[p];return s}var A_=Ts("animationend"),j_=Ts("animationiteration"),P_=Ts("animationstart"),G3=Ts("transitionrun"),K3=Ts("transitionstart"),Y3=Ts("transitioncancel"),M_=Ts("transitionend"),O_=new Map,Dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dm.push("scrollEnd");function mi(s,l){O_.set(s,l),gt(l,[s])}var Pd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},zr=[],Oo=0,Lm=0;function Md(){for(var s=Oo,l=Lm=Oo=0;l<s;){var p=zr[l];zr[l++]=null;var g=zr[l];zr[l++]=null;var b=zr[l];zr[l++]=null;var E=zr[l];if(zr[l++]=null,g!==null&&b!==null){var j=g.pending;j===null?b.next=b:(b.next=j.next,j.next=b),g.pending=b}E!==0&&R_(p,b,E)}}function Od(s,l,p,g){zr[Oo++]=s,zr[Oo++]=l,zr[Oo++]=p,zr[Oo++]=g,Lm|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Um(s,l,p,g){return Od(s,l,p,g),Rd(s)}function Ns(s,l){return Od(s,null,null,l),Rd(s)}function R_(s,l,p){s.lanes|=p;var g=s.alternate;g!==null&&(g.lanes|=p);for(var b=!1,E=s.return;E!==null;)E.childLanes|=p,g=E.alternate,g!==null&&(g.childLanes|=p),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(b=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,b&&l!==null&&(b=31-Ie(p),s=E.hiddenUpdates,g=s[b],g===null?s[b]=[l]:g.push(l),l.lane=p|536870912),E):null}function Rd(s){if(50<Hu)throw Hu=0,Kg=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Ro={};function W3(s,l,p,g){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(s,l,p,g){return new W3(s,l,p,g)}function qm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yi(s,l){var p=s.alternate;return p===null?(p=wr(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function I_(s,l){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,l=p.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Id(s,l,p,g,b,E){var j=0;if(g=s,typeof s=="function")qm(s)&&(j=1);else if(typeof s=="string")j=eU(s,p,X.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case q:return s=wr(31,p,l,b),s.elementType=q,s.lanes=E,s;case S:return As(p.children,b,E,l);case C:j=8,b|=24;break;case T:return s=wr(12,p,l,b|2),s.elementType=T,s.lanes=E,s;case M:return s=wr(13,p,l,b),s.elementType=M,s.lanes=E,s;case P:return s=wr(19,p,l,b),s.elementType=P,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:j=10;break e;case A:j=9;break e;case O:j=11;break e;case D:j=14;break e;case Y:j=16,g=null;break e}j=29,p=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=wr(j,p,l,b),l.elementType=s,l.type=g,l.lanes=E,l}function As(s,l,p,g){return s=wr(7,s,g,l),s.lanes=p,s}function $m(s,l,p){return s=wr(6,s,null,l),s.lanes=p,s}function D_(s){var l=wr(18,null,null,0);return l.stateNode=s,l}function Bm(s,l,p){return l=wr(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var L_=new WeakMap;function Fr(s,l){if(typeof s=="object"&&s!==null){var p=L_.get(s);return p!==void 0?p:(l={value:s,source:l,stack:Xn(l)},L_.set(s,l),l)}return{value:s,source:l,stack:Xn(l)}}var Io=[],Do=0,Dd=null,ku=0,Vr=[],Hr=0,Ia=null,ji=1,Pi="";function Wi(s,l){Io[Do++]=ku,Io[Do++]=Dd,Dd=s,ku=l}function U_(s,l,p){Vr[Hr++]=ji,Vr[Hr++]=Pi,Vr[Hr++]=Ia,Ia=s;var g=ji;s=Pi;var b=32-Ie(g)-1;g&=~(1<<b),p+=1;var E=32-Ie(l)+b;if(30<E){var j=b-b%5;E=(g&(1<<j)-1).toString(32),g>>=j,b-=j,ji=1<<32-Ie(l)+b|p<<b|g,Pi=E+s}else ji=1<<E|p<<b|g,Pi=s}function zm(s){s.return!==null&&(Wi(s,1),U_(s,1,0))}function Fm(s){for(;s===Dd;)Dd=Io[--Do],Io[Do]=null,ku=Io[--Do],Io[Do]=null;for(;s===Ia;)Ia=Vr[--Hr],Vr[Hr]=null,Pi=Vr[--Hr],Vr[Hr]=null,ji=Vr[--Hr],Vr[Hr]=null}function q_(s,l){Vr[Hr++]=ji,Vr[Hr++]=Pi,Vr[Hr++]=Ia,ji=l.id,Pi=l.overflow,Ia=s}var Rn=null,Ut=null,ot=!1,Da=null,Gr=!1,Vm=Error(r(519));function La(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eu(Fr(l,s)),Vm}function $_(s){var l=s.stateNode,p=s.type,g=s.memoizedProps;switch(l[yn]=s,l[zn]=g,p){case"dialog":rt("cancel",l),rt("close",l);break;case"iframe":case"object":case"embed":rt("load",l);break;case"video":case"audio":for(p=0;p<Ku.length;p++)rt(Ku[p],l);break;case"source":rt("error",l);break;case"img":case"image":case"link":rt("error",l),rt("load",l);break;case"details":rt("toggle",l);break;case"input":rt("invalid",l),Z1(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":rt("invalid",l);break;case"textarea":rt("invalid",l),t_(l,g.value,g.defaultValue,g.children)}p=g.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||g.suppressHydrationWarning===!0||rE(l.textContent,p)?(g.popover!=null&&(rt("beforetoggle",l),rt("toggle",l)),g.onScroll!=null&&rt("scroll",l),g.onScrollEnd!=null&&rt("scrollend",l),g.onClick!=null&&(l.onclick=Gi),l=!0):l=!1,l||La(s,!0)}function B_(s){for(Rn=s.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:Rn=Rn.return}}function Lo(s){if(s!==Rn)return!1;if(!ot)return B_(s),ot=!0,!1;var l=s.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||l0(s.type,s.memoizedProps)),p=!p),p&&Ut&&La(s),B_(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=fE(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=fE(s)}else l===27?(l=Ut,Xa(s.type)?(s=h0,h0=null,Ut=s):Ut=l):Ut=Rn?Yr(s.stateNode.nextSibling):null;return!0}function js(){Ut=Rn=null,ot=!1}function Hm(){var s=Da;return s!==null&&(cr===null?cr=s:cr.push.apply(cr,s),Da=null),s}function Eu(s){Da===null?Da=[s]:Da.push(s)}var Gm=H(null),Ps=null,Ji=null;function Ua(s,l,p){I(Gm,l._currentValue),l._currentValue=p}function Xi(s){s._currentValue=Gm.current,Z(Gm)}function Km(s,l,p){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===p)break;s=s.return}}function Ym(s,l,p,g){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var E=b.dependencies;if(E!==null){var j=b.child;E=E.firstContext;e:for(;E!==null;){var L=E;E=b;for(var K=0;K<l.length;K++)if(L.context===l[K]){E.lanes|=p,L=E.alternate,L!==null&&(L.lanes|=p),Km(E.return,p,s),g||(j=null);break e}E=L.next}}else if(b.tag===18){if(j=b.return,j===null)throw Error(r(341));j.lanes|=p,E=j.alternate,E!==null&&(E.lanes|=p),Km(j,p,s),j=null}else j=b.child;if(j!==null)j.return=b;else for(j=b;j!==null;){if(j===s){j=null;break}if(b=j.sibling,b!==null){b.return=j.return,j=b;break}j=j.return}b=j}}function Uo(s,l,p,g){s=null;for(var b=l,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var j=b.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var L=b.type;br(b.pendingProps.value,j.value)||(s!==null?s.push(L):s=[L])}}else if(b===we.current){if(j=b.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Qu):s=[Qu])}b=b.return}s!==null&&Ym(l,s,p,g),l.flags|=262144}function Ld(s){for(s=s.firstContext;s!==null;){if(!br(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ms(s){Ps=s,Ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return z_(Ps,s)}function Ud(s,l){return Ps===null&&Ms(s),z_(s,l)}function z_(s,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},Ji===null){if(s===null)throw Error(r(308));Ji=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Ji=Ji.next=l;return p}var J3=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(p,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(p){return p()})}},X3=e.unstable_scheduleCallback,Q3=e.unstable_NormalPriority,un={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wm(){return{controller:new J3,data:new Map,refCount:0}}function Cu(s){s.refCount--,s.refCount===0&&X3(Q3,function(){s.controller.abort()})}var Tu=null,Jm=0,qo=0,$o=null;function Z3(s,l){if(Tu===null){var p=Tu=[];Jm=0,qo=Zg(),$o={status:"pending",value:void 0,then:function(g){p.push(g)}}}return Jm++,l.then(F_,F_),l}function F_(){if(--Jm===0&&Tu!==null){$o!==null&&($o.status="fulfilled");var s=Tu;Tu=null,qo=0,$o=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function e5(s,l){var p=[],g={status:"pending",value:null,reason:null,then:function(b){p.push(b)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var b=0;b<p.length;b++)(0,p[b])(l)},function(b){for(g.status="rejected",g.reason=b,b=0;b<p.length;b++)(0,p[b])(void 0)}),g}var V_=U.S;U.S=function(s,l){Tk=nn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Z3(s,l),V_!==null&&V_(s,l)};var Os=H(null);function Xm(){var s=Os.current;return s!==null?s:jt.pooledCache}function qd(s,l){l===null?I(Os,Os.current):I(Os,l.pool)}function H_(){var s=Xm();return s===null?null:{parent:un._currentValue,pool:s}}var Bo=Error(r(460)),Qm=Error(r(474)),$d=Error(r(542)),Bd={then:function(){}};function G_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function K_(s,l,p){switch(p=s[p],p===void 0?s.push(l):p!==l&&(l.then(Gi,Gi),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,W_(s),s;default:if(typeof l.status=="string")l.then(Gi,Gi);else{if(s=jt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=g}},function(g){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,W_(s),s}throw Is=l,Bo}}function Rs(s){try{var l=s._init;return l(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Is=p,Bo):p}}var Is=null;function Y_(){if(Is===null)throw Error(r(459));var s=Is;return Is=null,s}function W_(s){if(s===Bo||s===$d)throw Error(r(483))}var zo=null,Nu=0;function zd(s){var l=Nu;return Nu+=1,zo===null&&(zo=[]),K_(zo,s,l)}function Au(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Fd(s,l){throw l.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function J_(s){function l(ee,J){if(s){var ie=ee.deletions;ie===null?(ee.deletions=[J],ee.flags|=16):ie.push(J)}}function p(ee,J){if(!s)return null;for(;J!==null;)l(ee,J),J=J.sibling;return null}function g(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function b(ee,J){return ee=Yi(ee,J),ee.index=0,ee.sibling=null,ee}function E(ee,J,ie){return ee.index=ie,s?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<J?(ee.flags|=67108866,J):ie):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function j(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function L(ee,J,ie,he){return J===null||J.tag!==6?(J=$m(ie,ee.mode,he),J.return=ee,J):(J=b(J,ie),J.return=ee,J)}function K(ee,J,ie,he){var qe=ie.type;return qe===S?de(ee,J,ie.props.children,he,ie.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&Rs(qe)===J.type)?(J=b(J,ie.props),Au(J,ie),J.return=ee,J):(J=Id(ie.type,ie.key,ie.props,null,ee.mode,he),Au(J,ie),J.return=ee,J)}function ae(ee,J,ie,he){return J===null||J.tag!==4||J.stateNode.containerInfo!==ie.containerInfo||J.stateNode.implementation!==ie.implementation?(J=Bm(ie,ee.mode,he),J.return=ee,J):(J=b(J,ie.children||[]),J.return=ee,J)}function de(ee,J,ie,he,qe){return J===null||J.tag!==7?(J=As(ie,ee.mode,he,qe),J.return=ee,J):(J=b(J,ie),J.return=ee,J)}function pe(ee,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=$m(""+J,ee.mode,ie),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case v:return ie=Id(J.type,J.key,J.props,null,ee.mode,ie),Au(ie,J),ie.return=ee,ie;case k:return J=Bm(J,ee.mode,ie),J.return=ee,J;case Y:return J=Rs(J),pe(ee,J,ie)}if(V(J)||$(J))return J=As(J,ee.mode,ie,null),J.return=ee,J;if(typeof J.then=="function")return pe(ee,zd(J),ie);if(J.$$typeof===N)return pe(ee,Ud(ee,J),ie);Fd(ee,J)}return null}function se(ee,J,ie,he){var qe=J!==null?J.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return qe!==null?null:L(ee,J,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return ie.key===qe?K(ee,J,ie,he):null;case k:return ie.key===qe?ae(ee,J,ie,he):null;case Y:return ie=Rs(ie),se(ee,J,ie,he)}if(V(ie)||$(ie))return qe!==null?null:de(ee,J,ie,he,null);if(typeof ie.then=="function")return se(ee,J,zd(ie),he);if(ie.$$typeof===N)return se(ee,J,Ud(ee,ie),he);Fd(ee,ie)}return null}function ce(ee,J,ie,he,qe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ee=ee.get(ie)||null,L(J,ee,""+he,qe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return ee=ee.get(he.key===null?ie:he.key)||null,K(J,ee,he,qe);case k:return ee=ee.get(he.key===null?ie:he.key)||null,ae(J,ee,he,qe);case Y:return he=Rs(he),ce(ee,J,ie,he,qe)}if(V(he)||$(he))return ee=ee.get(ie)||null,de(J,ee,he,qe,null);if(typeof he.then=="function")return ce(ee,J,ie,zd(he),qe);if(he.$$typeof===N)return ce(ee,J,ie,Ud(J,he),qe);Fd(J,he)}return null}function Pe(ee,J,ie,he){for(var qe=null,dt=null,Oe=J,Qe=J=0,st=null;Oe!==null&&Qe<ie.length;Qe++){Oe.index>Qe?(st=Oe,Oe=null):st=Oe.sibling;var ft=se(ee,Oe,ie[Qe],he);if(ft===null){Oe===null&&(Oe=st);break}s&&Oe&&ft.alternate===null&&l(ee,Oe),J=E(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft,Oe=st}if(Qe===ie.length)return p(ee,Oe),ot&&Wi(ee,Qe),qe;if(Oe===null){for(;Qe<ie.length;Qe++)Oe=pe(ee,ie[Qe],he),Oe!==null&&(J=E(Oe,J,Qe),dt===null?qe=Oe:dt.sibling=Oe,dt=Oe);return ot&&Wi(ee,Qe),qe}for(Oe=g(Oe);Qe<ie.length;Qe++)st=ce(Oe,ee,Qe,ie[Qe],he),st!==null&&(s&&st.alternate!==null&&Oe.delete(st.key===null?Qe:st.key),J=E(st,J,Qe),dt===null?qe=st:dt.sibling=st,dt=st);return s&&Oe.forEach(function(ns){return l(ee,ns)}),ot&&Wi(ee,Qe),qe}function ze(ee,J,ie,he){if(ie==null)throw Error(r(151));for(var qe=null,dt=null,Oe=J,Qe=J=0,st=null,ft=ie.next();Oe!==null&&!ft.done;Qe++,ft=ie.next()){Oe.index>Qe?(st=Oe,Oe=null):st=Oe.sibling;var ns=se(ee,Oe,ft.value,he);if(ns===null){Oe===null&&(Oe=st);break}s&&Oe&&ns.alternate===null&&l(ee,Oe),J=E(ns,J,Qe),dt===null?qe=ns:dt.sibling=ns,dt=ns,Oe=st}if(ft.done)return p(ee,Oe),ot&&Wi(ee,Qe),qe;if(Oe===null){for(;!ft.done;Qe++,ft=ie.next())ft=pe(ee,ft.value,he),ft!==null&&(J=E(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft);return ot&&Wi(ee,Qe),qe}for(Oe=g(Oe);!ft.done;Qe++,ft=ie.next())ft=ce(Oe,ee,Qe,ft.value,he),ft!==null&&(s&&ft.alternate!==null&&Oe.delete(ft.key===null?Qe:ft.key),J=E(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft);return s&&Oe.forEach(function(dU){return l(ee,dU)}),ot&&Wi(ee,Qe),qe}function Nt(ee,J,ie,he){if(typeof ie=="object"&&ie!==null&&ie.type===S&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:e:{for(var qe=ie.key;J!==null;){if(J.key===qe){if(qe=ie.type,qe===S){if(J.tag===7){p(ee,J.sibling),he=b(J,ie.props.children),he.return=ee,ee=he;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&Rs(qe)===J.type){p(ee,J.sibling),he=b(J,ie.props),Au(he,ie),he.return=ee,ee=he;break e}p(ee,J);break}else l(ee,J);J=J.sibling}ie.type===S?(he=As(ie.props.children,ee.mode,he,ie.key),he.return=ee,ee=he):(he=Id(ie.type,ie.key,ie.props,null,ee.mode,he),Au(he,ie),he.return=ee,ee=he)}return j(ee);case k:e:{for(qe=ie.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===ie.containerInfo&&J.stateNode.implementation===ie.implementation){p(ee,J.sibling),he=b(J,ie.children||[]),he.return=ee,ee=he;break e}else{p(ee,J);break}else l(ee,J);J=J.sibling}he=Bm(ie,ee.mode,he),he.return=ee,ee=he}return j(ee);case Y:return ie=Rs(ie),Nt(ee,J,ie,he)}if(V(ie))return Pe(ee,J,ie,he);if($(ie)){if(qe=$(ie),typeof qe!="function")throw Error(r(150));return ie=qe.call(ie),ze(ee,J,ie,he)}if(typeof ie.then=="function")return Nt(ee,J,zd(ie),he);if(ie.$$typeof===N)return Nt(ee,J,Ud(ee,ie),he);Fd(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,J!==null&&J.tag===6?(p(ee,J.sibling),he=b(J,ie),he.return=ee,ee=he):(p(ee,J),he=$m(ie,ee.mode,he),he.return=ee,ee=he),j(ee)):p(ee,J)}return function(ee,J,ie,he){try{Nu=0;var qe=Nt(ee,J,ie,he);return zo=null,qe}catch(Oe){if(Oe===Bo||Oe===$d)throw Oe;var dt=wr(29,Oe,null,ee.mode);return dt.lanes=he,dt.return=ee,dt}finally{}}}var Ds=J_(!0),X_=J_(!1),qa=!1;function Zm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $a(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ba(s,l,p){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(yt&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,l=Rd(s),R_(s,null,p),l}return Od(s,g,l,p),Rd(s)}function ju(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,p|=g,l.lanes=p,vd(s,p)}}function tg(s,l){var p=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var b=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var j={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};E===null?b=E=j:E=E.next=j,p=p.next}while(p!==null);E===null?b=E=l:E=E.next=l}else b=E=l;p={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:g.shared,callbacks:g.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}var ng=!1;function Pu(){if(ng){var s=$o;if(s!==null)throw s}}function Mu(s,l,p,g){ng=!1;var b=s.updateQueue;qa=!1;var E=b.firstBaseUpdate,j=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var K=L,ae=K.next;K.next=null,j===null?E=ae:j.next=ae,j=K;var de=s.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==j&&(L===null?de.firstBaseUpdate=ae:L.next=ae,de.lastBaseUpdate=K))}if(E!==null){var pe=b.baseState;j=0,de=ae=K=null,L=E;do{var se=L.lane&-536870913,ce=se!==L.lane;if(ce?(at&se)===se:(g&se)===se){se!==0&&se===qo&&(ng=!0),de!==null&&(de=de.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Pe=s,ze=L;se=l;var Nt=p;switch(ze.tag){case 1:if(Pe=ze.payload,typeof Pe=="function"){pe=Pe.call(Nt,pe,se);break e}pe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=ze.payload,se=typeof Pe=="function"?Pe.call(Nt,pe,se):Pe,se==null)break e;pe=m({},pe,se);break e;case 2:qa=!0}}se=L.callback,se!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=b.callbacks,ce===null?b.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(ae=de=ce,K=pe):de=de.next=ce,j|=se;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;ce=L,L=ce.next,ce.next=null,b.lastBaseUpdate=ce,b.shared.pending=null}}while(!0);de===null&&(K=pe),b.baseState=K,b.firstBaseUpdate=ae,b.lastBaseUpdate=de,E===null&&(b.shared.lanes=0),Ga|=j,s.lanes=j,s.memoizedState=pe}}function Q_(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function Z_(s,l){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)Q_(p[s],l)}var Fo=H(null),Vd=H(0);function eS(s,l){s=sa,I(Vd,s),I(Fo,l),sa=s|l.baseLanes}function rg(){I(Vd,sa),I(Fo,Fo.current)}function ig(){sa=Vd.current,Z(Fo),Z(Vd)}var _r=H(null),Kr=null;function za(s){var l=s.alternate;I(rn,rn.current&1),I(_r,s),Kr===null&&(l===null||Fo.current!==null||l.memoizedState!==null)&&(Kr=s)}function ag(s){I(rn,rn.current),I(_r,s),Kr===null&&(Kr=s)}function tS(s){s.tag===22?(I(rn,rn.current),I(_r,s),Kr===null&&(Kr=s)):Fa()}function Fa(){I(rn,rn.current),I(_r,_r.current)}function Sr(s){Z(_r),Kr===s&&(Kr=null),Z(rn)}var rn=H(0);function Hd(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||d0(p)||f0(p)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qi=0,Je=null,Ct=null,cn=null,Gd=!1,Vo=!1,Ls=!1,Kd=0,Ou=0,Ho=null,t5=0;function en(){throw Error(r(321))}function sg(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!br(s[p],l[p]))return!1;return!0}function og(s,l,p,g,b,E){return Qi=E,Je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=s===null||s.memoizedState===null?US:_g,Ls=!1,E=p(g,b),Ls=!1,Vo&&(E=rS(l,p,g,b)),nS(s),E}function nS(s){U.H=Du;var l=Ct!==null&&Ct.next!==null;if(Qi=0,cn=Ct=Je=null,Gd=!1,Ou=0,Ho=null,l)throw Error(r(300));s===null||dn||(s=s.dependencies,s!==null&&Ld(s)&&(dn=!0))}function rS(s,l,p,g){Je=s;var b=0;do{if(Vo&&(Ho=null),Ou=0,Vo=!1,25<=b)throw Error(r(301));if(b+=1,cn=Ct=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}U.H=qS,E=l(p,g)}while(Vo);return E}function n5(){var s=U.H,l=s.useState()[0];return l=typeof l.then=="function"?Ru(l):l,s=s.useState()[0],(Ct!==null?Ct.memoizedState:null)!==s&&(Je.flags|=1024),l}function lg(){var s=Kd!==0;return Kd=0,s}function ug(s,l,p){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~p}function cg(s){if(Gd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Gd=!1}Qi=0,cn=Ct=Je=null,Vo=!1,Ou=Kd=0,Ho=null}function Zn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Je.memoizedState=cn=s:cn=cn.next=s,cn}function an(){if(Ct===null){var s=Je.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var l=cn===null?Je.memoizedState:cn.next;if(l!==null)cn=l,Ct=s;else{if(s===null)throw Je.alternate===null?Error(r(467)):Error(r(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},cn===null?Je.memoizedState=cn=s:cn=cn.next=s}return cn}function Yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(s){var l=Ou;return Ou+=1,Ho===null&&(Ho=[]),s=K_(Ho,s,l),l=Je,(cn===null?l.memoizedState:cn.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?US:_g),s}function Wd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ru(s);if(s.$$typeof===N)return In(s)}throw Error(r(438,String(s)))}function dg(s){var l=null,p=Je.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=Yd(),Je.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(s),g=0;g<s;g++)p[g]=W;return l.index++,p}function Zi(s,l){return typeof l=="function"?l(s):l}function Jd(s){var l=an();return fg(l,Ct,s)}function fg(s,l,p){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=p;var b=s.baseQueue,E=g.pending;if(E!==null){if(b!==null){var j=b.next;b.next=E.next,E.next=j}l.baseQueue=b=E,g.pending=null}if(E=s.baseState,b===null)s.memoizedState=E;else{l=b.next;var L=j=null,K=null,ae=l,de=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(at&pe)===pe:(Qi&pe)===pe){var se=ae.revertLane;if(se===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===qo&&(de=!0);else if((Qi&se)===se){ae=ae.next,se===qo&&(de=!0);continue}else pe={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},K===null?(L=K=pe,j=E):K=K.next=pe,Je.lanes|=se,Ga|=se;pe=ae.action,Ls&&p(E,pe),E=ae.hasEagerState?ae.eagerState:p(E,pe)}else se={lane:pe,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},K===null?(L=K=se,j=E):K=K.next=se,Je.lanes|=pe,Ga|=pe;ae=ae.next}while(ae!==null&&ae!==l);if(K===null?j=E:K.next=L,!br(E,s.memoizedState)&&(dn=!0,de&&(p=$o,p!==null)))throw p;s.memoizedState=E,s.baseState=j,s.baseQueue=K,g.lastRenderedState=E}return b===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function hg(s){var l=an(),p=l.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var g=p.dispatch,b=p.pending,E=l.memoizedState;if(b!==null){p.pending=null;var j=b=b.next;do E=s(E,j.action),j=j.next;while(j!==b);br(E,l.memoizedState)||(dn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),p.lastRenderedState=E}return[E,g]}function iS(s,l,p){var g=Je,b=an(),E=ot;if(E){if(p===void 0)throw Error(r(407));p=p()}else p=l();var j=!br((Ct||b).memoizedState,p);if(j&&(b.memoizedState=p,dn=!0),b=b.queue,gg(oS.bind(null,g,b,s),[s]),b.getSnapshot!==l||j||cn!==null&&cn.memoizedState.tag&1){if(g.flags|=2048,Go(9,{destroy:void 0},sS.bind(null,g,b,p,l),null),jt===null)throw Error(r(349));E||(Qi&127)!==0||aS(g,l,p)}return p}function aS(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=Je.updateQueue,l===null?(l=Yd(),Je.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function sS(s,l,p,g){l.value=p,l.getSnapshot=g,lS(l)&&uS(s)}function oS(s,l,p){return p(function(){lS(l)&&uS(s)})}function lS(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!br(s,p)}catch{return!0}}function uS(s){var l=Ns(s,2);l!==null&&dr(l,s,2)}function pg(s){var l=Zn();if(typeof s=="function"){var p=s;if(s=p(),Ls){ve(!0);try{p()}finally{ve(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:s},l}function cS(s,l,p,g){return s.baseState=p,fg(s,Ct,typeof g=="function"?g:Zi)}function r5(s,l,p,g,b){if(Zd(s))throw Error(r(485));if(s=l.action,s!==null){var E={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){E.listeners.push(j)}};U.T!==null?p(!0):E.isTransition=!1,g(E),p=l.pending,p===null?(E.next=l.pending=E,dS(l,E)):(E.next=p.next,l.pending=p.next=E)}}function dS(s,l){var p=l.action,g=l.payload,b=s.state;if(l.isTransition){var E=U.T,j={};U.T=j;try{var L=p(b,g),K=U.S;K!==null&&K(j,L),fS(s,l,L)}catch(ae){mg(s,l,ae)}finally{E!==null&&j.types!==null&&(E.types=j.types),U.T=E}}else try{E=p(b,g),fS(s,l,E)}catch(ae){mg(s,l,ae)}}function fS(s,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(g){hS(s,l,g)},function(g){return mg(s,l,g)}):hS(s,l,p)}function hS(s,l,p){l.status="fulfilled",l.value=p,pS(l),s.state=p,l=s.pending,l!==null&&(p=l.next,p===l?s.pending=null:(p=p.next,l.next=p,dS(s,p)))}function mg(s,l,p){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=p,pS(l),l=l.next;while(l!==g)}s.action=null}function pS(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function mS(s,l){return l}function gS(s,l){if(ot){var p=jt.formState;if(p!==null){e:{var g=Je;if(ot){if(Ut){t:{for(var b=Ut,E=Gr;b.nodeType!==8;){if(!E){b=null;break t}if(b=Yr(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Ut=Yr(b.nextSibling),g=b.data==="F!";break e}}La(g)}g=!1}g&&(l=p[0])}}return p=Zn(),p.memoizedState=p.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mS,lastRenderedState:l},p.queue=g,p=IS.bind(null,Je,g),g.dispatch=p,g=pg(!1),E=wg.bind(null,Je,!1,g.queue),g=Zn(),b={state:l,dispatch:null,action:s,pending:null},g.queue=b,p=r5.bind(null,Je,b,E,p),b.dispatch=p,g.memoizedState=s,[l,p,!1]}function yS(s){var l=an();return vS(l,Ct,s)}function vS(s,l,p){if(l=fg(s,l,mS)[0],s=Jd(Zi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Ru(l)}catch(j){throw j===Bo?$d:j}else g=l;l=an();var b=l.queue,E=b.dispatch;return p!==l.memoizedState&&(Je.flags|=2048,Go(9,{destroy:void 0},i5.bind(null,b,p),null)),[g,E,s]}function i5(s,l){s.action=l}function xS(s){var l=an(),p=Ct;if(p!==null)return vS(l,p,s);an(),l=l.memoizedState,p=an();var g=p.queue.dispatch;return p.memoizedState=s,[l,g,!1]}function Go(s,l,p,g){return s={tag:s,create:p,deps:g,inst:l,next:null},l=Je.updateQueue,l===null&&(l=Yd(),Je.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=s.next=s:(g=p.next,p.next=s,s.next=g,l.lastEffect=s),s}function bS(){return an().memoizedState}function Xd(s,l,p,g){var b=Zn();Je.flags|=s,b.memoizedState=Go(1|l,{destroy:void 0},p,g===void 0?null:g)}function Qd(s,l,p,g){var b=an();g=g===void 0?null:g;var E=b.memoizedState.inst;Ct!==null&&g!==null&&sg(g,Ct.memoizedState.deps)?b.memoizedState=Go(l,E,p,g):(Je.flags|=s,b.memoizedState=Go(1|l,E,p,g))}function wS(s,l){Xd(8390656,8,s,l)}function gg(s,l){Qd(2048,8,s,l)}function a5(s){Je.flags|=4;var l=Je.updateQueue;if(l===null)l=Yd(),Je.updateQueue=l,l.events=[s];else{var p=l.events;p===null?l.events=[s]:p.push(s)}}function _S(s){var l=an().memoizedState;return a5({ref:l,nextImpl:s}),function(){if((yt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function SS(s,l){return Qd(4,2,s,l)}function kS(s,l){return Qd(4,4,s,l)}function ES(s,l){if(typeof l=="function"){s=s();var p=l(s);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function CS(s,l,p){p=p!=null?p.concat([s]):null,Qd(4,4,ES.bind(null,l,s),p)}function yg(){}function TS(s,l){var p=an();l=l===void 0?null:l;var g=p.memoizedState;return l!==null&&sg(l,g[1])?g[0]:(p.memoizedState=[s,l],s)}function NS(s,l){var p=an();l=l===void 0?null:l;var g=p.memoizedState;if(l!==null&&sg(l,g[1]))return g[0];if(g=s(),Ls){ve(!0);try{s()}finally{ve(!1)}}return p.memoizedState=[g,l],g}function vg(s,l,p){return p===void 0||(Qi&1073741824)!==0&&(at&261930)===0?s.memoizedState=l:(s.memoizedState=p,s=Ak(),Je.lanes|=s,Ga|=s,p)}function AS(s,l,p,g){return br(p,l)?p:Fo.current!==null?(s=vg(s,p,g),br(s,l)||(dn=!0),s):(Qi&42)===0||(Qi&1073741824)!==0&&(at&261930)===0?(dn=!0,s.memoizedState=p):(s=Ak(),Je.lanes|=s,Ga|=s,l)}function jS(s,l,p,g,b){var E=G.p;G.p=E!==0&&8>E?E:8;var j=U.T,L={};U.T=L,wg(s,!1,l,p);try{var K=b(),ae=U.S;if(ae!==null&&ae(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var de=e5(K,g);Iu(s,l,de,Cr(s))}else Iu(s,l,g,Cr(s))}catch(pe){Iu(s,l,{then:function(){},status:"rejected",reason:pe},Cr())}finally{G.p=E,j!==null&&L.types!==null&&(j.types=L.types),U.T=j}}function s5(){}function xg(s,l,p,g){if(s.tag!==5)throw Error(r(476));var b=PS(s).queue;jS(s,b,l,le,p===null?s5:function(){return MS(s),p(g)})}function PS(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:le},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:p},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function MS(s){var l=PS(s);l.next===null&&(l=s.alternate.memoizedState),Iu(s,l.next.queue,{},Cr())}function bg(){return In(Qu)}function OS(){return an().memoizedState}function RS(){return an().memoizedState}function o5(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var p=Cr();s=$a(p);var g=Ba(l,s,p);g!==null&&(dr(g,l,p),ju(g,l,p)),l={cache:Wm()},s.payload=l;return}l=l.return}}function l5(s,l,p){var g=Cr();p={lane:g,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Zd(s)?DS(l,p):(p=Um(s,l,p,g),p!==null&&(dr(p,s,g),LS(p,l,g)))}function IS(s,l,p){var g=Cr();Iu(s,l,p,g)}function Iu(s,l,p,g){var b={lane:g,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Zd(s))DS(l,b);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var j=l.lastRenderedState,L=E(j,p);if(b.hasEagerState=!0,b.eagerState=L,br(L,j))return Od(s,l,b,0),jt===null&&Md(),!1}catch{}finally{}if(p=Um(s,l,b,g),p!==null)return dr(p,s,g),LS(p,l,g),!0}return!1}function wg(s,l,p,g){if(g={lane:2,revertLane:Zg(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Zd(s)){if(l)throw Error(r(479))}else l=Um(s,p,g,2),l!==null&&dr(l,s,2)}function Zd(s){var l=s.alternate;return s===Je||l!==null&&l===Je}function DS(s,l){Vo=Gd=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function LS(s,l,p){if((p&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,p|=g,l.lanes=p,vd(s,p)}}var Du={readContext:In,use:Wd,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};Du.useEffectEvent=en;var US={readContext:In,use:Wd,useCallback:function(s,l){return Zn().memoizedState=[s,l===void 0?null:l],s},useContext:In,useEffect:wS,useImperativeHandle:function(s,l,p){p=p!=null?p.concat([s]):null,Xd(4194308,4,ES.bind(null,l,s),p)},useLayoutEffect:function(s,l){return Xd(4194308,4,s,l)},useInsertionEffect:function(s,l){Xd(4,2,s,l)},useMemo:function(s,l){var p=Zn();l=l===void 0?null:l;var g=s();if(Ls){ve(!0);try{s()}finally{ve(!1)}}return p.memoizedState=[g,l],g},useReducer:function(s,l,p){var g=Zn();if(p!==void 0){var b=p(l);if(Ls){ve(!0);try{p(l)}finally{ve(!1)}}}else b=l;return g.memoizedState=g.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},g.queue=s,s=s.dispatch=l5.bind(null,Je,s),[g.memoizedState,s]},useRef:function(s){var l=Zn();return s={current:s},l.memoizedState=s},useState:function(s){s=pg(s);var l=s.queue,p=IS.bind(null,Je,l);return l.dispatch=p,[s.memoizedState,p]},useDebugValue:yg,useDeferredValue:function(s,l){var p=Zn();return vg(p,s,l)},useTransition:function(){var s=pg(!1);return s=jS.bind(null,Je,s.queue,!0,!1),Zn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,p){var g=Je,b=Zn();if(ot){if(p===void 0)throw Error(r(407));p=p()}else{if(p=l(),jt===null)throw Error(r(349));(at&127)!==0||aS(g,l,p)}b.memoizedState=p;var E={value:p,getSnapshot:l};return b.queue=E,wS(oS.bind(null,g,E,s),[s]),g.flags|=2048,Go(9,{destroy:void 0},sS.bind(null,g,E,p,l),null),p},useId:function(){var s=Zn(),l=jt.identifierPrefix;if(ot){var p=Pi,g=ji;p=(g&~(1<<32-Ie(g)-1)).toString(32)+p,l="_"+l+"R_"+p,p=Kd++,0<p&&(l+="H"+p.toString(32)),l+="_"}else p=t5++,l="_"+l+"r_"+p.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:bg,useFormState:gS,useActionState:gS,useOptimistic:function(s){var l=Zn();l.memoizedState=l.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=wg.bind(null,Je,!0,p),p.dispatch=l,[s,l]},useMemoCache:dg,useCacheRefresh:function(){return Zn().memoizedState=o5.bind(null,Je)},useEffectEvent:function(s){var l=Zn(),p={impl:s};return l.memoizedState=p,function(){if((yt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},_g={readContext:In,use:Wd,useCallback:TS,useContext:In,useEffect:gg,useImperativeHandle:CS,useInsertionEffect:SS,useLayoutEffect:kS,useMemo:NS,useReducer:Jd,useRef:bS,useState:function(){return Jd(Zi)},useDebugValue:yg,useDeferredValue:function(s,l){var p=an();return AS(p,Ct.memoizedState,s,l)},useTransition:function(){var s=Jd(Zi)[0],l=an().memoizedState;return[typeof s=="boolean"?s:Ru(s),l]},useSyncExternalStore:iS,useId:OS,useHostTransitionStatus:bg,useFormState:yS,useActionState:yS,useOptimistic:function(s,l){var p=an();return cS(p,Ct,s,l)},useMemoCache:dg,useCacheRefresh:RS};_g.useEffectEvent=_S;var qS={readContext:In,use:Wd,useCallback:TS,useContext:In,useEffect:gg,useImperativeHandle:CS,useInsertionEffect:SS,useLayoutEffect:kS,useMemo:NS,useReducer:hg,useRef:bS,useState:function(){return hg(Zi)},useDebugValue:yg,useDeferredValue:function(s,l){var p=an();return Ct===null?vg(p,s,l):AS(p,Ct.memoizedState,s,l)},useTransition:function(){var s=hg(Zi)[0],l=an().memoizedState;return[typeof s=="boolean"?s:Ru(s),l]},useSyncExternalStore:iS,useId:OS,useHostTransitionStatus:bg,useFormState:xS,useActionState:xS,useOptimistic:function(s,l){var p=an();return Ct!==null?cS(p,Ct,s,l):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:dg,useCacheRefresh:RS};qS.useEffectEvent=_S;function Sg(s,l,p,g){l=s.memoizedState,p=p(g,l),p=p==null?l:m({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var kg={enqueueSetState:function(s,l,p){s=s._reactInternals;var g=Cr(),b=$a(g);b.payload=l,p!=null&&(b.callback=p),l=Ba(s,b,g),l!==null&&(dr(l,s,g),ju(l,s,g))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var g=Cr(),b=$a(g);b.tag=1,b.payload=l,p!=null&&(b.callback=p),l=Ba(s,b,g),l!==null&&(dr(l,s,g),ju(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=Cr(),g=$a(p);g.tag=2,l!=null&&(g.callback=l),l=Ba(s,g,p),l!==null&&(dr(l,s,p),ju(l,s,p))}};function $S(s,l,p,g,b,E,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,E,j):l.prototype&&l.prototype.isPureReactComponent?!_u(p,g)||!_u(b,E):!0}function BS(s,l,p,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,g),l.state!==s&&kg.enqueueReplaceState(l,l.state,null)}function Us(s,l){var p=l;if("ref"in l){p={};for(var g in l)g!=="ref"&&(p[g]=l[g])}if(s=s.defaultProps){p===l&&(p=m({},p));for(var b in s)p[b]===void 0&&(p[b]=s[b])}return p}function zS(s){Pd(s)}function FS(s){console.error(s)}function VS(s){Pd(s)}function ef(s,l){try{var p=s.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function HS(s,l,p){try{var g=s.onCaughtError;g(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Eg(s,l,p){return p=$a(p),p.tag=3,p.payload={element:null},p.callback=function(){ef(s,l)},p}function GS(s){return s=$a(s),s.tag=3,s}function KS(s,l,p,g){var b=p.type.getDerivedStateFromError;if(typeof b=="function"){var E=g.value;s.payload=function(){return b(E)},s.callback=function(){HS(l,p,g)}}var j=p.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(s.callback=function(){HS(l,p,g),typeof b!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var L=g.stack;this.componentDidCatch(g.value,{componentStack:L!==null?L:""})})}function u5(s,l,p,g,b){if(p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=p.alternate,l!==null&&Uo(l,p,b,!0),p=_r.current,p!==null){switch(p.tag){case 31:case 13:return Kr===null?hf():p.alternate===null&&tn===0&&(tn=3),p.flags&=-257,p.flags|=65536,p.lanes=b,g===Bd?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([g]):l.add(g),Jg(s,g,b)),!1;case 22:return p.flags|=65536,g===Bd?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([g]):p.add(g)),Jg(s,g,b)),!1}throw Error(r(435,p.tag))}return Jg(s,g,b),hf(),!1}if(ot)return l=_r.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,g!==Vm&&(s=Error(r(422),{cause:g}),Eu(Fr(s,p)))):(g!==Vm&&(l=Error(r(423),{cause:g}),Eu(Fr(l,p))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,g=Fr(g,p),b=Eg(s.stateNode,g,b),tg(s,b),tn!==4&&(tn=2)),!1;var E=Error(r(520),{cause:g});if(E=Fr(E,p),Vu===null?Vu=[E]:Vu.push(E),tn!==4&&(tn=2),l===null)return!0;g=Fr(g,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,s=b&-b,p.lanes|=s,s=Eg(p.stateNode,g,s),tg(p,s),!1;case 1:if(l=p.type,E=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ka===null||!Ka.has(E))))return p.flags|=65536,b&=-b,p.lanes|=b,b=GS(b),KS(b,s,p,g),tg(p,b),!1}p=p.return}while(p!==null);return!1}var Cg=Error(r(461)),dn=!1;function Dn(s,l,p,g){l.child=s===null?X_(l,null,p,g):Ds(l,s.child,p,g)}function YS(s,l,p,g,b){p=p.render;var E=l.ref;if("ref"in g){var j={};for(var L in g)L!=="ref"&&(j[L]=g[L])}else j=g;return Ms(l),g=og(s,l,p,j,E,b),L=lg(),s!==null&&!dn?(ug(s,l,b),ea(s,l,b)):(ot&&L&&zm(l),l.flags|=1,Dn(s,l,g,b),l.child)}function WS(s,l,p,g,b){if(s===null){var E=p.type;return typeof E=="function"&&!qm(E)&&E.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=E,JS(s,l,E,g,b)):(s=Id(p.type,null,g,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,!Rg(s,b)){var j=E.memoizedProps;if(p=p.compare,p=p!==null?p:_u,p(j,g)&&s.ref===l.ref)return ea(s,l,b)}return l.flags|=1,s=Yi(E,g),s.ref=l.ref,s.return=l,l.child=s}function JS(s,l,p,g,b){if(s!==null){var E=s.memoizedProps;if(_u(E,g)&&s.ref===l.ref)if(dn=!1,l.pendingProps=g=E,Rg(s,b))(s.flags&131072)!==0&&(dn=!0);else return l.lanes=s.lanes,ea(s,l,b)}return Tg(s,l,p,g,b)}function XS(s,l,p,g){var b=g.children,E=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(E=E!==null?E.baseLanes|p:p,s!==null){for(g=l.child=s.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~E}else g=0,l.child=null;return QS(s,l,E,p,g)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&qd(l,E!==null?E.cachePool:null),E!==null?eS(l,E):rg(),tS(l);else return g=l.lanes=536870912,QS(s,l,E!==null?E.baseLanes|p:p,p,g)}else E!==null?(qd(l,E.cachePool),eS(l,E),Fa(),l.memoizedState=null):(s!==null&&qd(l,null),rg(),Fa());return Dn(s,l,b,p),l.child}function Lu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function QS(s,l,p,g,b){var E=Xm();return E=E===null?null:{parent:un._currentValue,pool:E},l.memoizedState={baseLanes:p,cachePool:E},s!==null&&qd(l,null),rg(),tS(l),s!==null&&Uo(s,l,g,!0),l.childLanes=b,null}function tf(s,l){return l=rf({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function ZS(s,l,p){return Ds(l,s.child,null,p),s=tf(l,l.pendingProps),s.flags|=2,Sr(l),l.memoizedState=null,s}function c5(s,l,p){var g=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(ot){if(g.mode==="hidden")return s=tf(l,g),l.lanes=536870912,Lu(null,s);if(ag(l),(s=Ut)?(s=dE(s,Gr),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ia!==null?{id:ji,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},p=D_(s),p.return=l,l.child=p,Rn=l,Ut=null)):s=null,s===null)throw La(l);return l.lanes=536870912,null}return tf(l,g)}var E=s.memoizedState;if(E!==null){var j=E.dehydrated;if(ag(l),b)if(l.flags&256)l.flags&=-257,l=ZS(s,l,p);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(dn||Uo(s,l,p,!1),b=(p&s.childLanes)!==0,dn||b){if(g=jt,g!==null&&(j=cu(g,p),j!==0&&j!==E.retryLane))throw E.retryLane=j,Ns(s,j),dr(g,s,j),Cg;hf(),l=ZS(s,l,p)}else s=E.treeContext,Ut=Yr(j.nextSibling),Rn=l,ot=!0,Da=null,Gr=!1,s!==null&&q_(l,s),l=tf(l,g),l.flags|=4096;return l}return s=Yi(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function nf(s,l){var p=l.ref;if(p===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(s===null||s.ref!==p)&&(l.flags|=4194816)}}function Tg(s,l,p,g,b){return Ms(l),p=og(s,l,p,g,void 0,b),g=lg(),s!==null&&!dn?(ug(s,l,b),ea(s,l,b)):(ot&&g&&zm(l),l.flags|=1,Dn(s,l,p,b),l.child)}function ek(s,l,p,g,b,E){return Ms(l),l.updateQueue=null,p=rS(l,g,p,b),nS(s),g=lg(),s!==null&&!dn?(ug(s,l,E),ea(s,l,E)):(ot&&g&&zm(l),l.flags|=1,Dn(s,l,p,E),l.child)}function tk(s,l,p,g,b){if(Ms(l),l.stateNode===null){var E=Ro,j=p.contextType;typeof j=="object"&&j!==null&&(E=In(j)),E=new p(g,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=kg,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=g,E.state=l.memoizedState,E.refs={},Zm(l),j=p.contextType,E.context=typeof j=="object"&&j!==null?In(j):Ro,E.state=l.memoizedState,j=p.getDerivedStateFromProps,typeof j=="function"&&(Sg(l,p,j,g),E.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(j=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),j!==E.state&&kg.enqueueReplaceState(E,E.state,null),Mu(l,g,E,b),Pu(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){E=l.stateNode;var L=l.memoizedProps,K=Us(p,L);E.props=K;var ae=E.context,de=p.contextType;j=Ro,typeof de=="object"&&de!==null&&(j=In(de));var pe=p.getDerivedStateFromProps;de=typeof pe=="function"||typeof E.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,de||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L||ae!==j)&&BS(l,E,g,j),qa=!1;var se=l.memoizedState;E.state=se,Mu(l,g,E,b),Pu(),ae=l.memoizedState,L||se!==ae||qa?(typeof pe=="function"&&(Sg(l,p,pe,g),ae=l.memoizedState),(K=qa||$S(l,p,K,g,se,ae,j))?(de||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ae),E.props=g,E.state=ae,E.context=j,g=K):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{E=l.stateNode,eg(s,l),j=l.memoizedProps,de=Us(p,j),E.props=de,pe=l.pendingProps,se=E.context,ae=p.contextType,K=Ro,typeof ae=="object"&&ae!==null&&(K=In(ae)),L=p.getDerivedStateFromProps,(ae=typeof L=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(j!==pe||se!==K)&&BS(l,E,g,K),qa=!1,se=l.memoizedState,E.state=se,Mu(l,g,E,b),Pu();var ce=l.memoizedState;j!==pe||se!==ce||qa||s!==null&&s.dependencies!==null&&Ld(s.dependencies)?(typeof L=="function"&&(Sg(l,p,L,g),ce=l.memoizedState),(de=qa||$S(l,p,de,g,se,ce,K)||s!==null&&s.dependencies!==null&&Ld(s.dependencies))?(ae||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,ce,K),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,ce,K)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ce),E.props=g,E.state=ce,E.context=K,g=de):(typeof E.componentDidUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&se===s.memoizedState||(l.flags|=1024),g=!1)}return E=g,nf(s,l),g=(l.flags&128)!==0,E||g?(E=l.stateNode,p=g&&typeof p.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,s!==null&&g?(l.child=Ds(l,s.child,null,b),l.child=Ds(l,null,p,b)):Dn(s,l,p,b),l.memoizedState=E.state,s=l.child):s=ea(s,l,b),s}function nk(s,l,p,g){return js(),l.flags|=256,Dn(s,l,p,g),l.child}var Ng={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ag(s){return{baseLanes:s,cachePool:H_()}}function jg(s,l,p){return s=s!==null?s.childLanes&~p:0,l&&(s|=Er),s}function rk(s,l,p){var g=l.pendingProps,b=!1,E=(l.flags&128)!==0,j;if((j=E)||(j=s!==null&&s.memoizedState===null?!1:(rn.current&2)!==0),j&&(b=!0,l.flags&=-129),j=(l.flags&32)!==0,l.flags&=-33,s===null){if(ot){if(b?za(l):Fa(),(s=Ut)?(s=dE(s,Gr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ia!==null?{id:ji,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},p=D_(s),p.return=l,l.child=p,Rn=l,Ut=null)):s=null,s===null)throw La(l);return f0(s)?l.lanes=32:l.lanes=536870912,null}var L=g.children;return g=g.fallback,b?(Fa(),b=l.mode,L=rf({mode:"hidden",children:L},b),g=As(g,b,p,null),L.return=l,g.return=l,L.sibling=g,l.child=L,g=l.child,g.memoizedState=Ag(p),g.childLanes=jg(s,j,p),l.memoizedState=Ng,Lu(null,g)):(za(l),Pg(l,L))}var K=s.memoizedState;if(K!==null&&(L=K.dehydrated,L!==null)){if(E)l.flags&256?(za(l),l.flags&=-257,l=Mg(s,l,p)):l.memoizedState!==null?(Fa(),l.child=s.child,l.flags|=128,l=null):(Fa(),L=g.fallback,b=l.mode,g=rf({mode:"visible",children:g.children},b),L=As(L,b,p,null),L.flags|=2,g.return=l,L.return=l,g.sibling=L,l.child=g,Ds(l,s.child,null,p),g=l.child,g.memoizedState=Ag(p),g.childLanes=jg(s,j,p),l.memoizedState=Ng,l=Lu(null,g));else if(za(l),f0(L)){if(j=L.nextSibling&&L.nextSibling.dataset,j)var ae=j.dgst;j=ae,g=Error(r(419)),g.stack="",g.digest=j,Eu({value:g,source:null,stack:null}),l=Mg(s,l,p)}else if(dn||Uo(s,l,p,!1),j=(p&s.childLanes)!==0,dn||j){if(j=jt,j!==null&&(g=cu(j,p),g!==0&&g!==K.retryLane))throw K.retryLane=g,Ns(s,g),dr(j,s,g),Cg;d0(L)||hf(),l=Mg(s,l,p)}else d0(L)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,Ut=Yr(L.nextSibling),Rn=l,ot=!0,Da=null,Gr=!1,s!==null&&q_(l,s),l=Pg(l,g.children),l.flags|=4096);return l}return b?(Fa(),L=g.fallback,b=l.mode,K=s.child,ae=K.sibling,g=Yi(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,ae!==null?L=Yi(ae,L):(L=As(L,b,p,null),L.flags|=2),L.return=l,g.return=l,g.sibling=L,l.child=g,Lu(null,g),g=l.child,L=s.child.memoizedState,L===null?L=Ag(p):(b=L.cachePool,b!==null?(K=un._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=H_(),L={baseLanes:L.baseLanes|p,cachePool:b}),g.memoizedState=L,g.childLanes=jg(s,j,p),l.memoizedState=Ng,Lu(s.child,g)):(za(l),p=s.child,s=p.sibling,p=Yi(p,{mode:"visible",children:g.children}),p.return=l,p.sibling=null,s!==null&&(j=l.deletions,j===null?(l.deletions=[s],l.flags|=16):j.push(s)),l.child=p,l.memoizedState=null,p)}function Pg(s,l){return l=rf({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function rf(s,l){return s=wr(22,s,null,l),s.lanes=0,s}function Mg(s,l,p){return Ds(l,s.child,null,p),s=Pg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function ik(s,l,p){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Km(s.return,l,p)}function Og(s,l,p,g,b,E){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:b,treeForkCount:E}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=g,j.tail=p,j.tailMode=b,j.treeForkCount=E)}function ak(s,l,p){var g=l.pendingProps,b=g.revealOrder,E=g.tail;g=g.children;var j=rn.current,L=(j&2)!==0;if(L?(j=j&1|2,l.flags|=128):j&=1,I(rn,j),Dn(s,l,g,p),g=ot?ku:0,!L&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ik(s,p,l);else if(s.tag===19)ik(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(p=l.child,b=null;p!==null;)s=p.alternate,s!==null&&Hd(s)===null&&(b=p),p=p.sibling;p=b,p===null?(b=l.child,l.child=null):(b=p.sibling,p.sibling=null),Og(l,!1,b,p,E,g);break;case"backwards":case"unstable_legacy-backwards":for(p=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&Hd(s)===null){l.child=b;break}s=b.sibling,b.sibling=p,p=b,b=s}Og(l,!0,p,null,E,g);break;case"together":Og(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function ea(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),Ga|=l.lanes,(p&l.childLanes)===0)if(s!==null){if(Uo(s,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,p=Yi(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=Yi(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function Rg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Ld(s)))}function d5(s,l,p){switch(l.tag){case 3:$e(l,l.stateNode.containerInfo),Ua(l,un,s.memoizedState.cache),js();break;case 27:case 5:Se(l);break;case 4:$e(l,l.stateNode.containerInfo);break;case 10:Ua(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ag(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(za(l),l.flags|=128,null):(p&l.child.childLanes)!==0?rk(s,l,p):(za(l),s=ea(s,l,p),s!==null?s.sibling:null);za(l);break;case 19:var b=(s.flags&128)!==0;if(g=(p&l.childLanes)!==0,g||(Uo(s,l,p,!1),g=(p&l.childLanes)!==0),b){if(g)return ak(s,l,p);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),I(rn,rn.current),g)break;return null;case 22:return l.lanes=0,XS(s,l,p,l.pendingProps);case 24:Ua(l,un,s.memoizedState.cache)}return ea(s,l,p)}function sk(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps)dn=!0;else{if(!Rg(s,p)&&(l.flags&128)===0)return dn=!1,d5(s,l,p);dn=(s.flags&131072)!==0}else dn=!1,ot&&(l.flags&1048576)!==0&&U_(l,ku,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(s=Rs(l.elementType),l.type=s,typeof s=="function")qm(s)?(g=Us(s,g),l.tag=1,l=tk(null,l,s,g,p)):(l.tag=0,l=Tg(null,l,s,g,p));else{if(s!=null){var b=s.$$typeof;if(b===O){l.tag=11,l=YS(null,l,s,g,p);break e}else if(b===D){l.tag=14,l=WS(null,l,s,g,p);break e}}throw l=z(s)||s,Error(r(306,l,""))}}return l;case 0:return Tg(s,l,l.type,l.pendingProps,p);case 1:return g=l.type,b=Us(g,l.pendingProps),tk(s,l,g,b,p);case 3:e:{if($e(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var E=l.memoizedState;b=E.element,eg(s,l),Mu(l,g,null,p);var j=l.memoizedState;if(g=j.cache,Ua(l,un,g),g!==E.cache&&Ym(l,[un],p,!0),Pu(),g=j.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:j.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=nk(s,l,g,p);break e}else if(g!==b){b=Fr(Error(r(424)),l),Eu(b),l=nk(s,l,g,p);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ut=Yr(s.firstChild),Rn=l,ot=!0,Da=null,Gr=!0,p=X_(l,null,g,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(js(),g===b){l=ea(s,l,p);break e}Dn(s,l,g,p)}l=l.child}return l;case 26:return nf(s,l),s===null?(p=yE(l.type,null,l.pendingProps,null))?l.memoizedState=p:ot||(p=l.type,s=l.pendingProps,g=bf(me.current).createElement(p),g[yn]=l,g[zn]=s,Ln(g,p,s),Ne(g),l.stateNode=g):l.memoizedState=yE(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Se(l),s===null&&ot&&(g=l.stateNode=pE(l.type,l.pendingProps,me.current),Rn=l,Gr=!0,b=Ut,Xa(l.type)?(h0=b,Ut=Yr(g.firstChild)):Ut=b),Dn(s,l,l.pendingProps.children,p),nf(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&ot&&((b=g=Ut)&&(g=B5(g,l.type,l.pendingProps,Gr),g!==null?(l.stateNode=g,Rn=l,Ut=Yr(g.firstChild),Gr=!1,b=!0):b=!1),b||La(l)),Se(l),b=l.type,E=l.pendingProps,j=s!==null?s.memoizedProps:null,g=E.children,l0(b,E)?g=null:j!==null&&l0(b,j)&&(l.flags|=32),l.memoizedState!==null&&(b=og(s,l,n5,null,null,p),Qu._currentValue=b),nf(s,l),Dn(s,l,g,p),l.child;case 6:return s===null&&ot&&((s=p=Ut)&&(p=z5(p,l.pendingProps,Gr),p!==null?(l.stateNode=p,Rn=l,Ut=null,s=!0):s=!1),s||La(l)),null;case 13:return rk(s,l,p);case 4:return $e(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Ds(l,null,g,p):Dn(s,l,g,p),l.child;case 11:return YS(s,l,l.type,l.pendingProps,p);case 7:return Dn(s,l,l.pendingProps,p),l.child;case 8:return Dn(s,l,l.pendingProps.children,p),l.child;case 12:return Dn(s,l,l.pendingProps.children,p),l.child;case 10:return g=l.pendingProps,Ua(l,l.type,g.value),Dn(s,l,g.children,p),l.child;case 9:return b=l.type._context,g=l.pendingProps.children,Ms(l),b=In(b),g=g(b),l.flags|=1,Dn(s,l,g,p),l.child;case 14:return WS(s,l,l.type,l.pendingProps,p);case 15:return JS(s,l,l.type,l.pendingProps,p);case 19:return ak(s,l,p);case 31:return c5(s,l,p);case 22:return XS(s,l,p,l.pendingProps);case 24:return Ms(l),g=In(un),s===null?(b=Xm(),b===null&&(b=jt,E=Wm(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=p),b=E),l.memoizedState={parent:g,cache:b},Zm(l),Ua(l,un,b)):((s.lanes&p)!==0&&(eg(s,l),Mu(l,null,null,p),Pu()),b=s.memoizedState,E=l.memoizedState,b.parent!==g?(b={parent:g,cache:g},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Ua(l,un,g)):(g=E.cache,Ua(l,un,g),g!==b.cache&&Ym(l,[un],p,!0))),Dn(s,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ta(s){s.flags|=4}function Ig(s,l,p,g,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(Ok())s.flags|=8192;else throw Is=Bd,Qm}else s.flags&=-16777217}function ok(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!_E(l))if(Ok())s.flags|=8192;else throw Is=Bd,Qm}function af(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?ko():536870912,s.lanes|=l,Jo|=l)}function Uu(s,l){if(!ot)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function qt(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,g=0;if(l)for(var b=s.child;b!==null;)p|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)p|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=g,s.childLanes=p,l}function f5(s,l,p){var g=l.pendingProps;switch(Fm(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(l),null;case 1:return qt(l),null;case 3:return p=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Xi(un),ne(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Lo(l)?ta(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hm())),qt(l),null;case 26:var b=l.type,E=l.memoizedState;return s===null?(ta(l),E!==null?(qt(l),ok(l,E)):(qt(l),Ig(l,b,null,g,p))):E?E!==s.memoizedState?(ta(l),qt(l),ok(l,E)):(qt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&ta(l),qt(l),Ig(l,b,s,g,p)),null;case 27:if(Ee(l),p=me.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&ta(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return qt(l),null}s=X.current,Lo(l)?$_(l):(s=pE(b,g,p),l.stateNode=s,ta(l))}return qt(l),null;case 5:if(Ee(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&ta(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return qt(l),null}if(E=X.current,Lo(l))$_(l);else{var j=bf(me.current);switch(E){case 1:E=j.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=j.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=j.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=j.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=j.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof g.is=="string"?j.createElement("select",{is:g.is}):j.createElement("select"),g.multiple?E.multiple=!0:g.size&&(E.size=g.size);break;default:E=typeof g.is=="string"?j.createElement(b,{is:g.is}):j.createElement(b)}}E[yn]=l,E[zn]=g;e:for(j=l.child;j!==null;){if(j.tag===5||j.tag===6)E.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===l)break e;for(;j.sibling===null;){if(j.return===null||j.return===l)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}l.stateNode=E;e:switch(Ln(E,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ta(l)}}return qt(l),Ig(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,p),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&ta(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=me.current,Lo(l)){if(s=l.stateNode,p=l.memoizedProps,g=null,b=Rn,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}s[yn]=l,s=!!(s.nodeValue===p||g!==null&&g.suppressHydrationWarning===!0||rE(s.nodeValue,p)),s||La(l,!0)}else s=bf(s).createTextNode(g),s[yn]=l,l.stateNode=s}return qt(l),null;case 31:if(p=l.memoizedState,s===null||s.memoizedState!==null){if(g=Lo(l),p!==null){if(s===null){if(!g)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[yn]=l}else js(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;qt(l),s=!1}else p=Hm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return l.flags&256?(Sr(l),l):(Sr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return qt(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Lo(l),g!==null&&g.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[yn]=l}else js(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;qt(l),b=!1}else b=Hm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Sr(l),l):(Sr(l),null)}return Sr(l),(l.flags&128)!==0?(l.lanes=p,l):(p=g!==null,s=s!==null&&s.memoizedState!==null,p&&(g=l.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),E=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==b&&(g.flags|=2048)),p!==s&&p&&(l.child.flags|=8192),af(l,l.updateQueue),qt(l),null);case 4:return ne(),s===null&&r0(l.stateNode.containerInfo),qt(l),null;case 10:return Xi(l.type),qt(l),null;case 19:if(Z(rn),g=l.memoizedState,g===null)return qt(l),null;if(b=(l.flags&128)!==0,E=g.rendering,E===null)if(b)Uu(g,!1);else{if(tn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(E=Hd(s),E!==null){for(l.flags|=128,Uu(g,!1),s=E.updateQueue,l.updateQueue=s,af(l,s),l.subtreeFlags=0,s=p,p=l.child;p!==null;)I_(p,s),p=p.sibling;return I(rn,rn.current&1|2),ot&&Wi(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&nn()>cf&&(l.flags|=128,b=!0,Uu(g,!1),l.lanes=4194304)}else{if(!b)if(s=Hd(E),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,af(l,s),Uu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!ot)return qt(l),null}else 2*nn()-g.renderingStartTime>cf&&p!==536870912&&(l.flags|=128,b=!0,Uu(g,!1),l.lanes=4194304);g.isBackwards?(E.sibling=l.child,l.child=E):(s=g.last,s!==null?s.sibling=E:l.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=nn(),s.sibling=null,p=rn.current,I(rn,b?p&1|2:p&1),ot&&Wi(l,g.treeForkCount),s):(qt(l),null);case 22:case 23:return Sr(l),ig(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(p&536870912)!==0&&(l.flags&128)===0&&(qt(l),l.subtreeFlags&6&&(l.flags|=8192)):qt(l),p=l.updateQueue,p!==null&&af(l,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==p&&(l.flags|=2048),s!==null&&Z(Os),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Xi(un),qt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function h5(s,l){switch(Fm(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Xi(un),ne(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ee(l),null;case 31:if(l.memoizedState!==null){if(Sr(l),l.alternate===null)throw Error(r(340));js()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Sr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));js()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Z(rn),null;case 4:return ne(),null;case 10:return Xi(l.type),null;case 22:case 23:return Sr(l),ig(),s!==null&&Z(Os),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Xi(un),null;case 25:return null;default:return null}}function lk(s,l){switch(Fm(l),l.tag){case 3:Xi(un),ne();break;case 26:case 27:case 5:Ee(l);break;case 4:ne();break;case 31:l.memoizedState!==null&&Sr(l);break;case 13:Sr(l);break;case 19:Z(rn);break;case 10:Xi(l.type);break;case 22:case 23:Sr(l),ig(),s!==null&&Z(Os);break;case 24:Xi(un)}}function qu(s,l){try{var p=l.updateQueue,g=p!==null?p.lastEffect:null;if(g!==null){var b=g.next;p=b;do{if((p.tag&s)===s){g=void 0;var E=p.create,j=p.inst;g=E(),j.destroy=g}p=p.next}while(p!==b)}}catch(L){_t(l,l.return,L)}}function Va(s,l,p){try{var g=l.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var E=b.next;g=E;do{if((g.tag&s)===s){var j=g.inst,L=j.destroy;if(L!==void 0){j.destroy=void 0,b=l;var K=p,ae=L;try{ae()}catch(de){_t(b,K,de)}}}g=g.next}while(g!==E)}}catch(de){_t(l,l.return,de)}}function uk(s){var l=s.updateQueue;if(l!==null){var p=s.stateNode;try{Z_(l,p)}catch(g){_t(s,s.return,g)}}}function ck(s,l,p){p.props=Us(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(g){_t(s,l,g)}}function $u(s,l){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof p=="function"?s.refCleanup=p(g):p.current=g}}catch(b){_t(s,l,b)}}function Mi(s,l){var p=s.ref,g=s.refCleanup;if(p!==null)if(typeof g=="function")try{g()}catch(b){_t(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(b){_t(s,l,b)}else p.current=null}function dk(s){var l=s.type,p=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&g.focus();break e;case"img":p.src?g.src=p.src:p.srcSet&&(g.srcset=p.srcSet)}}catch(b){_t(s,s.return,b)}}function Dg(s,l,p){try{var g=s.stateNode;I5(g,s.type,p,l),g[zn]=l}catch(b){_t(s,s.return,b)}}function fk(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xa(s.type)||s.tag===4}function Lg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fk(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ug(s,l,p){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(s),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Gi));else if(g!==4&&(g===27&&Xa(s.type)&&(p=s.stateNode,l=null),s=s.child,s!==null))for(Ug(s,l,p),s=s.sibling;s!==null;)Ug(s,l,p),s=s.sibling}function sf(s,l,p){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(g!==4&&(g===27&&Xa(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(sf(s,l,p),s=s.sibling;s!==null;)sf(s,l,p),s=s.sibling}function hk(s){var l=s.stateNode,p=s.memoizedProps;try{for(var g=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Ln(l,g,p),l[yn]=s,l[zn]=p}catch(E){_t(s,s.return,E)}}var na=!1,fn=!1,qg=!1,pk=typeof WeakSet=="function"?WeakSet:Set,En=null;function p5(s,l){if(s=s.containerInfo,s0=Tf,s=C_(s),Mm(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var g=p.getSelection&&p.getSelection();if(g&&g.rangeCount!==0){p=g.anchorNode;var b=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var j=0,L=-1,K=-1,ae=0,de=0,pe=s,se=null;t:for(;;){for(var ce;pe!==p||b!==0&&pe.nodeType!==3||(L=j+b),pe!==E||g!==0&&pe.nodeType!==3||(K=j+g),pe.nodeType===3&&(j+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)se=pe,pe=ce;for(;;){if(pe===s)break t;if(se===p&&++ae===b&&(L=j),se===E&&++de===g&&(K=j),(ce=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=ce}p=L===-1||K===-1?null:{start:L,end:K}}else p=null}p=p||{start:0,end:0}}else p=null;for(o0={focusedElem:s,selectionRange:p},Tf=!1,En=l;En!==null;)if(l=En,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,En=s;else for(;En!==null;){switch(l=En,E=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)b=s[p],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,p=l,b=E.memoizedProps,E=E.memoizedState,g=p.stateNode;try{var Pe=Us(p.type,b);s=g.getSnapshotBeforeUpdate(Pe,E),g.__reactInternalSnapshotBeforeUpdate=s}catch(ze){_t(p,p.return,ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,p=s.nodeType,p===9)c0(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":c0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,En=s;break}En=l.return}}function mk(s,l,p){var g=p.flags;switch(p.tag){case 0:case 11:case 15:ia(s,p),g&4&&qu(5,p);break;case 1:if(ia(s,p),g&4)if(s=p.stateNode,l===null)try{s.componentDidMount()}catch(j){_t(p,p.return,j)}else{var b=Us(p.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(j){_t(p,p.return,j)}}g&64&&uk(p),g&512&&$u(p,p.return);break;case 3:if(ia(s,p),g&64&&(s=p.updateQueue,s!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{Z_(s,l)}catch(j){_t(p,p.return,j)}}break;case 27:l===null&&g&4&&hk(p);case 26:case 5:ia(s,p),l===null&&g&4&&dk(p),g&512&&$u(p,p.return);break;case 12:ia(s,p);break;case 31:ia(s,p),g&4&&vk(s,p);break;case 13:ia(s,p),g&4&&xk(s,p),g&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=S5.bind(null,p),F5(s,p))));break;case 22:if(g=p.memoizedState!==null||na,!g){l=l!==null&&l.memoizedState!==null||fn,b=na;var E=fn;na=g,(fn=l)&&!E?aa(s,p,(p.subtreeFlags&8772)!==0):ia(s,p),na=b,fn=E}break;case 30:break;default:ia(s,p)}}function gk(s){var l=s.alternate;l!==null&&(s.alternate=null,gk(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&ke(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ht=null,or=!1;function ra(s,l,p){for(p=p.child;p!==null;)yk(s,l,p),p=p.sibling}function yk(s,l,p){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ot,p)}catch{}switch(p.tag){case 26:fn||Mi(p,l),ra(s,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:fn||Mi(p,l);var g=Ht,b=or;Xa(p.type)&&(Ht=p.stateNode,or=!1),ra(s,l,p),Wu(p.stateNode),Ht=g,or=b;break;case 5:fn||Mi(p,l);case 6:if(g=Ht,b=or,Ht=null,ra(s,l,p),Ht=g,or=b,Ht!==null)if(or)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(p.stateNode)}catch(E){_t(p,l,E)}else try{Ht.removeChild(p.stateNode)}catch(E){_t(p,l,E)}break;case 18:Ht!==null&&(or?(s=Ht,uE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),il(s)):uE(Ht,p.stateNode));break;case 4:g=Ht,b=or,Ht=p.stateNode.containerInfo,or=!0,ra(s,l,p),Ht=g,or=b;break;case 0:case 11:case 14:case 15:Va(2,p,l),fn||Va(4,p,l),ra(s,l,p);break;case 1:fn||(Mi(p,l),g=p.stateNode,typeof g.componentWillUnmount=="function"&&ck(p,l,g)),ra(s,l,p);break;case 21:ra(s,l,p);break;case 22:fn=(g=fn)||p.memoizedState!==null,ra(s,l,p),fn=g;break;default:ra(s,l,p)}}function vk(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{il(s)}catch(p){_t(l,l.return,p)}}}function xk(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{il(s)}catch(p){_t(l,l.return,p)}}function m5(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new pk),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new pk),l;default:throw Error(r(435,s.tag))}}function of(s,l){var p=m5(s);l.forEach(function(g){if(!p.has(g)){p.add(g);var b=k5.bind(null,s,g);g.then(b,b)}})}function lr(s,l){var p=l.deletions;if(p!==null)for(var g=0;g<p.length;g++){var b=p[g],E=s,j=l,L=j;e:for(;L!==null;){switch(L.tag){case 27:if(Xa(L.type)){Ht=L.stateNode,or=!1;break e}break;case 5:Ht=L.stateNode,or=!1;break e;case 3:case 4:Ht=L.stateNode.containerInfo,or=!0;break e}L=L.return}if(Ht===null)throw Error(r(160));yk(E,j,b),Ht=null,or=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)bk(l,s),l=l.sibling}var gi=null;function bk(s,l){var p=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:lr(l,s),ur(s),g&4&&(Va(3,s,s.return),qu(3,s),Va(5,s,s.return));break;case 1:lr(l,s),ur(s),g&512&&(fn||p===null||Mi(p,p.return)),g&64&&na&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?g:p.concat(g))));break;case 26:var b=gi;if(lr(l,s),ur(s),g&512&&(fn||p===null||Mi(p,p.return)),g&4){var E=p!==null?p.memoizedState:null;if(g=s.memoizedState,p===null)if(g===null)if(s.stateNode===null){e:{g=s.type,p=s.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":E=b.getElementsByTagName("title")[0],(!E||E[ue]||E[yn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(g),b.head.insertBefore(E,b.querySelector("head > title"))),Ln(E,g,p),E[yn]=s,Ne(E),g=E;break e;case"link":var j=bE("link","href",b).get(g+(p.href||""));if(j){for(var L=0;L<j.length;L++)if(E=j[L],E.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&E.getAttribute("rel")===(p.rel==null?null:p.rel)&&E.getAttribute("title")===(p.title==null?null:p.title)&&E.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){j.splice(L,1);break t}}E=b.createElement(g),Ln(E,g,p),b.head.appendChild(E);break;case"meta":if(j=bE("meta","content",b).get(g+(p.content||""))){for(L=0;L<j.length;L++)if(E=j[L],E.getAttribute("content")===(p.content==null?null:""+p.content)&&E.getAttribute("name")===(p.name==null?null:p.name)&&E.getAttribute("property")===(p.property==null?null:p.property)&&E.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&E.getAttribute("charset")===(p.charSet==null?null:p.charSet)){j.splice(L,1);break t}}E=b.createElement(g),Ln(E,g,p),b.head.appendChild(E);break;default:throw Error(r(468,g))}E[yn]=s,Ne(E),g=E}s.stateNode=g}else wE(b,s.type,s.stateNode);else s.stateNode=xE(b,g,s.memoizedProps);else E!==g?(E===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):E.count--,g===null?wE(b,s.type,s.stateNode):xE(b,g,s.memoizedProps)):g===null&&s.stateNode!==null&&Dg(s,s.memoizedProps,p.memoizedProps)}break;case 27:lr(l,s),ur(s),g&512&&(fn||p===null||Mi(p,p.return)),p!==null&&g&4&&Dg(s,s.memoizedProps,p.memoizedProps);break;case 5:if(lr(l,s),ur(s),g&512&&(fn||p===null||Mi(p,p.return)),s.flags&32){b=s.stateNode;try{To(b,"")}catch(Pe){_t(s,s.return,Pe)}}g&4&&s.stateNode!=null&&(b=s.memoizedProps,Dg(s,b,p!==null?p.memoizedProps:b)),g&1024&&(qg=!0);break;case 6:if(lr(l,s),ur(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,p=s.stateNode;try{p.nodeValue=g}catch(Pe){_t(s,s.return,Pe)}}break;case 3:if(Sf=null,b=gi,gi=wf(l.containerInfo),lr(l,s),gi=b,ur(s),g&4&&p!==null&&p.memoizedState.isDehydrated)try{il(l.containerInfo)}catch(Pe){_t(s,s.return,Pe)}qg&&(qg=!1,wk(s));break;case 4:g=gi,gi=wf(s.stateNode.containerInfo),lr(l,s),ur(s),gi=g;break;case 12:lr(l,s),ur(s);break;case 31:lr(l,s),ur(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,of(s,g)));break;case 13:lr(l,s),ur(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(uf=nn()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,of(s,g)));break;case 22:b=s.memoizedState!==null;var K=p!==null&&p.memoizedState!==null,ae=na,de=fn;if(na=ae||b,fn=de||K,lr(l,s),fn=de,na=ae,ur(s),g&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(p===null||K||na||fn||qs(s)),p=null,l=s;;){if(l.tag===5||l.tag===26){if(p===null){K=p=l;try{if(E=K.stateNode,b)j=E.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{L=K.stateNode;var pe=K.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;L.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Pe){_t(K,K.return,Pe)}}}else if(l.tag===6){if(p===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(Pe){_t(K,K.return,Pe)}}}else if(l.tag===18){if(p===null){K=l;try{var ce=K.stateNode;b?cE(ce,!0):cE(K.stateNode,!1)}catch(Pe){_t(K,K.return,Pe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(p=g.retryQueue,p!==null&&(g.retryQueue=null,of(s,p))));break;case 19:lr(l,s),ur(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,of(s,g)));break;case 30:break;case 21:break;default:lr(l,s),ur(s)}}function ur(s){var l=s.flags;if(l&2){try{for(var p,g=s.return;g!==null;){if(fk(g)){p=g;break}g=g.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var b=p.stateNode,E=Lg(s);sf(s,E,b);break;case 5:var j=p.stateNode;p.flags&32&&(To(j,""),p.flags&=-33);var L=Lg(s);sf(s,L,j);break;case 3:case 4:var K=p.stateNode.containerInfo,ae=Lg(s);Ug(s,ae,K);break;default:throw Error(r(161))}}catch(de){_t(s,s.return,de)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function wk(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;wk(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ia(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)mk(s,l.alternate,l),l=l.sibling}function qs(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Va(4,l,l.return),qs(l);break;case 1:Mi(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&ck(l,l.return,p),qs(l);break;case 27:Wu(l.stateNode);case 26:case 5:Mi(l,l.return),qs(l);break;case 22:l.memoizedState===null&&qs(l);break;case 30:qs(l);break;default:qs(l)}s=s.sibling}}function aa(s,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,b=s,E=l,j=E.flags;switch(E.tag){case 0:case 11:case 15:aa(b,E,p),qu(4,E);break;case 1:if(aa(b,E,p),g=E,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ae){_t(g,g.return,ae)}if(g=E,b=g.updateQueue,b!==null){var L=g.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)Q_(K[b],L)}catch(ae){_t(g,g.return,ae)}}p&&j&64&&uk(E),$u(E,E.return);break;case 27:hk(E);case 26:case 5:aa(b,E,p),p&&g===null&&j&4&&dk(E),$u(E,E.return);break;case 12:aa(b,E,p);break;case 31:aa(b,E,p),p&&j&4&&vk(b,E);break;case 13:aa(b,E,p),p&&j&4&&xk(b,E);break;case 22:E.memoizedState===null&&aa(b,E,p),$u(E,E.return);break;case 30:break;default:aa(b,E,p)}l=l.sibling}}function $g(s,l){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&Cu(p))}function Bg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Cu(s))}function yi(s,l,p,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)_k(s,l,p,g),l=l.sibling}function _k(s,l,p,g){var b=l.flags;switch(l.tag){case 0:case 11:case 15:yi(s,l,p,g),b&2048&&qu(9,l);break;case 1:yi(s,l,p,g);break;case 3:yi(s,l,p,g),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Cu(s)));break;case 12:if(b&2048){yi(s,l,p,g),s=l.stateNode;try{var E=l.memoizedProps,j=E.id,L=E.onPostCommit;typeof L=="function"&&L(j,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){_t(l,l.return,K)}}else yi(s,l,p,g);break;case 31:yi(s,l,p,g);break;case 13:yi(s,l,p,g);break;case 23:break;case 22:E=l.stateNode,j=l.alternate,l.memoizedState!==null?E._visibility&2?yi(s,l,p,g):Bu(s,l):E._visibility&2?yi(s,l,p,g):(E._visibility|=2,Ko(s,l,p,g,(l.subtreeFlags&10256)!==0||!1)),b&2048&&$g(j,l);break;case 24:yi(s,l,p,g),b&2048&&Bg(l.alternate,l);break;default:yi(s,l,p,g)}}function Ko(s,l,p,g,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var E=s,j=l,L=p,K=g,ae=j.flags;switch(j.tag){case 0:case 11:case 15:Ko(E,j,L,K,b),qu(8,j);break;case 23:break;case 22:var de=j.stateNode;j.memoizedState!==null?de._visibility&2?Ko(E,j,L,K,b):Bu(E,j):(de._visibility|=2,Ko(E,j,L,K,b)),b&&ae&2048&&$g(j.alternate,j);break;case 24:Ko(E,j,L,K,b),b&&ae&2048&&Bg(j.alternate,j);break;default:Ko(E,j,L,K,b)}l=l.sibling}}function Bu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=s,g=l,b=g.flags;switch(g.tag){case 22:Bu(p,g),b&2048&&$g(g.alternate,g);break;case 24:Bu(p,g),b&2048&&Bg(g.alternate,g);break;default:Bu(p,g)}l=l.sibling}}var zu=8192;function Yo(s,l,p){if(s.subtreeFlags&zu)for(s=s.child;s!==null;)Sk(s,l,p),s=s.sibling}function Sk(s,l,p){switch(s.tag){case 26:Yo(s,l,p),s.flags&zu&&s.memoizedState!==null&&tU(p,gi,s.memoizedState,s.memoizedProps);break;case 5:Yo(s,l,p);break;case 3:case 4:var g=gi;gi=wf(s.stateNode.containerInfo),Yo(s,l,p),gi=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=zu,zu=16777216,Yo(s,l,p),zu=g):Yo(s,l,p));break;default:Yo(s,l,p)}}function kk(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Fu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var g=l[p];En=g,Ck(g,s)}kk(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ek(s),s=s.sibling}function Ek(s){switch(s.tag){case 0:case 11:case 15:Fu(s),s.flags&2048&&Va(9,s,s.return);break;case 3:Fu(s);break;case 12:Fu(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,lf(s)):Fu(s);break;default:Fu(s)}}function lf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var g=l[p];En=g,Ck(g,s)}kk(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Va(8,l,l.return),lf(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,lf(l));break;default:lf(l)}s=s.sibling}}function Ck(s,l){for(;En!==null;){var p=En;switch(p.tag){case 0:case 11:case 15:Va(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var g=p.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Cu(p.memoizedState.cache)}if(g=p.child,g!==null)g.return=p,En=g;else e:for(p=s;En!==null;){g=En;var b=g.sibling,E=g.return;if(gk(g),g===p){En=null;break e}if(b!==null){b.return=E,En=b;break e}En=E}}}var g5={getCacheForType:function(s){var l=In(un),p=l.data.get(s);return p===void 0&&(p=s(),l.data.set(s,p)),p},cacheSignal:function(){return In(un).controller.signal}},y5=typeof WeakMap=="function"?WeakMap:Map,yt=0,jt=null,nt=null,at=0,wt=0,kr=null,Ha=!1,Wo=!1,zg=!1,sa=0,tn=0,Ga=0,$s=0,Fg=0,Er=0,Jo=0,Vu=null,cr=null,Vg=!1,uf=0,Tk=0,cf=1/0,df=null,Ka=null,vn=0,Ya=null,Xo=null,oa=0,Hg=0,Gg=null,Nk=null,Hu=0,Kg=null;function Cr(){return(yt&2)!==0&&at!==0?at&-at:U.T!==null?Zg():xd()}function Ak(){if(Er===0)if((at&536870912)===0||ot){var s=Bi;Bi<<=1,(Bi&3932160)===0&&(Bi=262144),Er=s}else Er=536870912;return s=_r.current,s!==null&&(s.flags|=32),Er}function dr(s,l,p){(s===jt&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(Qo(s,0),Wa(s,at,Er,!1)),fi(s,p),((yt&2)===0||s!==jt)&&(s===jt&&((yt&2)===0&&($s|=p),tn===4&&Wa(s,at,Er,!1)),Oi(s))}function jk(s,l,p){if((yt&6)!==0)throw Error(r(327));var g=!p&&(l&127)===0&&(l&s.expiredLanes)===0||Fi(s,l),b=g?b5(s,l):Wg(s,l,!0),E=g;do{if(b===0){Wo&&!g&&Wa(s,l,0,!1);break}else{if(p=s.current.alternate,E&&!v5(p)){b=Wg(s,l,!1),E=!1;continue}if(b===2){if(E=l,s.errorRecoveryDisabledLanes&E)var j=0;else j=s.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){l=j;e:{var L=s;b=Vu;var K=L.current.memoizedState.isDehydrated;if(K&&(Qo(L,j).flags|=256),j=Wg(L,j,!1),j!==2){if(zg&&!K){L.errorRecoveryDisabledLanes|=E,$s|=E,b=4;break e}E=cr,cr=b,E!==null&&(cr===null?cr=E:cr.push.apply(cr,E))}b=j}if(E=!1,b!==2)continue}}if(b===1){Qo(s,0),Wa(s,l,0,!0);break}e:{switch(g=s,E=b,E){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Wa(g,l,Er,!Ha);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=uf+300-nn(),10<b)){if(Wa(g,l,Er,!Ha),zi(g,0,!0)!==0)break e;oa=l,g.timeoutHandle=oE(Pk.bind(null,g,p,cr,df,Vg,l,Er,$s,Jo,Ha,E,"Throttled",-0,0),b);break e}Pk(g,p,cr,df,Vg,l,Er,$s,Jo,Ha,E,null,-0,0)}}break}while(!0);Oi(s)}function Pk(s,l,p,g,b,E,j,L,K,ae,de,pe,se,ce){if(s.timeoutHandle=-1,pe=l.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gi},Sk(l,E,pe);var Pe=(E&62914560)===E?uf-nn():(E&4194048)===E?Tk-nn():0;if(Pe=nU(pe,Pe),Pe!==null){oa=E,s.cancelPendingCommit=Pe(qk.bind(null,s,l,E,p,g,b,j,L,K,de,pe,null,se,ce)),Wa(s,E,j,!ae);return}}qk(s,l,E,p,g,b,j,L,K)}function v5(s){for(var l=s;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var g=0;g<p.length;g++){var b=p[g],E=b.getSnapshot;b=b.value;try{if(!br(E(),b))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wa(s,l,p,g){l&=~Fg,l&=~$s,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var b=l;0<b;){var E=31-Ie(b),j=1<<E;g[E]=-1,b&=~j}p!==0&&Vi(s,p,l)}function ff(){return(yt&6)===0?(Gu(0),!1):!0}function Yg(){if(nt!==null){if(wt===0)var s=nt.return;else s=nt,Ji=Ps=null,cg(s),zo=null,Nu=0,s=nt;for(;s!==null;)lk(s.alternate,s),s=s.return;nt=null}}function Qo(s,l){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,U5(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),oa=0,Yg(),jt=s,nt=p=Yi(s.current,null),at=l,wt=0,kr=null,Ha=!1,Wo=Fi(s,l),zg=!1,Jo=Er=Fg=$s=Ga=tn=0,cr=Vu=null,Vg=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var b=31-Ie(g),E=1<<b;l|=s[b],g&=~E}return sa=l,Md(),p}function Mk(s,l){Je=null,U.H=Du,l===Bo||l===$d?(l=Y_(),wt=3):l===Qm?(l=Y_(),wt=4):wt=l===Cg?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,kr=l,nt===null&&(tn=1,ef(s,Fr(l,s.current)))}function Ok(){var s=_r.current;return s===null?!0:(at&4194048)===at?Kr===null:(at&62914560)===at||(at&536870912)!==0?s===Kr:!1}function Rk(){var s=U.H;return U.H=Du,s===null?Du:s}function Ik(){var s=U.A;return U.A=g5,s}function hf(){tn=4,Ha||(at&4194048)!==at&&_r.current!==null||(Wo=!0),(Ga&134217727)===0&&($s&134217727)===0||jt===null||Wa(jt,at,Er,!1)}function Wg(s,l,p){var g=yt;yt|=2;var b=Rk(),E=Ik();(jt!==s||at!==l)&&(df=null,Qo(s,l)),l=!1;var j=tn;e:do try{if(wt!==0&&nt!==null){var L=nt,K=kr;switch(wt){case 8:Yg(),j=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(l=!0);var ae=wt;if(wt=0,kr=null,Zo(s,L,K,ae),p&&Wo){j=0;break e}break;default:ae=wt,wt=0,kr=null,Zo(s,L,K,ae)}}x5(),j=tn;break}catch(de){Mk(s,de)}while(!0);return l&&s.shellSuspendCounter++,Ji=Ps=null,yt=g,U.H=b,U.A=E,nt===null&&(jt=null,at=0,Md()),j}function x5(){for(;nt!==null;)Dk(nt)}function b5(s,l){var p=yt;yt|=2;var g=Rk(),b=Ik();jt!==s||at!==l?(df=null,cf=nn()+500,Qo(s,l)):Wo=Fi(s,l);e:do try{if(wt!==0&&nt!==null){l=nt;var E=kr;t:switch(wt){case 1:wt=0,kr=null,Zo(s,l,E,1);break;case 2:case 9:if(G_(E)){wt=0,kr=null,Lk(l);break}l=function(){wt!==2&&wt!==9||jt!==s||(wt=7),Oi(s)},E.then(l,l);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:G_(E)?(wt=0,kr=null,Lk(l)):(wt=0,kr=null,Zo(s,l,E,7));break;case 5:var j=null;switch(nt.tag){case 26:j=nt.memoizedState;case 5:case 27:var L=nt;if(j?_E(j):L.stateNode.complete){wt=0,kr=null;var K=L.sibling;if(K!==null)nt=K;else{var ae=L.return;ae!==null?(nt=ae,pf(ae)):nt=null}break t}}wt=0,kr=null,Zo(s,l,E,5);break;case 6:wt=0,kr=null,Zo(s,l,E,6);break;case 8:Yg(),tn=6;break e;default:throw Error(r(462))}}w5();break}catch(de){Mk(s,de)}while(!0);return Ji=Ps=null,U.H=g,U.A=b,yt=p,nt!==null?0:(jt=null,at=0,Md(),tn)}function w5(){for(;nt!==null&&!Pa();)Dk(nt)}function Dk(s){var l=sk(s.alternate,s,sa);s.memoizedProps=s.pendingProps,l===null?pf(s):nt=l}function Lk(s){var l=s,p=l.alternate;switch(l.tag){case 15:case 0:l=ek(p,l,l.pendingProps,l.type,void 0,at);break;case 11:l=ek(p,l,l.pendingProps,l.type.render,l.ref,at);break;case 5:cg(l);default:lk(p,l),l=nt=I_(l,sa),l=sk(p,l,sa)}s.memoizedProps=s.pendingProps,l===null?pf(s):nt=l}function Zo(s,l,p,g){Ji=Ps=null,cg(l),zo=null,Nu=0;var b=l.return;try{if(u5(s,b,l,p,at)){tn=1,ef(s,Fr(p,s.current)),nt=null;return}}catch(E){if(b!==null)throw nt=b,E;tn=1,ef(s,Fr(p,s.current)),nt=null;return}l.flags&32768?(ot||g===1?s=!0:Wo||(at&536870912)!==0?s=!1:(Ha=s=!0,(g===2||g===9||g===3||g===6)&&(g=_r.current,g!==null&&g.tag===13&&(g.flags|=16384))),Uk(l,s)):pf(l)}function pf(s){var l=s;do{if((l.flags&32768)!==0){Uk(l,Ha);return}s=l.return;var p=f5(l.alternate,l,sa);if(p!==null){nt=p;return}if(l=l.sibling,l!==null){nt=l;return}nt=l=s}while(l!==null);tn===0&&(tn=5)}function Uk(s,l){do{var p=h5(s.alternate,s);if(p!==null){p.flags&=32767,nt=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(s=s.sibling,s!==null)){nt=s;return}nt=s=p}while(s!==null);tn=6,nt=null}function qk(s,l,p,g,b,E,j,L,K){s.cancelPendingCommit=null;do mf();while(vn!==0);if((yt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(E=l.lanes|l.childLanes,E|=Lm,gm(s,p,E,j,L,K),s===jt&&(nt=jt=null,at=0),Xo=l,Ya=s,oa=p,Hg=E,Gg=b,Nk=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,E5(Ue,function(){return Vk(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=U.T,U.T=null,b=G.p,G.p=2,j=yt,yt|=4;try{p5(s,l,p)}finally{yt=j,G.p=b,U.T=g}}vn=1,$k(),Bk(),zk()}}function $k(){if(vn===1){vn=0;var s=Ya,l=Xo,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=U.T,U.T=null;var g=G.p;G.p=2;var b=yt;yt|=4;try{bk(l,s);var E=o0,j=C_(s.containerInfo),L=E.focusedElem,K=E.selectionRange;if(j!==L&&L&&L.ownerDocument&&E_(L.ownerDocument.documentElement,L)){if(K!==null&&Mm(L)){var ae=K.start,de=K.end;if(de===void 0&&(de=ae),"selectionStart"in L)L.selectionStart=ae,L.selectionEnd=Math.min(de,L.value.length);else{var pe=L.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var ce=se.getSelection(),Pe=L.textContent.length,ze=Math.min(K.start,Pe),Nt=K.end===void 0?ze:Math.min(K.end,Pe);!ce.extend&&ze>Nt&&(j=Nt,Nt=ze,ze=j);var ee=k_(L,ze),J=k_(L,Nt);if(ee&&J&&(ce.rangeCount!==1||ce.anchorNode!==ee.node||ce.anchorOffset!==ee.offset||ce.focusNode!==J.node||ce.focusOffset!==J.offset)){var ie=pe.createRange();ie.setStart(ee.node,ee.offset),ce.removeAllRanges(),ze>Nt?(ce.addRange(ie),ce.extend(J.node,J.offset)):(ie.setEnd(J.node,J.offset),ce.addRange(ie))}}}}for(pe=[],ce=L;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<pe.length;L++){var he=pe[L];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Tf=!!s0,o0=s0=null}finally{yt=b,G.p=g,U.T=p}}s.current=l,vn=2}}function Bk(){if(vn===2){vn=0;var s=Ya,l=Xo,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=U.T,U.T=null;var g=G.p;G.p=2;var b=yt;yt|=4;try{mk(s,l.alternate,l)}finally{yt=b,G.p=g,U.T=p}}vn=3}}function zk(){if(vn===4||vn===3){vn=0,ws();var s=Ya,l=Xo,p=oa,g=Nk;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?vn=5:(vn=0,Xo=Ya=null,Fk(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Ka=null),fu(p),l=l.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ot,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=U.T,b=G.p,G.p=2,U.T=null;try{for(var E=s.onRecoverableError,j=0;j<g.length;j++){var L=g[j];E(L.value,{componentStack:L.stack})}}finally{U.T=l,G.p=b}}(oa&3)!==0&&mf(),Oi(s),b=s.pendingLanes,(p&261930)!==0&&(b&42)!==0?s===Kg?Hu++:(Hu=0,Kg=s):Hu=0,Gu(0)}}function Fk(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Cu(l)))}function mf(){return $k(),Bk(),zk(),Vk()}function Vk(){if(vn!==5)return!1;var s=Ya,l=Hg;Hg=0;var p=fu(oa),g=U.T,b=G.p;try{G.p=32>p?32:p,U.T=null,p=Gg,Gg=null;var E=Ya,j=oa;if(vn=0,Xo=Ya=null,oa=0,(yt&6)!==0)throw Error(r(331));var L=yt;if(yt|=4,Ek(E.current),_k(E,E.current,j,p),yt=L,Gu(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ot,E)}catch{}return!0}finally{G.p=b,U.T=g,Fk(s,l)}}function Hk(s,l,p){l=Fr(p,l),l=Eg(s.stateNode,l,2),s=Ba(s,l,2),s!==null&&(fi(s,2),Oi(s))}function _t(s,l,p){if(s.tag===3)Hk(s,s,p);else for(;l!==null;){if(l.tag===3){Hk(l,s,p);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ka===null||!Ka.has(g))){s=Fr(p,s),p=GS(2),g=Ba(l,p,2),g!==null&&(KS(p,g,l,s),fi(g,2),Oi(g));break}}l=l.return}}function Jg(s,l,p){var g=s.pingCache;if(g===null){g=s.pingCache=new y5;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(p)||(zg=!0,b.add(p),s=_5.bind(null,s,l,p),l.then(s,s))}function _5(s,l,p){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,jt===s&&(at&p)===p&&(tn===4||tn===3&&(at&62914560)===at&&300>nn()-uf?(yt&2)===0&&Qo(s,0):Fg|=p,Jo===at&&(Jo=0)),Oi(s)}function Gk(s,l){l===0&&(l=ko()),s=Ns(s,l),s!==null&&(fi(s,l),Oi(s))}function S5(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),Gk(s,p)}function k5(s,l){var p=0;switch(s.tag){case 31:case 13:var g=s.stateNode,b=s.memoizedState;b!==null&&(p=b.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),Gk(s,p)}function E5(s,l){return ci(s,l)}var gf=null,el=null,Xg=!1,yf=!1,Qg=!1,Ja=0;function Oi(s){s!==el&&s.next===null&&(el===null?gf=el=s:el=el.next=s),yf=!0,Xg||(Xg=!0,T5())}function Gu(s,l){if(!Qg&&yf){Qg=!0;do for(var p=!1,g=gf;g!==null;){if(s!==0){var b=g.pendingLanes;if(b===0)var E=0;else{var j=g.suspendedLanes,L=g.pingedLanes;E=(1<<31-Ie(42|s)+1)-1,E&=b&~(j&~L),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(p=!0,Jk(g,E))}else E=at,E=zi(g,g===jt?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(E&3)===0||Fi(g,E)||(p=!0,Jk(g,E));g=g.next}while(p);Qg=!1}}function C5(){Kk()}function Kk(){yf=Xg=!1;var s=0;Ja!==0&&L5()&&(s=Ja);for(var l=nn(),p=null,g=gf;g!==null;){var b=g.next,E=Yk(g,l);E===0?(g.next=null,p===null?gf=b:p.next=b,b===null&&(el=p)):(p=g,(s!==0||(E&3)!==0)&&(yf=!0)),g=b}vn!==0&&vn!==5||Gu(s),Ja!==0&&(Ja=0)}function Yk(s,l){for(var p=s.suspendedLanes,g=s.pingedLanes,b=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var j=31-Ie(E),L=1<<j,K=b[j];K===-1?((L&p)===0||(L&g)!==0)&&(b[j]=on(L,l)):K<=l&&(s.expiredLanes|=L),E&=~L}if(l=jt,p=at,p=zi(s,s===l?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,p===0||s===l&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&di(g),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||Fi(s,p)){if(l=p&-p,l===s.callbackPriority)return l;switch(g!==null&&di(g),fu(p)){case 2:case 8:p=_e;break;case 32:p=Ue;break;case 268435456:p=tt;break;default:p=Ue}return g=Wk.bind(null,s),p=ci(p,g),s.callbackPriority=l,s.callbackNode=p,l}return g!==null&&g!==null&&di(g),s.callbackPriority=2,s.callbackNode=null,2}function Wk(s,l){if(vn!==0&&vn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(mf()&&s.callbackNode!==p)return null;var g=at;return g=zi(s,s===jt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(jk(s,g,l),Yk(s,nn()),s.callbackNode!=null&&s.callbackNode===p?Wk.bind(null,s):null)}function Jk(s,l){if(mf())return null;jk(s,l,!0)}function T5(){q5(function(){(yt&6)!==0?ci(fe,C5):Kk()})}function Zg(){if(Ja===0){var s=qo;s===0&&(s=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),Ja=s}return Ja}function Xk(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:kd(""+s)}function Qk(s,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,s.id&&p.setAttribute("form",s.id),l.parentNode.insertBefore(p,l),s=new FormData(s),p.parentNode.removeChild(p),s}function N5(s,l,p,g,b){if(l==="submit"&&p&&p.stateNode===b){var E=Xk((b[zn]||null).action),j=g.submitter;j&&(l=(l=j[zn]||null)?Xk(l.formAction):j.getAttribute("formAction"),l!==null&&(E=l,j=null));var L=new Nd("action","action",null,g,b);s.push({event:L,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Ja!==0){var K=j?Qk(b,j):new FormData(b);xg(p,{pending:!0,data:K,method:b.method,action:E},null,K)}}else typeof E=="function"&&(L.preventDefault(),K=j?Qk(b,j):new FormData(b),xg(p,{pending:!0,data:K,method:b.method,action:E},E,K))},currentTarget:b}]})}}for(var e0=0;e0<Dm.length;e0++){var t0=Dm[e0],A5=t0.toLowerCase(),j5=t0[0].toUpperCase()+t0.slice(1);mi(A5,"on"+j5)}mi(A_,"onAnimationEnd"),mi(j_,"onAnimationIteration"),mi(P_,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(G3,"onTransitionRun"),mi(K3,"onTransitionStart"),mi(Y3,"onTransitionCancel"),mi(M_,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Zk(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var g=s[p],b=g.event;g=g.listeners;e:{var E=void 0;if(l)for(var j=g.length-1;0<=j;j--){var L=g[j],K=L.instance,ae=L.currentTarget;if(L=L.listener,K!==E&&b.isPropagationStopped())break e;E=L,b.currentTarget=ae;try{E(b)}catch(de){Pd(de)}b.currentTarget=null,E=K}else for(j=0;j<g.length;j++){if(L=g[j],K=L.instance,ae=L.currentTarget,L=L.listener,K!==E&&b.isPropagationStopped())break e;E=L,b.currentTarget=ae;try{E(b)}catch(de){Pd(de)}b.currentTarget=null,E=K}}}}function rt(s,l){var p=l[hu];p===void 0&&(p=l[hu]=new Set);var g=s+"__bubble";p.has(g)||(eE(l,s,2,!1),p.add(g))}function n0(s,l,p){var g=0;l&&(g|=4),eE(p,s,g,l)}var vf="_reactListening"+Math.random().toString(36).slice(2);function r0(s){if(!s[vf]){s[vf]=!0,lt.forEach(function(p){p!=="selectionchange"&&(P5.has(p)||n0(p,!1,s),n0(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[vf]||(l[vf]=!0,n0("selectionchange",!1,l))}}function eE(s,l,p,g){switch(AE(l)){case 2:var b=aU;break;case 8:b=sU;break;default:b=v0}p=b.bind(null,l,p,s),b=void 0,!Sm||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?s.addEventListener(l,p,{capture:!0,passive:b}):s.addEventListener(l,p,!0):b!==void 0?s.addEventListener(l,p,{passive:b}):s.addEventListener(l,p,!1)}function i0(s,l,p,g,b){var E=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var j=g.tag;if(j===3||j===4){var L=g.stateNode.containerInfo;if(L===b)break;if(j===4)for(j=g.return;j!==null;){var K=j.tag;if((K===3||K===4)&&j.stateNode.containerInfo===b)return;j=j.return}for(;L!==null;){if(j=xe(L),j===null)return;if(K=j.tag,K===5||K===6||K===26||K===27){g=E=j;continue e}L=L.parentNode}}g=g.return}a_(function(){var ae=E,de=wm(p),pe=[];e:{var se=O_.get(s);if(se!==void 0){var ce=Nd,Pe=s;switch(s){case"keypress":if(Cd(p)===0)break e;case"keydown":case"keyup":ce=k3;break;case"focusin":Pe="focus",ce=Tm;break;case"focusout":Pe="blur",ce=Tm;break;case"beforeblur":case"afterblur":ce=Tm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=l_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=f3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=T3;break;case A_:case j_:case P_:ce=m3;break;case M_:ce=A3;break;case"scroll":case"scrollend":ce=c3;break;case"wheel":ce=P3;break;case"copy":case"cut":case"paste":ce=y3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=c_;break;case"toggle":case"beforetoggle":ce=O3}var ze=(l&4)!==0,Nt=!ze&&(s==="scroll"||s==="scrollend"),ee=ze?se!==null?se+"Capture":null:se;ze=[];for(var J=ae,ie;J!==null;){var he=J;if(ie=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ie===null||ee===null||(he=mu(J,ee),he!=null&&ze.push(Yu(J,he,ie))),Nt)break;J=J.return}0<ze.length&&(se=new ce(se,Pe,null,p,de),pe.push({event:se,listeners:ze}))}}if((l&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",se&&p!==bm&&(Pe=p.relatedTarget||p.fromElement)&&(xe(Pe)||Pe[Oa]))break e;if((ce||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(Pe=p.relatedTarget||p.toElement,ce=ae,Pe=Pe?xe(Pe):null,Pe!==null&&(Nt=a(Pe),ze=Pe.tag,Pe!==Nt||ze!==5&&ze!==27&&ze!==6)&&(Pe=null)):(ce=null,Pe=ae),ce!==Pe)){if(ze=l_,he="onMouseLeave",ee="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(ze=c_,he="onPointerLeave",ee="onPointerEnter",J="pointer"),Nt=ce==null?se:He(ce),ie=Pe==null?se:He(Pe),se=new ze(he,J+"leave",ce,p,de),se.target=Nt,se.relatedTarget=ie,he=null,xe(de)===ae&&(ze=new ze(ee,J+"enter",Pe,p,de),ze.target=ie,ze.relatedTarget=Nt,he=ze),Nt=he,ce&&Pe)t:{for(ze=M5,ee=ce,J=Pe,ie=0,he=ee;he;he=ze(he))ie++;he=0;for(var qe=J;qe;qe=ze(qe))he++;for(;0<ie-he;)ee=ze(ee),ie--;for(;0<he-ie;)J=ze(J),he--;for(;ie--;){if(ee===J||J!==null&&ee===J.alternate){ze=ee;break t}ee=ze(ee),J=ze(J)}ze=null}else ze=null;ce!==null&&tE(pe,se,ce,ze,!1),Pe!==null&&Nt!==null&&tE(pe,Nt,Pe,ze,!0)}}e:{if(se=ae?He(ae):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var dt=v_;else if(g_(se))if(x_)dt=F3;else{dt=B3;var Oe=$3}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ae&&xm(ae.elementType)&&(dt=v_):dt=z3;if(dt&&(dt=dt(s,ae))){y_(pe,dt,p,de);break e}Oe&&Oe(s,se,ae),s==="focusout"&&ae&&se.type==="number"&&ae.memoizedProps.value!=null&&vm(se,"number",se.value)}switch(Oe=ae?He(ae):window,s){case"focusin":(g_(Oe)||Oe.contentEditable==="true")&&(Po=Oe,Om=ae,Su=null);break;case"focusout":Su=Om=Po=null;break;case"mousedown":Rm=!0;break;case"contextmenu":case"mouseup":case"dragend":Rm=!1,T_(pe,p,de);break;case"selectionchange":if(H3)break;case"keydown":case"keyup":T_(pe,p,de)}var Qe;if(Am)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else jo?p_(s,p)&&(st="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(st="onCompositionStart");st&&(d_&&p.locale!=="ko"&&(jo||st!=="onCompositionStart"?st==="onCompositionEnd"&&jo&&(Qe=s_()):(Ra=de,km="value"in Ra?Ra.value:Ra.textContent,jo=!0)),Oe=xf(ae,st),0<Oe.length&&(st=new u_(st,s,null,p,de),pe.push({event:st,listeners:Oe}),Qe?st.data=Qe:(Qe=m_(p),Qe!==null&&(st.data=Qe)))),(Qe=I3?D3(s,p):L3(s,p))&&(st=xf(ae,"onBeforeInput"),0<st.length&&(Oe=new u_("onBeforeInput","beforeinput",null,p,de),pe.push({event:Oe,listeners:st}),Oe.data=Qe)),N5(pe,s,ae,p,de)}Zk(pe,l)})}function Yu(s,l,p){return{instance:s,listener:l,currentTarget:p}}function xf(s,l){for(var p=l+"Capture",g=[];s!==null;){var b=s,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=mu(s,p),b!=null&&g.unshift(Yu(s,b,E)),b=mu(s,l),b!=null&&g.push(Yu(s,b,E))),s.tag===3)return g;s=s.return}return[]}function M5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function tE(s,l,p,g,b){for(var E=l._reactName,j=[];p!==null&&p!==g;){var L=p,K=L.alternate,ae=L.stateNode;if(L=L.tag,K!==null&&K===g)break;L!==5&&L!==26&&L!==27||ae===null||(K=ae,b?(ae=mu(p,E),ae!=null&&j.unshift(Yu(p,ae,K))):b||(ae=mu(p,E),ae!=null&&j.push(Yu(p,ae,K)))),p=p.return}j.length!==0&&s.push({event:l,listeners:j})}var O5=/\r\n?/g,R5=/\u0000|\uFFFD/g;function nE(s){return(typeof s=="string"?s:""+s).replace(O5,`
`).replace(R5,"")}function rE(s,l){return l=nE(l),nE(s)===l}function Tt(s,l,p,g,b,E){switch(p){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||To(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&To(s,""+g);break;case"className":Hi(s,"class",g);break;case"tabIndex":Hi(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Hi(s,p,g);break;case"style":r_(s,g,E);break;case"data":if(l!=="object"){Hi(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||p!=="href")){s.removeAttribute(p);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(p);break}g=kd(""+g),s.setAttribute(p,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(p==="formAction"?(l!=="input"&&Tt(s,l,"name",b.name,b,null),Tt(s,l,"formEncType",b.formEncType,b,null),Tt(s,l,"formMethod",b.formMethod,b,null),Tt(s,l,"formTarget",b.formTarget,b,null)):(Tt(s,l,"encType",b.encType,b,null),Tt(s,l,"method",b.method,b,null),Tt(s,l,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(p);break}g=kd(""+g),s.setAttribute(p,g);break;case"onClick":g!=null&&(s.onclick=Gi);break;case"onScroll":g!=null&&rt("scroll",s);break;case"onScrollEnd":g!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}p=kd(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(p,""+g):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":g===!0?s.setAttribute(p,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(p,g):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(p,g):s.removeAttribute(p);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(p):s.setAttribute(p,g);break;case"popover":rt("beforetoggle",s),rt("toggle",s),pi(s,"popover",g);break;case"xlinkActuate":Qn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Qn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Qn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Qn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Qn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Qn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Qn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":pi(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=l3.get(p)||p,pi(s,p,g))}}function a0(s,l,p,g,b,E){switch(p){case"style":r_(s,g,E);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=p}}break;case"children":typeof g=="string"?To(s,g):(typeof g=="number"||typeof g=="bigint")&&To(s,""+g);break;case"onScroll":g!=null&&rt("scroll",s);break;case"onScrollEnd":g!=null&&rt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ut.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(b=p.endsWith("Capture"),l=p.slice(2,b?p.length-7:void 0),E=s[zn]||null,E=E!=null?E[p]:null,typeof E=="function"&&s.removeEventListener(l,E,b),typeof g=="function")){typeof E!="function"&&E!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(l,g,b);break e}p in s?s[p]=g:g===!0?s.setAttribute(p,""):pi(s,p,g)}}}function Ln(s,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var g=!1,b=!1,E;for(E in p)if(p.hasOwnProperty(E)){var j=p[E];if(j!=null)switch(E){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,E,j,p,null)}}b&&Tt(s,l,"srcSet",p.srcSet,p,null),g&&Tt(s,l,"src",p.src,p,null);return;case"input":rt("invalid",s);var L=E=j=b=null,K=null,ae=null;for(g in p)if(p.hasOwnProperty(g)){var de=p[g];if(de!=null)switch(g){case"name":b=de;break;case"type":j=de;break;case"checked":K=de;break;case"defaultChecked":ae=de;break;case"value":E=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,l));break;default:Tt(s,l,g,de,p,null)}}Z1(s,E,L,K,ae,j,b,!1);return;case"select":rt("invalid",s),g=j=E=null;for(b in p)if(p.hasOwnProperty(b)&&(L=p[b],L!=null))switch(b){case"value":E=L;break;case"defaultValue":j=L;break;case"multiple":g=L;default:Tt(s,l,b,L,p,null)}l=E,p=j,s.multiple=!!g,l!=null?Co(s,!!g,l,!1):p!=null&&Co(s,!!g,p,!0);return;case"textarea":rt("invalid",s),E=b=g=null;for(j in p)if(p.hasOwnProperty(j)&&(L=p[j],L!=null))switch(j){case"value":g=L;break;case"defaultValue":b=L;break;case"children":E=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Tt(s,l,j,L,p,null)}t_(s,g,b,E);return;case"option":for(K in p)if(p.hasOwnProperty(K)&&(g=p[K],g!=null))switch(K){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Tt(s,l,K,g,p,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(g=0;g<Ku.length;g++)rt(Ku[g],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in p)if(p.hasOwnProperty(ae)&&(g=p[ae],g!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,ae,g,p,null)}return;default:if(xm(l)){for(de in p)p.hasOwnProperty(de)&&(g=p[de],g!==void 0&&a0(s,l,de,g,p,void 0));return}}for(L in p)p.hasOwnProperty(L)&&(g=p[L],g!=null&&Tt(s,l,L,g,p,null))}function I5(s,l,p,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,j=null,L=null,K=null,ae=null,de=null;for(ce in p){var pe=p[ce];if(p.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":K=pe;default:g.hasOwnProperty(ce)||Tt(s,l,ce,null,g,pe)}}for(var se in g){var ce=g[se];if(pe=p[se],g.hasOwnProperty(se)&&(ce!=null||pe!=null))switch(se){case"type":E=ce;break;case"name":b=ce;break;case"checked":ae=ce;break;case"defaultChecked":de=ce;break;case"value":j=ce;break;case"defaultValue":L=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:ce!==pe&&Tt(s,l,se,ce,g,pe)}}ym(s,j,L,K,ae,de,E,b);return;case"select":ce=j=L=se=null;for(E in p)if(K=p[E],p.hasOwnProperty(E)&&K!=null)switch(E){case"value":break;case"multiple":ce=K;default:g.hasOwnProperty(E)||Tt(s,l,E,null,g,K)}for(b in g)if(E=g[b],K=p[b],g.hasOwnProperty(b)&&(E!=null||K!=null))switch(b){case"value":se=E;break;case"defaultValue":L=E;break;case"multiple":j=E;default:E!==K&&Tt(s,l,b,E,g,K)}l=L,p=j,g=ce,se!=null?Co(s,!!p,se,!1):!!g!=!!p&&(l!=null?Co(s,!!p,l,!0):Co(s,!!p,p?[]:"",!1));return;case"textarea":ce=se=null;for(L in p)if(b=p[L],p.hasOwnProperty(L)&&b!=null&&!g.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Tt(s,l,L,null,g,b)}for(j in g)if(b=g[j],E=p[j],g.hasOwnProperty(j)&&(b!=null||E!=null))switch(j){case"value":se=b;break;case"defaultValue":ce=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&Tt(s,l,j,b,g,E)}e_(s,se,ce);return;case"option":for(var Pe in p)if(se=p[Pe],p.hasOwnProperty(Pe)&&se!=null&&!g.hasOwnProperty(Pe))switch(Pe){case"selected":s.selected=!1;break;default:Tt(s,l,Pe,null,g,se)}for(K in g)if(se=g[K],ce=p[K],g.hasOwnProperty(K)&&se!==ce&&(se!=null||ce!=null))switch(K){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Tt(s,l,K,se,g,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in p)se=p[ze],p.hasOwnProperty(ze)&&se!=null&&!g.hasOwnProperty(ze)&&Tt(s,l,ze,null,g,se);for(ae in g)if(se=g[ae],ce=p[ae],g.hasOwnProperty(ae)&&se!==ce&&(se!=null||ce!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,l));break;default:Tt(s,l,ae,se,g,ce)}return;default:if(xm(l)){for(var Nt in p)se=p[Nt],p.hasOwnProperty(Nt)&&se!==void 0&&!g.hasOwnProperty(Nt)&&a0(s,l,Nt,void 0,g,se);for(de in g)se=g[de],ce=p[de],!g.hasOwnProperty(de)||se===ce||se===void 0&&ce===void 0||a0(s,l,de,se,g,ce);return}}for(var ee in p)se=p[ee],p.hasOwnProperty(ee)&&se!=null&&!g.hasOwnProperty(ee)&&Tt(s,l,ee,null,g,se);for(pe in g)se=g[pe],ce=p[pe],!g.hasOwnProperty(pe)||se===ce||se==null&&ce==null||Tt(s,l,pe,se,g,ce)}function iE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,p=performance.getEntriesByType("resource"),g=0;g<p.length;g++){var b=p[g],E=b.transferSize,j=b.initiatorType,L=b.duration;if(E&&L&&iE(j)){for(j=0,L=b.responseEnd,g+=1;g<p.length;g++){var K=p[g],ae=K.startTime;if(ae>L)break;var de=K.transferSize,pe=K.initiatorType;de&&iE(pe)&&(K=K.responseEnd,j+=de*(K<L?1:(L-ae)/(K-ae)))}if(--g,l+=8*(E+j)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var s0=null,o0=null;function bf(s){return s.nodeType===9?s:s.ownerDocument}function aE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sE(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function l0(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var u0=null;function L5(){var s=window.event;return s&&s.type==="popstate"?s===u0?!1:(u0=s,!0):(u0=null,!1)}var oE=typeof setTimeout=="function"?setTimeout:void 0,U5=typeof clearTimeout=="function"?clearTimeout:void 0,lE=typeof Promise=="function"?Promise:void 0,q5=typeof queueMicrotask=="function"?queueMicrotask:typeof lE<"u"?function(s){return lE.resolve(null).then(s).catch($5)}:oE;function $5(s){setTimeout(function(){throw s})}function Xa(s){return s==="head"}function uE(s,l){var p=l,g=0;do{var b=p.nextSibling;if(s.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"||p==="/&"){if(g===0){s.removeChild(b),il(l);return}g--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")g++;else if(p==="html")Wu(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,Wu(p);for(var E=p.firstChild;E;){var j=E.nextSibling,L=E.nodeName;E[ue]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&E.rel.toLowerCase()==="stylesheet"||p.removeChild(E),E=j}}else p==="body"&&Wu(s.ownerDocument.body);p=b}while(p);il(l)}function cE(s,l){var p=s;s=0;do{var g=p.nextSibling;if(p.nodeType===1?l?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(l?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),g&&g.nodeType===8)if(p=g.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=g}while(p)}function c0(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":c0(p),ke(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function B5(s,l,p,g){for(;s.nodeType===1;){var b=p;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ue])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=Yr(s.nextSibling),s===null)break}return null}function z5(s,l,p){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=Yr(s.nextSibling),s===null))return null;return s}function dE(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Yr(s.nextSibling),s===null))return null;return s}function d0(s){return s.data==="$?"||s.data==="$~"}function f0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function F5(s,l){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||p.readyState!=="loading")l();else{var g=function(){l(),p.removeEventListener("DOMContentLoaded",g)};p.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Yr(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var h0=null;function fE(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(l===0)return Yr(s.nextSibling);l--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||l++}s=s.nextSibling}return null}function hE(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(l===0)return s;l--}else p!=="/$"&&p!=="/&"||l++}s=s.previousSibling}return null}function pE(s,l,p){switch(l=bf(p),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Wu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);ke(s)}var Wr=new Map,mE=new Set;function wf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var la=G.d;G.d={f:V5,r:H5,D:G5,C:K5,L:Y5,m:W5,X:X5,S:J5,M:Q5};function V5(){var s=la.f(),l=ff();return s||l}function H5(s){var l=je(s);l!==null&&l.tag===5&&l.type==="form"?MS(l):la.r(s)}var tl=typeof document>"u"?null:document;function gE(s,l,p){var g=tl;if(g&&typeof l=="string"&&l){var b=Br(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof p=="string"&&(b+='[crossorigin="'+p+'"]'),mE.has(b)||(mE.add(b),s={rel:s,crossOrigin:p,href:l},g.querySelector(b)===null&&(l=g.createElement("link"),Ln(l,"link",s),Ne(l),g.head.appendChild(l)))}}function G5(s){la.D(s),gE("dns-prefetch",s,null)}function K5(s,l){la.C(s,l),gE("preconnect",s,l)}function Y5(s,l,p){la.L(s,l,p);var g=tl;if(g&&s&&l){var b='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&p&&p.imageSrcSet?(b+='[imagesrcset="'+Br(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(b+='[imagesizes="'+Br(p.imageSizes)+'"]')):b+='[href="'+Br(s)+'"]';var E=b;switch(l){case"style":E=nl(s);break;case"script":E=rl(s)}Wr.has(E)||(s=m({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:s,as:l},p),Wr.set(E,s),g.querySelector(b)!==null||l==="style"&&g.querySelector(Ju(E))||l==="script"&&g.querySelector(Xu(E))||(l=g.createElement("link"),Ln(l,"link",s),Ne(l),g.head.appendChild(l)))}}function W5(s,l){la.m(s,l);var p=tl;if(p&&s){var g=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Br(g)+'"][href="'+Br(s)+'"]',E=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=rl(s)}if(!Wr.has(E)&&(s=m({rel:"modulepreload",href:s},l),Wr.set(E,s),p.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Xu(E)))return}g=p.createElement("link"),Ln(g,"link",s),Ne(g),p.head.appendChild(g)}}}function J5(s,l,p){la.S(s,l,p);var g=tl;if(g&&s){var b=Fe(g).hoistableStyles,E=nl(s);l=l||"default";var j=b.get(E);if(!j){var L={loading:0,preload:null};if(j=g.querySelector(Ju(E)))L.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":l},p),(p=Wr.get(E))&&p0(s,p);var K=j=g.createElement("link");Ne(K),Ln(K,"link",s),K._p=new Promise(function(ae,de){K.onload=ae,K.onerror=de}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,_f(j,l,g)}j={type:"stylesheet",instance:j,count:1,state:L},b.set(E,j)}}}function X5(s,l){la.X(s,l);var p=tl;if(p&&s){var g=Fe(p).hoistableScripts,b=rl(s),E=g.get(b);E||(E=p.querySelector(Xu(b)),E||(s=m({src:s,async:!0},l),(l=Wr.get(b))&&m0(s,l),E=p.createElement("script"),Ne(E),Ln(E,"link",s),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(b,E))}}function Q5(s,l){la.M(s,l);var p=tl;if(p&&s){var g=Fe(p).hoistableScripts,b=rl(s),E=g.get(b);E||(E=p.querySelector(Xu(b)),E||(s=m({src:s,async:!0,type:"module"},l),(l=Wr.get(b))&&m0(s,l),E=p.createElement("script"),Ne(E),Ln(E,"link",s),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(b,E))}}function yE(s,l,p,g){var b=(b=me.current)?wf(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=nl(p.href),p=Fe(b).hoistableStyles,g=p.get(l),g||(g={type:"style",instance:null,count:0,state:null},p.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=nl(p.href);var E=Fe(b).hoistableStyles,j=E.get(s);if(j||(b=b.ownerDocument||b,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,j),(E=b.querySelector(Ju(s)))&&!E._p&&(j.instance=E,j.state.loading=5),Wr.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Wr.set(s,p),E||Z5(b,s,p,j.state))),l&&g===null)throw Error(r(528,""));return j}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=rl(p),p=Fe(b).hoistableScripts,g=p.get(l),g||(g={type:"script",instance:null,count:0,state:null},p.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function nl(s){return'href="'+Br(s)+'"'}function Ju(s){return'link[rel="stylesheet"]['+s+"]"}function vE(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function Z5(s,l,p,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Ln(l,"link",p),Ne(l),s.head.appendChild(l))}function rl(s){return'[src="'+Br(s)+'"]'}function Xu(s){return"script[async]"+s}function xE(s,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+Br(p.href)+'"]');if(g)return l.instance=g,Ne(g),g;var b=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Ne(g),Ln(g,"style",b),_f(g,p.precedence,s),l.instance=g;case"stylesheet":b=nl(p.href);var E=s.querySelector(Ju(b));if(E)return l.state.loading|=4,l.instance=E,Ne(E),E;g=vE(p),(b=Wr.get(b))&&p0(g,b),E=(s.ownerDocument||s).createElement("link"),Ne(E);var j=E;return j._p=new Promise(function(L,K){j.onload=L,j.onerror=K}),Ln(E,"link",g),l.state.loading|=4,_f(E,p.precedence,s),l.instance=E;case"script":return E=rl(p.src),(b=s.querySelector(Xu(E)))?(l.instance=b,Ne(b),b):(g=p,(b=Wr.get(E))&&(g=m({},p),m0(g,b)),s=s.ownerDocument||s,b=s.createElement("script"),Ne(b),Ln(b,"link",g),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,_f(g,p.precedence,s));return l.instance}function _f(s,l,p){for(var g=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,E=b,j=0;j<g.length;j++){var L=g[j];if(L.dataset.precedence===l)E=L;else if(E!==b)break}E?E.parentNode.insertBefore(s,E.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(s,l.firstChild))}function p0(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function m0(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Sf=null;function bE(s,l,p){if(Sf===null){var g=new Map,b=Sf=new Map;b.set(p,g)}else b=Sf,g=b.get(p),g||(g=new Map,b.set(p,g));if(g.has(s))return g;for(g.set(s,null),p=p.getElementsByTagName(s),b=0;b<p.length;b++){var E=p[b];if(!(E[ue]||E[yn]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var j=E.getAttribute(l)||"";j=s+j;var L=g.get(j);L?L.push(E):g.set(j,[E])}}return g}function wE(s,l,p){s=s.ownerDocument||s,s.head.insertBefore(p,l==="title"?s.querySelector("head > title"):null)}function eU(s,l,p){if(p===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function _E(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function tU(s,l,p,g){if(p.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var b=nl(g.href),E=l.querySelector(Ju(b));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=kf.bind(s),l.then(s,s)),p.state.loading|=4,p.instance=E,Ne(E);return}E=l.ownerDocument||l,g=vE(g),(b=Wr.get(b))&&p0(g,b),E=E.createElement("link"),Ne(E);var j=E;j._p=new Promise(function(L,K){j.onload=L,j.onerror=K}),Ln(E,"link",g),p.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,l),(l=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=kf.bind(s),l.addEventListener("load",p),l.addEventListener("error",p))}}var g0=0;function nU(s,l){return s.stylesheets&&s.count===0&&Cf(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var g=setTimeout(function(){if(s.stylesheets&&Cf(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+l);0<s.imgBytes&&g0===0&&(g0=62500*D5());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Cf(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>g0?50:800)+l);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function kf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ef=null;function Cf(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ef=new Map,l.forEach(rU,s),Ef=null,kf.call(s))}function rU(s,l){if(!(l.state.loading&4)){var p=Ef.get(s);if(p)var g=p.get(null);else{p=new Map,Ef.set(s,p);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var j=b[E];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(p.set(j.dataset.precedence,j),g=j)}g&&p.set(null,g)}b=l.instance,j=b.getAttribute("data-precedence"),E=p.get(j)||g,E===g&&p.set(null,b),p.set(j,b),this.count++,g=kf.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),E?E.parentNode.insertBefore(b,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var Qu={$$typeof:N,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function iU(s,l,p,g,b,E,j,L,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=uu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.hiddenUpdates=uu(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function SE(s,l,p,g,b,E,j,L,K,ae,de,pe){return s=new iU(s,l,p,j,K,ae,de,pe,L),l=1,E===!0&&(l|=24),E=wr(3,null,null,l),s.current=E,E.stateNode=s,l=Wm(),l.refCount++,s.pooledCache=l,l.refCount++,E.memoizedState={element:g,isDehydrated:p,cache:l},Zm(E),s}function kE(s){return s?(s=Ro,s):Ro}function EE(s,l,p,g,b,E){b=kE(b),g.context===null?g.context=b:g.pendingContext=b,g=$a(l),g.payload={element:p},E=E===void 0?null:E,E!==null&&(g.callback=E),p=Ba(s,g,l),p!==null&&(dr(p,s,l),ju(p,s,l))}function CE(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function y0(s,l){CE(s,l),(s=s.alternate)&&CE(s,l)}function TE(s){if(s.tag===13||s.tag===31){var l=Ns(s,67108864);l!==null&&dr(l,s,67108864),y0(s,67108864)}}function NE(s){if(s.tag===13||s.tag===31){var l=Cr();l=du(l);var p=Ns(s,l);p!==null&&dr(p,s,l),y0(s,l)}}var Tf=!0;function aU(s,l,p,g){var b=U.T;U.T=null;var E=G.p;try{G.p=2,v0(s,l,p,g)}finally{G.p=E,U.T=b}}function sU(s,l,p,g){var b=U.T;U.T=null;var E=G.p;try{G.p=8,v0(s,l,p,g)}finally{G.p=E,U.T=b}}function v0(s,l,p,g){if(Tf){var b=x0(g);if(b===null)i0(s,l,g,Nf,p),jE(s,g);else if(lU(b,s,l,p,g))g.stopPropagation();else if(jE(s,g),l&4&&-1<oU.indexOf(s)){for(;b!==null;){var E=je(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var j=xr(E.pendingLanes);if(j!==0){var L=E;for(L.pendingLanes|=2,L.entangledLanes|=2;j;){var K=1<<31-Ie(j);L.entanglements[1]|=K,j&=~K}Oi(E),(yt&6)===0&&(cf=nn()+500,Gu(0))}}break;case 31:case 13:L=Ns(E,2),L!==null&&dr(L,E,2),ff(),y0(E,2)}if(E=x0(g),E===null&&i0(s,l,g,Nf,p),E===b)break;b=E}b!==null&&g.stopPropagation()}else i0(s,l,g,null,p)}}function x0(s){return s=wm(s),b0(s)}var Nf=null;function b0(s){if(Nf=null,s=xe(s),s!==null){var l=a(s);if(l===null)s=null;else{var p=l.tag;if(p===13){if(s=o(l),s!==null)return s;s=null}else if(p===31){if(s=u(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Nf=s,null}function AE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_s()){case fe:return 2;case _e:return 8;case Ue:case Xe:return 32;case tt:return 268435456;default:return 32}default:return 32}}var w0=!1,Qa=null,Za=null,es=null,Zu=new Map,ec=new Map,ts=[],oU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jE(s,l){switch(s){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Zu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(l.pointerId)}}function tc(s,l,p,g,b,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:p,eventSystemFlags:g,nativeEvent:E,targetContainers:[b]},l!==null&&(l=je(l),l!==null&&TE(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function lU(s,l,p,g,b){switch(l){case"focusin":return Qa=tc(Qa,s,l,p,g,b),!0;case"dragenter":return Za=tc(Za,s,l,p,g,b),!0;case"mouseover":return es=tc(es,s,l,p,g,b),!0;case"pointerover":var E=b.pointerId;return Zu.set(E,tc(Zu.get(E)||null,s,l,p,g,b)),!0;case"gotpointercapture":return E=b.pointerId,ec.set(E,tc(ec.get(E)||null,s,l,p,g,b)),!0}return!1}function PE(s){var l=xe(s.target);if(l!==null){var p=a(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){s.blockedOn=l,bd(s.priority,function(){NE(p)});return}}else if(l===31){if(l=u(p),l!==null){s.blockedOn=l,bd(s.priority,function(){NE(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Af(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=x0(s.nativeEvent);if(p===null){p=s.nativeEvent;var g=new p.constructor(p.type,p);bm=g,p.target.dispatchEvent(g),bm=null}else return l=je(p),l!==null&&TE(l),s.blockedOn=p,!1;l.shift()}return!0}function ME(s,l,p){Af(s)&&p.delete(l)}function uU(){w0=!1,Qa!==null&&Af(Qa)&&(Qa=null),Za!==null&&Af(Za)&&(Za=null),es!==null&&Af(es)&&(es=null),Zu.forEach(ME),ec.forEach(ME)}function jf(s,l){s.blockedOn===l&&(s.blockedOn=null,w0||(w0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uU)))}var Pf=null;function OE(s){Pf!==s&&(Pf=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Pf===s&&(Pf=null);for(var l=0;l<s.length;l+=3){var p=s[l],g=s[l+1],b=s[l+2];if(typeof g!="function"){if(b0(g||p)===null)continue;break}var E=je(p);E!==null&&(s.splice(l,3),l-=3,xg(E,{pending:!0,data:b,method:p.method,action:g},g,b))}}))}function il(s){function l(K){return jf(K,s)}Qa!==null&&jf(Qa,s),Za!==null&&jf(Za,s),es!==null&&jf(es,s),Zu.forEach(l),ec.forEach(l);for(var p=0;p<ts.length;p++){var g=ts[p];g.blockedOn===s&&(g.blockedOn=null)}for(;0<ts.length&&(p=ts[0],p.blockedOn===null);)PE(p),p.blockedOn===null&&ts.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(g=0;g<p.length;g+=3){var b=p[g],E=p[g+1],j=b[zn]||null;if(typeof E=="function")j||OE(p);else if(j){var L=null;if(E&&E.hasAttribute("formAction")){if(b=E,j=E[zn]||null)L=j.formAction;else if(b0(b)!==null)continue}else L=j.action;typeof L=="function"?p[g+1]=L:(p.splice(g,3),g-=3),OE(p)}}}function RE(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(j){return b=j})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),g||setTimeout(p,20)}function p(){if(!g&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(p,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function _0(s){this._internalRoot=s}Mf.prototype.render=_0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var p=l.current,g=Cr();EE(p,g,s,l,null,null)},Mf.prototype.unmount=_0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;EE(s.current,2,null,s,null,null),ff(),l[Oa]=null}};function Mf(s){this._internalRoot=s}Mf.prototype.unstable_scheduleHydration=function(s){if(s){var l=xd();s={blockedOn:null,target:s,priority:l};for(var p=0;p<ts.length&&l!==0&&l<ts[p].priority;p++);ts.splice(p,0,s),p===0&&PE(s)}};var IE=t.version;if(IE!=="19.2.0")throw Error(r(527,IE,"19.2.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var cU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{Ot=Of.inject(cU),Et=Of}catch{}}return rc.createRoot=function(s,l){if(!i(s))throw Error(r(299));var p=!1,g="",b=zS,E=FS,j=VS;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError)),l=SE(s,1,!1,null,null,p,g,null,b,E,j,RE),s[Oa]=l.current,r0(s),new _0(l)},rc.hydrateRoot=function(s,l,p){if(!i(s))throw Error(r(299));var g=!1,b="",E=zS,j=FS,L=VS,K=null;return p!=null&&(p.unstable_strictMode===!0&&(g=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onUncaughtError!==void 0&&(E=p.onUncaughtError),p.onCaughtError!==void 0&&(j=p.onCaughtError),p.onRecoverableError!==void 0&&(L=p.onRecoverableError),p.formState!==void 0&&(K=p.formState)),l=SE(s,1,!0,l,p??null,g,b,K,E,j,L,RE),l.context=kE(null),p=l.current,g=Cr(),g=du(g),b=$a(g),b.callback=null,Ba(p,b,g),p=g,l.current.lanes=p,fi(l,p),Oi(l),s[Oa]=l.current,r0(s),new Mf(l)},rc.version="19.2.0",rc}var HE;function SU(){if(HE)return C0.exports;HE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),C0.exports=_U(),C0.exports}var kU=SU();const EU=Ur(kU);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GE="popstate";function CU(e={}){function t(i,a){let{pathname:o="/",search:u="",hash:f=""}=mo(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Rv("",{pathname:o,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let f=i.location.href,d=f.indexOf("#");u=d===-1?f:f.slice(0,d)}return u+"#"+(typeof a=="string"?a:jc(a))}function r(i,a){ii(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return NU(t,n,r,e)}function Yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ii(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TU(){return Math.random().toString(36).substring(2,10)}function KE(e,t){return{usr:e.state,key:e.key,idx:t}}function Rv(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?mo(t):t,state:n,key:t&&t.key||r||TU()}}function jc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function mo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function NU(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,u="POP",f=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){u="POP";let C=h(),T=C==null?null:C-d;d=C,f&&f({action:u,location:S.location,delta:T})}function y(C,T){u="PUSH";let A=Rv(S.location,C,T);n&&n(A,C),d=h()+1;let N=KE(A,d),O=S.createHref(A);try{o.pushState(N,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(O)}a&&f&&f({action:u,location:S.location,delta:1})}function v(C,T){u="REPLACE";let A=Rv(S.location,C,T);n&&n(A,C),d=h();let N=KE(A,d),O=S.createHref(A);o.replaceState(N,"",O),a&&f&&f({action:u,location:S.location,delta:0})}function k(C){return AU(C)}let S={get action(){return u},get location(){return e(i,o)},listen(C){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(GE,m),f=C,()=>{i.removeEventListener(GE,m),f=null}},createHref(C){return t(i,C)},createURL:k,encodeLocation(C){let T=k(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:v,go(C){return o.go(C)}};return S}function AU(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Yt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:jc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function BP(e,t,n="/"){return jU(e,t,n,!1)}function jU(e,t,n,r){let i=typeof t=="string"?mo(t):t,a=ya(i.pathname||"/",n);if(a==null)return null;let o=zP(e);PU(o);let u=null;for(let f=0;u==null&&f<o.length;++f){let d=zU(a);u=$U(o[f],d,r)}return u}function zP(e,t=[],n=[],r="",i=!1){let a=(o,u,f=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&f)return;Yt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=pa([r,h.relativePath]),y=n.concat(h);o.children&&o.children.length>0&&(Yt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),zP(o.children,t,y,m,f)),!(o.path==null&&!o.index)&&t.push({path:m,score:UU(m,o.index),routesMeta:y})};return e.forEach((o,u)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))a(o,u);else for(let d of FP(o.path))a(o,u,!0,d)}),t}function FP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=FP(r.join("/")),u=[];return u.push(...o.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...o),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function PU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qU(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var MU=/^:[\w-]+$/,OU=3,RU=2,IU=1,DU=10,LU=-2,YE=e=>e==="*";function UU(e,t){let n=e.split("/"),r=n.length;return n.some(YE)&&(r+=LU),t&&(r+=RU),n.filter(i=>!YE(i)).reduce((i,a)=>i+(MU.test(a)?OU:a===""?IU:DU),r)}function qU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function $U(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let u=0;u<r.length;++u){let f=r[u],d=u===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",m=vh({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},h),y=f.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=vh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:pa([a,m.pathname]),pathnameBase:GU(pa([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=pa([a,m.pathnameBase]))}return o}function vh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BU(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},y)=>{if(h==="*"){let k=u[y]||"";o=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const v=u[y];return m&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function BU(e,t=!1,n=!0){ii(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function zU(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ii(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ya(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function FU(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?mo(e):e;return{pathname:n?n.startsWith("/")?n:VU(n,t):t,search:KU(r),hash:YU(i)}}function VU(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function j0(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HU(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cb(e){let t=HU(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function db(e,t,n,r=!1){let i;typeof e=="string"?i=mo(e):(i={...e},Yt(!i.pathname||!i.pathname.includes("?"),j0("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),j0("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),j0("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,u;if(o==null)u=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?t[m]:"/"}let f=FU(i,u),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||h)&&(f.pathname+="/"),f}var pa=e=>e.join("/").replace(/\/\/+/g,"/"),GU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var VP=["POST","PUT","PATCH","DELETE"];new Set(VP);var JU=["GET",...VP];new Set(JU);var Bl=_.createContext(null);Bl.displayName="DataRouter";var gp=_.createContext(null);gp.displayName="DataRouterState";_.createContext(!1);var HP=_.createContext({isTransitioning:!1});HP.displayName="ViewTransition";var XU=_.createContext(new Map);XU.displayName="Fetchers";var QU=_.createContext(null);QU.displayName="Await";var ki=_.createContext(null);ki.displayName="Navigation";var Gc=_.createContext(null);Gc.displayName="Location";var Ei=_.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var fb=_.createContext(null);fb.displayName="RouteError";function ZU(e,{relative:t}={}){Yt(zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=_.useContext(ki),{hash:i,pathname:a,search:o}=Kc(e,{relative:t}),u=a;return n!=="/"&&(u=a==="/"?n:pa([n,a])),r.createHref({pathname:u,search:o,hash:i})}function zl(){return _.useContext(Gc)!=null}function Sa(){return Yt(zl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Gc).location}var GP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KP(e){_.useContext(ki).static||_.useLayoutEffect(e)}function yp(){let{isDataRoute:e}=_.useContext(Ei);return e?p6():e6()}function e6(){Yt(zl(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(Bl),{basename:t,navigator:n}=_.useContext(ki),{matches:r}=_.useContext(Ei),{pathname:i}=Sa(),a=JSON.stringify(cb(r)),o=_.useRef(!1);return KP(()=>{o.current=!0}),_.useCallback((f,d={})=>{if(ii(o.current,GP),!o.current)return;if(typeof f=="number"){n.go(f);return}let h=db(f,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:pa([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}var t6=_.createContext(null);function n6(e){let t=_.useContext(Ei).outlet;return _.useMemo(()=>t&&_.createElement(t6.Provider,{value:e},t),[t,e])}function Kc(e,{relative:t}={}){let{matches:n}=_.useContext(Ei),{pathname:r}=Sa(),i=JSON.stringify(cb(n));return _.useMemo(()=>db(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function r6(e,t){return YP(e,t)}function YP(e,t,n,r,i){var A;Yt(zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=_.useContext(ki),{matches:o}=_.useContext(Ei),u=o[o.length-1],f=u?u.params:{},d=u?u.pathname:"/",h=u?u.pathnameBase:"/",m=u&&u.route;{let N=m&&m.path||"";WP(d,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=Sa(),v;if(t){let N=typeof t=="string"?mo(t):t;Yt(h==="/"||((A=N.pathname)==null?void 0:A.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),v=N}else v=y;let k=v.pathname||"/",S=k;if(h!=="/"){let N=h.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=BP(e,{pathname:S});ii(m||C!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ii(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=l6(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:pa([h,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:pa([h,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,n,r,i);return t&&T?_.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function i6(){let e=h6(),t=WU(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:a},"ErrorBoundary")," or"," ",_.createElement("code",{style:a},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:i},n):null,o)}var a6=_.createElement(i6,null),s6=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?_.createElement(Ei.Provider,{value:this.props.routeContext},_.createElement(fb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function o6({routeContext:e,match:t,children:n}){let r=_.useContext(Bl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Ei.Provider,{value:e},n)}function l6(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Yt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,f=-1;if(n)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=d),h.route.id){let{loaderData:m,errors:y}=n,v=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){u=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let y,v=!1,k=null,S=null;n&&(y=o&&h.route.id?o[h.route.id]:void 0,k=h.route.errorElement||a6,u&&(f<0&&m===0?(WP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):f===m&&(v=!0,S=h.route.hydrateFallbackElement||null)));let C=t.concat(a.slice(0,m+1)),T=()=>{let A;return y?A=k:v?A=S:h.route.Component?A=_.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,_.createElement(o6,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?_.createElement(s6,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):T()},null)}function hb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u6(e){let t=_.useContext(Bl);return Yt(t,hb(e)),t}function c6(e){let t=_.useContext(gp);return Yt(t,hb(e)),t}function d6(e){let t=_.useContext(Ei);return Yt(t,hb(e)),t}function pb(e){let t=d6(e),n=t.matches[t.matches.length-1];return Yt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function f6(){return pb("useRouteId")}function h6(){var r;let e=_.useContext(fb),t=c6("useRouteError"),n=pb("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function p6(){let{router:e}=u6("useNavigate"),t=pb("useNavigate"),n=_.useRef(!1);return KP(()=>{n.current=!0}),_.useCallback(async(i,a={})=>{ii(n.current,GP),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var WE={};function WP(e,t,n){!t&&!WE[e]&&(WE[e]=!0,ii(!1,n))}_.memo(m6);function m6({routes:e,future:t,state:n,unstable_onError:r}){return YP(e,void 0,n,r,t)}function Iv({to:e,replace:t,state:n,relative:r}){Yt(zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(ki);ii(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=_.useContext(Ei),{pathname:o}=Sa(),u=yp(),f=db(e,cb(a),o,r==="path"),d=JSON.stringify(f);return _.useEffect(()=>{u(JSON.parse(d),{replace:t,state:n,relative:r})},[u,d,r,t,n]),null}function JP(e){return n6(e.context)}function $t(e){Yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function g6({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){Yt(!zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=mo(n));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:y="default"}=n,v=_.useMemo(()=>{let k=ya(f,o);return k==null?null:{location:{pathname:k,search:d,hash:h,state:m,key:y},navigationType:r}},[o,f,d,h,m,y,r]);return ii(v!=null,`<Router basename="${o}"> is not able to match the URL "${f}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:_.createElement(ki.Provider,{value:u},_.createElement(Gc.Provider,{children:t,value:v}))}function y6({children:e,location:t}){return r6(Dv(e),t)}function Dv(e,t=[]){let n=[];return _.Children.forEach(e,(r,i)=>{if(!_.isValidElement(r))return;let a=[...t,i];if(r.type===_.Fragment){n.push.apply(n,Dv(r.props.children,a));return}Yt(r.type===$t,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dv(r.props.children,a)),n.push(o)}),n}var ch="get",dh="application/x-www-form-urlencoded";function vp(e){return e!=null&&typeof e.tagName=="string"}function v6(e){return vp(e)&&e.tagName.toLowerCase()==="button"}function x6(e){return vp(e)&&e.tagName.toLowerCase()==="form"}function b6(e){return vp(e)&&e.tagName.toLowerCase()==="input"}function w6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _6(e,t){return e.button===0&&(!t||t==="_self")&&!w6(e)}var Rf=null;function S6(){if(Rf===null)try{new FormData(document.createElement("form"),0),Rf=!1}catch{Rf=!0}return Rf}var k6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function P0(e){return e!=null&&!k6.has(e)?(ii(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null):e}function E6(e,t){let n,r,i,a,o;if(x6(e)){let u=e.getAttribute("action");r=u?ya(u,t):null,n=e.getAttribute("method")||ch,i=P0(e.getAttribute("enctype"))||dh,a=new FormData(e)}else if(v6(e)||b6(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||u.getAttribute("action");if(r=f?ya(f,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||ch,i=P0(e.getAttribute("formenctype"))||P0(u.getAttribute("enctype"))||dh,a=new FormData(u,e),!S6()){let{name:d,type:h,value:m}=e;if(h==="image"){let y=d?`${d}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else d&&a.append(d,m)}}else{if(vp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ch,r=null,i=dh,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function C6(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&ya(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function T6(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N6(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function A6(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await T6(a,n);return o.links?o.links():[]}return[]}));return O6(r.flat(1).filter(N6).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function JE(e,t,n,r,i,a){let o=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,u=(f,d)=>{var h;return n[d].pathname!==f.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==f.params["*"]};return a==="assets"?t.filter((f,d)=>o(f,d)||u(f,d)):a==="data"?t.filter((f,d)=>{var m;let h=r.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(o(f,d)||u(f,d))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function j6(e,t,{includeHydrateFallback:n}={}){return P6(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function P6(e){return[...new Set(e)]}function M6(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function O6(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(M6(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function XP(){let e=_.useContext(Bl);return mb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function R6(){let e=_.useContext(gp);return mb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gb=_.createContext(void 0);gb.displayName="FrameworkContext";function QP(){let e=_.useContext(gb);return mb(e,"You must render this element inside a <HydratedRouter> element"),e}function I6(e,t){let n=_.useContext(gb),[r,i]=_.useState(!1),[a,o]=_.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=t,y=_.useRef(null);_.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let S=T=>{T.forEach(A=>{o(A.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[e]),_.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{i(!0)},k=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,y,{}]:[a,y,{onFocus:ic(u,v),onBlur:ic(f,k),onMouseEnter:ic(d,v),onMouseLeave:ic(h,k),onTouchStart:ic(m,v)}]:[!1,y,{}]}function ic(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function D6({page:e,...t}){let{router:n}=XP(),r=_.useMemo(()=>BP(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?_.createElement(U6,{page:e,matches:r,...t}):null}function L6(e){let{manifest:t,routeModules:n}=QP(),[r,i]=_.useState([]);return _.useEffect(()=>{let a=!1;return A6(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function U6({page:e,matches:t,...n}){let r=Sa(),{manifest:i,routeModules:a}=QP(),{basename:o}=XP(),{loaderData:u,matches:f}=R6(),d=_.useMemo(()=>JE(e,t,f,i,r,"data"),[e,t,f,i,r]),h=_.useMemo(()=>JE(e,t,f,i,r,"assets"),[e,t,f,i,r]),m=_.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,S=!1;if(t.forEach(T=>{var N;let A=i.routes[T.route.id];!A||!A.hasLoader||(!d.some(O=>O.route.id===T.route.id)&&T.route.id in u&&((N=a[T.route.id])!=null&&N.shouldRevalidate)||A.hasClientLoader?S=!0:k.add(T.route.id))}),k.size===0)return[];let C=C6(e,o,"data");return S&&k.size>0&&C.searchParams.set("_routes",t.filter(T=>k.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[o,u,r,i,d,t,e,a]),y=_.useMemo(()=>j6(h,i),[h,i]),v=L6(h);return _.createElement(_.Fragment,null,m.map(k=>_.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),y.map(k=>_.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),v.map(({key:k,link:S})=>_.createElement("link",{key:k,nonce:n.nonce,...S})))}function q6(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ZP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZP&&(window.__reactRouterVersion="7.9.4")}catch{}function $6({basename:e,children:t,window:n}){let r=_.useRef();r.current==null&&(r.current=CU({window:n,v5Compat:!0}));let i=r.current,[a,o]=_.useState({action:i.action,location:i.location}),u=_.useCallback(f=>{_.startTransition(()=>o(f))},[o]);return _.useLayoutEffect(()=>i.listen(u),[i,u]),_.createElement(g6,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var eM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xp=_.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:u,target:f,to:d,preventScrollReset:h,viewTransition:m,...y},v){let{basename:k}=_.useContext(ki),S=typeof d=="string"&&eM.test(d),C,T=!1;if(typeof d=="string"&&S&&(C=d,ZP))try{let q=new URL(window.location.href),W=d.startsWith("//")?new URL(q.protocol+d):new URL(d),F=ya(W.pathname,k);W.origin===q.origin&&F!=null?d=F+W.search+W.hash:T=!0}catch{ii(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=ZU(d,{relative:i}),[N,O,M]=I6(r,y),P=F6(d,{replace:o,state:u,target:f,preventScrollReset:h,relative:i,viewTransition:m});function D(q){t&&t(q),q.defaultPrevented||P(q)}let Y=_.createElement("a",{...y,...M,href:C||A,onClick:T||a?t:D,ref:q6(v,O),target:f,"data-discover":!S&&n==="render"?"true":void 0});return N&&!S?_.createElement(_.Fragment,null,Y,_.createElement(D6,{page:A})):Y});xp.displayName="Link";var Lv=_.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:u,children:f,...d},h){let m=Kc(o,{relative:d.relative}),y=Sa(),v=_.useContext(gp),{navigator:k,basename:S}=_.useContext(ki),C=v!=null&&Y6(m)&&u===!0,T=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,A=y.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(A=A.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&S&&(N=ya(N,S)||N);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let M=A===T||!i&&A.startsWith(T)&&A.charAt(O)==="/",P=N!=null&&(N===T||!i&&N.startsWith(T)&&N.charAt(T.length)==="/"),D={isActive:M,isPending:P,isTransitioning:C},Y=M?t:void 0,q;typeof r=="function"?q=r(D):q=[r,M?"active":null,P?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(D):a;return _.createElement(xp,{...d,"aria-current":Y,className:q,ref:h,style:W,to:o,viewTransition:u},typeof f=="function"?f(D):f)});Lv.displayName="NavLink";var B6=_.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=ch,action:u,onSubmit:f,relative:d,preventScrollReset:h,viewTransition:m,...y},v)=>{let k=G6(),S=K6(u,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&eM.test(u),A=N=>{if(f&&f(N),N.defaultPrevented)return;N.preventDefault();let O=N.nativeEvent.submitter,M=(O==null?void 0:O.getAttribute("formmethod"))||o;k(O||N.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m})};return _.createElement("form",{ref:v,method:C,action:S,onSubmit:r?f:A,...y,"data-discover":!T&&e==="render"?"true":void 0})});B6.displayName="Form";function z6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tM(e){let t=_.useContext(Bl);return Yt(t,z6(e)),t}function F6(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let u=yp(),f=Sa(),d=Kc(e,{relative:a});return _.useCallback(h=>{if(_6(h,t)){h.preventDefault();let m=n!==void 0?n:jc(f)===jc(d);u(e,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[f,u,d,n,r,t,e,i,a,o])}var V6=0,H6=()=>`__${String(++V6)}__`;function G6(){let{router:e}=tM("useSubmit"),{basename:t}=_.useContext(ki),n=f6();return _.useCallback(async(r,i={})=>{let{action:a,method:o,encType:u,formData:f,body:d}=E6(r,t);if(i.navigate===!1){let h=i.fetcherKey||H6();await e.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||o,formEncType:i.encType||u,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:d,formMethod:i.method||o,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function K6(e,{relative:t}={}){let{basename:n}=_.useContext(ki),r=_.useContext(Ei);Yt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Kc(e||".",{relative:t})},o=Sa();if(e==null){a.search=o.search;let u=new URLSearchParams(a.search),f=u.getAll("index");if(f.some(h=>h==="")){u.delete("index"),f.filter(m=>m).forEach(m=>u.append("index",m));let h=u.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:pa([n,a.pathname])),jc(a)}function Y6(e,{relative:t}={}){let n=_.useContext(HP);Yt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tM("useViewTransitionState"),i=Kc(e,{relative:t});if(!n.isTransitioning)return!1;let a=ya(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ya(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vh(i.pathname,o)!=null||vh(i.pathname,a)!=null}var nM=$P(),Uv=function(e,t){return Uv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Uv(e,t)};function rM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Uv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var xh=function(){return xh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xh.apply(this,arguments)};function Fl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function iM(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function aM(e,t){return function(n,r){t(n,r,e)}}function sM(e,t,n,r,i,a){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var u=r.kind,f=u==="getter"?"get":u==="setter"?"set":"value",d=!t&&e?r.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),m,y=!1,v=n.length-1;v>=0;v--){var k={};for(var S in r)k[S]=S==="access"?{}:r[S];for(var S in r.access)k.access[S]=r.access[S];k.addInitializer=function(T){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(T||null))};var C=(0,n[v])(u==="accessor"?{get:h.get,set:h.set}:h[f],k);if(u==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(m=o(C.get))&&(h.get=m),(m=o(C.set))&&(h.set=m),(m=o(C.init))&&i.unshift(m)}else(m=o(C))&&(u==="field"?i.unshift(m):h[f]=m)}d&&Object.defineProperty(d,r.name,h),y=!0}function oM(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function lM(e){return typeof e=="symbol"?e:"".concat(e)}function uM(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function cM(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Re(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(h){try{d(r.next(h))}catch(m){o(m)}}function f(h){try{d(r.throw(h))}catch(m){o(m)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((r=r.apply(e,t||[])).next())})}function dM(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(h){return f([d,h])}}function f(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var bp=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function fM(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bp(t,e,n)}function bh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yb(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function hM(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(yb(arguments[t]));return e}function pM(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)r[i]=a[o];return r}function mM(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Nl(e){return this instanceof Nl?(this.v=e,this):new Nl(e)}function gM(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(k){return Promise.resolve(k).then(v,m)}}function u(v,k){r[v]&&(i[v]=function(S){return new Promise(function(C,T){a.push([v,S,C,T])>1||f(v,S)})},k&&(i[v]=k(i[v])))}function f(v,k){try{d(r[v](k))}catch(S){y(a[0][3],S)}}function d(v){v.value instanceof Nl?Promise.resolve(v.value.v).then(h,m):y(a[0][2],v)}function h(v){f("next",v)}function m(v){f("throw",v)}function y(v,k){v(k),a.shift(),a.length&&f(a[0][0],a[0][1])}}function yM(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:Nl(e[i](o)),done:!1}:a?a(o):o}:a}}function vM(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof bh=="function"?bh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(u,f){o=e[a](o),i(u,f,o.done,o.value)})}}function i(a,o,u,f){Promise.resolve(f).then(function(d){a({value:d,done:u})},o)}}function xM(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var W6=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},qv=function(e){return qv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},qv(e)};function bM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=qv(e),r=0;r<n.length;r++)n[r]!=="default"&&bp(t,e,n[r]);return W6(t,e),t}function wM(e){return e&&e.__esModule?e:{default:e}}function _M(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function SM(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function kM(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function EM(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var J6=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function CM(e){function t(a){e.error=e.hasError?new J6(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function TM(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?t?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):e}const X6={__extends:rM,__assign:xh,__rest:Fl,__decorate:iM,__param:aM,__esDecorate:sM,__runInitializers:oM,__propKey:lM,__setFunctionName:uM,__metadata:cM,__awaiter:Re,__generator:dM,__createBinding:bp,__exportStar:fM,__values:bh,__read:yb,__spread:hM,__spreadArrays:pM,__spreadArray:mM,__await:Nl,__asyncGenerator:gM,__asyncDelegator:yM,__asyncValues:vM,__makeTemplateObject:xM,__importStar:bM,__importDefault:wM,__classPrivateFieldGet:_M,__classPrivateFieldSet:SM,__classPrivateFieldIn:kM,__addDisposableResource:EM,__disposeResources:CM,__rewriteRelativeImportExtension:TM},Q6=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:EM,get __assign(){return xh},__asyncDelegator:yM,__asyncGenerator:gM,__asyncValues:vM,__await:Nl,__awaiter:Re,__classPrivateFieldGet:_M,__classPrivateFieldIn:kM,__classPrivateFieldSet:SM,__createBinding:bp,__decorate:iM,__disposeResources:CM,__esDecorate:sM,__exportStar:fM,__extends:rM,__generator:dM,__importDefault:wM,__importStar:bM,__makeTemplateObject:xM,__metadata:cM,__param:aM,__propKey:lM,__read:yb,__rest:Fl,__rewriteRelativeImportExtension:TM,__runInitializers:oM,__setFunctionName:uM,__spread:hM,__spreadArray:mM,__spreadArrays:pM,__values:bh,default:X6},Symbol.toStringTag,{value:"Module"})),Z6="modulepreload",eq=function(e){return"/Gestion-Farma-AI/"+e},XE={},Vl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=o(n.map(d=>{if(d=eq(d),d in XE)return;XE[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Z6,h||(y.as="script"),y.crossOrigin="",y.href=d,f&&y.setAttribute("nonce",f),document.head.appendChild(y),h)return new Promise((v,k)=>{y.addEventListener("load",v),y.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},tq=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Vl(async()=>{const{default:r}=await Promise.resolve().then(()=>go);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class vb extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class QE extends vb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ZE extends vb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class eC extends vb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $v;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($v||($v={}));class nq{constructor(t,{headers:n={},customFetch:r,region:i=$v.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=tq(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Re(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:a,method:o,body:u,signal:f}=r;let d={},{region:h}=r;h||(h=this.region);const m=new URL(`${this.url}/${n}`);h&&h!=="any"&&(d["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(d["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(d["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;const v=yield this.fetch(m.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:y,signal:f}).catch(T=>{throw T.name==="AbortError"?T:new QE(T)}),k=v.headers.get("x-relay-error");if(k&&k==="true")throw new ZE(v);if(!v.ok)throw new eC(v);let S=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return S==="application/json"?C=yield v.json():S==="application/octet-stream"||S==="application/pdf"?C=yield v.blob():S==="text/event-stream"?C=v:S==="multipart/form-data"?C=yield v.formData():C=yield v.text(),{data:C,error:null,response:v}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new QE(a)}:{data:null,error:a,response:a instanceof eC||a instanceof ZE?a.context:void 0}}})}}var Vn={};const Hl=UP(Q6);var If={},Df={},Lf={},Uf={},qf={},rq=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Al=rq();const iq=Al.fetch,NM=Al.fetch.bind(Al),AM=Al.Headers,aq=Al.Request,sq=Al.Response,go=Object.freeze(Object.defineProperty({__proto__:null,Headers:AM,Request:aq,Response:sq,default:NM,fetch:iq},Symbol.toStringTag,{value:"Module"})),oq=UP(go);var $f={},tC;function jM(){if(tC)return $f;tC=1,Object.defineProperty($f,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return $f.default=e,$f}var nC;function PM(){if(nC)return qf;nC=1,Object.defineProperty(qf,"__esModule",{value:!0});const e=Hl,t=e.__importDefault(oq),n=e.__importDefault(jM());class r{constructor(a){var o,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,m,y,v;let k=null,S=null,C=null,T=d.status,A=d.statusText;if(d.ok){if(this.method!=="HEAD"){const P=await d.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?S=P:S=JSON.parse(P))}const O=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),M=(y=d.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&M&&M.length>1&&(C=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(k={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,C=null,T=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const O=await d.text();try{k=JSON.parse(O),Array.isArray(k)&&d.status===404&&(S=[],k=null,T=200,A="OK")}catch{d.status===404&&O===""?(T=204,A="No Content"):k={message:O}}if(k&&this.isMaybeSingle&&(!((v=k==null?void 0:k.details)===null||v===void 0)&&v.includes("0 rows"))&&(k=null,T=200,A="OK"),k&&this.shouldThrowOnError)throw new n.default(k)}return{error:k,data:S,count:C,status:T,statusText:A}});return this.shouldThrowOnError||(f=f.catch(d=>{var h,m,y;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(m=d==null?void 0:d.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(y=d==null?void 0:d.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,o)}returns(){return this}overrideTypes(){return this}}return qf.default=r,qf}var rC;function MM(){if(rC)return Uf;rC=1,Object.defineProperty(Uf,"__esModule",{value:!0});const t=Hl.__importDefault(PM());class n extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:u,referencedTable:f=u}={}){const d=f?`${f}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:u=o}={}){const f=typeof u>"u"?"offset":`${u}.offset`,d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:u=!1,wal:f=!1,format:d="text"}={}){var h;const m=[i?"analyze":null,a?"verbose":null,o?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${y}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Uf.default=n,Uf}var iC;function xb(){if(iC)return Lf;iC=1,Object.defineProperty(Lf,"__esModule",{value:!0});const t=Hl.__importDefault(MM());class n extends t.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${f}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return Lf.default=n,Lf}var aC;function OM(){if(aC)return Df;aC=1,Object.defineProperty(Df,"__esModule",{value:!0});const t=Hl.__importDefault(xb());class n{constructor(i,{headers:a={},schema:o,fetch:u}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=u}select(i,a){const{head:o=!1,count:u}=a??{},f=o?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var u;const f="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:u,defaultToNull:f=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(m.length>0){const y=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Df.default=n,Df}var sC;function lq(){if(sC)return If;sC=1,Object.defineProperty(If,"__esModule",{value:!0});const e=Hl,t=e.__importDefault(OM()),n=e.__importDefault(xb());class r{constructor(a,{headers:o={},schema:u,fetch:f}={}){this.url=a,this.headers=new Headers(o),this.schemaName=u,this.fetch=f}from(a){const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:u=!1,get:f=!1,count:d}={}){var h;let m;const y=new URL(`${this.url}/rpc/${a}`);let v;u||f?(m=u?"HEAD":"GET",Object.entries(o).filter(([S,C])=>C!==void 0).map(([S,C])=>[S,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([S,C])=>{y.searchParams.append(S,C)})):(m="POST",v=o);const k=new Headers(this.headers);return d&&k.set("Prefer",`count=${d}`),new n.default({method:m,url:y,headers:k,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return If.default=r,If}var oC;function uq(){if(oC)return Vn;oC=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.PostgrestError=Vn.PostgrestBuilder=Vn.PostgrestTransformBuilder=Vn.PostgrestFilterBuilder=Vn.PostgrestQueryBuilder=Vn.PostgrestClient=void 0;const e=Hl,t=e.__importDefault(lq());Vn.PostgrestClient=t.default;const n=e.__importDefault(OM());Vn.PostgrestQueryBuilder=n.default;const r=e.__importDefault(xb());Vn.PostgrestFilterBuilder=r.default;const i=e.__importDefault(MM());Vn.PostgrestTransformBuilder=i.default;const a=e.__importDefault(PM());Vn.PostgrestBuilder=a.default;const o=e.__importDefault(jM());return Vn.PostgrestError=o.default,Vn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Vn}var cq=uq();const dq=Ur(cq),{PostgrestClient:fq,PostgrestQueryBuilder:Rpe,PostgrestFilterBuilder:Ipe,PostgrestTransformBuilder:Dpe,PostgrestBuilder:Lpe,PostgrestError:Upe}=dq;class hq{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pq="2.76.1",mq=`realtime-js/${pq}`,gq="1.0.0",Bv=1e4,yq=1e3,vq=100;var _c;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_c||(_c={}));var xn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xn||(xn={}));var bi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bi||(bi={}));var zv;(function(e){e.websocket="websocket"})(zv||(zv={}));var Ys;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ys||(Ys={}));class xq{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const u=r.decode(t.slice(o,o+i));o=o+i;const f=r.decode(t.slice(o,o+a));o=o+a;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:u,event:f,payload:d}}}class RM{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Rt||(Rt={}));const lC=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=bq(o,e,t,i),a),{}):{}},bq=(e,t,n,r)=>{const i=t.find(u=>u.name===e),a=i==null?void 0:i.type,o=n[e];return a&&!r.includes(a)?IM(a,o):Fv(o)},IM=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return kq(t,n)}switch(e){case Rt.bool:return wq(t);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return _q(t);case Rt.json:case Rt.jsonb:return Sq(t);case Rt.timestamp:return Eq(t);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return Fv(t);default:return Fv(t)}},Fv=e=>e,wq=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_q=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Sq=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kq=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(u=>IM(t,u))}return e},Eq=e=>typeof e=="string"?e.replace(" ","T"):e,DM=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class M0{constructor(t,n,r={},i=Bv){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uC;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uC||(uC={}));class Sc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sc.syncState(this.state,i,a,o),this.pendingDiffs.forEach(f=>{this.state=Sc.syncDiff(this.state,f,a,o)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Sc.syncDiff(this.state,i,a,o),u())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),o=this.transformState(n),u={},f={};return this.map(a,(d,h)=>{o[d]||(f[d]=h)}),this.map(o,(d,h)=>{const m=a[d];if(m){const y=h.map(C=>C.presence_ref),v=m.map(C=>C.presence_ref),k=h.filter(C=>v.indexOf(C.presence_ref)<0),S=m.filter(C=>y.indexOf(C.presence_ref)<0);k.length>0&&(u[d]=k),S.length>0&&(f[d]=S)}else u[d]=h}),this.syncDiff(a,{joins:u,leaves:f},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(u,f)=>{var d;const h=(d=t[u])!==null&&d!==void 0?d:[];if(t[u]=this.cloneDeep(f),h.length>0){const m=t[u].map(v=>v.presence_ref),y=h.filter(v=>m.indexOf(v.presence_ref)<0);t[u].unshift(...y)}r(u,h,f)}),this.map(o,(u,f)=>{let d=t[u];if(!d)return;const h=f.map(m=>m.presence_ref);d=d.filter(m=>h.indexOf(m.presence_ref)<0),t[u]=d,i(u,d,f),d.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cC;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cC||(cC={}));var kc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kc||(kc={}));var ua;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class bb{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=xn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new M0(this,bi.join,this.params,this.timeout),this.rejoinTimer=new RM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bi.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Sc(this),this.broadcastEndpointURL=DM(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==xn.closed){const{config:{broadcast:o,presence:u,private:f}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[kc.PRESENCE]&&this.bindings[kc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},y={broadcast:o,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:d,private:f};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(ua.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var k;if(this.socket.setAuth(),v===void 0){t==null||t(ua.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,C=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,T=[];for(let A=0;A<C;A++){const N=S[A],{filter:{event:O,schema:M,table:P,filter:D}}=N,Y=v&&v[A];if(Y&&Y.event===O&&Y.schema===M&&Y.table===P&&Y.filter===D)T.push(Object.assign(Object.assign({},N),{id:Y.id}));else{this.unsubscribe(),this.state=xn.errored,t==null||t(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(ua.SUBSCRIBED);return}}).receive("error",v=>{this.state=xn.errored,t==null||t(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===xn.joined&&t===kc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const d=await u.json();f=d.error||d.message||f}catch{}return Promise.reject(new Error(f))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,u,f;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(u=(o=this.params)===null||o===void 0?void 0:o.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new M0(this,bi.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new M0(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vq){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const o=t.toLocaleLowerCase(),{close:u,error:f,leave:d,join:h}=bi;if(r&&[u,f,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let y=this._onMessage(o,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var k,S,C;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(S=v.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(v=>v.callback(y,r)):(a=this.bindings[o])===null||a===void 0||a.filter(v=>{var k,S,C,T,A,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const O=v.id,M=(k=v.filter)===null||k===void 0?void 0:k.event;return O&&((S=n.ids)===null||S===void 0?void 0:S.includes(O))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(A=(T=v==null?void 0:v.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return O==="*"||O===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:S,table:C,commit_timestamp:T,type:A,errors:N}=k;y=Object.assign(Object.assign({},{schema:S,table:C,commit_timestamp:T,eventType:A,new:{},old:{},errors:N}),this._getPayloadRecords(k))}v.callback(y,r)})}_isClosed(){return this.state===xn.closed}_isJoined(){return this.state===xn.joined}_isJoining(){return this.state===xn.joining}_isLeaving(){return this.state===xn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&bb.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bi.close,{},t)}_onError(t){this._on(bi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=lC(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=lC(t.columns,t.old_record)),n}}const O0=()=>{},Bf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cq=[1e3,2e3,5e3,1e4],Tq=1e4,Nq=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Aq{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bv,this.transport=null,this.heartbeatIntervalMs=Bf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=O0,this.ref=0,this.reconnectTimer=null,this.logger=O0,this.conn=null,this.sendBuffer=[],this.serializer=new xq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Vl(async()=>{const{default:u}=await Promise.resolve().then(()=>go);return{default:u}},void 0).then(({default:u})=>u(...o)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zv.websocket}`,this.httpEndpoint=DM(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hq.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gq}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _c.connecting:return Ys.Connecting;case _c.open:return Ys.Open;case _c.closing:return Ys.Closing;default:return Ys.Closed}}isConnected(){return this.connectionState()===Ys.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new bb(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,o=()=>{this.encode(t,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yq,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,u=o?`(${o})`:"",f=a.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Nq],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:mq};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(bi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new RM(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,o,u,f,d,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Bv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Bf.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:O0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(m=>Cq[m-1]||Tq),this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:((m,y)=>y(JSON.stringify(m))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class wb extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Xt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class jq extends wb{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vv extends wb{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const _b=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Vl(async()=>{const{default:r}=await Promise.resolve().then(()=>go);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Pq=()=>Re(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vl(()=>Promise.resolve().then(()=>go),void 0)).Response:Response}),Hv=e=>{if(Array.isArray(e))return e.map(n=>Hv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Hv(r)}),t},Mq=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},R0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oq=(e,t,n)=>Re(void 0,void 0,void 0,function*(){const r=yield Pq();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new jq(R0(i),a,o))}).catch(i=>{t(new Vv(R0(i),i))}):t(new Vv(R0(e),e))}),Rq=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(Mq(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Yc(e,t,n,r,i,a){return Re(this,void 0,void 0,function*(){return new Promise((o,u)=>{e(n,Rq(t,r,i,a)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>o(f)).catch(f=>Oq(f,u,r))})})}function Pc(e,t,n,r){return Re(this,void 0,void 0,function*(){return Yc(e,"GET",t,n,r)})}function xi(e,t,n,r,i){return Re(this,void 0,void 0,function*(){return Yc(e,"POST",t,r,i,n)})}function Gv(e,t,n,r,i){return Re(this,void 0,void 0,function*(){return Yc(e,"PUT",t,r,i,n)})}function Iq(e,t,n,r){return Re(this,void 0,void 0,function*(){return Yc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Sb(e,t,n,r,i){return Re(this,void 0,void 0,function*(){return Yc(e,"DELETE",t,r,i,n)})}class Dq{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}})}}var LM;class Lq{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[LM]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dq(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}})}}LM=Symbol.toStringTag;const Uq={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qq{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=_b(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Re(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},dC),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const f=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=r,u["cache-control"]=`max-age=${o.cacheControl}`,u["content-type"]=o.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),m=yield(t=="PUT"?Gv:xi)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:u},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Re(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${o}`);u.searchParams.set("token",n);try{let f;const d=Object.assign({upsert:dC.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",d.cacheControl)):(f=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const m=yield Gv(this.fetch,u.toString(),f,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Xt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,n){return Re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield xi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),u=o.searchParams.get("token");if(!u)throw new wb("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Re(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield xi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield xi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Re(this,void 0,void 0,function*(){try{const i=yield xi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"",u=this._getFinalPath(t),f=()=>Pc(this.fetch,`${this.url}/${i}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new Lq(f,this.shouldThrowOnError)}info(t){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Pc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Hv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}exists(t){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Iq(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r)&&r instanceof Vv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&i.push(f);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${d}`)}}}remove(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Sb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Re(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Uq),n),{prefix:t||""});return{data:yield xi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}listV2(t,n){return Re(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield xi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const UM="2.76.1",qM={"X-Client-Info":`storage-js/${UM}`};class $q{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qM),n),this.fetch=_b(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Re(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Xt(t))return{data:null,error:t};throw t}})}getBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Pc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}createBucket(t){return Re(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield xi(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Re(this,void 0,void 0,function*(){try{return{data:yield Gv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Sb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}}class Bq{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qM),n),this.fetch=_b(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}listBuckets(t){return Re(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,a=yield Pc(this.fetch,i,{headers:this.headers});return{data:Array.isArray(a)?a.filter(u=>u.type==="ANALYTICS"):[],error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Sb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xt(n))return{data:null,error:n};throw n}})}}const kb={"X-Client-Info":`storage-js/${UM}`,"Content-Type":"application/json"};class $M extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Mr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class I0 extends $M{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zq extends $M{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var fC;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(fC||(fC={}));const Eb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Vl(async()=>{const{default:r}=await Promise.resolve().then(()=>go);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Fq=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hC=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vq=(e,t,n)=>Re(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const u=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new I0(hC(o),i,u))}).catch(()=>{const o=i+"",u=a.statusText||`HTTP ${i} error`;t(new I0(u,i,o))});else{const o=i+"",u=a.statusText||`HTTP ${i} error`;t(new I0(u,i,o))}}else t(new zq(hC(e),e))}),Hq=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Fq(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function Gq(e,t,n,r,i,a){return Re(this,void 0,void 0,function*(){return new Promise((o,u)=>{e(n,Hq(t,r,i,a)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;const d=f.headers.get("content-type");return!d||!d.includes("application/json")?{}:f.json()}).then(f=>o(f)).catch(f=>Vq(f,u,r))})})}function Or(e,t,n,r,i){return Re(this,void 0,void 0,function*(){return Gq(e,"POST",t,r,i,n)})}class Kq{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Eb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Re(this,void 0,void 0,function*(){try{return{data:(yield Or(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Re(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}listIndexes(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Re(this,void 0,void 0,function*(){try{return{data:(yield Or(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mr(r))return{data:null,error:r};throw r}})}}class Yq{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Eb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Re(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Or(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}getVectors(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}listVectors(t){return Re(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Or(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Re(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Or(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}}class Wq{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kb),n),this.fetch=Eb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:(yield Or(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}getBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}listBuckets(){return Re(this,arguments,void 0,function*(t={}){try{return{data:yield Or(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Re(this,void 0,void 0,function*(){try{return{data:(yield Or(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mr(n))return{data:null,error:n};throw n}})}}class Jq extends Wq{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new Xq(this.url,this.headers,t,this.fetch)}}class Xq extends Kq{constructor(t,n,r,i){super(t,n,i),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Re(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Re(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Re(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Re(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Qq(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Qq extends Yq{constructor(t,n,r,i,a){super(t,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Re(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Re(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Re(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Re(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Re(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Zq extends $q{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new qq(this.url,this.headers,t,this.fetch)}get vectors(){return new Jq(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Bq(this.url+"/iceberg",this.headers,this.fetch)}}const e$="2.76.1";let xc="";typeof Deno<"u"?xc="deno":typeof document<"u"?xc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xc="react-native":xc="node";const t$={"X-Client-Info":`supabase-js-${xc}/${e$}`},n$={headers:t$},r$={schema:"public"},i$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a$={},s$=e=>{let t;return e?t=e:typeof fetch>"u"?t=NM:t=fetch,(...n)=>t(...n)},o$=()=>typeof Headers>"u"?AM:Headers,l$=(e,t,n)=>{const r=s$(n),i=o$();return async(a,o)=>{var u;const f=(u=await t())!==null&&u!==void 0?u:e;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${f}`),r(a,Object.assign(Object.assign({},o),{headers:d}))}};function u$(e){return e.endsWith("/")?e:e+"/"}function c$(e,t){var n,r;const{db:i,auth:a,realtime:o,global:u}=e,{db:f,auth:d,realtime:h,global:m}=t,y={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),u),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function d$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(u$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const BM="2.76.1",gl=30*1e3,Kv=3,D0=Kv*gl,f$="http://localhost:9999",h$="supabase.auth.token",p$={"X-Client-Info":`gotrue-js/${BM}`},Yv="X-Supabase-Api-Version",zM={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,g$=600*1e3;class Mc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class y$ extends Mc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function v$(e){return Be(e)&&e.name==="AuthApiError"}class Ws extends Mc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ps extends Mc{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ss extends ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x$(e){return Be(e)&&e.name==="AuthSessionMissingError"}class al extends ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zf extends ps{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ff extends ps{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function b$(e){return Be(e)&&e.name==="AuthImplicitGrantRedirectError"}class pC extends ps{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wv extends ps{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function L0(e){return Be(e)&&e.name==="AuthRetryableFetchError"}class mC extends ps{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jv extends ps{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gC=` 	
\r=`.split(""),w$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gC.length;t+=1)e[gC[t].charCodeAt(0)]=-2;for(let t=0;t<wh.length;t+=1)e[wh[t].charCodeAt(0)]=t;return e})();function yC(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wh[r]),t.queuedBits-=6}}function FM(e,t,n){const r=w$[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vC(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{k$(o,r,n)};for(let o=0;o<e.length;o+=1)FM(e.charCodeAt(o),i,a);return t.join("")}function _$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function S$(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}_$(r,t)}}function k$(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function bl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)FM(e.charCodeAt(i),n,r);return new Uint8Array(t)}function E$(e){const t=[];return S$(e,n=>t.push(n)),new Uint8Array(t)}function Js(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>yC(i,n,r)),yC(null,n,r),t.join("")}function C$(e){return Math.round(Date.now()/1e3)+e}function T$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Nr=()=>typeof window<"u"&&typeof document<"u",Bs={tested:!1,writable:!1},VM=()=>{if(!Nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bs.tested)return Bs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bs.tested=!0,Bs.writable=!0}catch{Bs.tested=!0,Bs.writable=!1}return Bs.writable};function N$(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const HM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Vl(async()=>{const{default:r}=await Promise.resolve().then(()=>go);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},A$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},zs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rs=async(e,t)=>{await e.removeItem(t)};class wp{constructor(){this.promise=new wp.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}wp.promiseConstructor=Promise;function U0(e){const t=e.split(".");if(t.length!==3)throw new Jv("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!m$.test(t[r]))throw new Jv("JWT not in base64url format");return{header:JSON.parse(vC(t[0])),payload:JSON.parse(vC(t[1])),signature:bl(t[2]),raw:{header:t[0],payload:t[1]}}}async function j$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function P$(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function M$(e){return("0"+e.toString(16)).substr(-2)}function O$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,M$).join("")}async function R$(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function I$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await R$(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sl(e,t,n=!1){const r=O$();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await yl(e,`${t}-code-verifier`,i);const a=await I$(r);return[a,r===a?"plain":"s256"]}const D$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function L$(e){const t=e.headers.get(Yv);if(!t||!t.match(D$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function U$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function q$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ol(e){if(!$$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function q0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xC(e){return JSON.parse(JSON.stringify(e))}const Vs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),B$=[502,503,504];async function bC(e){var t;if(!A$(e))throw new Wv(Vs(e),0);if(B$.includes(e.status))throw new Wv(Vs(e),e.status);let n;try{n=await e.json()}catch(a){throw new Ws(Vs(a),a)}let r;const i=L$(e);if(i&&i.getTime()>=zM["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new mC(Vs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ss}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new mC(Vs(n),e.status,n.weak_password.reasons);throw new y$(Vs(n),e.status||500,r)}const z$=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ye(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Yv]||(a[Yv]=zM["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const u=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",f=await F$(e,t,n+u,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function F$(e,t,n,r,i,a){const o=z$(t,r,i,a);let u;try{u=await e(n,Object.assign({},o))}catch(f){throw console.error(f),new Wv(Vs(f),0)}if(u.ok||await bC(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await bC(f)}}function vi(e){var t;let n=null;G$(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=C$(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function wC(e){const t=vi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function us(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function V$(e){return{data:e,error:null}}function H$(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,o=Fl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},f=Object.assign({},o);return{data:{properties:u,user:f},error:null}}function _C(e){return e}function G$(e){return e.access_token&&e.refresh_token&&e.expires_in}const $0=["global","local","others"];class K${constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=HM(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=$0[0]){if($0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$0.join(", ")}`);try{return await Ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:us})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Fl(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:H$,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:us})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,o,u,f;try{const d={nextPage:null,lastPage:0,total:0},h=await Ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:_C});if(h.error)throw h.error;const m=await h.json(),y=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(f=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);d[`${C}Page`]=S}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Be(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){ol(t);try{return await Ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:us})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ol(t);try{return await Ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:us})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ol(t);try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:us})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ol(t.userId);try{const{data:n,error:r}=await Ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ol(t.userId),ol(t.id);try{return{data:await Ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,o,u,f;try{const d={nextPage:null,lastPage:0,total:0},h=await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:_C});if(h.error)throw h.error;const m=await h.json(),y=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(f=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);d[`${C}Page`]=S}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Be(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}}function SC(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ll={debug:!!(globalThis&&VM()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GM extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Y$ extends GM{}async function W$(e,t,n){ll.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ll.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ll.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ll.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ll.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Y$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ll.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function J$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function KM(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function X$(e){return parseInt(e,16)}function Q$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Z$(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:u,requestId:f,resources:d,scheme:h,uri:m,version:y}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=KM(e.address),k=h?`${h}://${r}`:r,S=e.statement?`${e.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${v}

${S}`;let T=`URI: ${m}
Version: ${y}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),f&&(T+=`
Request ID: ${f}`),d){let A=`
Resources:`;for(const N of d){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);A+=`
- ${N}`}T+=A}return`${C}
${T}`}class pn extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class _h extends pn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function eB({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(YM(o)){if(a.rp.id!==o)return new pn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function tB({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(YM(r)){if(n.rpId!==r)return new pn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class nB{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const rB=new nB;function iB(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Fl(e,["challenge","user","excludeCredentials"]),a=bl(t).buffer,o=Object.assign(Object.assign({},n),{id:bl(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const d=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},d),{id:bl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return u}function aB(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Fl(e,["challenge","allowCredentials"]),i=bl(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const u=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},u),{id:bl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function sB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Js(new Uint8Array(e.response.attestationObject)),clientDataJSON:Js(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oB(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Js(new Uint8Array(i.authenticatorData)),clientDataJSON:Js(new Uint8Array(i.clientDataJSON)),signature:Js(new Uint8Array(i.signature)),userHandle:i.userHandle?Js(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function YM(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function kC(){var e,t;return!!(Nr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function lB(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _h("Browser returned unexpected credential type",t)}:{data:null,error:new _h("Empty credential response",t)}}catch(t){return{data:null,error:eB({error:t,options:e})}}}async function uB(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _h("Browser returned unexpected credential type",t)}:{data:null,error:new _h("Empty credential response",t)}}catch(t){return{data:null,error:tB({error:t,options:e})}}}const cB={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},dB={userVerification:"preferred",hints:["security-key"]};function Sh(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(t(o)){const u=r[a];t(u)?r[a]=Sh(u,o):r[a]=Sh(o)}else r[a]=o}return r}function fB(e,t){return Sh(cB,e,t||{})}function hB(e,t){return Sh(dB,e,t||{})}class pB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:u};const f=i??rB.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=fB(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:m}=await lB({publicKey:d,signal:f});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}case"request":{const d=hB(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:m}=await uB(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:f}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}}}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Ws("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!n)return{data:null,error:new Mc("rpId is required for WebAuthn authentication")};try{if(!kC())return{data:null,error:new Ws("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:u};const{webauthn:f}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Ws("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!n)return{data:null,error:new Mc("rpId is required for WebAuthn registration")};try{if(!kC())return{data:null,error:new Ws("Browser does not support WebAuthn",null)};const{data:o,error:u}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var m;return(m=h.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:f,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return f?this._verify({factorId:o.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Ws("Unexpected error in register",o)}}}}J$();const mB={url:f$,storageKey:h$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function EC(e,t,n){return await n()}const ul={};class Oc{get jwks(){var t,n;return(n=(t=ul[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ul[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ul[this.storageKey]=Object.assign(Object.assign({},ul[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oc.nextInstanceID,Oc.nextInstanceID+=1,this.instanceID>0&&Nr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},mB),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new K$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=HM(i.fetch),this.lock=i.lock||EC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Nr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=W$:this.lock=EC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pB(this)},this.persistSession?(i.storage?this.storage=i.storage:VM()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=SC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=SC(this.memoryStorage)),Nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${BM}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=N$(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Nr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),b$(a)){const f=(t=a.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",u),await this._saveSession(o),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Be(n)?{error:n}:{error:new Ws("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:vi}),{data:o,error:u}=a;if(u||!o)return{data:{user:null,session:null},error:u};const f=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:h,password:m,options:y}=t;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await sl(this.storage,this.storageKey)),a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:k},xform:vi})}else if("phone"in t){const{phone:h,password:m,options:y}=t;a=await Ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:vi})}else throw new zf("You must provide either an email or phone number and a password");const{data:o,error:u}=a;if(u||!o)return{data:{user:null,session:null},error:u};const f=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:u}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:wC})}else if("phone"in t){const{phone:a,password:o,options:u}=t;n=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:wC})}else throw new zf("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new al}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,o,u,f,d,h,m,y;let v,k;if("message"in t)v=t.message,k=t.signature;else{const{chain:S,wallet:C,statement:T,options:A}=t;let N;if(Nr())if(typeof C=="object")N=C;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")N=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const O=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href),M=await N.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=KM(M[0]);let D=(r=A==null?void 0:A.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const q=await N.request({method:"eth_chainId"});D=X$(q)}const Y={domain:O.host,address:P,statement:T,uri:O.href,version:"1",chainId:D,nonce:(i=A==null?void 0:A.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=A==null?void 0:A.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(u=A==null?void 0:A.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=A==null?void 0:A.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(d=A==null?void 0:A.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=A==null?void 0:A.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=Z$(Y),k=await N.request({method:"personal_sign",params:[Q$(v),P]})}try{const{data:S,error:C}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:k},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:vi});if(C)throw C;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new al}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:C})}catch(S){if(Be(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var n,r,i,a,o,u,f,d,h,m,y,v;let k,S;if("message"in t)k=t.message,S=t.signature;else{const{chain:C,wallet:T,statement:A,options:N}=t;let O;if(Nr())if(typeof T=="object")O=T;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))O=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}const M=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const P=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),A?{statement:A}:null));let D;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")D=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)D=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)k=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),S=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${M.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((f=N==null?void 0:N.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((m=(h=N==null?void 0:N.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...N.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const P=await O.signMessage(new TextEncoder().encode(k),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=P}}try{const{data:C,error:T}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Js(S)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:vi});if(T)throw T;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new al}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:T})}catch(C){if(Be(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const n=await zs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vi});if(await rs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new al}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Be(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=t,u=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vi}),{data:f,error:d}=u;return d?{data:{user:null,session:null},error:d}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new al}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:d})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,a,o;try{if("email"in t){const{email:u,options:f}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await sl(this.storage,this.storageKey));const{error:m}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:u,options:f}=t,{data:d,error:h}=await Ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(o=f==null?void 0:f.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new zf("You must provide either an email or phone number.")}catch(u){if(Be(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:u}=await Ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:vi});if(u)throw u;if(!o)throw new Error("An error occurred on token verification.");const f=o.session,d=o.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:d,session:f},error:null}}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await sl(this.storage,this.storageKey)),await Ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:V$})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ss;const{error:i}=await Ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:o}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:o,error:u}=await Ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:u}}throw new zf("You must provide either an email or phone number and a type")}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<D0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await zs(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=q0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,d,h))})}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:us}):await this._useSession(async n=>{var r,i,a;const{data:o,error:u}=n;if(u)throw u;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ss}:await Ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:us})})}catch(n){if(Be(n))return x$(n)&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ss;const o=i.session;let u=null,f=null;this.flowType==="pkce"&&t.email!=null&&([u,f]=await sl(this.storage,this.storageKey));const{data:d,error:h}=await Ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:f}),jwt:o.access_token,xform:us});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ss;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=U0(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:u,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:f}=await this._getUser(t.access_token);if(f)throw f;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:u}=n;if(u)throw u;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ss;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Nr())throw new Ff("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ff(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ff("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pC("No code detected.");const{data:A,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:u,expires_at:f,token_type:d}=t;if(!a||!u||!o||!d)throw new Ff("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(u);let y=h+m;f&&(y=parseInt(f));const v=y-h;v*1e3<=gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const k=y-m;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,h);const{data:S,error:C}=await this._getUser(a);if(C)throw C;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:y,refresh_token:o,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:t.type},error:null}}catch(r){if(Be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await zs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:u}=await this.admin.signOut(o,t);if(u&&!(v$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=T$(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await sl(this.storage,this.storageKey,!0));try{return await Ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,u,f,d,h;const{data:m,error:y}=a;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ye(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Nr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Be(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:u,token:f,access_token:d,nonce:h}=t,m=await Ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vi}),{data:y,error:v}=m;return v?{data:{user:null,session:null},error:v}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new al}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:v})}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await Ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await P$(async i=>(i>0&&await j$(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vi})),(i,a)=>{const o=200*Math.pow(2,i);return a&&L0(a)&&Date.now()+o-r<gl})}catch(r){if(this._debug(n,"error",r),Be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Nr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await zs(this.storage,this.storageKey);if(i&&this.userStorage){let o=await zs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await yl(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:q0()}else if(i&&!i.user&&!i.user){const o=await zs(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await rs(this.storage,this.storageKey+"-user"),await yl(this.storage,this.storageKey,i)):i.user=q0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<D0;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${D0}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),L0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:u}=await this._getUser(i.access_token);!u&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ss;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new wp;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new ss;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),Be(a)){const o={data:null,error:a};return L0(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(f){a.push(f)}});if(await Promise.all(o),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await yl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=xC(i);await yl(this.storage,this.storageKey,a)}else{const i=xC(n);await yl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await rs(this.storage,this.storageKey),await rs(this.storage,this.storageKey+"-code-verifier"),await rs(this.storage,this.storageKey+"-user"),this.userStorage&&await rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Nr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),gl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gl}ms, refresh threshold is ${Kv} ticks`),i<=Kv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof GM)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await sl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await Ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:d}=await Ye(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?sB(t.webauthn.credential_response):oB(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:f}=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=await Ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:u}=o;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:iB(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aB(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=U0(i.access_token);let u=null;o.aal&&(u=o.aal);let f=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const h=o.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+g$>i)return r;const{data:a,error:o}=await Ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};r=v.session.access_token}const{header:i,payload:a,signature:o,raw:{header:u,payload:f}}=U0(r);n!=null&&n.allowExpired||U$(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:a,header:i,signature:o},error:null}}const h=q$(i.alg),m=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,E$(`${u}.${f}`)))throw new Jv("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}}Oc.nextInstanceID=0;const gB=Oc;class yB extends gB{constructor(t){super(t)}}class vB{constructor(t,n,r){var i,a,o;this.supabaseUrl=t,this.supabaseKey=n;const u=d$(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:r$,realtime:a$,auth:Object.assign(Object.assign({},i$),{storageKey:f}),global:n$},h=c$(r??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=l$(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new fq(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Zq(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new nq(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:o,flowType:u,lock:f,debug:d},h,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yB({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:u,lock:f,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Aq(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xB=(e,t,n)=>new vB(e,t,n);function bB(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}bB()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wB="https://qohzstheshebjlscuihc.supabase.co",_B="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvaHpzdGhlc2hlYmpsc2N1aWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODY3NDEsImV4cCI6MjA3MTY2Mjc0MX0.eNT-YtX0ALCky-dHTmM9GaTXfcCCdTEn0n8hwpyWneU",te=xB(wB,_B),WM=_.createContext(void 0),SB=({children:e})=>{const[t,n]=_.useState(null),[r,i]=_.useState(null),[a,o]=_.useState(null),[u,f]=_.useState(null),[d,h]=_.useState(null),[m,y]=_.useState(!0);_.useEffect(()=>{(async()=>{const{data:{session:T},error:A}=await te.auth.getSession();if(A){console.error("Error fetching session:",A),y(!1);return}n(T);const N=(T==null?void 0:T.user)??null;if(i(N),N){const{data:O,error:M}=await te.from("usuarios").select("*, sedes(*), empresas(*)").eq("email",N.email).single();M?console.error("Error fetching user profile:",M):O&&(o(O),f(O.empresas),h(O.sedes))}else o(null),f(null),h(null);y(!1)})();const{data:{subscription:C}}=te.auth.onAuthStateChange((T,A)=>{n(A);const N=(A==null?void 0:A.user)??null;i(N),N?te.from("usuarios").select("*, sedes(*), empresas(*)").eq("email",N.email).single().then(({data:O,error:M})=>{M?(console.error("Error fetching profile on auth change:",M),o(null),f(null),h(null)):O&&(o(O),f(O.empresas),h(O.sedes))}):(o(null),f(null),h(null))});return()=>{C.unsubscribe()}},[]);const k={session:t,user:r,profile:a,empresa:u,sede:d,loading:m,signOut:async()=>{await te.auth.signOut()}};return c.jsx(WM.Provider,{value:k,children:e})},Mt=()=>{const e=_.useContext(WM);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},kB=()=>{const{session:e,loading:t}=Mt();return t?c.jsx("div",{className:"flex justify-center items-center h-screen bg-soft-gray-100 dark:bg-gray-900",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):e?c.jsx(JP,{}):c.jsx(Iv,{to:"/login",replace:!0})},EB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),c.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Cb=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M5 6h14"}),c.jsx("path",{d:"M2 12h20"}),c.jsx("path",{d:"M5 18h14"}),c.jsx("path",{d:"M19 6V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v1"}),c.jsx("path",{d:"M21 12v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6"})]}),Wc=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12.89 1.45l8 4A2 2 0 0 1 22 7.24v9.53a2 2 0 0 1-1.11 1.79l-8 4a2 2 0 0 1-1.79 0l-8-4A2 2 0 0 1 2 16.76V7.24a2 2 0 0 1 1.11-1.79l8-4a2 2 0 0 1 1.78 0z"}),c.jsx("polyline",{points:"2,8 12,13 22,8"}),c.jsx("line",{x1:"12",y1:"22.47",x2:"12",y2:"13"})]}),Tb=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 0 5 0V4.5A2.5 2.5 0 0 0 12 2Z"}),c.jsx("path",{d:"M12 12a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 0 5 0v-.75A2.5 2.5 0 0 0 12 12Z"}),c.jsx("path",{d:"M12 22a2.5 2.5 0 0 0-2.5-2.5h-.75a2.5 2.5 0 0 0 0 5h.75A2.5 2.5 0 0 0 12 22Z"}),c.jsx("path",{d:"M12 12a2.5 2.5 0 0 1 2.5 2.5v.75a2.5 2.5 0 0 1-5 0v-.75A2.5 2.5 0 0 1 12 12Z"}),c.jsx("path",{d:"M12 22a2.5 2.5 0 0 1 2.5-2.5h.75a2.5 2.5 0 0 1 0 5h-.75A2.5 2.5 0 0 1 12 22Z"}),c.jsx("path",{d:"M12 12a2.5 2.5 0 0 0-2.5-2.5H8.75a2.5 2.5 0 0 0 0 5h.75A2.5 2.5 0 0 0 12 12Z"}),c.jsx("path",{d:"M12 12a2.5 2.5 0 0 1 2.5-2.5h.75a2.5 2.5 0 0 1 0 5h-.75A2.5 2.5 0 0 1 12 12Z"}),c.jsx("path",{d:"M12 2a2.5 2.5 0 0 1 2.5 2.5v.75a2.5 2.5 0 0 1-5 0V4.5A2.5 2.5 0 0 1 12 2Z"}),c.jsx("path",{d:"M12 2a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 0 5 0V4.5A2.5 2.5 0 0 0 12 2Z"}),c.jsx("path",{d:"m14.5 4.5 2.5 2.5"}),c.jsx("path",{d:"m9.5 4.5-2.5 2.5"}),c.jsx("path",{d:"m14.5 19.5 2.5-2.5"}),c.jsx("path",{d:"m9.5 19.5-2.5-2.5"}),c.jsx("path",{d:"m4.5 9.5 2.5 2.5"}),c.jsx("path",{d:"m19.5 9.5-2.5 2.5"}),c.jsx("path",{d:"m4.5 14.5 2.5-2.5"}),c.jsx("path",{d:"m19.5 14.5-2.5-2.5"})]}),Nb=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"}),c.jsx("path",{d:"m8.5 8.5 7 7"})]}),CB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"}),c.jsx("path",{d:"M15 18H9"}),c.jsx("path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"}),c.jsx("circle",{cx:"17",cy:"18",r:"2"}),c.jsx("circle",{cx:"7",cy:"18",r:"2"})]}),Ab=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),c.jsx("path",{d:"M9 22v-4h6v4"}),c.jsx("path",{d:"M8 6h.01"}),c.jsx("path",{d:"M16 6h.01"}),c.jsx("path",{d:"M12 6h.01"}),c.jsx("path",{d:"M12 10h.01"}),c.jsx("path",{d:"M12 14h.01"}),c.jsx("path",{d:"M16 10h.01"}),c.jsx("path",{d:"M16 14h.01"}),c.jsx("path",{d:"M8 10h.01"}),c.jsx("path",{d:"M8 14h.01"})]}),TB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),c.jsx("path",{d:"m9 12 2 2 4-4"})]}),NB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),c.jsx("polyline",{points:"14 2 14 8 20 8"}),c.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),c.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),c.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),JM=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),c.jsx("polyline",{points:"17 6 23 6 23 12"})]}),AB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"9",cy:"21",r:"1"}),c.jsx("circle",{cx:"20",cy:"21",r:"1"}),c.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),jB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),c.jsx("polyline",{points:"7 7 17 7 17 17"})]}),PB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"17",y1:"7",x2:"7",y2:"17"}),c.jsx("polyline",{points:"17 17 7 17 7 7"})]}),Gl=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),c.jsx("path",{d:"M5 3v4"}),c.jsx("path",{d:"M19 17v4"}),c.jsx("path",{d:"M3 5h4"}),c.jsx("path",{d:"M17 19h4"})]}),MB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),OB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),c.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),CC=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),RB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),c.jsx("path",{d:"M16 2v4"}),c.jsx("path",{d:"M8 2v4"}),c.jsx("path",{d:"M3 10h5"}),c.jsx("path",{d:"M17.5 17.5 16 16.25V14"}),c.jsx("path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"})]}),XM=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),c.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),c.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),jb=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),QM=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"8",r:"7"}),c.jsx("polyline",{points:"8.21 13.89 7 22 12 17 17 22 15.79 13.88"})]}),ZM=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),c.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),c.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),c.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),c.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),c.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),c.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),c.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),eO=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),ms=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),c.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),tO=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),c.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),c.jsx("path",{d:"M12 11h4"}),c.jsx("path",{d:"M12 16h4"}),c.jsx("path",{d:"M8 11h.01"}),c.jsx("path",{d:"M8 16h.01"})]}),IB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"16 18 22 12 16 6"}),c.jsx("polyline",{points:"8 6 2 12 8 18"})]}),_p=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),DB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Pb=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"currentColor",children:c.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.001.004l-1.03 3.75 3.803-1.002z"})}),nO=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),c.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),c.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),yo=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),io=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),LB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),c.jsx("polyline",{points:"16 17 21 12 16 7"}),c.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),UB=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),qB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),c.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),rO=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})}),iO=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),c.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),c.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),aO=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M22 4s-.7 2.1-2 3.4c1.6 1.4 1.6 3.6 0 5.1-2.4 2.4-5.9 4.1-10.4 4.1-2.8 0-4.9-.7-6.6-2 .9 1.1 2.4 1.6 4.1 1.6 1.4 0 2.8-.5 3.9-1.5-1.4 0-2.6-1-3-2.3.5.1 1 .2 1.5.2- .3 0-.6-.1-.9-.2-1.4-.3-2.4-1.6-2.4-3.1v-.1c.4.2.9.4 1.4.4-1.4-.9-1.9-2.8-1-4.3 1.5 1.8 3.8 3 6.3 3.2.1-.5.2-1 .2-1.5 0-2.8 2.2-5 5-5 .9 0 1.8.4 2.4 1z"})}),sO=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16.5 6.5a4.5 4.5 0 1 0-9 0 4.5 4.5 0 0 0 9 0z"}),c.jsx("path",{d:"M12 2v10"}),c.jsx("path",{d:"M12 12a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9z"})]}),oO=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),c.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),$B=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),BB=({className:e})=>c.jsx("svg",{className:e,viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Kl=({className:e})=>c.jsx("svg",{className:e,viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"9 18 15 12 9 6"})}),TC=[{path:"/app/dashboard",label:"Home",icon:EB},{label:"Operaciones",icon:Cb,children:[{path:"/app/caja",label:"Caja"},{path:"/app/ventas",label:"Ventas"},{path:"/app/gastos",label:"Gastos"}]},{label:"Inventario",icon:Wc,children:[{path:"/app/almacen",label:"Almacén"},{path:"/app/inventario",label:"Inventario"},{path:"/app/kardex",label:"Kardex"}]},{label:"Comercial",icon:JM,children:[{path:"/app/clientes",label:"Clientes"},{path:"/app/pedidos",label:"Pedidos Clientes"},{path:"/app/proveedores",label:"Proveedores"},{path:"/app/promociones",label:"Promociones"},{path:"/app/comisiones",label:"Comisiones"}]},{label:"Administración",icon:TB,children:[{path:"/app/usuarios",label:"Usuarios"},{path:"/app/sedes",label:"Sedes"},{path:"/app/configuraciones",label:"Configuraciones"},{path:"/app/administracion",label:"Administración"},{path:"/app/registros",label:"Registros"}]},{label:"Herramientas IA",icon:Tb,children:[{path:"/app/consultas-ia",label:"Consultas IA"}]}],zB=()=>{const e=Sa(),[t,n]=_.useState(null);_.useEffect(()=>{const a=TC.find(o=>{var u;return(u=o.children)==null?void 0:u.some(f=>e.pathname.startsWith(f.path))});n((a==null?void 0:a.label)||null)},[e.pathname]);const r=a=>{n(t===a?null:a)},i=a=>{var o;return(o=a.children)==null?void 0:o.some(u=>e.pathname.startsWith(u.path))};return c.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white border-r border-soft-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center justify-center h-20 border-b border-soft-gray-200 dark:border-gray-700",children:[c.jsx(Nb,{className:"h-8 w-8 text-clinical-blue"}),c.jsxs("h1",{className:"ml-2 text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Gestion",c.jsx("span",{className:"text-clinical-blue",children:"Farma"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsx("nav",{className:"p-4",children:c.jsx("ul",{className:"space-y-2",children:TC.map(a=>{if(a.children){const u=a.icon,f=t===a.label,d=i(a);return c.jsxs("li",{children:[c.jsxs("button",{onClick:()=>r(a.label),className:`w-full flex items-center justify-between px-4 py-3 text-gray-600 transition-colors duration-200 transform rounded-lg dark:text-gray-300 ${d?"bg-clinical-blue/10 dark:bg-clinical-blue/20":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(u,{className:`h-5 w-5 ${d?"text-clinical-blue":""}`}),c.jsx("span",{className:`mx-4 font-medium ${d?"text-clinical-blue":""}`,children:a.label})]}),c.jsx(Kl,{className:`h-5 w-5 transform transition-transform duration-300 ${f?"rotate-90":""}`})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${f?"max-h-96":"max-h-0"}`,children:c.jsx("ul",{className:"pl-8 pt-2 space-y-2",children:a.children.map(h=>c.jsx("li",{children:c.jsx(Lv,{to:h.path,className:({isActive:m})=>`block px-4 py-2 text-sm rounded-lg transition-colors duration-200 ${m?"bg-clinical-blue text-white":"text-gray-500 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700"}`,children:h.label})},h.path))})})]},a.label)}const o=a.icon;return c.jsx("li",{children:c.jsxs(Lv,{to:a.path,className:({isActive:u})=>`flex items-center px-4 py-3 text-gray-600 transition-colors duration-200 transform rounded-lg dark:text-gray-300 ${u?"bg-clinical-blue/10 text-clinical-blue dark:bg-clinical-blue/20":"hover:bg-gray-200 hover:text-gray-700 dark:hover:bg-gray-700 dark:hover:text-gray-200"}`,end:!0,children:[c.jsx(o,{className:"h-5 w-5"}),c.jsx("span",{className:"mx-4 font-medium",children:a.label})]})},a.path)})})})})]})},FB=e=>{switch(e){case"stock_bajo":return c.jsx(CC,{className:"w-5 h-5 text-red-500"});case"vencimiento_proximo":return c.jsx(RB,{className:"w-5 h-5 text-yellow-500"});case"producto_vencido":return c.jsx(CC,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"});case"venta_grande":return c.jsx(jb,{className:"w-5 h-5 text-green-500"});case"nuevo_cliente":return c.jsx(XM,{className:"w-5 h-5 text-blue-500"});default:return c.jsx(Wc,{className:"w-5 h-5 text-gray-500"})}},VB=e=>{switch(e){case"stock_bajo":return"bg-red-50 dark:bg-red-900/50";case"vencimiento_proximo":return"bg-yellow-50 dark:bg-yellow-900/50";case"producto_vencido":return"bg-gray-200 dark:bg-gray-600";case"venta_grande":return"bg-green-50 dark:bg-green-900/50";case"nuevo_cliente":return"bg-blue-50 dark:bg-blue-900/50";default:return"bg-gray-50 dark:bg-gray-700"}},HB=e=>{const t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);let i=r/31536e3;return i>1?`${Math.floor(i)}a`:(i=r/2592e3,i>1?`${Math.floor(i)}m`:(i=r/86400,i>1?`${Math.floor(i)}d`:(i=r/3600,i>1?`${Math.floor(i)}h`:(i=r/60,i>1?`${Math.floor(i)}min`:`${Math.floor(r)}s`))))},GB=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:n,onClose:r})=>{const i=e.filter(a=>a.estado==="no leido").length;return c.jsxs("div",{className:"absolute right-0 mt-2 w-80 md:w-96 bg-white rounded-xl shadow-2xl z-50 border border-soft-gray-200 animate-fade-in-down dark:bg-gray-800 dark:border-gray-600 dark:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.4)]",role:"menu","aria-orientation":"vertical",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-soft-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Notificaciones"}),i>0&&c.jsx("button",{onClick:n,className:"text-xs font-medium text-clinical-blue hover:underline",children:"Marcar todas como leídas"})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length>0?e.map(a=>c.jsxs("div",{onClick:()=>t(a.id),className:`flex items-start p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors ${a.estado==="no leido"?"bg-blue-50 dark:bg-blue-900/40":""}`,children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full ${VB(a.tipo)}`,children:FB(a.tipo)}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:a.mensaje}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:HB(a.fecha_creacion)})]}),a.estado==="no leido"&&c.jsx("div",{className:"w-2.5 h-2.5 bg-clinical-blue rounded-full self-center ml-2 flex-shrink-0"})]},a.id)):c.jsx("div",{className:"text-center py-12 px-4",children:c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tienes notificaciones."})})}),c.jsx("style",{children:`
              @keyframes fade-in-down {
                0% { opacity: 0; transform: translateY(-10px); }
                100% { opacity: 1; transform: translateY(0); }
              }
              .animate-fade-in-down { animation: fade-in-down 0.2s ease-out; }
            `})]})},lO=_.createContext(void 0),Sp=()=>{const e=_.useContext(lO);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},KB=({children:e})=>{const[t,n]=_.useState(()=>{const i=localStorage.getItem("theme");return i||"light"});_.useEffect(()=>{const i=window.document.documentElement;t==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const r=()=>{n(i=>i==="light"?"dark":"light")};return c.jsx(lO.Provider,{value:{theme:t,toggleTheme:r},children:e})},YB=({onClose:e})=>{const{user:t,signOut:n}=Mt(),[r,i]=_.useState(null),[a,o]=_.useState(!0),[u,f]=_.useState(!1),[d,h]=_.useState(!1),[m,y]=_.useState(null),[v,k]=_.useState(""),[S,C]=_.useState("");_.useEffect(()=>{(async()=>{o(!0);const D=t==null?void 0:t.email;if(!D){y("No se pudo identificar al usuario actual."),o(!1);return}const{data:Y,error:q}=await te.from("usuarios").select("*").eq("email",D).single();q?(y("No se pudo cargar tu perfil. Asegúrate de que tu email de acceso esté en la tabla de usuarios."),console.error("Profile fetch error:",q)):i(Y),o(!1)})()},[t]);const T=async P=>{if(!P.target.files||P.target.files.length===0||!t||!r)return;const D=P.target.files[0],Y=D.name.split(".").pop(),q=`${t.id}-${Date.now()}.${Y}`;h(!0),y(null);const{error:W}=await te.storage.from("avatars").upload(q,D,{upsert:!0});if(W){y(`Error subiendo imagen: ${W.message}`),h(!1);return}const{data:F}=te.storage.from("avatars").getPublicUrl(q),$=F.publicUrl,{error:R}=await te.from("usuarios").update({avatar_url:$}).eq("id",r.id);if(R)y(`Error actualizando perfil: ${R.message}`);else{i(V=>V?{...V,avatar_url:$}:null);const z=new Event("storage");window.dispatchEvent(z),alert("Foto de perfil actualizada.")}h(!1)},A=async P=>{if(P.preventDefault(),!r)return;const D=t==null?void 0:t.email;if(!D){y("Sesión inválida. No se puede actualizar el perfil.");return}f(!0),y(null);const{id:Y,created_at:q,sedes:W,empresas:F,...$}=r,{error:R}=await te.from("usuarios").update($).eq("email",D);R?y(`Error al actualizar perfil: ${R.message}`):alert("Perfil actualizado con éxito."),f(!1)},N=async P=>{if(P.preventDefault(),v.length<6){y("La nueva contraseña debe tener al menos 6 caracteres.");return}if(v!==S){y("Las contraseñas no coinciden.");return}f(!0),y(null);const{error:D}=await te.auth.updateUser({password:v});D?y(`Error al cambiar la contraseña: ${D.message}`):(alert("Contraseña actualizada con éxito. Se cerrará la sesión por seguridad."),k(""),C(""),setTimeout(()=>{n()},1500)),f(!1)},O=P=>{const{name:D,value:Y}=P.target;i(q=>q?{...q,[D]:Y}:null)},M="w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200";return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:e,children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl z-50 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Mi Perfil"}),c.jsx("button",{onClick:e,className:"text-2xl p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 leading-none",children:"×"})]}),a?c.jsx("p",{children:"Cargando perfil..."}):m?c.jsx("p",{className:"text-red-500",children:m}):r&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-6 p-4 border rounded-md dark:border-gray-700",children:[c.jsx("img",{src:r.avatar_url||`https://ui-avatars.com/api/?name=${r.nombres}+${r.apellidos}&background=random`,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover ring-4 ring-clinical-blue/20"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"avatar-upload",className:"cursor-pointer px-4 py-2 bg-clinical-blue text-white text-sm font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:d?"Subiendo...":"Cambiar Foto"}),c.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:T,disabled:d,className:"hidden"}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Sube una imagen (JPG, PNG)."})]})]}),c.jsxs("form",{onSubmit:A,className:"space-y-4 p-4 border rounded-md dark:border-gray-700",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-200",children:"Datos Personales"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombres"}),c.jsx("input",{type:"text",name:"nombres",value:r.nombres||"",onChange:O,className:M})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apellidos"}),c.jsx("input",{type:"text",name:"apellidos",value:r.apellidos||"",onChange:O,className:M})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"DNI"}),c.jsx("input",{type:"text",name:"dni",value:r.dni||"",onChange:O,className:M})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Celular"}),c.jsx("input",{type:"text",name:"cel",value:r.cel||"",onChange:O,className:M})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email de Acceso"}),c.jsx("input",{type:"text",value:r.email||"",readOnly:!0,disabled:!0,className:`${M} bg-gray-100 dark:bg-gray-900/50`})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:u?"Guardando...":"Guardar Cambios"})})]}),c.jsxs("form",{onSubmit:N,className:"space-y-4 p-4 border rounded-md dark:border-gray-700",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-200",children:"Cambiar Contraseña"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nueva Contraseña"}),c.jsx("input",{type:"password",value:v,onChange:P=>k(P.target.value),className:M,placeholder:"Mínimo 6 caracteres"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar Contraseña"}),c.jsx("input",{type:"password",value:S,onChange:P=>C(P.target.value),className:M})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:u||!v,className:"px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:u?"Actualizando...":"Actualizar Contraseña"})})]})]})]}),c.jsx("style",{children:".animate-fade-in { animation: fadeIn 0.2s ease-out; } @keyframes fadeIn { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }"})]})},WB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("polyline",{points:"12 6 12 12 16 14"})]}),JB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M5 6h14"}),c.jsx("path",{d:"M2 12h20"}),c.jsx("path",{d:"M5 18h14"}),c.jsx("path",{d:"M19 6V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v1"}),c.jsx("path",{d:"M21 12v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6"})]}),XB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"}),c.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h6"}),c.jsx("path",{d:"M12 14v2"})]}),QB=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})}),NC=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),ZB=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),c.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),e8=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m3 21 18-0"}),c.jsx("path",{d:"M5 21V10l7-5 7 5v11"}),c.jsx("path",{d:"M11 21V17a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4"})]}),Fs=({icon:e,label:t,value:n,color:r,valueClass:i})=>c.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[c.jsx("div",{className:`p-2 rounded-full ${r||"bg-gray-100 dark:bg-gray-700"}`,children:e}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 whitespace-nowrap dark:text-gray-400",children:t}),c.jsx("p",{className:`font-semibold text-gray-800 dark:text-gray-100 ${i||"text-sm"}`,children:n})]})]}),t8=()=>{const{theme:e,toggleTheme:t}=Sp(),{user:n,signOut:r,profile:i,empresa:a,sede:o}=Mt(),[u,f]=_.useState(!1),d=_.useRef(null),[h,m]=_.useState(!1),y=_.useRef(null),[v,k]=_.useState([]),[S,C]=_.useState(0),[T,A]=_.useState(!1),[N,O]=_.useState({cajaOpenTime:"--:--",salesCount:0,totalSold:0,cajaStatus:"...",totalEfectivo:0,totalYape:0,totalTransferencia:0,totalOtros:0}),M=_.useCallback(async()=>{if(!n||!i||!o)return;const q=new Date;q.setHours(0,0,0,0);const W=q.toISOString();try{const[F,$]=await Promise.all([te.from("caja").select("f_apertura, estado").eq("sede_id",o.id).eq("estado","abierta").order("f_apertura",{ascending:!1}).limit(1).maybeSingle(),te.from("ventas").select("total, tipo_pago").eq("sede_id",o.id).eq("estado","Completada").gte("created_at",W)]);let R="Cerrada",z="Cerrada";F.data&&F.data.estado==="abierta"&&(z="Abierta",R=F.data.f_apertura?new Date(F.data.f_apertura).toLocaleTimeString("es-PE",{hour:"2-digit",minute:"2-digit"}):"--:--");let V=0,U=0,G=0,le=0,ye=0,B=0;$.data&&$.data.length>0&&(V=$.data.length,$.data.forEach(H=>{const Z=H.total||0;switch(U+=Z,H.tipo_pago){case"Efectivo":G+=Z;break;case"Yape":le+=Z;break;case"Transferencia":ye+=Z;break;case"Otros":B+=Z;break;default:G+=Z}})),O({cajaOpenTime:R,salesCount:V,totalSold:U,cajaStatus:z,totalEfectivo:G,totalYape:le,totalTransferencia:ye,totalOtros:B})}catch(F){console.error("Error fetching header stats:",F.message||F)}},[n,i,o]),P=_.useCallback(async()=>{if(!n||!o)return;const{data:q,error:W,count:F}=await te.from("notificaciones").select("*",{count:"exact"}).eq("estado","no leido").eq("sede_id",o.id).order("fecha_creacion",{ascending:!1});if(W)console.error("Error fetching notifications:",W);else{const{data:$}=await te.from("notificaciones").select("*").eq("sede_id",o.id).order("fecha_creacion",{ascending:!1}).limit(20);k($||[]),C(F||0)}},[n,o]);_.useEffect(()=>{if(n&&o){P();const q=setInterval(P,6e4);return()=>clearInterval(q)}},[n,o,P]),_.useEffect(()=>{if(n&&o){M();const q=setInterval(M,3e4),W=()=>M();return document.addEventListener("saleCompleted",W),()=>{clearInterval(q),document.removeEventListener("saleCompleted",W)}}},[n,o,M]),_.useEffect(()=>{const q=W=>{d.current&&!d.current.contains(W.target)&&f(!1),y.current&&!y.current.contains(W.target)&&m(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const D=async q=>{const{error:W}=await te.from("notificaciones").update({estado:"leido"}).eq("id",q).eq("estado","no leido");W||P()},Y=async()=>{if(!o)return;const{error:q}=await te.from("notificaciones").update({estado:"leido"}).eq("estado","no leido").eq("sede_id",o.id);q||P()};return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"flex-shrink-0 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 bg-white border-b border-soft-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[a?c.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:a.nombre}):c.jsx("h2",{className:"text-lg font-medium text-gray-500 dark:text-gray-400",children:"No perteneces a una empresa"}),o&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-clinical-blue/10 rounded-full text-sm text-clinical-blue dark:bg-clinical-blue/20",children:[c.jsx(Ab,{className:"w-4 h-4"}),c.jsx("span",{className:"font-semibold",children:o.nombre})]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:t,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700",children:e==="light"?c.jsx(eO,{className:"w-6 h-6"}):c.jsx(ZM,{className:"w-6 h-6"})}),c.jsxs("div",{className:"relative",ref:y,children:[c.jsxs("button",{onClick:()=>m(!h),className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700",children:[c.jsx(OB,{className:"w-6 h-6"}),S>0&&c.jsxs("span",{className:"absolute top-1 right-1 flex h-4 w-4",children:[c.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),c.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 text-white text-xs items-center justify-center",children:S>9?"9+":S})]})]}),h&&c.jsx(GB,{notifications:v,onMarkAsRead:D,onMarkAllAsRead:Y,onClose:()=>m(!1)})]}),c.jsxs("div",{className:"relative",ref:d,children:[c.jsxs("button",{onClick:()=>f(!u),className:"flex items-center space-x-2 p-1 rounded-full hover:bg-soft-gray-100 dark:hover:bg-gray-700",children:[c.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:(i==null?void 0:i.avatar_url)||`https://ui-avatars.com/api/?name=${i==null?void 0:i.nombres}+${i==null?void 0:i.apellidos}&background=random`,alt:"User avatar"}),c.jsx(QB,{className:`w-5 h-5 text-gray-500 transition-transform duration-200 dark:text-gray-400 ${u?"rotate-180":""}`})]}),u&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-2xl z-50 border dark:bg-gray-800 dark:border-gray-600 animate-fade-in-down",children:[c.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[c.jsx("p",{className:"font-semibold text-gray-900 truncate dark:text-gray-100",children:i?`${i.nombres} ${i.apellidos}`:"Cargando..."}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i==null?void 0:i.email})]}),c.jsxs("div",{className:"p-2",children:[c.jsxs("button",{onClick:()=>{A(!0),f(!1)},className:"w-full text-left flex items-center px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-soft-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[c.jsx($B,{className:"w-4 h-4 mr-2"})," Mi Perfil"]}),c.jsxs("button",{onClick:r,className:"w-full text-left flex items-center px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-soft-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:[c.jsx(LB,{className:"w-4 h-4 mr-2"})," Cerrar Sesión"]})]})]})]})]})]}),c.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2 md:space-x-4 lg:space-x-6 overflow-x-auto p-3 bg-gray-50 border-b dark:bg-gray-800/50 dark:border-gray-700",children:[c.jsx(Fs,{icon:c.jsx(WB,{className:"w-5 h-5 text-blue-600"}),label:"Apertura",value:N.cajaOpenTime,color:"bg-blue-100 dark:bg-blue-900/50"}),c.jsx(Fs,{icon:c.jsx(JB,{className:`w-5 h-5 ${N.cajaStatus==="Abierta"?"text-green-600":"text-red-600"}`}),label:"Estado Caja",value:N.cajaStatus,color:N.cajaStatus==="Abierta"?"bg-green-100 dark:bg-green-900/50":"bg-red-100 dark:bg-red-900/50",valueClass:`text-sm font-bold ${N.cajaStatus==="Abierta"?"text-pharmacy-green":"text-red-500"}`}),c.jsx("div",{className:"border-l h-10 border-gray-200 dark:border-gray-600"}),c.jsx(Fs,{icon:c.jsx(XB,{className:"w-5 h-5 text-purple-600"}),label:"Ventas Hoy",value:N.salesCount,color:"bg-purple-100 dark:bg-purple-900/50"}),c.jsx("div",{className:"border-l h-10 border-gray-200 dark:border-gray-600"}),c.jsx(Fs,{icon:c.jsx(NC,{className:"w-5 h-5 text-green-600"}),label:"Efectivo",value:`S/ ${N.totalEfectivo.toFixed(2)}`,color:"bg-green-100 dark:bg-green-900/50"}),c.jsx(Fs,{icon:c.jsx(ZB,{className:"w-5 h-5 text-indigo-600"}),label:"Yape/Plin",value:`S/ ${(N.totalYape+N.totalOtros).toFixed(2)}`,color:"bg-indigo-100 dark:bg-indigo-900/50"}),c.jsx(Fs,{icon:c.jsx(e8,{className:"w-5 h-5 text-pink-600"}),label:"Transferencia",value:`S/ ${N.totalTransferencia.toFixed(2)}`,color:"bg-pink-100 dark:bg-pink-900/50"}),c.jsx("div",{className:"border-l h-10 border-gray-200 dark:border-gray-600"}),c.jsx(Fs,{icon:c.jsx(NC,{className:"w-6 h-6 text-gray-800 dark:text-gray-100"}),label:"Total del Día",value:`S/ ${N.totalSold.toFixed(2)}`,color:"bg-gray-200 dark:bg-gray-600",valueClass:"text-base font-bold text-gray-900 dark:text-white"})]}),c.jsx("style",{children:"@keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } .animate-fade-in-down { animation: fade-in-down 0.2s ease-out; }"})]}),T&&c.jsx(YB,{onClose:()=>A(!1)})]})},n8=()=>c.jsxs("div",{className:"flex h-screen bg-soft-gray-100 font-sans dark:bg-gray-900",children:[c.jsx(zB,{}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx(t8,{}),c.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-soft-gray-100 p-6 md:p-8 dark:bg-gray-900",children:c.jsx(JP,{})})]})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let r8,i8;function a8(){return{geminiUrl:r8,vertexUrl:i8}}function s8(e,t,n,r){var i,a;if(!(e!=null&&e.baseUrl)){const o=a8();return t?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{}function Me(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const a=t[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function w(e,t,n){for(let a=0;a<t.length-1;a++){const o=t[a];if(o.endsWith("[]")){const u=o.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let d=0;d<f.length;d++){const h=f[d];w(h,t.slice(a+1),n[d])}else for(const d of f)w(d,t.slice(a+1),n)}return}else if(o.endsWith("[0]")){const u=o.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];w(f[0],t.slice(a+1),n);return}(!e[o]||typeof e[o]!="object")&&(e[o]={}),e=e[o]}const r=t[t.length-1],i=e[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function x(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const i=t[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in e){const o=e[a];return Array.isArray(o)?o.map(u=>x(u,t.slice(r+1),n)):n}else return n}else e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function o8(e,t){for(const[n,r]of Object.entries(t)){const i=n.split("."),a=r.split("."),o=new Set;let u=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){u=f;break}if(u!==-1&&a.length>u)for(let f=u;f<a.length;f++){const d=a[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}Xv(e,i,a,0,o)}}function Xv(e,t,n,r,i){if(r>=t.length||typeof e!="object"||e===null)return;const a=t[r];if(a.endsWith("[]")){const o=a.slice(0,-2),u=e;if(o in u&&Array.isArray(u[o]))for(const f of u[o])Xv(f,t,n,r+1,i)}else if(a==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const o=e,u=Object.keys(o).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of u)f[d]=o[d];for(const[d,h]of Object.entries(f)){const m=[];for(const y of n.slice(r))y==="*"?m.push(d):m.push(y);w(o,m,h)}for(const d of u)delete o[d]}}else{const o=e;a in o&&Xv(o[a],t,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mb(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l8(e){const t={},n=x(e,["operationName"]);n!=null&&w(t,["operationName"],n);const r=x(e,["resourceName"]);return r!=null&&w(t,["_url","resourceName"],r),t}function u8(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["metadata"]);r!=null&&w(t,["metadata"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);a!=null&&w(t,["error"],a);const o=x(e,["response","generateVideoResponse"]);return o!=null&&w(t,["response"],d8(o)),t}function c8(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["metadata"]);r!=null&&w(t,["metadata"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);a!=null&&w(t,["error"],a);const o=x(e,["response"]);return o!=null&&w(t,["response"],f8(o)),t}function d8(e){const t={},n=x(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>h8(o))),w(t,["generatedVideos"],a)}const r=x(e,["raiMediaFilteredCount"]);r!=null&&w(t,["raiMediaFilteredCount"],r);const i=x(e,["raiMediaFilteredReasons"]);return i!=null&&w(t,["raiMediaFilteredReasons"],i),t}function f8(e){const t={},n=x(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>p8(o))),w(t,["generatedVideos"],a)}const r=x(e,["raiMediaFilteredCount"]);r!=null&&w(t,["raiMediaFilteredCount"],r);const i=x(e,["raiMediaFilteredReasons"]);return i!=null&&w(t,["raiMediaFilteredReasons"],i),t}function h8(e){const t={},n=x(e,["video"]);return n!=null&&w(t,["video"],y8(n)),t}function p8(e){const t={},n=x(e,["_self"]);return n!=null&&w(t,["video"],v8(n)),t}function m8(e){const t={},n=x(e,["operationName"]);return n!=null&&w(t,["_url","operationName"],n),t}function g8(e){const t={},n=x(e,["operationName"]);return n!=null&&w(t,["_url","operationName"],n),t}function y8(e){const t={},n=x(e,["uri"]);n!=null&&w(t,["uri"],n);const r=x(e,["encodedVideo"]);r!=null&&w(t,["videoBytes"],Mb(r));const i=x(e,["encoding"]);return i!=null&&w(t,["mimeType"],i),t}function v8(e){const t={},n=x(e,["gcsUri"]);n!=null&&w(t,["uri"],n);const r=x(e,["bytesBase64Encoded"]);r!=null&&w(t,["videoBytes"],Mb(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var AC;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(AC||(AC={}));var jC;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(jC||(jC={}));var PC;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(PC||(PC={}));var vt;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(vt||(vt={}));var MC;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(MC||(MC={}));var OC;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(OC||(OC={}));var RC;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(RC||(RC={}));var IC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(IC||(IC={}));var DC;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(DC||(DC={}));var LC;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(LC||(LC={}));var UC;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UC||(UC={}));var qC;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(qC||(qC={}));var $C;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})($C||($C={}));var BC;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(BC||(BC={}));var zC;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(zC||(zC={}));var FC;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(FC||(FC={}));var kh;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(kh||(kh={}));var VC;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(VC||(VC={}));var Qv;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qv||(Qv={}));var HC;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(HC||(HC={}));var GC;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(GC||(GC={}));var KC;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V"})(KC||(KC={}));var YC;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(YC||(YC={}));var WC;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(WC||(WC={}));var JC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(JC||(JC={}));var XC;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(XC||(XC={}));var QC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(QC||(QC={}));var ZC;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(ZC||(ZC={}));var e2;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(e2||(e2={}));var t2;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(t2||(t2={}));var n2;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(n2||(n2={}));var r2;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(r2||(r2={}));var i2;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(i2||(i2={}));var a2;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(a2||(a2={}));var s2;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(s2||(s2={}));var o2;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(o2||(o2={}));var l2;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(l2||(l2={}));var u2;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(u2||(u2={}));var c2;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(c2||(c2={}));var d2;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(d2||(d2={}));var f2;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(f2||(f2={}));var h2;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(h2||(h2={}));var p2;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p2||(p2={}));var m2;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m2||(m2={}));var g2;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(g2||(g2={}));var y2;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(y2||(y2={}));var v2;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(v2||(v2={}));var x2;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(x2||(x2={}));var vl;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(vl||(vl={}));class Zv{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ac{get text(){var t,n,r,i,a,o,u,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const m=[];for(const y of(f=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[v,k]of Object.entries(y))v!=="text"&&v!=="thought"&&(k!==null||k!==void 0)&&m.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;h=!0,d+=y.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var t,n,r,i,a,o,u,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const m of(f=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[y,v]of Object.entries(m))y!=="inlineData"&&(v!==null||v!==void 0)&&h.push(y);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,r,i,a,o,u,f;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,r,i,a,o,u,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(f=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,r,i,a,o,u,f,d;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(f=(u=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class b2{}class w2{}class x8{}class b8{}class w8{}class _8{}class _2{}class S2{}class k2{}class S8{}class Eh{_fromAPIResponse({apiResponse:t,isVertexAI:n}){const r=new Eh;let i;const a=t;return n?i=c8(a):i=u8(a),Object.assign(r,i),r}}class E2{}class C2{}class T2{}class k8{}class E8{}class C8{}class N2{}class T8{get text(){var t,n,r;let i="",a=!1;const o=[];for(const u of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&o.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,i+=u.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var t,n,r;let i="";const a=[];for(const o of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(o))u!=="inlineData"&&f!==null&&a.push(u);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class N8{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ht(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function uO(e,t){const n=ht(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function cO(e){return Array.isArray(e)?e.map(t=>Ch(t)):[Ch(e)]}function Ch(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function dO(e){const t=Ch(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function fO(e){const t=Ch(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function A2(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function hO(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>A2(t)):[A2(e)]}function ex(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function j2(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function P2(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Kn(e){if(e==null)throw new Error("ContentUnion is required");return ex(e)?e:{role:"user",parts:hO(e)}}function Ob(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Kn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Kn(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Kn(n)):[Kn(t)]}function ri(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(j2(e)||P2(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kn(e)]}const t=[],n=[],r=ex(e[0]);for(const i of e){const a=ex(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(i);else{if(j2(i)||P2(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:hO(n)}),t}function A8(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(vt).includes(n[0].toUpperCase())?n[0].toUpperCase():vt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(vt).includes(r.toUpperCase())?r.toUpperCase():vt.TYPE_UNSPECIFIED})}}function wl(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=e.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,e=a[1]):a[1].type==="null"&&(t.nullable=!0,e=a[0])),e.type instanceof Array&&A8(e.type,t);for(const[o,u]of Object.entries(e))if(u!=null)if(o=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(vt).includes(u.toUpperCase())?u.toUpperCase():vt.TYPE_UNSPECIFIED}else if(n.includes(o))t[o]=wl(u);else if(r.includes(o)){const f=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}f.push(wl(d))}t[o]=f}else if(i.includes(o)){const f={};for(const[d,h]of Object.entries(u))f[d]=wl(h);t[o]=f}else{if(o==="additionalProperties")continue;t[o]=u}return t}function Rb(e){return wl(e)}function Ib(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Db(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Yl(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=wl(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=wl(t.response));return e}function Wl(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function j8(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function ka(e,t){if(typeof t!="string")throw new Error("name must be a string");return j8(e,t,"cachedContents")}function pO(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function gs(e){return Mb(e)}function P8(e){return e!=null&&typeof e=="object"&&"name"in e}function M8(e){return e!=null&&typeof e=="object"&&"video"in e}function O8(e){return e!=null&&typeof e=="object"&&"uri"in e}function mO(e){var t;let n;if(P8(e)&&(n=e.name),!(O8(e)&&(n=e.uri,n===void 0))&&!(M8(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function gO(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function yO(e){for(const t of["models","tunedModels","publisherModels"])if(R8(e,t))return e[t];return[]}function R8(e,t){return e!==null&&typeof e=="object"&&t in e}function I8(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function D8(e,t={}){const n=[],r=new Set;for(const i of e){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=I8(i,t);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function vO(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function L8(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function xO(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let a=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const f=o.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Jl(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function bO(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U8(e){const t={},n=x(e,["responsesFile"]);n!=null&&w(t,["fileName"],n);const r=x(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>mz(o))),w(t,["inlinedResponses"],a)}const i=x(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),w(t,["inlinedEmbedContentResponses"],a)}return t}function q8(e){const t={},n=x(e,["predictionsFormat"]);n!=null&&w(t,["format"],n);const r=x(e,["gcsDestination","outputUriPrefix"]);r!=null&&w(t,["gcsUri"],r);const i=x(e,["bigqueryDestination","outputUri"]);return i!=null&&w(t,["bigqueryUri"],i),t}function $8(e){const t={},n=x(e,["format"]);n!=null&&w(t,["predictionsFormat"],n);const r=x(e,["gcsUri"]);r!=null&&w(t,["gcsDestination","outputUriPrefix"],r);const i=x(e,["bigqueryUri"]);if(i!=null&&w(t,["bigqueryDestination","outputUri"],i),x(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function fh(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["metadata","displayName"]);r!=null&&w(t,["displayName"],r);const i=x(e,["metadata","state"]);i!=null&&w(t,["state"],bO(i));const a=x(e,["metadata","createTime"]);a!=null&&w(t,["createTime"],a);const o=x(e,["metadata","endTime"]);o!=null&&w(t,["endTime"],o);const u=x(e,["metadata","updateTime"]);u!=null&&w(t,["updateTime"],u);const f=x(e,["metadata","model"]);f!=null&&w(t,["model"],f);const d=x(e,["metadata","output"]);return d!=null&&w(t,["dest"],U8(xO(d))),t}function tx(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["displayName"]);r!=null&&w(t,["displayName"],r);const i=x(e,["state"]);i!=null&&w(t,["state"],bO(i));const a=x(e,["error"]);a!=null&&w(t,["error"],a);const o=x(e,["createTime"]);o!=null&&w(t,["createTime"],o);const u=x(e,["startTime"]);u!=null&&w(t,["startTime"],u);const f=x(e,["endTime"]);f!=null&&w(t,["endTime"],f);const d=x(e,["updateTime"]);d!=null&&w(t,["updateTime"],d);const h=x(e,["model"]);h!=null&&w(t,["model"],h);const m=x(e,["inputConfig"]);m!=null&&w(t,["src"],B8(m));const y=x(e,["outputConfig"]);return y!=null&&w(t,["dest"],q8(xO(y))),t}function B8(e){const t={},n=x(e,["instancesFormat"]);n!=null&&w(t,["format"],n);const r=x(e,["gcsSource","uris"]);r!=null&&w(t,["gcsUri"],r);const i=x(e,["bigquerySource","inputUri"]);return i!=null&&w(t,["bigqueryUri"],i),t}function z8(e,t){const n={};if(x(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(t,["fileName"]);r!=null&&w(n,["fileName"],r);const i=x(t,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>pz(e,o))),w(n,["requests","requests"],a)}return n}function F8(e){const t={},n=x(e,["format"]);n!=null&&w(t,["instancesFormat"],n);const r=x(e,["gcsUri"]);r!=null&&w(t,["gcsSource","uris"],r);const i=x(e,["bigqueryUri"]);if(i!=null&&w(t,["bigquerySource","inputUri"],i),x(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function V8(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["data"]);n!=null&&w(t,["data"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function H8(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function G8(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function K8(e){const t={},n=x(e,["content"]);n!=null&&w(t,["content"],n);const r=x(e,["citationMetadata"]);r!=null&&w(t,["citationMetadata"],Y8(r));const i=x(e,["tokenCount"]);i!=null&&w(t,["tokenCount"],i);const a=x(e,["finishReason"]);a!=null&&w(t,["finishReason"],a);const o=x(e,["urlContextMetadata"]);o!=null&&w(t,["urlContextMetadata"],o);const u=x(e,["avgLogprobs"]);u!=null&&w(t,["avgLogprobs"],u);const f=x(e,["groundingMetadata"]);f!=null&&w(t,["groundingMetadata"],f);const d=x(e,["index"]);d!=null&&w(t,["index"],d);const h=x(e,["logprobsResult"]);h!=null&&w(t,["logprobsResult"],h);const m=x(e,["safetyRatings"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>v)),w(t,["safetyRatings"],y)}return t}function Y8(e){const t={},n=x(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(t,["citations"],r)}return t}function wO(e){const t={},n=x(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>_z(a))),w(t,["parts"],i)}const r=x(e,["role"]);return r!=null&&w(t,["role"],r),t}function W8(e,t){const n={},r=x(e,["displayName"]);if(t!==void 0&&r!=null&&w(t,["batch","displayName"],r),x(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function J8(e,t){const n={},r=x(e,["displayName"]);t!==void 0&&r!=null&&w(t,["displayName"],r);const i=x(e,["dest"]);return t!==void 0&&i!=null&&w(t,["outputConfig"],$8(L8(i))),n}function M2(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["src"]);i!=null&&w(n,["batch","inputConfig"],z8(e,vO(e,i)));const a=x(t,["config"]);return a!=null&&W8(a,n),n}function X8(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["model"],ht(e,r));const i=x(t,["src"]);i!=null&&w(n,["inputConfig"],F8(vO(e,i)));const a=x(t,["config"]);return a!=null&&J8(a,n),n}function Q8(e,t){const n={},r=x(e,["displayName"]);return t!==void 0&&r!=null&&w(t,["batch","displayName"],r),n}function Z8(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["src"]);i!=null&&w(n,["batch","inputConfig"],sz(e,i));const a=x(t,["config"]);return a!=null&&Q8(a,n),n}function ez(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function tz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function nz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);return a!=null&&w(t,["error"],a),t}function rz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);return a!=null&&w(t,["error"],a),t}function iz(e,t){const n={},r=x(t,["contents"]);if(r!=null){let a=Ob(e,r);Array.isArray(a)&&(a=a.map(o=>o)),w(n,["requests[]","request","content"],a)}const i=x(t,["config"]);return i!=null&&(w(n,["_self"],az(i,n)),o8(n,{"requests[].*":"requests[].request.*"})),n}function az(e,t){const n={},r=x(e,["taskType"]);t!==void 0&&r!=null&&w(t,["requests[]","taskType"],r);const i=x(e,["title"]);t!==void 0&&i!=null&&w(t,["requests[]","title"],i);const a=x(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&w(t,["requests[]","outputDimensionality"],a),x(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sz(e,t){const n={},r=x(t,["fileName"]);r!=null&&w(n,["file_name"],r);const i=x(t,["inlinedRequests"]);return i!=null&&w(n,["requests"],iz(e,i)),n}function oz(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["fileUri"]);n!=null&&w(t,["fileUri"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function lz(e,t,n){const r={},i=x(t,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],wO(Kn(i)));const a=x(t,["temperature"]);a!=null&&w(r,["temperature"],a);const o=x(t,["topP"]);o!=null&&w(r,["topP"],o);const u=x(t,["topK"]);u!=null&&w(r,["topK"],u);const f=x(t,["candidateCount"]);f!=null&&w(r,["candidateCount"],f);const d=x(t,["maxOutputTokens"]);d!=null&&w(r,["maxOutputTokens"],d);const h=x(t,["stopSequences"]);h!=null&&w(r,["stopSequences"],h);const m=x(t,["responseLogprobs"]);m!=null&&w(r,["responseLogprobs"],m);const y=x(t,["logprobs"]);y!=null&&w(r,["logprobs"],y);const v=x(t,["presencePenalty"]);v!=null&&w(r,["presencePenalty"],v);const k=x(t,["frequencyPenalty"]);k!=null&&w(r,["frequencyPenalty"],k);const S=x(t,["seed"]);S!=null&&w(r,["seed"],S);const C=x(t,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const T=x(t,["responseSchema"]);T!=null&&w(r,["responseSchema"],Rb(T));const A=x(t,["responseJsonSchema"]);if(A!=null&&w(r,["responseJsonSchema"],A),x(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=x(t,["safetySettings"]);if(n!==void 0&&N!=null){let $=N;Array.isArray($)&&($=$.map(R=>Sz(R))),w(n,["safetySettings"],$)}const O=x(t,["tools"]);if(n!==void 0&&O!=null){let $=Wl(O);Array.isArray($)&&($=$.map(R=>kz(Yl(R)))),w(n,["tools"],$)}const M=x(t,["toolConfig"]);if(n!==void 0&&M!=null&&w(n,["toolConfig"],M),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(t,["cachedContent"]);n!==void 0&&P!=null&&w(n,["cachedContent"],ka(e,P));const D=x(t,["responseModalities"]);D!=null&&w(r,["responseModalities"],D);const Y=x(t,["mediaResolution"]);Y!=null&&w(r,["mediaResolution"],Y);const q=x(t,["speechConfig"]);if(q!=null&&w(r,["speechConfig"],Ib(q)),x(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=x(t,["thinkingConfig"]);W!=null&&w(r,["thinkingConfig"],W);const F=x(t,["imageConfig"]);return F!=null&&w(r,["imageConfig"],F),r}function uz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>K8(d))),w(t,["candidates"],f)}const i=x(e,["modelVersion"]);i!=null&&w(t,["modelVersion"],i);const a=x(e,["promptFeedback"]);a!=null&&w(t,["promptFeedback"],a);const o=x(e,["responseId"]);o!=null&&w(t,["responseId"],o);const u=x(e,["usageMetadata"]);return u!=null&&w(t,["usageMetadata"],u),t}function cz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function dz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],Jl(e,r)),n}function fz(e){const t={};if(x(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(e,["enableWidget"]);return n!=null&&w(t,["enableWidget"],n),t}function hz(e){const t={},n=x(e,["timeRangeFilter"]);if(n!=null&&w(t,["timeRangeFilter"],n),x(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function pz(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["request","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let u=ri(i);Array.isArray(u)&&(u=u.map(f=>wO(f))),w(n,["request","contents"],u)}const a=x(t,["metadata"]);a!=null&&w(n,["metadata"],a);const o=x(t,["config"]);return o!=null&&w(n,["request","generationConfig"],lz(e,o,x(n,["request"],{}))),n}function mz(e){const t={},n=x(e,["response"]);n!=null&&w(t,["response"],uz(n));const r=x(e,["error"]);return r!=null&&w(t,["error"],r),t}function gz(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);if(t!==void 0&&i!=null&&w(t,["_query","pageToken"],i),x(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function yz(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);t!==void 0&&i!=null&&w(t,["_query","pageToken"],i);const a=x(e,["filter"]);return t!==void 0&&a!=null&&w(t,["_query","filter"],a),n}function vz(e){const t={},n=x(e,["config"]);return n!=null&&gz(n,t),t}function xz(e){const t={},n=x(e,["config"]);return n!=null&&yz(n,t),t}function bz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>fh(o))),w(t,["batchJobs"],a)}return t}function wz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>tx(o))),w(t,["batchJobs"],a)}return t}function _z(e){const t={},n=x(e,["videoMetadata"]);n!=null&&w(t,["videoMetadata"],n);const r=x(e,["thought"]);r!=null&&w(t,["thought"],r);const i=x(e,["inlineData"]);i!=null&&w(t,["inlineData"],V8(i));const a=x(e,["fileData"]);a!=null&&w(t,["fileData"],oz(a));const o=x(e,["thoughtSignature"]);o!=null&&w(t,["thoughtSignature"],o);const u=x(e,["functionCall"]);u!=null&&w(t,["functionCall"],u);const f=x(e,["codeExecutionResult"]);f!=null&&w(t,["codeExecutionResult"],f);const d=x(e,["executableCode"]);d!=null&&w(t,["executableCode"],d);const h=x(e,["functionResponse"]);h!=null&&w(t,["functionResponse"],h);const m=x(e,["text"]);return m!=null&&w(t,["text"],m),t}function Sz(e){const t={};if(x(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(e,["category"]);n!=null&&w(t,["category"],n);const r=x(e,["threshold"]);return r!=null&&w(t,["threshold"],r),t}function kz(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["functionDeclarations"],d)}if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(e,["googleSearch"]);r!=null&&w(t,["googleSearch"],hz(r));const i=x(e,["googleSearchRetrieval"]);if(i!=null&&w(t,["googleSearchRetrieval"],i),x(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(e,["googleMaps"]);a!=null&&w(t,["googleMaps"],fz(a));const o=x(e,["urlContext"]);o!=null&&w(t,["urlContext"],o);const u=x(e,["computerUse"]);u!=null&&w(t,["computerUse"],u);const f=x(e,["codeExecution"]);return f!=null&&w(t,["codeExecution"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ao;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ao||(ao={}));class Jc{constructor(t,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,i)}init(t,n,r){var i,a;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ez extends vo{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Jc(ao.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=M2(this.apiClient,t),r=n._url,i=Me("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,f=u.requests,d=[];for(const h of f){const m=Object.assign({},h);if(m.systemInstruction){const y=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=y,m.request=v}d.push(m)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(t),o=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=X8(this.apiClient,t);return u=Me("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>tx(h))}else{const d=M2(this.apiClient,t);return u=Me("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>fh(h))}}async createEmbeddingsInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Z8(this.apiClient,t);return a=Me("{model}:asyncBatchEmbedContent",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>fh(f))}}async get(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=dz(this.apiClient,t);return u=Me("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>tx(h))}else{const d=cz(this.apiClient,t);return u=Me("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>fh(h))}}async cancel(t){var n,r,i,a;let o="",u={};if(this.apiClient.isVertexAI()){const f=G8(this.apiClient,t);o=Me("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=H8(this.apiClient,t);o=Me("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=xz(t);return u=Me("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=wz(h),y=new N2;return Object.assign(y,m),y})}else{const d=vz(t);return u=Me("batches",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=bz(h),y=new N2;return Object.assign(y,m),y})}}async delete(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=tz(this.apiClient,t);return u=Me("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>rz(h))}else{const d=ez(this.apiClient,t);return u=Me("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>nz(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cz(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["data"]);n!=null&&w(t,["data"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function O2(e){const t={},n=x(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Kz(a))),w(t,["parts"],i)}const r=x(e,["role"]);return r!=null&&w(t,["role"],r),t}function Tz(e,t){const n={},r=x(e,["ttl"]);t!==void 0&&r!=null&&w(t,["ttl"],r);const i=x(e,["expireTime"]);t!==void 0&&i!=null&&w(t,["expireTime"],i);const a=x(e,["displayName"]);t!==void 0&&a!=null&&w(t,["displayName"],a);const o=x(e,["contents"]);if(t!==void 0&&o!=null){let h=ri(o);Array.isArray(h)&&(h=h.map(m=>O2(m))),w(t,["contents"],h)}const u=x(e,["systemInstruction"]);t!==void 0&&u!=null&&w(t,["systemInstruction"],O2(Kn(u)));const f=x(e,["tools"]);if(t!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>Yz(m))),w(t,["tools"],h)}const d=x(e,["toolConfig"]);if(t!==void 0&&d!=null&&w(t,["toolConfig"],d),x(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Nz(e,t){const n={},r=x(e,["ttl"]);t!==void 0&&r!=null&&w(t,["ttl"],r);const i=x(e,["expireTime"]);t!==void 0&&i!=null&&w(t,["expireTime"],i);const a=x(e,["displayName"]);t!==void 0&&a!=null&&w(t,["displayName"],a);const o=x(e,["contents"]);if(t!==void 0&&o!=null){let m=ri(o);Array.isArray(m)&&(m=m.map(y=>y)),w(t,["contents"],m)}const u=x(e,["systemInstruction"]);t!==void 0&&u!=null&&w(t,["systemInstruction"],Kn(u));const f=x(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>Wz(y))),w(t,["tools"],m)}const d=x(e,["toolConfig"]);t!==void 0&&d!=null&&w(t,["toolConfig"],d);const h=x(e,["kmsKeyName"]);return t!==void 0&&h!=null&&w(t,["encryption_spec","kmsKeyName"],h),n}function Az(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["model"],uO(e,r));const i=x(t,["config"]);return i!=null&&Tz(i,n),n}function jz(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["model"],uO(e,r));const i=x(t,["config"]);return i!=null&&Nz(i,n),n}function Pz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],ka(e,r)),n}function Mz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],ka(e,r)),n}function Oz(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function Rz(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function Iz(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["fileUri"]);n!=null&&w(t,["fileUri"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function Dz(e){const t={};if(x(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(e,["description"]);n!=null&&w(t,["description"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["parameters"]);i!=null&&w(t,["parameters"],i);const a=x(e,["parametersJsonSchema"]);a!=null&&w(t,["parametersJsonSchema"],a);const o=x(e,["response"]);o!=null&&w(t,["response"],o);const u=x(e,["responseJsonSchema"]);return u!=null&&w(t,["responseJsonSchema"],u),t}function Lz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],ka(e,r)),n}function Uz(e,t){const n={},r=x(t,["name"]);return r!=null&&w(n,["_url","name"],ka(e,r)),n}function qz(e){const t={};if(x(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(e,["enableWidget"]);return n!=null&&w(t,["enableWidget"],n),t}function $z(e){const t={},n=x(e,["timeRangeFilter"]);if(n!=null&&w(t,["timeRangeFilter"],n),x(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Bz(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);return t!==void 0&&i!=null&&w(t,["_query","pageToken"],i),n}function zz(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);return t!==void 0&&i!=null&&w(t,["_query","pageToken"],i),n}function Fz(e){const t={},n=x(e,["config"]);return n!=null&&Bz(n,t),t}function Vz(e){const t={},n=x(e,["config"]);return n!=null&&zz(n,t),t}function Hz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),w(t,["cachedContents"],a)}return t}function Gz(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),w(t,["cachedContents"],a)}return t}function Kz(e){const t={},n=x(e,["videoMetadata"]);n!=null&&w(t,["videoMetadata"],n);const r=x(e,["thought"]);r!=null&&w(t,["thought"],r);const i=x(e,["inlineData"]);i!=null&&w(t,["inlineData"],Cz(i));const a=x(e,["fileData"]);a!=null&&w(t,["fileData"],Iz(a));const o=x(e,["thoughtSignature"]);o!=null&&w(t,["thoughtSignature"],o);const u=x(e,["functionCall"]);u!=null&&w(t,["functionCall"],u);const f=x(e,["codeExecutionResult"]);f!=null&&w(t,["codeExecutionResult"],f);const d=x(e,["executableCode"]);d!=null&&w(t,["executableCode"],d);const h=x(e,["functionResponse"]);h!=null&&w(t,["functionResponse"],h);const m=x(e,["text"]);return m!=null&&w(t,["text"],m),t}function Yz(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["functionDeclarations"],d)}if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(e,["googleSearch"]);r!=null&&w(t,["googleSearch"],$z(r));const i=x(e,["googleSearchRetrieval"]);if(i!=null&&w(t,["googleSearchRetrieval"],i),x(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(e,["googleMaps"]);a!=null&&w(t,["googleMaps"],qz(a));const o=x(e,["urlContext"]);o!=null&&w(t,["urlContext"],o);const u=x(e,["computerUse"]);u!=null&&w(t,["computerUse"],u);const f=x(e,["codeExecution"]);return f!=null&&w(t,["codeExecution"],f),t}function Wz(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>Dz(y))),w(t,["functionDeclarations"],m)}const r=x(e,["retrieval"]);r!=null&&w(t,["retrieval"],r);const i=x(e,["googleSearch"]);i!=null&&w(t,["googleSearch"],i);const a=x(e,["googleSearchRetrieval"]);a!=null&&w(t,["googleSearchRetrieval"],a);const o=x(e,["enterpriseWebSearch"]);o!=null&&w(t,["enterpriseWebSearch"],o);const u=x(e,["googleMaps"]);u!=null&&w(t,["googleMaps"],u);const f=x(e,["urlContext"]);f!=null&&w(t,["urlContext"],f);const d=x(e,["computerUse"]);d!=null&&w(t,["computerUse"],d);const h=x(e,["codeExecution"]);return h!=null&&w(t,["codeExecution"],h),t}function Jz(e,t){const n={},r=x(e,["ttl"]);t!==void 0&&r!=null&&w(t,["ttl"],r);const i=x(e,["expireTime"]);return t!==void 0&&i!=null&&w(t,["expireTime"],i),n}function Xz(e,t){const n={},r=x(e,["ttl"]);t!==void 0&&r!=null&&w(t,["ttl"],r);const i=x(e,["expireTime"]);return t!==void 0&&i!=null&&w(t,["expireTime"],i),n}function Qz(e,t){const n={},r=x(t,["name"]);r!=null&&w(n,["_url","name"],ka(e,r));const i=x(t,["config"]);return i!=null&&Jz(i,n),n}function Zz(e,t){const n={},r=x(t,["name"]);r!=null&&w(n,["_url","name"],ka(e,r));const i=x(t,["config"]);return i!=null&&Xz(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eF extends vo{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jc(ao.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=jz(this.apiClient,t);return u=Me("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=Az(this.apiClient,t);return u=Me("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=Uz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=Lz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=Mz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=Rz(h),y=new C2;return Object.assign(y,m),y})}else{const d=Pz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=Oz(h),y=new C2;return Object.assign(y,m),y})}}async update(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=Zz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=Qz(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=Vz(t);return u=Me("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=Gz(h),y=new T2;return Object.assign(y,m),y})}else{const d=Fz(t);return u=Me("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=Hz(h),y=new T2;return Object.assign(y,m),y})}}}function R2(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(e){return this instanceof Bt?(this.v=e,this):new Bt(e)}function _l(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(k){return Promise.resolve(k).then(v,m)}}function u(v,k){r[v]&&(i[v]=function(S){return new Promise(function(C,T){a.push([v,S,C,T])>1||f(v,S)})},k&&(i[v]=k(i[v])))}function f(v,k){try{d(r[v](k))}catch(S){y(a[0][3],S)}}function d(v){v.value instanceof Bt?Promise.resolve(v.value.v).then(h,m):y(a[0][2],v)}function h(v){f("next",v)}function m(v){f("throw",v)}function y(v,k){v(k),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Ec(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof R2=="function"?R2(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(u,f){o=e[a](o),i(u,f,o.done,o.value)})}}function i(a,o,u,f){Promise.resolve(f).then(function(d){a({value:d,done:u})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tF(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:_O(n)}function _O(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function nF(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function I2(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const i=[];let a=!0;for(;r<n&&e[r].role==="model";)i.push(e[r]),a&&!_O(e[r])&&(a=!1),r++;a?t.push(...i):t.pop()}return t}class rF{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new iF(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class iF{constructor(t,n,r,i={},a=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),nF(a)}async sendMessage(t){var n;await this.sendPromise;const r=Kn(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,u;const f=await i,d=(o=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,h=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let y=[];h!=null&&(y=(u=h.slice(m))!==null&&u!==void 0?u:[]);const v=d?[d]:[];this.recordHistory(r,v,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const r=Kn(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(t=!1){const n=t?I2(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var r,i;return _l(this,arguments,function*(){var o,u,f,d;const h=[];try{for(var m=!0,y=Ec(t),v;v=yield Bt(y.next()),o=v.done,!o;m=!0){d=v.value,m=!1;const k=d;if(tF(k)){const S=(i=(r=k.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&h.push(S)}yield yield Bt(k)}}catch(k){u={error:k}}finally{try{!m&&!o&&(f=y.return)&&(yield Bt(f.call(y)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(t,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...I2(r)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kp extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,kp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aF(e){const t={},n=x(e,["file"]);return n!=null&&w(t,["file"],n),t}function sF(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function oF(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","file"],mO(n)),t}function lF(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function uF(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","file"],mO(n)),t}function cF(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);return t!==void 0&&i!=null&&w(t,["_query","pageToken"],i),n}function dF(e){const t={},n=x(e,["config"]);return n!=null&&cF(n,t),t}function fF(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),w(t,["files"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hF extends vo{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jc(ao.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dF(t);return a=Me("files",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=fF(f),h=new k8;return Object.assign(h,d),h})}}async createInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aF(t);return a=Me("upload/v1beta/files",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=sF(f),h=new E8;return Object.assign(h,d),h})}}async get(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uF(t);return a=Me("files/{file}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oF(t);return a=Me("files/{file}",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=lF(f),h=new C8;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hh(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["data"]);n!=null&&w(t,["data"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function pF(e){const t={},n=x(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>AF(a))),w(t,["parts"],i)}const r=x(e,["role"]);return r!=null&&w(t,["role"],r),t}function mF(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["fileUri"]);n!=null&&w(t,["fileUri"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function gF(e){const t={};if(x(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(e,["description"]);n!=null&&w(t,["description"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["parameters"]);i!=null&&w(t,["parameters"],i);const a=x(e,["parametersJsonSchema"]);a!=null&&w(t,["parametersJsonSchema"],a);const o=x(e,["response"]);o!=null&&w(t,["response"],o);const u=x(e,["responseJsonSchema"]);return u!=null&&w(t,["responseJsonSchema"],u),t}function yF(e){const t={},n=x(e,["modelSelectionConfig"]);n!=null&&w(t,["modelConfig"],n);const r=x(e,["audioTimestamp"]);r!=null&&w(t,["audioTimestamp"],r);const i=x(e,["candidateCount"]);i!=null&&w(t,["candidateCount"],i);const a=x(e,["enableAffectiveDialog"]);a!=null&&w(t,["enableAffectiveDialog"],a);const o=x(e,["frequencyPenalty"]);o!=null&&w(t,["frequencyPenalty"],o);const u=x(e,["logprobs"]);u!=null&&w(t,["logprobs"],u);const f=x(e,["maxOutputTokens"]);f!=null&&w(t,["maxOutputTokens"],f);const d=x(e,["mediaResolution"]);d!=null&&w(t,["mediaResolution"],d);const h=x(e,["presencePenalty"]);h!=null&&w(t,["presencePenalty"],h);const m=x(e,["responseJsonSchema"]);m!=null&&w(t,["responseJsonSchema"],m);const y=x(e,["responseLogprobs"]);y!=null&&w(t,["responseLogprobs"],y);const v=x(e,["responseMimeType"]);v!=null&&w(t,["responseMimeType"],v);const k=x(e,["responseModalities"]);k!=null&&w(t,["responseModalities"],k);const S=x(e,["responseSchema"]);S!=null&&w(t,["responseSchema"],S);const C=x(e,["routingConfig"]);C!=null&&w(t,["routingConfig"],C);const T=x(e,["seed"]);T!=null&&w(t,["seed"],T);const A=x(e,["speechConfig"]);A!=null&&w(t,["speechConfig"],SO(A));const N=x(e,["stopSequences"]);N!=null&&w(t,["stopSequences"],N);const O=x(e,["temperature"]);O!=null&&w(t,["temperature"],O);const M=x(e,["thinkingConfig"]);M!=null&&w(t,["thinkingConfig"],M);const P=x(e,["topK"]);P!=null&&w(t,["topK"],P);const D=x(e,["topP"]);if(D!=null&&w(t,["topP"],D),x(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function vF(e){const t={};if(x(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(e,["enableWidget"]);return n!=null&&w(t,["enableWidget"],n),t}function xF(e){const t={},n=x(e,["timeRangeFilter"]);if(n!=null&&w(t,["timeRangeFilter"],n),x(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function bF(e,t){const n={},r=x(e,["generationConfig"]);t!==void 0&&r!=null&&w(t,["setup","generationConfig"],r);const i=x(e,["responseModalities"]);t!==void 0&&i!=null&&w(t,["setup","generationConfig","responseModalities"],i);const a=x(e,["temperature"]);t!==void 0&&a!=null&&w(t,["setup","generationConfig","temperature"],a);const o=x(e,["topP"]);t!==void 0&&o!=null&&w(t,["setup","generationConfig","topP"],o);const u=x(e,["topK"]);t!==void 0&&u!=null&&w(t,["setup","generationConfig","topK"],u);const f=x(e,["maxOutputTokens"]);t!==void 0&&f!=null&&w(t,["setup","generationConfig","maxOutputTokens"],f);const d=x(e,["mediaResolution"]);t!==void 0&&d!=null&&w(t,["setup","generationConfig","mediaResolution"],d);const h=x(e,["seed"]);t!==void 0&&h!=null&&w(t,["setup","generationConfig","seed"],h);const m=x(e,["speechConfig"]);t!==void 0&&m!=null&&w(t,["setup","generationConfig","speechConfig"],Db(m));const y=x(e,["thinkingConfig"]);t!==void 0&&y!=null&&w(t,["setup","generationConfig","thinkingConfig"],y);const v=x(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&w(t,["setup","generationConfig","enableAffectiveDialog"],v);const k=x(e,["systemInstruction"]);t!==void 0&&k!=null&&w(t,["setup","systemInstruction"],pF(Kn(k)));const S=x(e,["tools"]);if(t!==void 0&&S!=null){let P=Wl(S);Array.isArray(P)&&(P=P.map(D=>PF(Yl(D)))),w(t,["setup","tools"],P)}const C=x(e,["sessionResumption"]);t!==void 0&&C!=null&&w(t,["setup","sessionResumption"],jF(C));const T=x(e,["inputAudioTranscription"]);t!==void 0&&T!=null&&w(t,["setup","inputAudioTranscription"],T);const A=x(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&w(t,["setup","outputAudioTranscription"],A);const N=x(e,["realtimeInputConfig"]);t!==void 0&&N!=null&&w(t,["setup","realtimeInputConfig"],N);const O=x(e,["contextWindowCompression"]);t!==void 0&&O!=null&&w(t,["setup","contextWindowCompression"],O);const M=x(e,["proactivity"]);return t!==void 0&&M!=null&&w(t,["setup","proactivity"],M),n}function wF(e,t){const n={},r=x(e,["generationConfig"]);t!==void 0&&r!=null&&w(t,["setup","generationConfig"],yF(r));const i=x(e,["responseModalities"]);t!==void 0&&i!=null&&w(t,["setup","generationConfig","responseModalities"],i);const a=x(e,["temperature"]);t!==void 0&&a!=null&&w(t,["setup","generationConfig","temperature"],a);const o=x(e,["topP"]);t!==void 0&&o!=null&&w(t,["setup","generationConfig","topP"],o);const u=x(e,["topK"]);t!==void 0&&u!=null&&w(t,["setup","generationConfig","topK"],u);const f=x(e,["maxOutputTokens"]);t!==void 0&&f!=null&&w(t,["setup","generationConfig","maxOutputTokens"],f);const d=x(e,["mediaResolution"]);t!==void 0&&d!=null&&w(t,["setup","generationConfig","mediaResolution"],d);const h=x(e,["seed"]);t!==void 0&&h!=null&&w(t,["setup","generationConfig","seed"],h);const m=x(e,["speechConfig"]);t!==void 0&&m!=null&&w(t,["setup","generationConfig","speechConfig"],SO(Db(m)));const y=x(e,["thinkingConfig"]);t!==void 0&&y!=null&&w(t,["setup","generationConfig","thinkingConfig"],y);const v=x(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&w(t,["setup","generationConfig","enableAffectiveDialog"],v);const k=x(e,["systemInstruction"]);t!==void 0&&k!=null&&w(t,["setup","systemInstruction"],Kn(k));const S=x(e,["tools"]);if(t!==void 0&&S!=null){let P=Wl(S);Array.isArray(P)&&(P=P.map(D=>MF(Yl(D)))),w(t,["setup","tools"],P)}const C=x(e,["sessionResumption"]);t!==void 0&&C!=null&&w(t,["setup","sessionResumption"],C);const T=x(e,["inputAudioTranscription"]);t!==void 0&&T!=null&&w(t,["setup","inputAudioTranscription"],T);const A=x(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&w(t,["setup","outputAudioTranscription"],A);const N=x(e,["realtimeInputConfig"]);t!==void 0&&N!=null&&w(t,["setup","realtimeInputConfig"],N);const O=x(e,["contextWindowCompression"]);t!==void 0&&O!=null&&w(t,["setup","contextWindowCompression"],O);const M=x(e,["proactivity"]);return t!==void 0&&M!=null&&w(t,["setup","proactivity"],M),n}function _F(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["setup","model"],ht(e,r));const i=x(t,["config"]);return i!=null&&w(n,["config"],bF(i,n)),n}function SF(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["setup","model"],ht(e,r));const i=x(t,["config"]);return i!=null&&w(n,["config"],wF(i,n)),n}function kF(e){const t={},n=x(e,["musicGenerationConfig"]);return n!=null&&w(t,["musicGenerationConfig"],n),t}function EF(e){const t={},n=x(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(t,["weightedPrompts"],r)}return t}function CF(e){const t={},n=x(e,["media"]);if(n!=null){let d=cO(n);Array.isArray(d)&&(d=d.map(h=>hh(h))),w(t,["mediaChunks"],d)}const r=x(e,["audio"]);r!=null&&w(t,["audio"],hh(fO(r)));const i=x(e,["audioStreamEnd"]);i!=null&&w(t,["audioStreamEnd"],i);const a=x(e,["video"]);a!=null&&w(t,["video"],hh(dO(a)));const o=x(e,["text"]);o!=null&&w(t,["text"],o);const u=x(e,["activityStart"]);u!=null&&w(t,["activityStart"],u);const f=x(e,["activityEnd"]);return f!=null&&w(t,["activityEnd"],f),t}function TF(e){const t={},n=x(e,["media"]);if(n!=null){let d=cO(n);Array.isArray(d)&&(d=d.map(h=>h)),w(t,["mediaChunks"],d)}const r=x(e,["audio"]);r!=null&&w(t,["audio"],fO(r));const i=x(e,["audioStreamEnd"]);i!=null&&w(t,["audioStreamEnd"],i);const a=x(e,["video"]);a!=null&&w(t,["video"],dO(a));const o=x(e,["text"]);o!=null&&w(t,["text"],o);const u=x(e,["activityStart"]);u!=null&&w(t,["activityStart"],u);const f=x(e,["activityEnd"]);return f!=null&&w(t,["activityEnd"],f),t}function NF(e){const t={},n=x(e,["setupComplete"]);n!=null&&w(t,["setupComplete"],n);const r=x(e,["serverContent"]);r!=null&&w(t,["serverContent"],r);const i=x(e,["toolCall"]);i!=null&&w(t,["toolCall"],i);const a=x(e,["toolCallCancellation"]);a!=null&&w(t,["toolCallCancellation"],a);const o=x(e,["usageMetadata"]);o!=null&&w(t,["usageMetadata"],OF(o));const u=x(e,["goAway"]);u!=null&&w(t,["goAway"],u);const f=x(e,["sessionResumptionUpdate"]);return f!=null&&w(t,["sessionResumptionUpdate"],f),t}function AF(e){const t={},n=x(e,["videoMetadata"]);n!=null&&w(t,["videoMetadata"],n);const r=x(e,["thought"]);r!=null&&w(t,["thought"],r);const i=x(e,["inlineData"]);i!=null&&w(t,["inlineData"],hh(i));const a=x(e,["fileData"]);a!=null&&w(t,["fileData"],mF(a));const o=x(e,["thoughtSignature"]);o!=null&&w(t,["thoughtSignature"],o);const u=x(e,["functionCall"]);u!=null&&w(t,["functionCall"],u);const f=x(e,["codeExecutionResult"]);f!=null&&w(t,["codeExecutionResult"],f);const d=x(e,["executableCode"]);d!=null&&w(t,["executableCode"],d);const h=x(e,["functionResponse"]);h!=null&&w(t,["functionResponse"],h);const m=x(e,["text"]);return m!=null&&w(t,["text"],m),t}function jF(e){const t={},n=x(e,["handle"]);if(n!=null&&w(t,["handle"],n),x(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function SO(e){const t={},n=x(e,["voiceConfig"]);if(n!=null&&w(t,["voiceConfig"],n),x(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(e,["languageCode"]);return r!=null&&w(t,["languageCode"],r),t}function PF(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["functionDeclarations"],d)}if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(e,["googleSearch"]);r!=null&&w(t,["googleSearch"],xF(r));const i=x(e,["googleSearchRetrieval"]);if(i!=null&&w(t,["googleSearchRetrieval"],i),x(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(e,["googleMaps"]);a!=null&&w(t,["googleMaps"],vF(a));const o=x(e,["urlContext"]);o!=null&&w(t,["urlContext"],o);const u=x(e,["computerUse"]);u!=null&&w(t,["computerUse"],u);const f=x(e,["codeExecution"]);return f!=null&&w(t,["codeExecution"],f),t}function MF(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>gF(y))),w(t,["functionDeclarations"],m)}const r=x(e,["retrieval"]);r!=null&&w(t,["retrieval"],r);const i=x(e,["googleSearch"]);i!=null&&w(t,["googleSearch"],i);const a=x(e,["googleSearchRetrieval"]);a!=null&&w(t,["googleSearchRetrieval"],a);const o=x(e,["enterpriseWebSearch"]);o!=null&&w(t,["enterpriseWebSearch"],o);const u=x(e,["googleMaps"]);u!=null&&w(t,["googleMaps"],u);const f=x(e,["urlContext"]);f!=null&&w(t,["urlContext"],f);const d=x(e,["computerUse"]);d!=null&&w(t,["computerUse"],d);const h=x(e,["codeExecution"]);return h!=null&&w(t,["codeExecution"],h),t}function OF(e){const t={},n=x(e,["promptTokenCount"]);n!=null&&w(t,["promptTokenCount"],n);const r=x(e,["cachedContentTokenCount"]);r!=null&&w(t,["cachedContentTokenCount"],r);const i=x(e,["candidatesTokenCount"]);i!=null&&w(t,["responseTokenCount"],i);const a=x(e,["toolUsePromptTokenCount"]);a!=null&&w(t,["toolUsePromptTokenCount"],a);const o=x(e,["thoughtsTokenCount"]);o!=null&&w(t,["thoughtsTokenCount"],o);const u=x(e,["totalTokenCount"]);u!=null&&w(t,["totalTokenCount"],u);const f=x(e,["promptTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(k=>k)),w(t,["promptTokensDetails"],v)}const d=x(e,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(k=>k)),w(t,["cacheTokensDetails"],v)}const h=x(e,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(k=>k)),w(t,["responseTokensDetails"],v)}const m=x(e,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(k=>k)),w(t,["toolUsePromptTokensDetails"],v)}const y=x(e,["trafficType"]);return y!=null&&w(t,["trafficType"],y),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RF(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["data"]);n!=null&&w(t,["data"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function IF(e){const t={},n=x(e,["content"]);n!=null&&w(t,["content"],n);const r=x(e,["citationMetadata"]);r!=null&&w(t,["citationMetadata"],DF(r));const i=x(e,["tokenCount"]);i!=null&&w(t,["tokenCount"],i);const a=x(e,["finishReason"]);a!=null&&w(t,["finishReason"],a);const o=x(e,["urlContextMetadata"]);o!=null&&w(t,["urlContextMetadata"],o);const u=x(e,["avgLogprobs"]);u!=null&&w(t,["avgLogprobs"],u);const f=x(e,["groundingMetadata"]);f!=null&&w(t,["groundingMetadata"],f);const d=x(e,["index"]);d!=null&&w(t,["index"],d);const h=x(e,["logprobsResult"]);h!=null&&w(t,["logprobsResult"],h);const m=x(e,["safetyRatings"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>v)),w(t,["safetyRatings"],y)}return t}function DF(e){const t={},n=x(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(t,["citations"],r)}return t}function LF(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let a=ri(i);Array.isArray(a)&&(a=a.map(o=>o)),w(n,["contents"],a)}return n}function UF(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),w(t,["tokensInfo"],i)}return t}function qF(e){const t={},n=x(e,["values"]);n!=null&&w(t,["values"],n);const r=x(e,["statistics"]);return r!=null&&w(t,["statistics"],$F(r)),t}function $F(e){const t={},n=x(e,["truncated"]);n!=null&&w(t,["truncated"],n);const r=x(e,["token_count"]);return r!=null&&w(t,["tokenCount"],r),t}function Ep(e){const t={},n=x(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>H7(a))),w(t,["parts"],i)}const r=x(e,["role"]);return r!=null&&w(t,["role"],r),t}function BF(e){const t={},n=x(e,["controlType"]);n!=null&&w(t,["controlType"],n);const r=x(e,["enableControlImageComputation"]);return r!=null&&w(t,["computeControl"],r),t}function zF(e){const t={};if(x(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function FF(e,t){const n={},r=x(e,["systemInstruction"]);t!==void 0&&r!=null&&w(t,["systemInstruction"],Kn(r));const i=x(e,["tools"]);if(t!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(u=>NO(u))),w(t,["tools"],o)}const a=x(e,["generationConfig"]);return t!==void 0&&a!=null&&w(t,["generationConfig"],M7(a)),n}function VF(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let o=ri(i);Array.isArray(o)&&(o=o.map(u=>Ep(u))),w(n,["contents"],o)}const a=x(t,["config"]);return a!=null&&zF(a),n}function HF(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let o=ri(i);Array.isArray(o)&&(o=o.map(u=>u)),w(n,["contents"],o)}const a=x(t,["config"]);return a!=null&&FF(a,n),n}function GF(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["totalTokens"]);r!=null&&w(t,["totalTokens"],r);const i=x(e,["cachedContentTokenCount"]);return i!=null&&w(t,["cachedContentTokenCount"],i),t}function KF(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["totalTokens"]);return r!=null&&w(t,["totalTokens"],r),t}function YF(e,t){const n={},r=x(t,["model"]);return r!=null&&w(n,["_url","name"],ht(e,r)),n}function WF(e,t){const n={},r=x(t,["model"]);return r!=null&&w(n,["_url","name"],ht(e,r)),n}function JF(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function XF(e){const t={},n=x(e,["sdkHttpResponse"]);return n!=null&&w(t,["sdkHttpResponse"],n),t}function QF(e,t){const n={},r=x(e,["outputGcsUri"]);t!==void 0&&r!=null&&w(t,["parameters","storageUri"],r);const i=x(e,["negativePrompt"]);t!==void 0&&i!=null&&w(t,["parameters","negativePrompt"],i);const a=x(e,["numberOfImages"]);t!==void 0&&a!=null&&w(t,["parameters","sampleCount"],a);const o=x(e,["aspectRatio"]);t!==void 0&&o!=null&&w(t,["parameters","aspectRatio"],o);const u=x(e,["guidanceScale"]);t!==void 0&&u!=null&&w(t,["parameters","guidanceScale"],u);const f=x(e,["seed"]);t!==void 0&&f!=null&&w(t,["parameters","seed"],f);const d=x(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&w(t,["parameters","safetySetting"],d);const h=x(e,["personGeneration"]);t!==void 0&&h!=null&&w(t,["parameters","personGeneration"],h);const m=x(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&w(t,["parameters","includeSafetyAttributes"],m);const y=x(e,["includeRaiReason"]);t!==void 0&&y!=null&&w(t,["parameters","includeRaiReason"],y);const v=x(e,["language"]);t!==void 0&&v!=null&&w(t,["parameters","language"],v);const k=x(e,["outputMimeType"]);t!==void 0&&k!=null&&w(t,["parameters","outputOptions","mimeType"],k);const S=x(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&w(t,["parameters","outputOptions","compressionQuality"],S);const C=x(e,["addWatermark"]);t!==void 0&&C!=null&&w(t,["parameters","addWatermark"],C);const T=x(e,["labels"]);t!==void 0&&T!=null&&w(t,["labels"],T);const A=x(e,["editMode"]);t!==void 0&&A!=null&&w(t,["parameters","editMode"],A);const N=x(e,["baseSteps"]);return t!==void 0&&N!=null&&w(t,["parameters","editConfig","baseSteps"],N),n}function ZF(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=x(t,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>X7(f))),w(n,["instances[0]","referenceImages"],u)}const o=x(t,["config"]);return o!=null&&QF(o,n),n}function e7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Cp(a))),w(t,["generatedImages"],i)}return t}function t7(e,t){const n={},r=x(e,["taskType"]);t!==void 0&&r!=null&&w(t,["requests[]","taskType"],r);const i=x(e,["title"]);t!==void 0&&i!=null&&w(t,["requests[]","title"],i);const a=x(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&w(t,["requests[]","outputDimensionality"],a),x(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function n7(e,t){const n={},r=x(e,["taskType"]);t!==void 0&&r!=null&&w(t,["instances[]","task_type"],r);const i=x(e,["title"]);t!==void 0&&i!=null&&w(t,["instances[]","title"],i);const a=x(e,["outputDimensionality"]);t!==void 0&&a!=null&&w(t,["parameters","outputDimensionality"],a);const o=x(e,["mimeType"]);t!==void 0&&o!=null&&w(t,["instances[]","mimeType"],o);const u=x(e,["autoTruncate"]);return t!==void 0&&u!=null&&w(t,["parameters","autoTruncate"],u),n}function r7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let u=Ob(e,i);Array.isArray(u)&&(u=u.map(f=>f)),w(n,["requests[]","content"],u)}const a=x(t,["config"]);a!=null&&t7(a,n);const o=x(t,["model"]);return o!==void 0&&w(n,["requests[]","model"],ht(e,o)),n}function i7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let o=Ob(e,i);Array.isArray(o)&&(o=o.map(u=>u)),w(n,["instances[]","content"],o)}const a=x(t,["config"]);return a!=null&&n7(a,n),n}function a7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),w(t,["embeddings"],a)}const i=x(e,["metadata"]);return i!=null&&w(t,["metadata"],i),t}function s7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>qF(o))),w(t,["embeddings"],a)}const i=x(e,["metadata"]);return i!=null&&w(t,["metadata"],i),t}function o7(e){const t={},n=x(e,["endpoint"]);n!=null&&w(t,["name"],n);const r=x(e,["deployedModelId"]);return r!=null&&w(t,["deployedModelId"],r),t}function l7(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["fileUri"]);n!=null&&w(t,["fileUri"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function u7(e){const t={};if(x(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(e,["description"]);n!=null&&w(t,["description"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["parameters"]);i!=null&&w(t,["parameters"],i);const a=x(e,["parametersJsonSchema"]);a!=null&&w(t,["parametersJsonSchema"],a);const o=x(e,["response"]);o!=null&&w(t,["response"],o);const u=x(e,["responseJsonSchema"]);return u!=null&&w(t,["responseJsonSchema"],u),t}function c7(e,t,n){const r={},i=x(t,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],Ep(Kn(i)));const a=x(t,["temperature"]);a!=null&&w(r,["temperature"],a);const o=x(t,["topP"]);o!=null&&w(r,["topP"],o);const u=x(t,["topK"]);u!=null&&w(r,["topK"],u);const f=x(t,["candidateCount"]);f!=null&&w(r,["candidateCount"],f);const d=x(t,["maxOutputTokens"]);d!=null&&w(r,["maxOutputTokens"],d);const h=x(t,["stopSequences"]);h!=null&&w(r,["stopSequences"],h);const m=x(t,["responseLogprobs"]);m!=null&&w(r,["responseLogprobs"],m);const y=x(t,["logprobs"]);y!=null&&w(r,["logprobs"],y);const v=x(t,["presencePenalty"]);v!=null&&w(r,["presencePenalty"],v);const k=x(t,["frequencyPenalty"]);k!=null&&w(r,["frequencyPenalty"],k);const S=x(t,["seed"]);S!=null&&w(r,["seed"],S);const C=x(t,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const T=x(t,["responseSchema"]);T!=null&&w(r,["responseSchema"],Rb(T));const A=x(t,["responseJsonSchema"]);if(A!=null&&w(r,["responseJsonSchema"],A),x(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=x(t,["safetySettings"]);if(n!==void 0&&N!=null){let $=N;Array.isArray($)&&($=$.map(R=>Q7(R))),w(n,["safetySettings"],$)}const O=x(t,["tools"]);if(n!==void 0&&O!=null){let $=Wl(O);Array.isArray($)&&($=$.map(R=>iV(Yl(R)))),w(n,["tools"],$)}const M=x(t,["toolConfig"]);if(n!==void 0&&M!=null&&w(n,["toolConfig"],M),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(t,["cachedContent"]);n!==void 0&&P!=null&&w(n,["cachedContent"],ka(e,P));const D=x(t,["responseModalities"]);D!=null&&w(r,["responseModalities"],D);const Y=x(t,["mediaResolution"]);Y!=null&&w(r,["mediaResolution"],Y);const q=x(t,["speechConfig"]);if(q!=null&&w(r,["speechConfig"],Ib(q)),x(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=x(t,["thinkingConfig"]);W!=null&&w(r,["thinkingConfig"],W);const F=x(t,["imageConfig"]);return F!=null&&w(r,["imageConfig"],F),r}function d7(e,t,n){const r={},i=x(t,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],Kn(i));const a=x(t,["temperature"]);a!=null&&w(r,["temperature"],a);const o=x(t,["topP"]);o!=null&&w(r,["topP"],o);const u=x(t,["topK"]);u!=null&&w(r,["topK"],u);const f=x(t,["candidateCount"]);f!=null&&w(r,["candidateCount"],f);const d=x(t,["maxOutputTokens"]);d!=null&&w(r,["maxOutputTokens"],d);const h=x(t,["stopSequences"]);h!=null&&w(r,["stopSequences"],h);const m=x(t,["responseLogprobs"]);m!=null&&w(r,["responseLogprobs"],m);const y=x(t,["logprobs"]);y!=null&&w(r,["logprobs"],y);const v=x(t,["presencePenalty"]);v!=null&&w(r,["presencePenalty"],v);const k=x(t,["frequencyPenalty"]);k!=null&&w(r,["frequencyPenalty"],k);const S=x(t,["seed"]);S!=null&&w(r,["seed"],S);const C=x(t,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const T=x(t,["responseSchema"]);T!=null&&w(r,["responseSchema"],Rb(T));const A=x(t,["responseJsonSchema"]);A!=null&&w(r,["responseJsonSchema"],A);const N=x(t,["routingConfig"]);N!=null&&w(r,["routingConfig"],N);const O=x(t,["modelSelectionConfig"]);O!=null&&w(r,["modelConfig"],O);const M=x(t,["safetySettings"]);if(n!==void 0&&M!=null){let U=M;Array.isArray(U)&&(U=U.map(G=>G)),w(n,["safetySettings"],U)}const P=x(t,["tools"]);if(n!==void 0&&P!=null){let U=Wl(P);Array.isArray(U)&&(U=U.map(G=>NO(Yl(G)))),w(n,["tools"],U)}const D=x(t,["toolConfig"]);n!==void 0&&D!=null&&w(n,["toolConfig"],D);const Y=x(t,["labels"]);n!==void 0&&Y!=null&&w(n,["labels"],Y);const q=x(t,["cachedContent"]);n!==void 0&&q!=null&&w(n,["cachedContent"],ka(e,q));const W=x(t,["responseModalities"]);W!=null&&w(r,["responseModalities"],W);const F=x(t,["mediaResolution"]);F!=null&&w(r,["mediaResolution"],F);const $=x(t,["speechConfig"]);$!=null&&w(r,["speechConfig"],TO(Ib($)));const R=x(t,["audioTimestamp"]);R!=null&&w(r,["audioTimestamp"],R);const z=x(t,["thinkingConfig"]);z!=null&&w(r,["thinkingConfig"],z);const V=x(t,["imageConfig"]);return V!=null&&w(r,["imageConfig"],V),r}function D2(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let o=ri(i);Array.isArray(o)&&(o=o.map(u=>Ep(u))),w(n,["contents"],o)}const a=x(t,["config"]);return a!=null&&w(n,["generationConfig"],c7(e,a,n)),n}function L2(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["contents"]);if(i!=null){let o=ri(i);Array.isArray(o)&&(o=o.map(u=>u)),w(n,["contents"],o)}const a=x(t,["config"]);return a!=null&&w(n,["generationConfig"],d7(e,a,n)),n}function U2(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>IF(d))),w(t,["candidates"],f)}const i=x(e,["modelVersion"]);i!=null&&w(t,["modelVersion"],i);const a=x(e,["promptFeedback"]);a!=null&&w(t,["promptFeedback"],a);const o=x(e,["responseId"]);o!=null&&w(t,["responseId"],o);const u=x(e,["usageMetadata"]);return u!=null&&w(t,["usageMetadata"],u),t}function q2(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["candidates"],d)}const i=x(e,["createTime"]);i!=null&&w(t,["createTime"],i);const a=x(e,["modelVersion"]);a!=null&&w(t,["modelVersion"],a);const o=x(e,["promptFeedback"]);o!=null&&w(t,["promptFeedback"],o);const u=x(e,["responseId"]);u!=null&&w(t,["responseId"],u);const f=x(e,["usageMetadata"]);return f!=null&&w(t,["usageMetadata"],f),t}function f7(e,t){const n={};if(x(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(e,["numberOfImages"]);t!==void 0&&r!=null&&w(t,["parameters","sampleCount"],r);const i=x(e,["aspectRatio"]);t!==void 0&&i!=null&&w(t,["parameters","aspectRatio"],i);const a=x(e,["guidanceScale"]);if(t!==void 0&&a!=null&&w(t,["parameters","guidanceScale"],a),x(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=x(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&w(t,["parameters","safetySetting"],o);const u=x(e,["personGeneration"]);t!==void 0&&u!=null&&w(t,["parameters","personGeneration"],u);const f=x(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&w(t,["parameters","includeSafetyAttributes"],f);const d=x(e,["includeRaiReason"]);t!==void 0&&d!=null&&w(t,["parameters","includeRaiReason"],d);const h=x(e,["language"]);t!==void 0&&h!=null&&w(t,["parameters","language"],h);const m=x(e,["outputMimeType"]);t!==void 0&&m!=null&&w(t,["parameters","outputOptions","mimeType"],m);const y=x(e,["outputCompressionQuality"]);if(t!==void 0&&y!=null&&w(t,["parameters","outputOptions","compressionQuality"],y),x(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=x(e,["imageSize"]);if(t!==void 0&&v!=null&&w(t,["parameters","sampleImageSize"],v),x(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function h7(e,t){const n={},r=x(e,["outputGcsUri"]);t!==void 0&&r!=null&&w(t,["parameters","storageUri"],r);const i=x(e,["negativePrompt"]);t!==void 0&&i!=null&&w(t,["parameters","negativePrompt"],i);const a=x(e,["numberOfImages"]);t!==void 0&&a!=null&&w(t,["parameters","sampleCount"],a);const o=x(e,["aspectRatio"]);t!==void 0&&o!=null&&w(t,["parameters","aspectRatio"],o);const u=x(e,["guidanceScale"]);t!==void 0&&u!=null&&w(t,["parameters","guidanceScale"],u);const f=x(e,["seed"]);t!==void 0&&f!=null&&w(t,["parameters","seed"],f);const d=x(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&w(t,["parameters","safetySetting"],d);const h=x(e,["personGeneration"]);t!==void 0&&h!=null&&w(t,["parameters","personGeneration"],h);const m=x(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&w(t,["parameters","includeSafetyAttributes"],m);const y=x(e,["includeRaiReason"]);t!==void 0&&y!=null&&w(t,["parameters","includeRaiReason"],y);const v=x(e,["language"]);t!==void 0&&v!=null&&w(t,["parameters","language"],v);const k=x(e,["outputMimeType"]);t!==void 0&&k!=null&&w(t,["parameters","outputOptions","mimeType"],k);const S=x(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&w(t,["parameters","outputOptions","compressionQuality"],S);const C=x(e,["addWatermark"]);t!==void 0&&C!=null&&w(t,["parameters","addWatermark"],C);const T=x(e,["labels"]);t!==void 0&&T!=null&&w(t,["labels"],T);const A=x(e,["imageSize"]);t!==void 0&&A!=null&&w(t,["parameters","sampleImageSize"],A);const N=x(e,["enhancePrompt"]);return t!==void 0&&N!=null&&w(t,["parameters","enhancePrompt"],N),n}function p7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=x(t,["config"]);return a!=null&&f7(a,n),n}function m7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=x(t,["config"]);return a!=null&&h7(a,n),n}function g7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>N7(o))),w(t,["generatedImages"],a)}const i=x(e,["positivePromptSafetyAttributes"]);return i!=null&&w(t,["positivePromptSafetyAttributes"],EO(i)),t}function y7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Cp(o))),w(t,["generatedImages"],a)}const i=x(e,["positivePromptSafetyAttributes"]);return i!=null&&w(t,["positivePromptSafetyAttributes"],CO(i)),t}function v7(e,t){const n={},r=x(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&w(t,["parameters","sampleCount"],r),x(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=x(e,["durationSeconds"]);if(t!==void 0&&i!=null&&w(t,["parameters","durationSeconds"],i),x(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(e,["aspectRatio"]);t!==void 0&&a!=null&&w(t,["parameters","aspectRatio"],a);const o=x(e,["resolution"]);t!==void 0&&o!=null&&w(t,["parameters","resolution"],o);const u=x(e,["personGeneration"]);if(t!==void 0&&u!=null&&w(t,["parameters","personGeneration"],u),x(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=x(e,["negativePrompt"]);t!==void 0&&f!=null&&w(t,["parameters","negativePrompt"],f);const d=x(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&w(t,["parameters","enhancePrompt"],d),x(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=x(e,["lastFrame"]);t!==void 0&&h!=null&&w(t,["instances[0]","lastFrame"],Tp(h));const m=x(e,["referenceImages"]);if(t!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>yV(v))),w(t,["instances[0]","referenceImages"],y)}if(x(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function x7(e,t){const n={},r=x(e,["numberOfVideos"]);t!==void 0&&r!=null&&w(t,["parameters","sampleCount"],r);const i=x(e,["outputGcsUri"]);t!==void 0&&i!=null&&w(t,["parameters","storageUri"],i);const a=x(e,["fps"]);t!==void 0&&a!=null&&w(t,["parameters","fps"],a);const o=x(e,["durationSeconds"]);t!==void 0&&o!=null&&w(t,["parameters","durationSeconds"],o);const u=x(e,["seed"]);t!==void 0&&u!=null&&w(t,["parameters","seed"],u);const f=x(e,["aspectRatio"]);t!==void 0&&f!=null&&w(t,["parameters","aspectRatio"],f);const d=x(e,["resolution"]);t!==void 0&&d!=null&&w(t,["parameters","resolution"],d);const h=x(e,["personGeneration"]);t!==void 0&&h!=null&&w(t,["parameters","personGeneration"],h);const m=x(e,["pubsubTopic"]);t!==void 0&&m!=null&&w(t,["parameters","pubsubTopic"],m);const y=x(e,["negativePrompt"]);t!==void 0&&y!=null&&w(t,["parameters","negativePrompt"],y);const v=x(e,["enhancePrompt"]);t!==void 0&&v!=null&&w(t,["parameters","enhancePrompt"],v);const k=x(e,["generateAudio"]);t!==void 0&&k!=null&&w(t,["parameters","generateAudio"],k);const S=x(e,["lastFrame"]);t!==void 0&&S!=null&&w(t,["instances[0]","lastFrame"],Ci(S));const C=x(e,["referenceImages"]);if(t!==void 0&&C!=null){let N=C;Array.isArray(N)&&(N=N.map(O=>vV(O))),w(t,["instances[0]","referenceImages"],N)}const T=x(e,["mask"]);t!==void 0&&T!=null&&w(t,["instances[0]","mask"],gV(T));const A=x(e,["compressionQuality"]);return t!==void 0&&A!=null&&w(t,["parameters","compressionQuality"],A),n}function b7(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["metadata"]);r!=null&&w(t,["metadata"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);a!=null&&w(t,["error"],a);const o=x(e,["response","generateVideoResponse"]);return o!=null&&w(t,["response"],k7(o)),t}function w7(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["metadata"]);r!=null&&w(t,["metadata"],r);const i=x(e,["done"]);i!=null&&w(t,["done"],i);const a=x(e,["error"]);a!=null&&w(t,["error"],a);const o=x(e,["response"]);return o!=null&&w(t,["response"],E7(o)),t}function _7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=x(t,["image"]);a!=null&&w(n,["instances[0]","image"],Tp(a));const o=x(t,["video"]);o!=null&&w(n,["instances[0]","video"],AO(o));const u=x(t,["source"]);u!=null&&C7(u,n);const f=x(t,["config"]);return f!=null&&v7(f,n),n}function S7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=x(t,["image"]);a!=null&&w(n,["instances[0]","image"],Ci(a));const o=x(t,["video"]);o!=null&&w(n,["instances[0]","video"],jO(o));const u=x(t,["source"]);u!=null&&T7(u,n);const f=x(t,["config"]);return f!=null&&x7(f,n),n}function k7(e){const t={},n=x(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>j7(o))),w(t,["generatedVideos"],a)}const r=x(e,["raiMediaFilteredCount"]);r!=null&&w(t,["raiMediaFilteredCount"],r);const i=x(e,["raiMediaFilteredReasons"]);return i!=null&&w(t,["raiMediaFilteredReasons"],i),t}function E7(e){const t={},n=x(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>P7(o))),w(t,["generatedVideos"],a)}const r=x(e,["raiMediaFilteredCount"]);r!=null&&w(t,["raiMediaFilteredCount"],r);const i=x(e,["raiMediaFilteredReasons"]);return i!=null&&w(t,["raiMediaFilteredReasons"],i),t}function C7(e,t){const n={},r=x(e,["prompt"]);t!==void 0&&r!=null&&w(t,["instances[0]","prompt"],r);const i=x(e,["image"]);t!==void 0&&i!=null&&w(t,["instances[0]","image"],Tp(i));const a=x(e,["video"]);return t!==void 0&&a!=null&&w(t,["instances[0]","video"],AO(a)),n}function T7(e,t){const n={},r=x(e,["prompt"]);t!==void 0&&r!=null&&w(t,["instances[0]","prompt"],r);const i=x(e,["image"]);t!==void 0&&i!=null&&w(t,["instances[0]","image"],Ci(i));const a=x(e,["video"]);return t!==void 0&&a!=null&&w(t,["instances[0]","video"],jO(a)),n}function N7(e){const t={},n=x(e,["_self"]);n!=null&&w(t,["image"],L7(n));const r=x(e,["raiFilteredReason"]);r!=null&&w(t,["raiFilteredReason"],r);const i=x(e,["_self"]);return i!=null&&w(t,["safetyAttributes"],EO(i)),t}function Cp(e){const t={},n=x(e,["_self"]);n!=null&&w(t,["image"],kO(n));const r=x(e,["raiFilteredReason"]);r!=null&&w(t,["raiFilteredReason"],r);const i=x(e,["_self"]);i!=null&&w(t,["safetyAttributes"],CO(i));const a=x(e,["prompt"]);return a!=null&&w(t,["enhancedPrompt"],a),t}function A7(e){const t={},n=x(e,["_self"]);n!=null&&w(t,["mask"],kO(n));const r=x(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),w(t,["labels"],i)}return t}function j7(e){const t={},n=x(e,["video"]);return n!=null&&w(t,["video"],pV(n)),t}function P7(e){const t={},n=x(e,["_self"]);return n!=null&&w(t,["video"],mV(n)),t}function M7(e){const t={},n=x(e,["modelSelectionConfig"]);n!=null&&w(t,["modelConfig"],n);const r=x(e,["audioTimestamp"]);r!=null&&w(t,["audioTimestamp"],r);const i=x(e,["candidateCount"]);i!=null&&w(t,["candidateCount"],i);const a=x(e,["enableAffectiveDialog"]);a!=null&&w(t,["enableAffectiveDialog"],a);const o=x(e,["frequencyPenalty"]);o!=null&&w(t,["frequencyPenalty"],o);const u=x(e,["logprobs"]);u!=null&&w(t,["logprobs"],u);const f=x(e,["maxOutputTokens"]);f!=null&&w(t,["maxOutputTokens"],f);const d=x(e,["mediaResolution"]);d!=null&&w(t,["mediaResolution"],d);const h=x(e,["presencePenalty"]);h!=null&&w(t,["presencePenalty"],h);const m=x(e,["responseJsonSchema"]);m!=null&&w(t,["responseJsonSchema"],m);const y=x(e,["responseLogprobs"]);y!=null&&w(t,["responseLogprobs"],y);const v=x(e,["responseMimeType"]);v!=null&&w(t,["responseMimeType"],v);const k=x(e,["responseModalities"]);k!=null&&w(t,["responseModalities"],k);const S=x(e,["responseSchema"]);S!=null&&w(t,["responseSchema"],S);const C=x(e,["routingConfig"]);C!=null&&w(t,["routingConfig"],C);const T=x(e,["seed"]);T!=null&&w(t,["seed"],T);const A=x(e,["speechConfig"]);A!=null&&w(t,["speechConfig"],TO(A));const N=x(e,["stopSequences"]);N!=null&&w(t,["stopSequences"],N);const O=x(e,["temperature"]);O!=null&&w(t,["temperature"],O);const M=x(e,["thinkingConfig"]);M!=null&&w(t,["thinkingConfig"],M);const P=x(e,["topK"]);P!=null&&w(t,["topK"],P);const D=x(e,["topP"]);if(D!=null&&w(t,["topP"],D),x(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function O7(e,t){const n={},r=x(t,["model"]);return r!=null&&w(n,["_url","name"],ht(e,r)),n}function R7(e,t){const n={},r=x(t,["model"]);return r!=null&&w(n,["_url","name"],ht(e,r)),n}function I7(e){const t={};if(x(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(e,["enableWidget"]);return n!=null&&w(t,["enableWidget"],n),t}function D7(e){const t={},n=x(e,["timeRangeFilter"]);if(n!=null&&w(t,["timeRangeFilter"],n),x(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function L7(e){const t={},n=x(e,["bytesBase64Encoded"]);n!=null&&w(t,["imageBytes"],gs(n));const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function kO(e){const t={},n=x(e,["gcsUri"]);n!=null&&w(t,["gcsUri"],n);const r=x(e,["bytesBase64Encoded"]);r!=null&&w(t,["imageBytes"],gs(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["mimeType"],i),t}function Tp(e){const t={};if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=x(e,["imageBytes"]);n!=null&&w(t,["bytesBase64Encoded"],gs(n));const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function Ci(e){const t={},n=x(e,["gcsUri"]);n!=null&&w(t,["gcsUri"],n);const r=x(e,["imageBytes"]);r!=null&&w(t,["bytesBase64Encoded"],gs(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["mimeType"],i),t}function U7(e,t,n){const r={},i=x(t,["pageSize"]);n!==void 0&&i!=null&&w(n,["_query","pageSize"],i);const a=x(t,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const o=x(t,["filter"]);n!==void 0&&o!=null&&w(n,["_query","filter"],o);const u=x(t,["queryBase"]);return n!==void 0&&u!=null&&w(n,["_url","models_url"],gO(e,u)),r}function q7(e,t,n){const r={},i=x(t,["pageSize"]);n!==void 0&&i!=null&&w(n,["_query","pageSize"],i);const a=x(t,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const o=x(t,["filter"]);n!==void 0&&o!=null&&w(n,["_query","filter"],o);const u=x(t,["queryBase"]);return n!==void 0&&u!=null&&w(n,["_url","models_url"],gO(e,u)),r}function $7(e,t){const n={},r=x(t,["config"]);return r!=null&&U7(e,r,n),n}function B7(e,t){const n={},r=x(t,["config"]);return r!=null&&q7(e,r,n),n}function z7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["_self"]);if(i!=null){let a=yO(i);Array.isArray(a)&&(a=a.map(o=>nx(o))),w(t,["models"],a)}return t}function F7(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["_self"]);if(i!=null){let a=yO(i);Array.isArray(a)&&(a=a.map(o=>rx(o))),w(t,["models"],a)}return t}function V7(e){const t={},n=x(e,["maskMode"]);n!=null&&w(t,["maskMode"],n);const r=x(e,["segmentationClasses"]);r!=null&&w(t,["maskClasses"],r);const i=x(e,["maskDilation"]);return i!=null&&w(t,["dilation"],i),t}function nx(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["displayName"]);r!=null&&w(t,["displayName"],r);const i=x(e,["description"]);i!=null&&w(t,["description"],i);const a=x(e,["version"]);a!=null&&w(t,["version"],a);const o=x(e,["_self"]);o!=null&&w(t,["tunedModelInfo"],aV(o));const u=x(e,["inputTokenLimit"]);u!=null&&w(t,["inputTokenLimit"],u);const f=x(e,["outputTokenLimit"]);f!=null&&w(t,["outputTokenLimit"],f);const d=x(e,["supportedGenerationMethods"]);return d!=null&&w(t,["supportedActions"],d),t}function rx(e){const t={},n=x(e,["name"]);n!=null&&w(t,["name"],n);const r=x(e,["displayName"]);r!=null&&w(t,["displayName"],r);const i=x(e,["description"]);i!=null&&w(t,["description"],i);const a=x(e,["versionId"]);a!=null&&w(t,["version"],a);const o=x(e,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>o7(y))),w(t,["endpoints"],m)}const u=x(e,["labels"]);u!=null&&w(t,["labels"],u);const f=x(e,["_self"]);f!=null&&w(t,["tunedModelInfo"],sV(f));const d=x(e,["defaultCheckpointId"]);d!=null&&w(t,["defaultCheckpointId"],d);const h=x(e,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>y)),w(t,["checkpoints"],m)}return t}function H7(e){const t={},n=x(e,["videoMetadata"]);n!=null&&w(t,["videoMetadata"],n);const r=x(e,["thought"]);r!=null&&w(t,["thought"],r);const i=x(e,["inlineData"]);i!=null&&w(t,["inlineData"],RF(i));const a=x(e,["fileData"]);a!=null&&w(t,["fileData"],l7(a));const o=x(e,["thoughtSignature"]);o!=null&&w(t,["thoughtSignature"],o);const u=x(e,["functionCall"]);u!=null&&w(t,["functionCall"],u);const f=x(e,["codeExecutionResult"]);f!=null&&w(t,["codeExecutionResult"],f);const d=x(e,["executableCode"]);d!=null&&w(t,["executableCode"],d);const h=x(e,["functionResponse"]);h!=null&&w(t,["functionResponse"],h);const m=x(e,["text"]);return m!=null&&w(t,["text"],m),t}function G7(e){const t={},n=x(e,["productImage"]);return n!=null&&w(t,["image"],Ci(n)),t}function K7(e,t){const n={},r=x(e,["numberOfImages"]);t!==void 0&&r!=null&&w(t,["parameters","sampleCount"],r);const i=x(e,["baseSteps"]);t!==void 0&&i!=null&&w(t,["parameters","editConfig","baseSteps"],i);const a=x(e,["outputGcsUri"]);t!==void 0&&a!=null&&w(t,["parameters","storageUri"],a);const o=x(e,["seed"]);t!==void 0&&o!=null&&w(t,["parameters","seed"],o);const u=x(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&w(t,["parameters","safetySetting"],u);const f=x(e,["personGeneration"]);t!==void 0&&f!=null&&w(t,["parameters","personGeneration"],f);const d=x(e,["addWatermark"]);t!==void 0&&d!=null&&w(t,["parameters","addWatermark"],d);const h=x(e,["outputMimeType"]);t!==void 0&&h!=null&&w(t,["parameters","outputOptions","mimeType"],h);const m=x(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&w(t,["parameters","outputOptions","compressionQuality"],m);const y=x(e,["enhancePrompt"]);t!==void 0&&y!=null&&w(t,["parameters","enhancePrompt"],y);const v=x(e,["labels"]);return t!==void 0&&v!=null&&w(t,["labels"],v),n}function Y7(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["source"]);i!=null&&J7(i,n);const a=x(t,["config"]);return a!=null&&K7(a,n),n}function W7(e){const t={},n=x(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Cp(i))),w(t,["generatedImages"],r)}return t}function J7(e,t){const n={},r=x(e,["prompt"]);t!==void 0&&r!=null&&w(t,["instances[0]","prompt"],r);const i=x(e,["personImage"]);t!==void 0&&i!=null&&w(t,["instances[0]","personImage","image"],Ci(i));const a=x(e,["productImages"]);if(t!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(u=>G7(u))),w(t,["instances[0]","productImages"],o)}return n}function X7(e){const t={},n=x(e,["referenceImage"]);n!=null&&w(t,["referenceImage"],Ci(n));const r=x(e,["referenceId"]);r!=null&&w(t,["referenceId"],r);const i=x(e,["referenceType"]);i!=null&&w(t,["referenceType"],i);const a=x(e,["maskImageConfig"]);a!=null&&w(t,["maskImageConfig"],V7(a));const o=x(e,["controlImageConfig"]);o!=null&&w(t,["controlImageConfig"],BF(o));const u=x(e,["styleImageConfig"]);u!=null&&w(t,["styleImageConfig"],u);const f=x(e,["subjectImageConfig"]);return f!=null&&w(t,["subjectImageConfig"],f),t}function EO(e){const t={},n=x(e,["safetyAttributes","categories"]);n!=null&&w(t,["categories"],n);const r=x(e,["safetyAttributes","scores"]);r!=null&&w(t,["scores"],r);const i=x(e,["contentType"]);return i!=null&&w(t,["contentType"],i),t}function CO(e){const t={},n=x(e,["safetyAttributes","categories"]);n!=null&&w(t,["categories"],n);const r=x(e,["safetyAttributes","scores"]);r!=null&&w(t,["scores"],r);const i=x(e,["contentType"]);return i!=null&&w(t,["contentType"],i),t}function Q7(e){const t={};if(x(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(e,["category"]);n!=null&&w(t,["category"],n);const r=x(e,["threshold"]);return r!=null&&w(t,["threshold"],r),t}function Z7(e){const t={},n=x(e,["image"]);return n!=null&&w(t,["image"],Ci(n)),t}function eV(e,t){const n={},r=x(e,["mode"]);t!==void 0&&r!=null&&w(t,["parameters","mode"],r);const i=x(e,["maxPredictions"]);t!==void 0&&i!=null&&w(t,["parameters","maxPredictions"],i);const a=x(e,["confidenceThreshold"]);t!==void 0&&a!=null&&w(t,["parameters","confidenceThreshold"],a);const o=x(e,["maskDilation"]);t!==void 0&&o!=null&&w(t,["parameters","maskDilation"],o);const u=x(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&w(t,["parameters","binaryColorThreshold"],u);const f=x(e,["labels"]);return t!==void 0&&f!=null&&w(t,["labels"],f),n}function tV(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["source"]);i!=null&&rV(i,n);const a=x(t,["config"]);return a!=null&&eV(a,n),n}function nV(e){const t={},n=x(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>A7(i))),w(t,["generatedMasks"],r)}return t}function rV(e,t){const n={},r=x(e,["prompt"]);t!==void 0&&r!=null&&w(t,["instances[0]","prompt"],r);const i=x(e,["image"]);t!==void 0&&i!=null&&w(t,["instances[0]","image"],Ci(i));const a=x(e,["scribbleImage"]);return t!==void 0&&a!=null&&w(t,["instances[0]","scribble"],Z7(a)),n}function TO(e){const t={},n=x(e,["voiceConfig"]);if(n!=null&&w(t,["voiceConfig"],n),x(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(e,["languageCode"]);return r!=null&&w(t,["languageCode"],r),t}function iV(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["functionDeclarations"],d)}if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(e,["googleSearch"]);r!=null&&w(t,["googleSearch"],D7(r));const i=x(e,["googleSearchRetrieval"]);if(i!=null&&w(t,["googleSearchRetrieval"],i),x(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(e,["googleMaps"]);a!=null&&w(t,["googleMaps"],I7(a));const o=x(e,["urlContext"]);o!=null&&w(t,["urlContext"],o);const u=x(e,["computerUse"]);u!=null&&w(t,["computerUse"],u);const f=x(e,["codeExecution"]);return f!=null&&w(t,["codeExecution"],f),t}function NO(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(y=>u7(y))),w(t,["functionDeclarations"],m)}const r=x(e,["retrieval"]);r!=null&&w(t,["retrieval"],r);const i=x(e,["googleSearch"]);i!=null&&w(t,["googleSearch"],i);const a=x(e,["googleSearchRetrieval"]);a!=null&&w(t,["googleSearchRetrieval"],a);const o=x(e,["enterpriseWebSearch"]);o!=null&&w(t,["enterpriseWebSearch"],o);const u=x(e,["googleMaps"]);u!=null&&w(t,["googleMaps"],u);const f=x(e,["urlContext"]);f!=null&&w(t,["urlContext"],f);const d=x(e,["computerUse"]);d!=null&&w(t,["computerUse"],d);const h=x(e,["codeExecution"]);return h!=null&&w(t,["codeExecution"],h),t}function aV(e){const t={},n=x(e,["baseModel"]);n!=null&&w(t,["baseModel"],n);const r=x(e,["createTime"]);r!=null&&w(t,["createTime"],r);const i=x(e,["updateTime"]);return i!=null&&w(t,["updateTime"],i),t}function sV(e){const t={},n=x(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&w(t,["baseModel"],n);const r=x(e,["createTime"]);r!=null&&w(t,["createTime"],r);const i=x(e,["updateTime"]);return i!=null&&w(t,["updateTime"],i),t}function oV(e,t){const n={},r=x(e,["displayName"]);t!==void 0&&r!=null&&w(t,["displayName"],r);const i=x(e,["description"]);t!==void 0&&i!=null&&w(t,["description"],i);const a=x(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&w(t,["defaultCheckpointId"],a),n}function lV(e,t){const n={},r=x(e,["displayName"]);t!==void 0&&r!=null&&w(t,["displayName"],r);const i=x(e,["description"]);t!==void 0&&i!=null&&w(t,["description"],i);const a=x(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&w(t,["defaultCheckpointId"],a),n}function uV(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","name"],ht(e,r));const i=x(t,["config"]);return i!=null&&oV(i,n),n}function cV(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["config"]);return i!=null&&lV(i,n),n}function dV(e,t){const n={},r=x(e,["outputGcsUri"]);t!==void 0&&r!=null&&w(t,["parameters","storageUri"],r);const i=x(e,["includeRaiReason"]);t!==void 0&&i!=null&&w(t,["parameters","includeRaiReason"],i);const a=x(e,["outputMimeType"]);t!==void 0&&a!=null&&w(t,["parameters","outputOptions","mimeType"],a);const o=x(e,["outputCompressionQuality"]);t!==void 0&&o!=null&&w(t,["parameters","outputOptions","compressionQuality"],o);const u=x(e,["enhanceInputImage"]);t!==void 0&&u!=null&&w(t,["parameters","upscaleConfig","enhanceInputImage"],u);const f=x(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&w(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=x(e,["labels"]);t!==void 0&&d!=null&&w(t,["labels"],d);const h=x(e,["numberOfImages"]);t!==void 0&&h!=null&&w(t,["parameters","sampleCount"],h);const m=x(e,["mode"]);return t!==void 0&&m!=null&&w(t,["parameters","mode"],m),n}function fV(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["_url","model"],ht(e,r));const i=x(t,["image"]);i!=null&&w(n,["instances[0]","image"],Ci(i));const a=x(t,["upscaleFactor"]);a!=null&&w(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=x(t,["config"]);return o!=null&&dV(o,n),n}function hV(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Cp(a))),w(t,["generatedImages"],i)}return t}function pV(e){const t={},n=x(e,["uri"]);n!=null&&w(t,["uri"],n);const r=x(e,["encodedVideo"]);r!=null&&w(t,["videoBytes"],gs(r));const i=x(e,["encoding"]);return i!=null&&w(t,["mimeType"],i),t}function mV(e){const t={},n=x(e,["gcsUri"]);n!=null&&w(t,["uri"],n);const r=x(e,["bytesBase64Encoded"]);r!=null&&w(t,["videoBytes"],gs(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["mimeType"],i),t}function gV(e){const t={},n=x(e,["image"]);n!=null&&w(t,["_self"],Ci(n));const r=x(e,["maskMode"]);return r!=null&&w(t,["maskMode"],r),t}function yV(e){const t={},n=x(e,["image"]);n!=null&&w(t,["image"],Tp(n));const r=x(e,["referenceType"]);return r!=null&&w(t,["referenceType"],r),t}function vV(e){const t={},n=x(e,["image"]);n!=null&&w(t,["image"],Ci(n));const r=x(e,["referenceType"]);return r!=null&&w(t,["referenceType"],r),t}function AO(e){const t={},n=x(e,["uri"]);n!=null&&w(t,["uri"],n);const r=x(e,["videoBytes"]);r!=null&&w(t,["encodedVideo"],gs(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["encoding"],i),t}function jO(e){const t={},n=x(e,["uri"]);n!=null&&w(t,["gcsUri"],n);const r=x(e,["videoBytes"]);r!=null&&w(t,["bytesBase64Encoded"],gs(r));const i=x(e,["mimeType"]);return i!=null&&w(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xV="Content-Type",bV="X-Server-Timeout",wV="User-Agent",ix="x-goog-api-client",_V="1.26.0",SV=`google-genai-sdk/${_V}`,kV="v1beta1",EV="v1beta",$2=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class CV{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:kV,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:EV,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[o,u]of Object.entries(t.queryParams))i.searchParams.append(o,String(u));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,t.abortSignal),this.unaryApiCall(i,a,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,t.abortSignal),this.streamApiCall(i,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r){if(n&&n.timeout||r){const i=new AbortController,a=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>i.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=a}return n&&n.extraBody!==null&&TV(t,n.extraBody),t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await B2(i),new Zv(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await B2(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){var n;return _l(this,arguments,function*(){const i=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:u,value:f}=yield Bt(i.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=a.decode(f,{stream:!0});try{const m=JSON.parse(d);if("error"in m){const y=JSON.parse(JSON.stringify(m.error)),v=y.status,k=y.code,S=`got status: ${v}. ${JSON.stringify(m)}`;if(k>=400&&k<600)throw new kp({message:S,status:k})}}catch(m){if(m.name==="ApiError")throw m}o+=d;let h=o.match($2);for(;h;){const m=h[1];try{const y=new Response(m,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Bt(new Zv(y)),o=o.slice(h[0].length),h=o.match($2)}catch(y){throw new Error(`exception parsing stream chunk ${m}. ${y}`)}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=SV+" "+this.clientOptions.userAgentExtra;return t[wV]=n,t[ix]=n,t[xV]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))n.append(r,i);t.timeout&&t.timeout>0&&n.append(bV,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,o=await a.stat(t);i.sizeBytes=String(o.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f=await this.fetchUploadUrl(i,n);return a.upload(t,f,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const a={file:t},o=await this.request({path:Me("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function B2(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new kp({message:i,status:n}):new Error(i)}}function TV(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const a=JSON.parse(e.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const u=Object.assign({},a);for(const f in o)if(Object.prototype.hasOwnProperty.call(o,f)){const d=o[f],h=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?u[f]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const i=r(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NV="mcp_used/unknown";let AV=!1;function PO(e){for(const t of e)if(jV(t)||typeof t=="object"&&"inputSchema"in t)return!0;return AV}function MO(e){var t;const n=(t=e[ix])!==null&&t!==void 0?t:"";e[ix]=(n+` ${NV}`).trimStart()}function jV(e){return e!==null&&typeof e=="object"&&e instanceof Lb}function PV(e,t=100){return _l(this,arguments,function*(){let r,i=0;for(;i<t;){const a=yield Bt(e.listTools({cursor:r}));for(const o of a.tools)yield yield Bt(o),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class Lb{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Lb(t,n)}async initialize(){var t,n,r,i;if(this.mcpTools.length>0)return;const a={},o=[];for(const h of this.mcpClients)try{for(var u=!0,f=(n=void 0,Ec(PV(h))),d;d=await f.next(),t=d.done,!t;u=!0){i=d.value,u=!1;const m=i;o.push(m);const y=m.name;if(a[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);a[y]=h}}catch(m){n={error:m}}finally{try{!u&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),D8(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function MV(e,t,n){const r=new N8;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),t(r)}class OV{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=DV(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const h=new Promise(N=>{d=N}),m=t.callbacks,y=function(){d({})},v=this.apiClient,k={onopen:y,onmessage:N=>{MV(v,m.onmessage,N)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(N){}},S=this.webSocketFactory.create(f,IV(o),k);S.connect(),await h;const A={setup:{model:ht(this.apiClient,t.model)}};return S.send(JSON.stringify(A)),new RV(S,this.apiClient)}}class RV{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=EF(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=kF(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vl.PLAY)}pause(){this.sendPlaybackControl(vl.PAUSE)}stop(){this.sendPlaybackControl(vl.STOP)}resetContext(){this.sendPlaybackControl(vl.RESET_CONTEXT)}close(){this.conn.close()}}function IV(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function DV(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function UV(e,t,n){const r=new T8;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(e.isVertexAI()){const o=NF(a);Object.assign(r,o)}else Object.assign(r,a);t(r)}class qV{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new OV(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,i,a,o,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&PO(t.config.tools)&&MO(m);const y=FV(m);if(this.apiClient.isVertexAI())h=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y);else{const q=this.apiClient.getApiKey();let W="BidiGenerateContent",F="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),W="BidiGenerateContentConstrained",F="access_token"),h=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${W}?${F}=${q}`}let v=()=>{};const k=new Promise(q=>{v=q}),S=t.callbacks,C=function(){var q;(q=S==null?void 0:S.onopen)===null||q===void 0||q.call(S),v({})},T=this.apiClient,A={onopen:C,onmessage:q=>{UV(T,S.onmessage,q)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(q){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(q){}},N=this.webSocketFactory.create(h,zV(y),A);N.connect(),await k;let O=ht(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const q=this.apiClient.getProject(),W=this.apiClient.getLocation();O=`projects/${q}/locations/${W}/`+O}let M={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[kh.AUDIO]}:t.config.responseModalities=[kh.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&u!==void 0?u:[],D=[];for(const q of P)if(this.isCallableTool(q)){const W=q;D.push(await W.tool())}else D.push(q);D.length>0&&(t.config.tools=D);const Y={model:O,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?M=SF(this.apiClient,Y):M=_F(this.apiClient,Y),delete M.config,N.send(JSON.stringify(M)),new BV(N,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const $V={turnComplete:!0};class BV{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=ri(n.turns),t.isVertexAI()||(r=r.map(i=>Ep(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(LV)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},$V),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:TF(t)}:n={realtimeInput:CF(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zV(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function FV(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z2=10;function F2(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const o of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Sl(o)){i=!0;break}if(!i)return!0;const a=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Sl(e){return"callTool"in e&&typeof e.callTool=="function"}function VV(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>Sl(i)))!==null&&r!==void 0?r:!1}function HV(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>!Sl(i)))!==null&&r!==void 0?r:!1}function V2(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV extends vo{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,i,a,o,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!VV(n)||F2(n.config))return await this.generateContentInternal(f);if(HV(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const m=ri(f.contents),y=(a=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:z2;let v=0;for(;v<y&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const k=d.candidates[0].content,S=[];for(const C of(u=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&u!==void 0?u:[])if(Sl(C)){const A=await C.callTool(d.functionCalls);S.push(...A)}v++,h={role:"user",parts:S},f.contents=ri(f.contents),f.contents.push(k),f.contents.push(h),V2(f.config)&&(m.push(k),m.push(h))}return V2(f.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),F2(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const o=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:o.push(f);let u;return a?u={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Jc(ao.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,o,u,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((f=(u=n.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,i;const a=(n=t.config)===null||n===void 0?void 0:n.tools;if(!a)return t;const o=await Promise.all(a.map(async f=>Sl(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:o})};if(u.config.tools=o,t.config&&t.config.tools&&PO(t.config.tools)){const f=(i=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),MO(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,r,i;const a=new Map;for(const o of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Sl(o)){const u=o,f=await u.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,u)}}return a}async processAfcStream(t){var n,r,i;const a=(i=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:z2;let o=!1,u=0;const f=await this.initAfcToolsMap(t);return(function(d,h,m){var y,v;return _l(this,arguments,function*(){for(var k,S,C,T;u<a;){o&&(u++,o=!1);const M=yield Bt(d.processParamsMaybeAddMcpUsage(m)),P=yield Bt(d.generateContentStreamInternal(M)),D=[],Y=[];try{for(var A=!0,N=(S=void 0,Ec(P)),O;O=yield Bt(N.next()),k=O.done,!k;A=!0){T=O.value,A=!1;const q=T;if(yield yield Bt(q),q.candidates&&(!((y=q.candidates[0])===null||y===void 0)&&y.content)){Y.push(q.candidates[0].content);for(const W of(v=q.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<a&&W.functionCall){if(!W.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(W.functionCall.name)){const F=yield Bt(h.get(W.functionCall.name).callTool([W.functionCall]));D.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${W.functionCall.name}`)}}}}catch(q){S={error:q}}finally{try{!A&&!k&&(C=N.return)&&(yield Bt(C.call(N)))}finally{if(S)throw S.error}}if(D.length>0){o=!0;const q=new ac;q.candidates=[{content:{role:"user",parts:D}}],yield yield Bt(q);const W=[];W.push(...Y),W.push({role:"user",parts:D});const F=ri(m.contents).concat(W);m.contents=F}else break}})})(this,f,t)}async generateContentInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=L2(this.apiClient,t);return u=Me("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=q2(h),y=new ac;return Object.assign(y,m),y})}else{const d=D2(this.apiClient,t);return u=Me("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=U2(h),y=new ac;return Object.assign(y,m),y})}}async generateContentStreamInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=L2(this.apiClient,t);return u=Me("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return _l(this,arguments,function*(){var y,v,k,S;try{for(var C=!0,T=Ec(m),A;A=yield Bt(T.next()),y=A.done,!y;C=!0){S=A.value,C=!1;const N=S,O=q2(yield Bt(N.json()));O.sdkHttpResponse={headers:N.headers};const M=new ac;Object.assign(M,O),yield yield Bt(M)}}catch(N){v={error:N}}finally{try{!C&&!y&&(k=T.return)&&(yield Bt(k.call(T)))}finally{if(v)throw v.error}}})})}else{const d=D2(this.apiClient,t);return u=Me("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(m){return _l(this,arguments,function*(){var y,v,k,S;try{for(var C=!0,T=Ec(m),A;A=yield Bt(T.next()),y=A.done,!y;C=!0){S=A.value,C=!1;const N=S,O=U2(yield Bt(N.json()));O.sdkHttpResponse={headers:N.headers};const M=new ac;Object.assign(M,O),yield yield Bt(M)}}catch(N){v={error:N}}finally{try{!C&&!y&&(k=T.return)&&(yield Bt(k.call(T)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=i7(this.apiClient,t);return u=Me("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=s7(h),y=new b2;return Object.assign(y,m),y})}else{const d=r7(this.apiClient,t);return u=Me("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=a7(h),y=new b2;return Object.assign(y,m),y})}}async generateImagesInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=m7(this.apiClient,t);return u=Me("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=y7(h),y=new w2;return Object.assign(y,m),y})}else{const d=p7(this.apiClient,t);return u=Me("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=g7(h),y=new w2;return Object.assign(y,m),y})}}async editImageInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=ZF(this.apiClient,t);return a=Me("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=e7(f),h=new x8;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=fV(this.apiClient,t);return a=Me("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=hV(f),h=new b8;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=Y7(this.apiClient,t);return a=Me("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=W7(f),h=new w8;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=tV(this.apiClient,t);return a=Me("{model}:predict",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=nV(f),h=new _8;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=R7(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>rx(h))}else{const d=O7(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>nx(h))}}async listInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=B7(this.apiClient,t);return u=Me("{models_url}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=F7(h),y=new _2;return Object.assign(y,m),y})}else{const d=$7(this.apiClient,t);return u=Me("{models_url}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=z7(h),y=new _2;return Object.assign(y,m),y})}}async update(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=cV(this.apiClient,t);return u=Me("{model}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>rx(h))}else{const d=uV(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>nx(h))}}async delete(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=WF(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=XF(h),y=new S2;return Object.assign(y,m),y})}else{const d=YF(this.apiClient,t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=JF(h),y=new S2;return Object.assign(y,m),y})}}async countTokens(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=HF(this.apiClient,t);return u=Me("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=KF(h),y=new k2;return Object.assign(y,m),y})}else{const d=VF(this.apiClient,t);return u=Me("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=GF(h),y=new k2;return Object.assign(y,m),y})}}async computeTokens(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=LF(this.apiClient,t);return a=Me("{model}:computeTokens",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=UF(f),h=new S8;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=S7(this.apiClient,t);return u=Me("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=w7(h),y=new Eh;return Object.assign(y,m),y})}else{const d=_7(this.apiClient,t);return u=Me("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o.then(h=>{const m=b7(h),y=new Eh;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KV extends vo{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=g8(t);return u=Me("{operationName}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const d=m8(t);return u=Me("{operationName}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=l8(t);return a=Me("{resourceName}:fetchPredictOperation",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YV(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["data"]);n!=null&&w(t,["data"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function WV(e){const t={},n=x(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>rH(a))),w(t,["parts"],i)}const r=x(e,["role"]);return r!=null&&w(t,["role"],r),t}function JV(e,t,n){const r={},i=x(t,["expireTime"]);n!==void 0&&i!=null&&w(n,["expireTime"],i);const a=x(t,["newSessionExpireTime"]);n!==void 0&&a!=null&&w(n,["newSessionExpireTime"],a);const o=x(t,["uses"]);n!==void 0&&o!=null&&w(n,["uses"],o);const u=x(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&w(n,["bidiGenerateContentSetup"],nH(e,u));const f=x(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&w(n,["fieldMask"],f),r}function XV(e,t){const n={},r=x(t,["config"]);return r!=null&&w(n,["config"],JV(e,r,n)),n}function QV(e){const t={};if(x(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(e,["fileUri"]);n!=null&&w(t,["fileUri"],n);const r=x(e,["mimeType"]);return r!=null&&w(t,["mimeType"],r),t}function ZV(e){const t={};if(x(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(e,["enableWidget"]);return n!=null&&w(t,["enableWidget"],n),t}function eH(e){const t={},n=x(e,["timeRangeFilter"]);if(n!=null&&w(t,["timeRangeFilter"],n),x(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function tH(e,t){const n={},r=x(e,["generationConfig"]);t!==void 0&&r!=null&&w(t,["setup","generationConfig"],r);const i=x(e,["responseModalities"]);t!==void 0&&i!=null&&w(t,["setup","generationConfig","responseModalities"],i);const a=x(e,["temperature"]);t!==void 0&&a!=null&&w(t,["setup","generationConfig","temperature"],a);const o=x(e,["topP"]);t!==void 0&&o!=null&&w(t,["setup","generationConfig","topP"],o);const u=x(e,["topK"]);t!==void 0&&u!=null&&w(t,["setup","generationConfig","topK"],u);const f=x(e,["maxOutputTokens"]);t!==void 0&&f!=null&&w(t,["setup","generationConfig","maxOutputTokens"],f);const d=x(e,["mediaResolution"]);t!==void 0&&d!=null&&w(t,["setup","generationConfig","mediaResolution"],d);const h=x(e,["seed"]);t!==void 0&&h!=null&&w(t,["setup","generationConfig","seed"],h);const m=x(e,["speechConfig"]);t!==void 0&&m!=null&&w(t,["setup","generationConfig","speechConfig"],Db(m));const y=x(e,["thinkingConfig"]);t!==void 0&&y!=null&&w(t,["setup","generationConfig","thinkingConfig"],y);const v=x(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&w(t,["setup","generationConfig","enableAffectiveDialog"],v);const k=x(e,["systemInstruction"]);t!==void 0&&k!=null&&w(t,["setup","systemInstruction"],WV(Kn(k)));const S=x(e,["tools"]);if(t!==void 0&&S!=null){let P=Wl(S);Array.isArray(P)&&(P=P.map(D=>aH(Yl(D)))),w(t,["setup","tools"],P)}const C=x(e,["sessionResumption"]);t!==void 0&&C!=null&&w(t,["setup","sessionResumption"],iH(C));const T=x(e,["inputAudioTranscription"]);t!==void 0&&T!=null&&w(t,["setup","inputAudioTranscription"],T);const A=x(e,["outputAudioTranscription"]);t!==void 0&&A!=null&&w(t,["setup","outputAudioTranscription"],A);const N=x(e,["realtimeInputConfig"]);t!==void 0&&N!=null&&w(t,["setup","realtimeInputConfig"],N);const O=x(e,["contextWindowCompression"]);t!==void 0&&O!=null&&w(t,["setup","contextWindowCompression"],O);const M=x(e,["proactivity"]);return t!==void 0&&M!=null&&w(t,["setup","proactivity"],M),n}function nH(e,t){const n={},r=x(t,["model"]);r!=null&&w(n,["setup","model"],ht(e,r));const i=x(t,["config"]);return i!=null&&w(n,["config"],tH(i,n)),n}function rH(e){const t={},n=x(e,["videoMetadata"]);n!=null&&w(t,["videoMetadata"],n);const r=x(e,["thought"]);r!=null&&w(t,["thought"],r);const i=x(e,["inlineData"]);i!=null&&w(t,["inlineData"],YV(i));const a=x(e,["fileData"]);a!=null&&w(t,["fileData"],QV(a));const o=x(e,["thoughtSignature"]);o!=null&&w(t,["thoughtSignature"],o);const u=x(e,["functionCall"]);u!=null&&w(t,["functionCall"],u);const f=x(e,["codeExecutionResult"]);f!=null&&w(t,["codeExecutionResult"],f);const d=x(e,["executableCode"]);d!=null&&w(t,["executableCode"],d);const h=x(e,["functionResponse"]);h!=null&&w(t,["functionResponse"],h);const m=x(e,["text"]);return m!=null&&w(t,["text"],m),t}function iH(e){const t={},n=x(e,["handle"]);if(n!=null&&w(t,["handle"],n),x(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function aH(e){const t={},n=x(e,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(t,["functionDeclarations"],d)}if(x(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(e,["googleSearch"]);r!=null&&w(t,["googleSearch"],eH(r));const i=x(e,["googleSearchRetrieval"]);if(i!=null&&w(t,["googleSearchRetrieval"],i),x(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(e,["googleMaps"]);a!=null&&w(t,["googleMaps"],ZV(a));const o=x(e,["urlContext"]);o!=null&&w(t,["urlContext"],o);const u=x(e,["computerUse"]);u!=null&&w(t,["computerUse"],u);const f=x(e,["codeExecution"]);return f!=null&&w(t,["codeExecution"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sH(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);t.push(...i)}else t.push(n)}return t.join(",")}function oH(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(e.bidiGenerateContentSetup=a,n=a):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const a=sH(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?e.fieldMask=a:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const f=[];a&&f.push(a),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class lH extends vo{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=XV(this.apiClient,t);a=Me("auth_tokens",u._url),o=u._query,delete u.config,delete u._url,delete u._query;const f=oH(u,t.config);return i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uH(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","name"],n),t}function cH(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","name"],n),t}function dH(e,t){const n={};if(x(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&w(t,["displayName"],r),x(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=x(e,["epochCount"]);t!==void 0&&i!=null&&w(t,["tuningTask","hyperparameters","epochCount"],i);const a=x(e,["learningRateMultiplier"]);if(a!=null&&w(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=x(e,["batchSize"]);t!==void 0&&o!=null&&w(t,["tuningTask","hyperparameters","batchSize"],o);const u=x(e,["learningRate"]);if(t!==void 0&&u!=null&&w(t,["tuningTask","hyperparameters","learningRate"],u),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function fH(e,t){const n={},r=x(e,["validationDataset"]);t!==void 0&&r!=null&&w(t,["supervisedTuningSpec"],TH(r,n));const i=x(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&w(t,["tunedModelDisplayName"],i);const a=x(e,["description"]);t!==void 0&&a!=null&&w(t,["description"],a);const o=x(e,["epochCount"]);t!==void 0&&o!=null&&w(t,["supervisedTuningSpec","hyperParameters","epochCount"],o);const u=x(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&w(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=x(e,["exportLastCheckpointOnly"]);t!==void 0&&f!=null&&w(t,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=x(e,["adapterSize"]);if(t!==void 0&&d!=null&&w(t,["supervisedTuningSpec","hyperParameters","adapterSize"],d),x(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=x(e,["labels"]);return t!==void 0&&h!=null&&w(t,["labels"],h),n}function hH(e){const t={},n=x(e,["baseModel"]);n!=null&&w(t,["baseModel"],n);const r=x(e,["preTunedModel"]);r!=null&&w(t,["preTunedModel"],r);const i=x(e,["trainingDataset"]);i!=null&&w(t,["tuningTask","trainingData"],kH(i));const a=x(e,["config"]);return a!=null&&dH(a,t),t}function pH(e){const t={},n=x(e,["baseModel"]);n!=null&&w(t,["baseModel"],n);const r=x(e,["preTunedModel"]);r!=null&&w(t,["preTunedModel"],r);const i=x(e,["trainingDataset"]);i!=null&&w(t,["supervisedTuningSpec","trainingDatasetUri"],EH(i,t));const a=x(e,["config"]);return a!=null&&fH(a,t),t}function mH(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","name"],n),t}function gH(e){const t={},n=x(e,["name"]);return n!=null&&w(t,["_url","name"],n),t}function yH(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);t!==void 0&&i!=null&&w(t,["_query","pageToken"],i);const a=x(e,["filter"]);return t!==void 0&&a!=null&&w(t,["_query","filter"],a),n}function vH(e,t){const n={},r=x(e,["pageSize"]);t!==void 0&&r!=null&&w(t,["_query","pageSize"],r);const i=x(e,["pageToken"]);t!==void 0&&i!=null&&w(t,["_query","pageToken"],i);const a=x(e,["filter"]);return t!==void 0&&a!=null&&w(t,["_query","filter"],a),n}function xH(e){const t={},n=x(e,["config"]);return n!=null&&yH(n,t),t}function bH(e){const t={},n=x(e,["config"]);return n!=null&&vH(n,t),t}function wH(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>OO(o))),w(t,["tuningJobs"],a)}return t}function _H(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["nextPageToken"]);r!=null&&w(t,["nextPageToken"],r);const i=x(e,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>ax(o))),w(t,["tuningJobs"],a)}return t}function SH(e){const t={},n=x(e,["name"]);n!=null&&w(t,["model"],n);const r=x(e,["name"]);return r!=null&&w(t,["endpoint"],r),t}function kH(e){const t={};if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(e,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(t,["examples","examples"],r)}return t}function EH(e,t){const n={},r=x(e,["gcsUri"]);t!==void 0&&r!=null&&w(t,["supervisedTuningSpec","trainingDatasetUri"],r);const i=x(e,["vertexDatasetResource"]);if(t!==void 0&&i!=null&&w(t,["supervisedTuningSpec","trainingDatasetUri"],i),x(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function OO(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["state"]);i!=null&&w(t,["state"],pO(i));const a=x(e,["createTime"]);a!=null&&w(t,["createTime"],a);const o=x(e,["tuningTask","startTime"]);o!=null&&w(t,["startTime"],o);const u=x(e,["tuningTask","completeTime"]);u!=null&&w(t,["endTime"],u);const f=x(e,["updateTime"]);f!=null&&w(t,["updateTime"],f);const d=x(e,["description"]);d!=null&&w(t,["description"],d);const h=x(e,["baseModel"]);h!=null&&w(t,["baseModel"],h);const m=x(e,["_self"]);return m!=null&&w(t,["tunedModel"],SH(m)),t}function ax(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["state"]);i!=null&&w(t,["state"],pO(i));const a=x(e,["createTime"]);a!=null&&w(t,["createTime"],a);const o=x(e,["startTime"]);o!=null&&w(t,["startTime"],o);const u=x(e,["endTime"]);u!=null&&w(t,["endTime"],u);const f=x(e,["updateTime"]);f!=null&&w(t,["updateTime"],f);const d=x(e,["error"]);d!=null&&w(t,["error"],d);const h=x(e,["description"]);h!=null&&w(t,["description"],h);const m=x(e,["baseModel"]);m!=null&&w(t,["baseModel"],m);const y=x(e,["tunedModel"]);y!=null&&w(t,["tunedModel"],y);const v=x(e,["preTunedModel"]);v!=null&&w(t,["preTunedModel"],v);const k=x(e,["supervisedTuningSpec"]);k!=null&&w(t,["supervisedTuningSpec"],k);const S=x(e,["tuningDataStats"]);S!=null&&w(t,["tuningDataStats"],S);const C=x(e,["encryptionSpec"]);C!=null&&w(t,["encryptionSpec"],C);const T=x(e,["partnerModelTuningSpec"]);T!=null&&w(t,["partnerModelTuningSpec"],T);const A=x(e,["customBaseModel"]);A!=null&&w(t,["customBaseModel"],A);const N=x(e,["experiment"]);N!=null&&w(t,["experiment"],N);const O=x(e,["labels"]);O!=null&&w(t,["labels"],O);const M=x(e,["outputUri"]);M!=null&&w(t,["outputUri"],M);const P=x(e,["pipelineJob"]);P!=null&&w(t,["pipelineJob"],P);const D=x(e,["serviceAccount"]);D!=null&&w(t,["serviceAccount"],D);const Y=x(e,["tunedModelDisplayName"]);Y!=null&&w(t,["tunedModelDisplayName"],Y);const q=x(e,["veoTuningSpec"]);return q!=null&&w(t,["veoTuningSpec"],q),t}function CH(e){const t={},n=x(e,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const r=x(e,["name"]);r!=null&&w(t,["name"],r);const i=x(e,["metadata"]);i!=null&&w(t,["metadata"],i);const a=x(e,["done"]);a!=null&&w(t,["done"],a);const o=x(e,["error"]);return o!=null&&w(t,["error"],o),t}function TH(e,t){const n={},r=x(e,["gcsUri"]);r!=null&&w(n,["validationDatasetUri"],r);const i=x(e,["vertexDatasetResource"]);return t!==void 0&&i!=null&&w(t,["supervisedTuningSpec","trainingDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NH extends vo{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Jc(ao.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:Qv.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=gH(t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>ax(h))}else{const d=mH(t);return u=Me("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>OO(h))}}async listInternal(t){var n,r,i,a;let o,u="",f={};if(this.apiClient.isVertexAI()){const d=bH(t);return u=Me("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=_H(h),y=new E2;return Object.assign(y,m),y})}else{const d=xH(t);return u=Me("tunedModels",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const m=wH(h),y=new E2;return Object.assign(y,m),y})}}async cancel(t){var n,r,i,a;let o="",u={};if(this.apiClient.isVertexAI()){const f=cH(t);o=Me("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=uH(t);o=Me("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const u=pH(t);return a=Me("tuningJobs",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>ax(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hH(t);return a=Me("tunedModels",u._url),o=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>CH(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AH{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const jH=1024*1024*8,PH=3,MH=1e3,OH=2,B0="x-goog-upload-status";async function RH(e,t,n){var r,i,a;let o=0,u=0,f=new Zv(new Response),d="upload";for(o=e.size;u<o;){const m=Math.min(jH,o-u),y=e.slice(u,u+m);u+m>=o&&(d+=", finalize");let v=0,k=MH;for(;v<PH&&(f=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((r=f==null?void 0:f.headers)===null||r===void 0)&&r[B0]));)v++,await DH(k),k=k*OH;if(u+=m,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[B0])!=="active")break;if(o<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(f==null?void 0:f.json());if(((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[B0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function IH(e){return{size:e.size,type:e.type}}function DH(e){return new Promise(t=>setTimeout(t,e))}class LH{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await RH(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await IH(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UH{create(t,n,r){return new qH(t,n,r)}}class qH{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H2="x-goog-api-key";class $H{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(H2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(H2,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BH="gl-node/";class zH{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=s8(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const i=new $H(this.apiKey);this.apiClient=new CV({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:BH+"web",uploader:new LH,downloader:new AH}),this.models=new GV(this.apiClient),this.live=new qV(this.apiClient,i,new UH),this.batches=new Ez(this.apiClient),this.chats=new rF(this.models,this.apiClient),this.caches=new eF(this.apiClient),this.files=new hF(this.apiClient),this.operations=new KV(this.apiClient),this.authTokens=new lH(this.apiClient),this.tunings=new NH(this.apiClient)}}const RO=new zH({apiKey:void 0}),Th=["productos","ventas","clientes","proveedores","caja","detalle_ventas","historial_canjes","ingresos","orden_compra","promociones","usuarios","categorias","cargos","productos_canje","orden_compra_detalle","gastos","gastos_categorias"],G2=["productos","ventas","clientes","proveedores","caja","detalle_ventas","historial_canjes","ingresos","orden_compra","promociones","usuarios","categorias","productos_canje","gastos","gastos_categorias"],IO={name:"executeQueryOnDatabase",description:"Realiza consultas directas y simples con filtros en la base de datos. Ideal para buscar registros específicos o listas filtradas.",parameters:{type:vt.OBJECT,properties:{tableName:{type:vt.STRING,description:`La tabla a consultar. Tablas disponibles: ${Th.join(", ")}.`},select:{type:vt.STRING,description:"Campos a seleccionar, separados por comas (ej. 'nombre, stock_unid')."},filters:{type:vt.ARRAY,description:"Array de filtros. Cada filtro es un objeto {column, operator, value}.",items:{type:vt.OBJECT,properties:{column:{type:vt.STRING},operator:{type:vt.STRING,description:"Operador de Supabase (ej. 'eq', 'gt', 'gte', 'lt', 'lte', 'ilike')."},value:{type:vt.STRING}}}},orderBy:{type:vt.STRING,description:"Columna para ordenar los resultados."},ascending:{type:vt.BOOLEAN,description:"Orden: true para ascendente, false para descendente."},limit:{type:vt.INTEGER,description:"Máximo de resultados a devolver (def: 10)."}},required:["tableName","select"]}},FH={name:"getFullTableData",description:"Obtiene todos los datos de una tabla específica para análisis complejos que requieren cálculos, comparaciones entre columnas o agrupaciones (GROUP BY).",parameters:{type:vt.OBJECT,properties:{tableName:{type:vt.STRING,description:`La tabla de la que se extraerán todos los datos. Tablas disponibles: ${Th.join(", ")}.`}},required:["tableName"]}},DO={type:vt.OBJECT,properties:{displayText:{type:vt.STRING,description:"El texto principal de la respuesta para el usuario. Debe ser amigable y conversacional."},table:{type:vt.OBJECT,description:"Datos tabulares para mostrar al usuario, si la consulta lo requiere. Opcional.",properties:{headers:{type:vt.ARRAY,items:{type:vt.STRING},description:"Un array de strings para las cabeceras de la tabla."},rows:{type:vt.ARRAY,items:{type:vt.ARRAY,items:{type:vt.STRING}},description:"Un array de arrays, donde cada array interno es una fila de la tabla. Todos los valores deben ser strings."}},required:["headers","rows"]},suggestions:{type:vt.ARRAY,items:{type:vt.STRING},description:"Un array de 2 a 3 preguntas de seguimiento sugeridas que el usuario podría hacer. Opcional."}},required:["displayText"]},VH=`
  Eres GestionFarma AI, un asistente experto y analista de datos para el administrador de una farmacia.
  Tu misión es responder preguntas consultando la base de datos y DEVOLVER SIEMPRE UN OBJETO JSON estructurado según el schema proporcionado.
  La fecha de hoy es ${new Date().toISOString().split("T")[0]}.
  IMPORTANTE: Tu zona horaria operativa es la de Perú (UTC-5). Todas las preguntas y respuestas relacionadas con la hora deben usar esta zona horaria, no UTC.

  **PROTOCOLO DE RESPUESTA JSON:**
  1.  **displayText:** Proporciona siempre un texto introductorio o un resumen en lenguaje natural. Ej: "Aquí tienes los productos con bajo stock:" o "La última venta fue de S/ 50.00."
  2.  **table (Opcional):** Si la consulta devuelve una lista de datos (ventas, productos, etc.), formatea el resultado en este objeto.
      - \`headers\`: Un array con los nombres de las columnas.
      - \`rows\`: Un array de arrays, donde cada array interno representa una fila con los valores correspondientes a las cabeceras. **Todos los valores en las filas deben ser strings.** Formatea fechas a 'DD/MM/YYYY' y valores monetarios a 'S/ XX.XX'.
  3.  **suggestions (Opcional):** Ofrece 2 o 3 preguntas de seguimiento relevantes que el usuario podría hacer a continuación.

  **TUS CAPACIDADES DE ANÁLISIS:**
  Utiliza las herramientas \`executeQueryOnDatabase\` y \`getFullTableData\` para obtener los datos que necesitas para construir la respuesta JSON.
  - Para preguntas complejas (ej. "producto más vendido", "bajo stock"), primero usa \`getFullTableData\` para obtener los datos crudos, analízalos internamente, y luego construye el objeto JSON final con el \`displayText\`, la \`table\` y las \`suggestions\`.
  - **NUNCA** incluyas el JSON crudo de la base de datos en el \`displayText\`. Tu trabajo es procesarlo y presentarlo de forma limpia en la estructura JSON final.

  **ESQUEMA DE DATOS (TABLAS PRINCIPALES):**
  - 'productos': Inventario. Columnas clave: \`nombre\`, \`stock_unid\`, \`f_vencimiento\`, \`unid_pv\`, \`costo_x_unid\`, \`stock_min\`, y \`cont\` (contador de ventas).
  - 'ventas': Registros de ventas. Columnas clave: \`fecha_venta\`, \`total\`, \`cliente\`, \`usuario\`.
  - 'detalle_ventas': Productos específicos vendidos. Columnas: \`venta_id\`, \`producto_nombre\`, \`cantidad\`, \`subtotal\`.
  - ... y todas las demás tablas que conoces.

  **REGLAS DE ORO:**
  - **RESPUESTA SIEMPRE EN JSON.** Cada una de tus respuestas finales al usuario debe ser un objeto JSON que valide con el schema.
  - **ERES UN ANALISTA DE SOLO LECTURA.** No tienes permitido modificar, insertar o eliminar datos. Si te piden eliminar algo, responde en el \`displayText\` del JSON: "Mi función es analizar y consultar la información. No tengo permisos para modificar o eliminar datos por seguridad."
`,K2=RO.chats.create({model:"gemini-2.5-flash",config:{tools:[{functionDeclarations:[IO,FH]}],systemInstruction:VH,temperature:.1,responseMimeType:"application/json",responseSchema:DO}}),Ub=async(e,t,n)=>{var r;try{let i=await K2.sendMessage({message:e});for(;i.functionCalls&&i.functionCalls.length>0;){const u=i.functionCalls.map(async d=>{const h=d.args;let m;if(d.name==="executeQueryOnDatabase")if(typeof h.tableName!="string"||!Th.includes(h.tableName))m={error:`Acceso denegado a la tabla '${h.tableName}'.`};else{let y=te.from(h.tableName).select(h.select||"*");t&&n&&G2.includes(h.tableName)&&(y=y.eq("sede_id",t).eq("empresa_id",n)),h.filters&&Array.isArray(h.filters)&&h.filters.forEach(S=>{S.column&&S.operator&&S.value!==void 0&&(y=y.filter(S.column,S.operator,S.value))}),h.orderBy&&(y=y.order(h.orderBy,{ascending:h.ascending!==!1})),y=y.limit(h.limit||10);const{data:v,error:k}=await y;m=k?{error:k.message}:{results:v}}else if(d.name==="getFullTableData")if(typeof h.tableName!="string"||!Th.includes(h.tableName))m={error:`Acceso denegado a la tabla '${h.tableName}'.`};else{let y=te.from(h.tableName).select("*");t&&n&&G2.includes(h.tableName)&&(y=y.eq("sede_id",t).eq("empresa_id",n)),y=y.limit(1e3);const{data:v,error:k}=await y;m=k?{error:k.message}:{results:v}}else m={error:"Acción no soportada."};return{functionResponse:{name:d.name,response:m}}}),f=await Promise.all(u);i=await K2.sendMessage({message:f})}const a=i.text;if(!a)return console.error("AI response text is empty",JSON.stringify(i,null,2)),{displayText:"Lo siento, no pude generar una respuesta. Por favor, intenta de nuevo."};try{return JSON.parse(a)}catch{return console.error("AI returned invalid JSON:",a),{displayText:`Lo siento, ocurrió un error al procesar la respuesta. Contenido: ${a}`}}}catch(i){return console.error("Error in getAIInsight:",i),(r=i.message)!=null&&r.includes("SAFETY")?{displayText:"Tu consulta fue bloqueada por políticas de seguridad. Por favor, reformula tu pregunta."}:{displayText:"Lo siento, ocurrió un error al procesar tu solicitud con la IA."}}},HH=`
  Eres un asistente virtual amigable de la farmacia 'GestionFarma'. Tu público son los clientes.
  Tu misión es responder preguntas sobre productos, precios y horarios de atención.
  Horario de atención: Lunes a Sábado de 8:00 AM a 10:00 PM.
  
  **REGLAS DE SEGURIDAD (MUY IMPORTANTE):**
  - **NO PUEDES** revelar información interna como: cantidad de stock, costos de productos, datos de ventas, nombres de empleados, o cualquier otra información que no sea pública.
  - Si te preguntan por stock, responde únicamente si hay o no hay disponibilidad, nunca la cantidad. Puedes asumir que si un producto está en la base de datos, está disponible.
  - **SIEMPRE** debes usar tus herramientas para consultar la base de datos sobre productos. No inventes precios ni información. Si no encuentras un producto, indica que no lo tienes disponible por el momento.
  - **DEBES RESPONDER SIEMPRE EN FORMATO JSON** usando el schema proporcionado.
  - Formatea todos los precios en Soles Peruanos (S/).

  **Tablas y Columnas Permitidas:**
  - Solo puedes consultar la tabla 'productos'.
  - Solo puedes seleccionar las columnas: 'nombre', 'laboratorio', 'principio_activo', 'accion_terapeutica', 'categoria', 'unid_pv', 'blister_pv', 'caja_pv'.
`,GH=["productos"],Y2=["id","nombre","laboratorio","principio_activo","accion_terapeutica","categoria","unid_pv","blister_pv","caja_pv"],KH=async e=>{const t=RO.chats.create({model:"gemini-2.5-flash",config:{tools:[{functionDeclarations:[IO]}],systemInstruction:HH,temperature:.2,responseMimeType:"application/json",responseSchema:DO}});try{let n=await t.sendMessage({message:e});for(;n.functionCalls&&n.functionCalls.length>0;){const o=n.functionCalls.map(async f=>{const d=f.args;let h;if(f.name==="executeQueryOnDatabase")if(typeof d.tableName!="string"||!GH.includes(d.tableName))h={error:`Acceso denegado a la tabla '${d.tableName}'.`};else{const y=(d.select||"*").split(",").map(v=>v.trim()).filter(v=>Y2.includes(v));if(y.length===0)h={error:"No se solicitaron columnas válidas."};else{let v=te.from(d.tableName).select(y.join(","));d.filters&&Array.isArray(d.filters)&&d.filters.forEach(C=>{C.column&&Y2.includes(C.column)&&C.operator&&C.value!==void 0&&(v=v.filter(C.column,C.operator,C.value))}),v=v.limit(d.limit||5);const{data:k,error:S}=await v;h=S?{error:S.message}:{results:k}}}else h={error:"Acción no soportada."};return{functionResponse:{name:f.name,response:h}}}),u=await Promise.all(o);n=await t.sendMessage({message:u})}const r=n.text;if(!r)throw new Error("La IA no generó una respuesta de texto.");return JSON.parse(r)}catch(n){return console.error("Error in getPublicAIInsight:",n),{displayText:"Lo siento, no puedo responder esa pregunta en este momento. Por favor, intenta reformularla."}}};function YH(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const WH=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JH=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XH={};function W2(e,t){return(XH.jsx?JH:WH).test(e)}const QH=/[ \t\n\f\r]/g;function ZH(e){return typeof e=="object"?e.type==="text"?J2(e.value):!1:J2(e)}function J2(e){return e.replace(QH,"")===""}class Xc{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Xc.prototype.normal={};Xc.prototype.property={};Xc.prototype.space=void 0;function LO(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Xc(n,r,t)}function sx(e){return e.toLowerCase()}class yr{constructor(t,n){this.attribute=n,this.property=t}}yr.prototype.attribute="";yr.prototype.booleanish=!1;yr.prototype.boolean=!1;yr.prototype.commaOrSpaceSeparated=!1;yr.prototype.commaSeparated=!1;yr.prototype.defined=!1;yr.prototype.mustUseProperty=!1;yr.prototype.number=!1;yr.prototype.overloadedBoolean=!1;yr.prototype.property="";yr.prototype.spaceSeparated=!1;yr.prototype.space=void 0;let e9=0;const Ze=xo(),hn=xo(),ox=xo(),be=xo(),It=xo(),kl=xo(),Tr=xo();function xo(){return 2**++e9}const lx=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ze,booleanish:hn,commaOrSpaceSeparated:Tr,commaSeparated:kl,number:be,overloadedBoolean:ox,spaceSeparated:It},Symbol.toStringTag,{value:"Module"})),z0=Object.keys(lx);class qb extends yr{constructor(t,n,r,i){let a=-1;if(super(t,n),X2(this,"space",i),typeof r=="number")for(;++a<z0.length;){const o=z0[a];X2(this,z0[a],(r&lx[o])===lx[o])}}}qb.prototype.defined=!0;function X2(e,t,n){n&&(e[t]=n)}function Xl(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new qb(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[sx(r)]=r,n[sx(a.attribute)]=r}return new Xc(t,n,e.space)}const UO=Xl({properties:{ariaActiveDescendant:null,ariaAtomic:hn,ariaAutoComplete:null,ariaBusy:hn,ariaChecked:hn,ariaColCount:be,ariaColIndex:be,ariaColSpan:be,ariaControls:It,ariaCurrent:null,ariaDescribedBy:It,ariaDetails:null,ariaDisabled:hn,ariaDropEffect:It,ariaErrorMessage:null,ariaExpanded:hn,ariaFlowTo:It,ariaGrabbed:hn,ariaHasPopup:null,ariaHidden:hn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:It,ariaLevel:be,ariaLive:null,ariaModal:hn,ariaMultiLine:hn,ariaMultiSelectable:hn,ariaOrientation:null,ariaOwns:It,ariaPlaceholder:null,ariaPosInSet:be,ariaPressed:hn,ariaReadOnly:hn,ariaRelevant:null,ariaRequired:hn,ariaRoleDescription:It,ariaRowCount:be,ariaRowIndex:be,ariaRowSpan:be,ariaSelected:hn,ariaSetSize:be,ariaSort:null,ariaValueMax:be,ariaValueMin:be,ariaValueNow:be,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function qO(e,t){return t in e?e[t]:t}function $O(e,t){return qO(e,t.toLowerCase())}const t9=Xl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:kl,acceptCharset:It,accessKey:It,action:null,allow:null,allowFullScreen:Ze,allowPaymentRequest:Ze,allowUserMedia:Ze,alt:null,as:null,async:Ze,autoCapitalize:null,autoComplete:It,autoFocus:Ze,autoPlay:Ze,blocking:It,capture:null,charSet:null,checked:Ze,cite:null,className:It,cols:be,colSpan:null,content:null,contentEditable:hn,controls:Ze,controlsList:It,coords:be|kl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ze,defer:Ze,dir:null,dirName:null,disabled:Ze,download:ox,draggable:hn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ze,formTarget:null,headers:It,height:be,hidden:ox,high:be,href:null,hrefLang:null,htmlFor:It,httpEquiv:It,id:null,imageSizes:null,imageSrcSet:null,inert:Ze,inputMode:null,integrity:null,is:null,isMap:Ze,itemId:null,itemProp:It,itemRef:It,itemScope:Ze,itemType:It,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ze,low:be,manifest:null,max:null,maxLength:be,media:null,method:null,min:null,minLength:be,multiple:Ze,muted:Ze,name:null,nonce:null,noModule:Ze,noValidate:Ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ze,optimum:be,pattern:null,ping:It,placeholder:null,playsInline:Ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ze,referrerPolicy:null,rel:It,required:Ze,reversed:Ze,rows:be,rowSpan:be,sandbox:It,scope:null,scoped:Ze,seamless:Ze,selected:Ze,shadowRootClonable:Ze,shadowRootDelegatesFocus:Ze,shadowRootMode:null,shape:null,size:be,sizes:null,slot:null,span:be,spellCheck:hn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:be,step:null,style:null,tabIndex:be,target:null,title:null,translate:null,type:null,typeMustMatch:Ze,useMap:null,value:hn,width:be,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:It,axis:null,background:null,bgColor:null,border:be,borderColor:null,bottomMargin:be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ze,declare:Ze,event:null,face:null,frame:null,frameBorder:null,hSpace:be,leftMargin:be,link:null,longDesc:null,lowSrc:null,marginHeight:be,marginWidth:be,noResize:Ze,noHref:Ze,noShade:Ze,noWrap:Ze,object:null,profile:null,prompt:null,rev:null,rightMargin:be,rules:null,scheme:null,scrolling:hn,standby:null,summary:null,text:null,topMargin:be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ze,disableRemotePlayback:Ze,prefix:null,property:null,results:be,security:null,unselectable:null},space:"html",transform:$O}),n9=Xl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Tr,accentHeight:be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:be,amplitude:be,arabicForm:null,ascent:be,attributeName:null,attributeType:null,azimuth:be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:be,by:null,calcMode:null,capHeight:be,className:It,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:be,diffuseConstant:be,direction:null,display:null,dur:null,divisor:be,dominantBaseline:null,download:Ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:be,enableBackground:null,end:null,event:null,exponent:be,externalResourcesRequired:null,fill:null,fillOpacity:be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:kl,g2:kl,glyphName:kl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:be,horizOriginX:be,horizOriginY:be,id:null,ideographic:be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:be,k:be,k1:be,k2:be,k3:be,k4:be,kernelMatrix:Tr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:be,overlineThickness:be,paintOrder:null,panose1:null,path:null,pathLength:be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:It,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:be,pointsAtY:be,pointsAtZ:be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Tr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Tr,rev:Tr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Tr,requiredFeatures:Tr,requiredFonts:Tr,requiredFormats:Tr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:be,specularExponent:be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:be,strikethroughThickness:be,string:null,stroke:null,strokeDashArray:Tr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:be,strokeOpacity:be,strokeWidth:null,style:null,surfaceScale:be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Tr,tabIndex:be,tableValues:null,target:null,targetX:be,targetY:be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Tr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:be,underlineThickness:be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:be,values:null,vAlphabetic:be,vMathematical:be,vectorEffect:null,vHanging:be,vIdeographic:be,version:null,vertAdvY:be,vertOriginX:be,vertOriginY:be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:qO}),BO=Xl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),zO=Xl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$O}),FO=Xl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),r9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},i9=/[A-Z]/g,Q2=/-[a-z]/g,a9=/^data[-\w.:]+$/i;function s9(e,t){const n=sx(t);let r=t,i=yr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&a9.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Q2,l9);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Q2.test(a)){let o=a.replace(i9,o9);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=qb}return new i(r,t)}function o9(e){return"-"+e.toLowerCase()}function l9(e){return e.charAt(1).toUpperCase()}const u9=LO([UO,t9,BO,zO,FO],"html"),$b=LO([UO,n9,BO,zO,FO],"svg");function c9(e){return e.join(" ").trim()}var cl={},F0,Z2;function d9(){if(Z2)return F0;Z2=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,u=/^\s+|\s+$/g,f=`
`,d="/",h="*",m="",y="comment",v="declaration";F0=function(S,C){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];C=C||{};var T=1,A=1;function N(R){var z=R.match(t);z&&(T+=z.length);var V=R.lastIndexOf(f);A=~V?R.length-V:A+R.length}function O(){var R={line:T,column:A};return function(z){return z.position=new M(R),Y(),z}}function M(R){this.start=R,this.end={line:T,column:A},this.source=C.source}M.prototype.content=S;function P(R){var z=new Error(C.source+":"+T+":"+A+": "+R);if(z.reason=R,z.filename=C.source,z.line=T,z.column=A,z.source=S,!C.silent)throw z}function D(R){var z=R.exec(S);if(z){var V=z[0];return N(V),S=S.slice(V.length),z}}function Y(){D(n)}function q(R){var z;for(R=R||[];z=W();)z!==!1&&R.push(z);return R}function W(){var R=O();if(!(d!=S.charAt(0)||h!=S.charAt(1))){for(var z=2;m!=S.charAt(z)&&(h!=S.charAt(z)||d!=S.charAt(z+1));)++z;if(z+=2,m===S.charAt(z-1))return P("End of comment missing");var V=S.slice(2,z-2);return A+=2,N(V),S=S.slice(z),A+=2,R({type:y,comment:V})}}function F(){var R=O(),z=D(r);if(z){if(W(),!D(i))return P("property missing ':'");var V=D(a),U=R({type:v,property:k(z[0].replace(e,m)),value:V?k(V[0].replace(e,m)):m});return D(o),U}}function $(){var R=[];q(R);for(var z;z=F();)z!==!1&&(R.push(z),q(R));return R}return Y(),$()};function k(S){return S?S.replace(u,m):m}return F0}var eT;function f9(){if(eT)return cl;eT=1;var e=cl&&cl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cl,"__esModule",{value:!0}),cl.default=n;const t=e(d9());function n(r,i){let a=null;if(!r||typeof r!="string")return a;const o=(0,t.default)(r),u=typeof i=="function";return o.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:h}=f;u?i(d,h,f):h&&(a=a||{},a[d]=h)}),a}return cl}var sc={},tT;function h9(){if(tT)return sc;tT=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(d){return!d||n.test(d)||e.test(d)},o=function(d,h){return h.toUpperCase()},u=function(d,h){return"".concat(h,"-")},f=function(d,h){return h===void 0&&(h={}),a(d)?d:(d=d.toLowerCase(),h.reactCompat?d=d.replace(i,u):d=d.replace(r,u),d.replace(t,o))};return sc.camelCase=f,sc}var oc,nT;function p9(){if(nT)return oc;nT=1;var e=oc&&oc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(f9()),n=h9();function r(i,a){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(u,f){u&&f&&(o[(0,n.camelCase)(u,a)]=f)}),o}return r.default=r,oc=r,oc}var m9=p9();const g9=Ur(m9),VO=HO("end"),Bb=HO("start");function HO(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function y9(e){const t=Bb(e),n=VO(e);if(t&&n)return{start:t,end:n}}function Cc(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?rT(e.position):"start"in e||"end"in e?rT(e):"line"in e||"column"in e?ux(e):""}function ux(e){return iT(e&&e.line)+":"+iT(e&&e.column)}function rT(e){return ux(e&&e.start)+"-"+ux(e&&e.end)}function iT(e){return e&&typeof e=="number"?e:1}class Jn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Cc(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Jn.prototype.file="";Jn.prototype.name="";Jn.prototype.reason="";Jn.prototype.message="";Jn.prototype.stack="";Jn.prototype.column=void 0;Jn.prototype.line=void 0;Jn.prototype.ancestors=void 0;Jn.prototype.cause=void 0;Jn.prototype.fatal=void 0;Jn.prototype.place=void 0;Jn.prototype.ruleId=void 0;Jn.prototype.source=void 0;const zb={}.hasOwnProperty,v9=new Map,x9=/[A-Z]/g,b9=new Set(["table","tbody","thead","tfoot","tr"]),w9=new Set(["td","th"]),GO="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function _9(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=j9(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=A9(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?$b:u9,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=KO(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function KO(e,t,n){if(t.type==="element")return S9(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return k9(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return C9(e,t,n);if(t.type==="mdxjsEsm")return E9(e,t);if(t.type==="root")return T9(e,t,n);if(t.type==="text")return N9(e,t)}function S9(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$b,e.schema=i),e.ancestors.push(t);const a=WO(e,t.tagName,!1),o=P9(e,t);let u=Vb(e,t);return b9.has(t.tagName)&&(u=u.filter(function(f){return typeof f=="string"?!ZH(f):!0})),YO(e,o,a,t),Fb(o,u),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function k9(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Rc(e,t.position)}function E9(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Rc(e,t.position)}function C9(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=$b,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:WO(e,t.name,!0),o=M9(e,t),u=Vb(e,t);return YO(e,o,a,t),Fb(o,u),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function T9(e,t,n){const r={};return Fb(r,Vb(e,t)),e.create(t,e.Fragment,r,n)}function N9(e,t){return t.value}function YO(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Fb(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function A9(e,t,n){return r;function r(i,a,o,u){const d=Array.isArray(o.children)?n:t;return u?d(a,o,u):d(a,o)}}function j9(e,t){return n;function n(r,i,a,o){const u=Array.isArray(a.children),f=Bb(r);return t(i,a,o,u,{columnNumber:f?f.column-1:void 0,fileName:e,lineNumber:f?f.line:void 0},void 0)}}function P9(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&zb.call(t.properties,i)){const a=O9(e,i,t.properties[i]);if(a){const[o,u]=a;e.tableCellAlignToStyle&&o==="align"&&typeof u=="string"&&w9.has(t.tagName)?r=u:n[o]=u}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function M9(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const u=o.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else Rc(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,a=e.evaluater.evaluateExpression(u.expression)}else Rc(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function Vb(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:v9;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=i.get(f)||0;o=f+"-"+d,i.set(f,d+1)}}const u=KO(e,a,o);u!==void 0&&n.push(u)}return n}function O9(e,t,n){const r=s9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?YH(n):c9(n)),r.property==="style"){let i=typeof n=="object"?n:R9(e,String(n));return e.stylePropertyNameCase==="css"&&(i=I9(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?r9[r.property]||r.property:r.attribute,n]}}function R9(e,t){try{return g9(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Jn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=GO+"#cannot-parse-style-attribute",i}}function WO(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const u=W2(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=o}else r=W2(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return zb.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Rc(e)}function Rc(e,t){const n=new Jn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=GO+"#cannot-handle-mdx-estrees-without-createevaluater",n}function I9(e){const t={};let n;for(n in e)zb.call(e,n)&&(t[D9(n)]=e[n]);return t}function D9(e){let t=e.replace(x9,L9);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function L9(e){return"-"+e.toLowerCase()}const V0={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},U9={};function q9(e,t){const n=U9,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return JO(e,r,i)}function JO(e,t,n){if($9(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return aT(e.children,t,n)}return Array.isArray(e)?aT(e,t,n):""}function aT(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=JO(e[i],t,n);return r.join("")}function $9(e){return!!(e&&typeof e=="object")}const sT=document.createElement("i");function Hb(e){const t="&"+e+";";sT.innerHTML=t;const n=sT.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ui(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function ei(e,t){return e.length>0?(Ui(e,e.length,0,t),e):t}const oT={}.hasOwnProperty;function B9(e){const t={};let n=-1;for(;++n<e.length;)z9(t,e[n]);return t}function z9(e,t){let n;for(n in t){const i=(oT.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){oT.call(i,o)||(i[o]=[]);const u=a[o];F9(i[o],Array.isArray(u)?u:u?[u]:[])}}}function F9(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ui(e,0,0,r)}function XO(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function El(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ii=ys(/[A-Za-z]/),Ir=ys(/[\dA-Za-z]/),V9=ys(/[#-'*+\--9=?A-Z^-~]/);function cx(e){return e!==null&&(e<32||e===127)}const dx=ys(/\d/),H9=ys(/[\dA-Fa-f]/),G9=ys(/[!-/:-@[-`{-~]/);function Ve(e){return e!==null&&e<-2}function mr(e){return e!==null&&(e<0||e===32)}function xt(e){return e===-2||e===-1||e===32}const K9=ys(new RegExp("\\p{P}|\\p{S}","u")),Y9=ys(/\s/);function ys(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ql(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Ir(e.charCodeAt(n+1))&&Ir(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const u=e.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(o=String.fromCharCode(a,u),i=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Lt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(f){return xt(f)?(e.enter(n),u(f)):t(f)}function u(f){return xt(f)&&a++<i?(e.consume(f),u):(e.exit(n),t(f))}}const W9={tokenize:J9};function J9(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Lt(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),a(u)}function a(u){const f=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,o(u)}function o(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Ve(u)?(e.consume(u),e.exit("chunkText"),a):(e.consume(u),o)}}const X9={tokenize:Q9},lT={tokenize:Z9};function Q9(e){const t=this,n=[];let r=0,i,a,o;return u;function u(N){if(r<n.length){const O=n[r];return t.containerState=O[1],e.attempt(O[0].continuation,f,d)(N)}return d(N)}function f(N){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&A();const O=t.events.length;let M=O,P;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){P=t.events[M][1].end;break}T(r);let D=O;for(;D<t.events.length;)t.events[D][1].end={...P},D++;return Ui(t.events,M+1,0,t.events.slice(O)),t.events.length=D,d(N)}return u(N)}function d(N){if(r===n.length){if(!i)return y(N);if(i.currentConstruct&&i.currentConstruct.concrete)return k(N);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lT,h,m)(N)}function h(N){return i&&A(),T(r),y(N)}function m(N){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,k(N)}function y(N){return t.containerState={},e.attempt(lT,v,k)(N)}function v(N){return r++,n.push([t.currentConstruct,t.containerState]),y(N)}function k(N){if(N===null){i&&A(),T(0),e.consume(N);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),S(N)}function S(N){if(N===null){C(e.exit("chunkFlow"),!0),T(0),e.consume(N);return}return Ve(N)?(e.consume(N),C(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(N),S)}function C(N,O){const M=t.sliceStream(N);if(O&&M.push(null),N.previous=a,a&&(a.next=N),a=N,i.defineSkip(N.start),i.write(M),t.parser.lazy[N.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<o&&(!i.events[P][1].end||i.events[P][1].end.offset>o))return;const D=t.events.length;let Y=D,q,W;for(;Y--;)if(t.events[Y][0]==="exit"&&t.events[Y][1].type==="chunkFlow"){if(q){W=t.events[Y][1].end;break}q=!0}for(T(r),P=D;P<t.events.length;)t.events[P][1].end={...W},P++;Ui(t.events,Y+1,0,t.events.slice(D)),t.events.length=P}}function T(N){let O=n.length;for(;O-- >N;){const M=n[O];t.containerState=M[1],M[0].exit.call(t,e)}n.length=N}function A(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Z9(e,t,n){return Lt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uT(e){if(e===null||mr(e)||Y9(e))return 1;if(K9(e))return 2}function Gb(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const fx={name:"attention",resolveAll:eG,tokenize:tG};function eG(e,t){let n=-1,r,i,a,o,u,f,d,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;f=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},y={...e[n][1].start};cT(m,-f),cT(y,f),o={type:f>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},a={type:f>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:f>1?"strong":"emphasis",start:{...o.start},end:{...u.end}},e[r][1].end={...o.start},e[n][1].start={...u.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=ei(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=ei(d,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=ei(d,Gb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=ei(d,[["exit",a,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,d=ei(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Ui(e,r-1,n-r+3,d),n=r+d.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function tG(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=uT(r);let a;return o;function o(f){return a=f,e.enter("attentionSequence"),u(f)}function u(f){if(f===a)return e.consume(f),u;const d=e.exit("attentionSequence"),h=uT(f),m=!h||h===2&&i||n.includes(f),y=!i||i===2&&h||n.includes(r);return d._open=!!(a===42?m:m&&(i||!y)),d._close=!!(a===42?y:y&&(h||!m)),t(f)}}function cT(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nG={name:"autolink",tokenize:rG};function rG(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(v){return Ii(v)?(e.consume(v),o):v===64?n(v):d(v)}function o(v){return v===43||v===45||v===46||Ir(v)?(r=1,u(v)):d(v)}function u(v){return v===58?(e.consume(v),r=0,f):(v===43||v===45||v===46||Ir(v))&&r++<32?(e.consume(v),u):(r=0,d(v))}function f(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||cx(v)?n(v):(e.consume(v),f)}function d(v){return v===64?(e.consume(v),h):V9(v)?(e.consume(v),d):n(v)}function h(v){return Ir(v)?m(v):n(v)}function m(v){return v===46?(e.consume(v),r=0,h):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):y(v)}function y(v){if((v===45||Ir(v))&&r++<63){const k=v===45?y:m;return e.consume(v),k}return n(v)}}const Np={partial:!0,tokenize:iG};function iG(e,t,n){return r;function r(a){return xt(a)?Lt(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||Ve(a)?t(a):n(a)}}const QO={continuation:{tokenize:sG},exit:oG,name:"blockQuote",tokenize:aG};function aG(e,t,n){const r=this;return i;function i(o){if(o===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return xt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function sG(e,t,n){const r=this;return i;function i(o){return xt(o)?Lt(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(QO,t,n)(o)}}function oG(e){e.exit("blockQuote")}const ZO={name:"characterEscape",tokenize:lG};function lG(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return G9(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const eR={name:"characterReference",tokenize:uG};function uG(e,t,n){const r=this;let i=0,a,o;return u;function u(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),f}function f(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Ir,h(m))}function d(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=H9,h):(e.enter("characterReferenceValue"),a=7,o=dx,h(m))}function h(m){if(m===59&&i){const y=e.exit("characterReferenceValue");return o===Ir&&!Hb(r.sliceSerialize(y))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(m)&&i++<a?(e.consume(m),h):n(m)}}const dT={partial:!0,tokenize:dG},fT={concrete:!0,name:"codeFenced",tokenize:cG};function cG(e,t,n){const r=this,i={partial:!0,tokenize:M};let a=0,o=0,u;return f;function f(P){return d(P)}function d(P){const D=r.events[r.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,u=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(P)}function h(P){return P===u?(o++,e.consume(P),h):o<3?n(P):(e.exit("codeFencedFenceSequence"),xt(P)?Lt(e,m,"whitespace")(P):m(P))}function m(P){return P===null||Ve(P)?(e.exit("codeFencedFence"),r.interrupt?t(P):e.check(dT,S,O)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===null||Ve(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(P)):xt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Lt(e,v,"whitespace")(P)):P===96&&P===u?n(P):(e.consume(P),y)}function v(P){return P===null||Ve(P)?m(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),k(P))}function k(P){return P===null||Ve(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(P)):P===96&&P===u?n(P):(e.consume(P),k)}function S(P){return e.attempt(i,O,C)(P)}function C(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),T}function T(P){return a>0&&xt(P)?Lt(e,A,"linePrefix",a+1)(P):A(P)}function A(P){return P===null||Ve(P)?e.check(dT,S,O)(P):(e.enter("codeFlowValue"),N(P))}function N(P){return P===null||Ve(P)?(e.exit("codeFlowValue"),A(P)):(e.consume(P),N)}function O(P){return e.exit("codeFenced"),t(P)}function M(P,D,Y){let q=0;return W;function W(V){return P.enter("lineEnding"),P.consume(V),P.exit("lineEnding"),F}function F(V){return P.enter("codeFencedFence"),xt(V)?Lt(P,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):$(V)}function $(V){return V===u?(P.enter("codeFencedFenceSequence"),R(V)):Y(V)}function R(V){return V===u?(q++,P.consume(V),R):q>=o?(P.exit("codeFencedFenceSequence"),xt(V)?Lt(P,z,"whitespace")(V):z(V)):Y(V)}function z(V){return V===null||Ve(V)?(P.exit("codeFencedFence"),D(V)):Y(V)}}}function dG(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const H0={name:"codeIndented",tokenize:hG},fG={partial:!0,tokenize:pG};function hG(e,t,n){const r=this;return i;function i(d){return e.enter("codeIndented"),Lt(e,a,"linePrefix",5)(d)}function a(d){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?f(d):Ve(d)?e.attempt(fG,o,f)(d):(e.enter("codeFlowValue"),u(d))}function u(d){return d===null||Ve(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),u)}function f(d){return e.exit("codeIndented"),t(d)}}function pG(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ve(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Lt(e,a,"linePrefix",5)(o)}function a(o){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(o):Ve(o)?i(o):n(o)}}const mG={name:"codeText",previous:yG,resolve:gG,tokenize:vG};function gG(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function yG(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vG(e,t,n){let r=0,i,a;return o;function o(m){return e.enter("codeText"),e.enter("codeTextSequence"),u(m)}function u(m){return m===96?(e.consume(m),r++,u):(e.exit("codeTextSequence"),f(m))}function f(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),f):m===96?(a=e.enter("codeTextSequence"),i=0,h(m)):Ve(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||Ve(m)?(e.exit("codeTextData"),f(m)):(e.consume(m),d)}function h(m){return m===96?(e.consume(m),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",d(m))}}class xG{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&lc(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),lc(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),lc(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);lc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);lc(this.left,n.reverse())}}}function lc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function tR(e){const t={};let n=-1,r,i,a,o,u,f,d;const h=new xG(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,bG(h,n)),n=t[n],d=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=h.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Ui(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!d}function bG(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const u=o.events,f=[],d={};let h,m,y=-1,v=n,k=0,S=0;const C=[S];for(;v;){for(;e.get(++i)[1]!==v;);a.push(i),v._tokenizer||(h=r.sliceStream(v),v.next||h.push(null),m&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(S=y+1,C.push(S),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):C.pop(),y=C.length;y--;){const T=u.slice(C[y],C[y+1]),A=a.pop();f.push([A,A+T.length-1]),e.splice(A,2,T)}for(f.reverse(),y=-1;++y<f.length;)d[k+f[y][0]]=k+f[y][1],k+=f[y][1]-f[y][0]-1;return d}const wG={resolve:SG,tokenize:kG},_G={partial:!0,tokenize:EG};function SG(e){return tR(e),e}function kG(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?a(u):Ve(u)?e.check(_G,o,a)(u):(e.consume(u),i)}function a(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function o(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function EG(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Lt(e,a,"linePrefix")}function a(o){if(o===null||Ve(o))return n(o);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function nR(e,t,n,r,i,a,o,u,f){const d=f||Number.POSITIVE_INFINITY;let h=0;return m;function m(T){return T===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(T),e.exit(a),y):T===null||T===32||T===41||cx(T)?n(T):(e.enter(r),e.enter(o),e.enter(u),e.enter("chunkString",{contentType:"string"}),S(T))}function y(T){return T===62?(e.enter(a),e.consume(T),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===62?(e.exit("chunkString"),e.exit(u),y(T)):T===null||T===60||Ve(T)?n(T):(e.consume(T),T===92?k:v)}function k(T){return T===60||T===62||T===92?(e.consume(T),v):v(T)}function S(T){return!h&&(T===null||T===41||mr(T))?(e.exit("chunkString"),e.exit(u),e.exit(o),e.exit(r),t(T)):h<d&&T===40?(e.consume(T),h++,S):T===41?(e.consume(T),h--,S):T===null||T===32||T===40||cx(T)?n(T):(e.consume(T),T===92?C:S)}function C(T){return T===40||T===41||T===92?(e.consume(T),S):S(T)}}function rR(e,t,n,r,i,a){const o=this;let u=0,f;return d;function d(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(a),h}function h(v){return u>999||v===null||v===91||v===93&&!f||v===94&&!u&&"_hiddenFootnoteSupport"in o.parser.constructs?n(v):v===93?(e.exit(a),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):Ve(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||Ve(v)||u++>999?(e.exit("chunkString"),h(v)):(e.consume(v),f||(f=!xt(v)),v===92?y:m)}function y(v){return v===91||v===92||v===93?(e.consume(v),u++,m):m(v)}}function iR(e,t,n,r,i,a){let o;return u;function u(y){return y===34||y===39||y===40?(e.enter(r),e.enter(i),e.consume(y),e.exit(i),o=y===40?41:y,f):n(y)}function f(y){return y===o?(e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):(e.enter(a),d(y))}function d(y){return y===o?(e.exit(a),f(o)):y===null?n(y):Ve(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),Lt(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===o||y===null||Ve(y)?(e.exit("chunkString"),d(y)):(e.consume(y),y===92?m:h)}function m(y){return y===o||y===92?(e.consume(y),h):h(y)}}function Tc(e,t){let n;return r;function r(i){return Ve(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):xt(i)?Lt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const CG={name:"definition",tokenize:NG},TG={partial:!0,tokenize:AG};function NG(e,t,n){const r=this;let i;return a;function a(v){return e.enter("definition"),o(v)}function o(v){return rR.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return i=El(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),f):n(v)}function f(v){return mr(v)?Tc(e,d)(v):d(v)}function d(v){return nR(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function h(v){return e.attempt(TG,m,m)(v)}function m(v){return xt(v)?Lt(e,y,"whitespace")(v):y(v)}function y(v){return v===null||Ve(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function AG(e,t,n){return r;function r(u){return mr(u)?Tc(e,i)(u):n(u)}function i(u){return iR(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return xt(u)?Lt(e,o,"whitespace")(u):o(u)}function o(u){return u===null||Ve(u)?t(u):n(u)}}const jG={name:"hardBreakEscape",tokenize:PG};function PG(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return Ve(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const MG={name:"headingAtx",resolve:OG,tokenize:RG};function OG(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ui(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function RG(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),a(h)}function a(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(e.consume(h),o):h===null||mr(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),f(h)):h===null||Ve(h)?(e.exit("atxHeading"),t(h)):xt(h)?Lt(e,u,"whitespace")(h):(e.enter("atxHeadingText"),d(h))}function f(h){return h===35?(e.consume(h),f):(e.exit("atxHeadingSequence"),u(h))}function d(h){return h===null||h===35||mr(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),d)}}const IG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hT=["pre","script","style","textarea"],DG={concrete:!0,name:"htmlFlow",resolveTo:qG,tokenize:$G},LG={partial:!0,tokenize:zG},UG={partial:!0,tokenize:BG};function qG(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function $G(e,t,n){const r=this;let i,a,o,u,f;return d;function d(I){return h(I)}function h(I){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(I),m}function m(I){return I===33?(e.consume(I),y):I===47?(e.consume(I),a=!0,S):I===63?(e.consume(I),i=3,r.interrupt?t:B):Ii(I)?(e.consume(I),o=String.fromCharCode(I),C):n(I)}function y(I){return I===45?(e.consume(I),i=2,v):I===91?(e.consume(I),i=5,u=0,k):Ii(I)?(e.consume(I),i=4,r.interrupt?t:B):n(I)}function v(I){return I===45?(e.consume(I),r.interrupt?t:B):n(I)}function k(I){const X="CDATA[";return I===X.charCodeAt(u++)?(e.consume(I),u===X.length?r.interrupt?t:$:k):n(I)}function S(I){return Ii(I)?(e.consume(I),o=String.fromCharCode(I),C):n(I)}function C(I){if(I===null||I===47||I===62||mr(I)){const X=I===47,re=o.toLowerCase();return!X&&!a&&hT.includes(re)?(i=1,r.interrupt?t(I):$(I)):IG.includes(o.toLowerCase())?(i=6,X?(e.consume(I),T):r.interrupt?t(I):$(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):a?A(I):N(I))}return I===45||Ir(I)?(e.consume(I),o+=String.fromCharCode(I),C):n(I)}function T(I){return I===62?(e.consume(I),r.interrupt?t:$):n(I)}function A(I){return xt(I)?(e.consume(I),A):W(I)}function N(I){return I===47?(e.consume(I),W):I===58||I===95||Ii(I)?(e.consume(I),O):xt(I)?(e.consume(I),N):W(I)}function O(I){return I===45||I===46||I===58||I===95||Ir(I)?(e.consume(I),O):M(I)}function M(I){return I===61?(e.consume(I),P):xt(I)?(e.consume(I),M):N(I)}function P(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),f=I,D):xt(I)?(e.consume(I),P):Y(I)}function D(I){return I===f?(e.consume(I),f=null,q):I===null||Ve(I)?n(I):(e.consume(I),D)}function Y(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||mr(I)?M(I):(e.consume(I),Y)}function q(I){return I===47||I===62||xt(I)?N(I):n(I)}function W(I){return I===62?(e.consume(I),F):n(I)}function F(I){return I===null||Ve(I)?$(I):xt(I)?(e.consume(I),F):n(I)}function $(I){return I===45&&i===2?(e.consume(I),U):I===60&&i===1?(e.consume(I),G):I===62&&i===4?(e.consume(I),H):I===63&&i===3?(e.consume(I),B):I===93&&i===5?(e.consume(I),ye):Ve(I)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(LG,Z,R)(I)):I===null||Ve(I)?(e.exit("htmlFlowData"),R(I)):(e.consume(I),$)}function R(I){return e.check(UG,z,Z)(I)}function z(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),V}function V(I){return I===null||Ve(I)?R(I):(e.enter("htmlFlowData"),$(I))}function U(I){return I===45?(e.consume(I),B):$(I)}function G(I){return I===47?(e.consume(I),o="",le):$(I)}function le(I){if(I===62){const X=o.toLowerCase();return hT.includes(X)?(e.consume(I),H):$(I)}return Ii(I)&&o.length<8?(e.consume(I),o+=String.fromCharCode(I),le):$(I)}function ye(I){return I===93?(e.consume(I),B):$(I)}function B(I){return I===62?(e.consume(I),H):I===45&&i===2?(e.consume(I),B):$(I)}function H(I){return I===null||Ve(I)?(e.exit("htmlFlowData"),Z(I)):(e.consume(I),H)}function Z(I){return e.exit("htmlFlow"),t(I)}}function BG(e,t,n){const r=this;return i;function i(o){return Ve(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function zG(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Np,t,n)}}const FG={name:"htmlText",tokenize:VG};function VG(e,t,n){const r=this;let i,a,o;return u;function u(B){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),M):B===63?(e.consume(B),N):Ii(B)?(e.consume(B),Y):n(B)}function d(B){return B===45?(e.consume(B),h):B===91?(e.consume(B),a=0,k):Ii(B)?(e.consume(B),A):n(B)}function h(B){return B===45?(e.consume(B),v):n(B)}function m(B){return B===null?n(B):B===45?(e.consume(B),y):Ve(B)?(o=m,G(B)):(e.consume(B),m)}function y(B){return B===45?(e.consume(B),v):m(B)}function v(B){return B===62?U(B):B===45?y(B):m(B)}function k(B){const H="CDATA[";return B===H.charCodeAt(a++)?(e.consume(B),a===H.length?S:k):n(B)}function S(B){return B===null?n(B):B===93?(e.consume(B),C):Ve(B)?(o=S,G(B)):(e.consume(B),S)}function C(B){return B===93?(e.consume(B),T):S(B)}function T(B){return B===62?U(B):B===93?(e.consume(B),T):S(B)}function A(B){return B===null||B===62?U(B):Ve(B)?(o=A,G(B)):(e.consume(B),A)}function N(B){return B===null?n(B):B===63?(e.consume(B),O):Ve(B)?(o=N,G(B)):(e.consume(B),N)}function O(B){return B===62?U(B):N(B)}function M(B){return Ii(B)?(e.consume(B),P):n(B)}function P(B){return B===45||Ir(B)?(e.consume(B),P):D(B)}function D(B){return Ve(B)?(o=D,G(B)):xt(B)?(e.consume(B),D):U(B)}function Y(B){return B===45||Ir(B)?(e.consume(B),Y):B===47||B===62||mr(B)?q(B):n(B)}function q(B){return B===47?(e.consume(B),U):B===58||B===95||Ii(B)?(e.consume(B),W):Ve(B)?(o=q,G(B)):xt(B)?(e.consume(B),q):U(B)}function W(B){return B===45||B===46||B===58||B===95||Ir(B)?(e.consume(B),W):F(B)}function F(B){return B===61?(e.consume(B),$):Ve(B)?(o=F,G(B)):xt(B)?(e.consume(B),F):q(B)}function $(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),i=B,R):Ve(B)?(o=$,G(B)):xt(B)?(e.consume(B),$):(e.consume(B),z)}function R(B){return B===i?(e.consume(B),i=void 0,V):B===null?n(B):Ve(B)?(o=R,G(B)):(e.consume(B),R)}function z(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||mr(B)?q(B):(e.consume(B),z)}function V(B){return B===47||B===62||mr(B)?q(B):n(B)}function U(B){return B===62?(e.consume(B),e.exit("htmlTextData"),e.exit("htmlText"),t):n(B)}function G(B){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),le}function le(B){return xt(B)?Lt(e,ye,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):ye(B)}function ye(B){return e.enter("htmlTextData"),o(B)}}const Kb={name:"labelEnd",resolveAll:YG,resolveTo:WG,tokenize:JG},HG={tokenize:XG},GG={tokenize:QG},KG={tokenize:ZG};function YG(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Ui(e,0,e.length,n),e}function WG(e,t){let n=e.length,r=0,i,a,o,u;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const f={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return u=[["enter",f,t],["enter",d,t]],u=ei(u,e.slice(a+1,a+r+3)),u=ei(u,[["enter",h,t]]),u=ei(u,Gb(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),u=ei(u,[["exit",h,t],e[o-2],e[o-1],["exit",d,t]]),u=ei(u,e.slice(o+1)),u=ei(u,[["exit",f,t]]),Ui(e,a,e.length,u),e}function JG(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return u;function u(y){return a?a._inactive?m(y):(o=r.parser.defined.includes(El(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),f):n(y)}function f(y){return y===40?e.attempt(HG,h,o?h:m)(y):y===91?e.attempt(GG,h,o?d:m)(y):o?h(y):m(y)}function d(y){return e.attempt(KG,h,m)(y)}function h(y){return t(y)}function m(y){return a._balanced=!0,n(y)}}function XG(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),i}function i(m){return mr(m)?Tc(e,a)(m):a(m)}function a(m){return m===41?h(m):nR(e,o,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return mr(m)?Tc(e,f)(m):h(m)}function u(m){return n(m)}function f(m){return m===34||m===39||m===40?iR(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):h(m)}function d(m){return mr(m)?Tc(e,h)(m):h(m)}function h(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function QG(e,t,n){const r=this;return i;function i(u){return rR.call(r,e,a,o,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(El(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function o(u){return n(u)}}function ZG(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const eK={name:"labelStartImage",resolveAll:Kb.resolveAll,tokenize:tK};function tK(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),a}function a(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),o):n(u)}function o(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const nK={name:"labelStartLink",resolveAll:Kb.resolveAll,tokenize:rK};function rK(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const G0={name:"lineEnding",tokenize:iK};function iK(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Lt(e,t,"linePrefix")}}const ph={name:"thematicBreak",tokenize:aK};function aK(e,t,n){let r=0,i;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return i=d,u(d)}function u(d){return d===i?(e.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Ve(d))?(e.exit("thematicBreak"),t(d)):n(d)}function f(d){return d===i?(e.consume(d),r++,f):(e.exit("thematicBreakSequence"),xt(d)?Lt(e,u,"whitespace")(d):u(d))}}const fr={continuation:{tokenize:uK},exit:dK,name:"list",tokenize:lK},sK={partial:!0,tokenize:fK},oK={partial:!0,tokenize:cK};function lK(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return u;function u(v){const k=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:dx(v)){if(r.containerState.type||(r.containerState.type=k,e.enter(k,{_container:!0})),k==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(ph,n,d)(v):d(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),f(v)}return n(v)}function f(v){return dx(v)&&++o<10?(e.consume(v),f):(!r.interrupt||o<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),d(v)):n(v)}function d(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(Np,r.interrupt?n:h,e.attempt(sK,y,m))}function h(v){return r.containerState.initialBlankLine=!0,a++,y(v)}function m(v){return xt(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function uK(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Np,i,a);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Lt(e,t,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!xt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(oK,t,o)(u))}function o(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,Lt(e,e.attempt(fr,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function cK(e,t,n){const r=this;return Lt(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function dK(e){e.exit(this.containerState.type)}function fK(e,t,n){const r=this;return Lt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!xt(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const pT={name:"setextUnderline",resolveTo:hK,tokenize:pK};function hK(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function pK(e,t,n){const r=this;let i;return a;function a(d){let h=r.events.length,m;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){m=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===i?(e.consume(d),u):(e.exit("setextHeadingLineSequence"),xt(d)?Lt(e,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Ve(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const mK={tokenize:gK};function gK(e){const t=this,n=e.attempt(Np,r,e.attempt(this.parser.constructs.flowInitial,i,Lt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(wG,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const yK={resolveAll:sR()},vK=aR("string"),xK=aR("text");function aR(e){return{resolveAll:sR(e==="text"?bK:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,u);return o;function o(h){return d(h)?a(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),f}function f(h){return d(h)?(n.exit("data"),a(h)):(n.consume(h),f)}function d(h){if(h===null)return!0;const m=i[h];let y=-1;if(m)for(;++y<m.length;){const v=m[y];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function sR(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function bK(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,u=0,f;for(;a--;){const d=i[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)u++,o--;if(o)break;o=-1}else if(d===-2)f=!0,u++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const d={type:n===e.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const wK={42:fr,43:fr,45:fr,48:fr,49:fr,50:fr,51:fr,52:fr,53:fr,54:fr,55:fr,56:fr,57:fr,62:QO},_K={91:CG},SK={[-2]:H0,[-1]:H0,32:H0},kK={35:MG,42:ph,45:[pT,ph],60:DG,61:pT,95:ph,96:fT,126:fT},EK={38:eR,92:ZO},CK={[-5]:G0,[-4]:G0,[-3]:G0,33:eK,38:eR,42:fx,60:[nG,FG],91:nK,92:[jG,ZO],93:Kb,95:fx,96:mG},TK={null:[fx,yK]},NK={null:[42,95]},AK={null:[]},jK=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:NK,contentInitial:_K,disable:AK,document:wK,flow:kK,flowInitial:SK,insideSpan:TK,string:EK,text:CK},Symbol.toStringTag,{value:"Module"}));function PK(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],u=[];const f={attempt:D(M),check:D(P),consume:A,enter:N,exit:O,interrupt:D(P,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:k,parser:e,previous:null,sliceSerialize:y,sliceStream:v,write:m};let h=t.tokenize.call(d,f);return t.resolveAll&&a.push(t),d;function m(F){return o=ei(o,F),C(),o[o.length-1]!==null?[]:(Y(t,0),d.events=Gb(a,d.events,d),d.events)}function y(F,$){return OK(v(F),$)}function v(F){return MK(o,F)}function k(){const{_bufferIndex:F,_index:$,line:R,column:z,offset:V}=r;return{_bufferIndex:F,_index:$,line:R,column:z,offset:V}}function S(F){i[F.line]=F.column,W()}function C(){let F;for(;r._index<o.length;){const $=o[r._index];if(typeof $=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<$.length;)T($.charCodeAt(r._bufferIndex));else T($)}}function T(F){h=h(F)}function A(F){Ve(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,W()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=F}function N(F,$){const R=$||{};return R.type=F,R.start=k(),d.events.push(["enter",R,d]),u.push(R),R}function O(F){const $=u.pop();return $.end=k(),d.events.push(["exit",$,d]),$}function M(F,$){Y(F,$.from)}function P(F,$){$.restore()}function D(F,$){return R;function R(z,V,U){let G,le,ye,B;return Array.isArray(z)?Z(z):"tokenize"in z?Z([z]):H(z);function H(me){return we;function we($e){const ne=$e!==null&&me[$e],Se=$e!==null&&me.null,Ee=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return Z(Ee)($e)}}function Z(me){return G=me,le=0,me.length===0?U:I(me[le])}function I(me){return we;function we($e){return B=q(),ye=me,me.partial||(d.currentConstruct=me),me.name&&d.parser.constructs.disable.null.includes(me.name)?re():me.tokenize.call($?Object.assign(Object.create(d),$):d,f,X,re)($e)}}function X(me){return F(ye,B),V}function re(me){return B.restore(),++le<G.length?I(G[le]):U}}}function Y(F,$){F.resolveAll&&!a.includes(F)&&a.push(F),F.resolve&&Ui(d.events,$,d.events.length-$,F.resolve(d.events.slice($),d)),F.resolveTo&&(d.events=F.resolveTo(d.events,d))}function q(){const F=k(),$=d.previous,R=d.currentConstruct,z=d.events.length,V=Array.from(u);return{from:z,restore:U};function U(){r=F,d.previous=$,d.currentConstruct=R,d.events.length=z,u=V,W()}}function W(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function MK(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const u=o[0];typeof u=="string"?o[0]=u.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function OK(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function RK(e){const r={constructs:B9([jK,...(e||{}).extensions||[]]),content:i(W9),defined:[],document:i(X9),flow:i(mK),lazy:{},string:i(vK),text:i(xK)};return r;function i(a){return o;function o(u){return PK(r,a,u)}}}function IK(e){for(;!tR(e););return e}const mT=/[\0\t\n\r]/g;function DK(){let e=1,t="",n=!0,r;return i;function i(a,o,u){const f=[];let d,h,m,y,v;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(mT.lastIndex=m,d=mT.exec(a),y=d&&d.index!==void 0?d.index:a.length,v=a.charCodeAt(y),!d){t=a.slice(m);break}if(v===10&&m===y&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),m<y&&(f.push(a.slice(m,y)),e+=y-m),v){case 0:{f.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,f.push(-2);e++<h;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:r=!0,e=1}m=y+1}return u&&(r&&f.push(-5),t&&f.push(t),f.push(null)),f}}const LK=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function UK(e){return e.replace(LK,qK)}function qK(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return XO(n.slice(a?2:1),a?16:10)}return Hb(n)||e}const oR={}.hasOwnProperty;function $K(e,t,n){return typeof t!="string"&&(n=t,t=void 0),BK(n)(IK(RK(n).document().write(DK()(e,t,!0))))}function BK(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ni),autolinkProtocol:q,autolinkEmail:q,atxHeading:a(ct),blockQuote:a(Se),characterEscape:q,characterReference:q,codeFenced:a(Ee),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Ee,o),codeText:a(ge,o),codeTextData:q,data:q,codeFlowValue:q,definition:a(bt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(We),hardBreakEscape:a(Ft),hardBreakTrailing:a(Ft),htmlFlow:a(Pn,o),htmlFlowData:q,htmlText:a(Pn,o),htmlTextData:q,image:a(Xn),label:o,link:a(Ni),listItem:a(di),listItemValue:y,listOrdered:a(ci,m),listUnordered:a(ci),paragraph:a(Pa),reference:I,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(ct),strong:a(ws),thematicBreak:a(_s)},exit:{atxHeading:f(),atxHeadingSequence:M,autolink:f(),autolinkEmail:ne,autolinkProtocol:$e,blockQuote:f(),characterEscapeValue:W,characterReferenceMarkerHexadecimal:re,characterReferenceMarkerNumeric:re,characterReferenceValue:me,characterReference:we,codeFenced:f(C),codeFencedFence:S,codeFencedFenceInfo:v,codeFencedFenceMeta:k,codeFlowValue:W,codeIndented:f(T),codeText:f(V),codeTextData:W,data:W,definition:f(),definitionDestinationString:O,definitionLabelString:A,definitionTitleString:N,emphasis:f(),hardBreakEscape:f($),hardBreakTrailing:f($),htmlFlow:f(R),htmlFlowData:W,htmlText:f(z),htmlTextData:W,image:f(G),label:ye,labelText:le,lineEnding:F,link:f(U),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:X,resourceDestinationString:B,resourceTitleString:H,resource:Z,setextHeading:f(Y),setextHeadingLineSequence:D,setextHeadingText:P,strong:f(),thematicBreak:f()}};lR(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(fe){let _e={type:"root",children:[]};const Ue={stack:[_e],tokenStack:[],config:t,enter:u,exit:d,buffer:o,resume:h,data:n},Xe=[];let tt=-1;for(;++tt<fe.length;)if(fe[tt][1].type==="listOrdered"||fe[tt][1].type==="listUnordered")if(fe[tt][0]==="enter")Xe.push(tt);else{const Mn=Xe.pop();tt=i(fe,Mn,tt)}for(tt=-1;++tt<fe.length;){const Mn=t[fe[tt][0]];oR.call(Mn,fe[tt][1].type)&&Mn[fe[tt][1].type].call(Object.assign({sliceSerialize:fe[tt][2].sliceSerialize},Ue),fe[tt][1])}if(Ue.tokenStack.length>0){const Mn=Ue.tokenStack[Ue.tokenStack.length-1];(Mn[1]||gT).call(Ue,void 0,Mn[0])}for(_e.position={start:is(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:is(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(fe,_e,Ue){let Xe=_e-1,tt=-1,Mn=!1,vr,Ot,Et,ve;for(;++Xe<=Ue;){const Ie=fe[Xe];switch(Ie[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ie[0]==="enter"?tt++:tt--,ve=void 0;break}case"lineEndingBlank":{Ie[0]==="enter"&&(vr&&!ve&&!tt&&!Et&&(Et=Xe),ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ve=void 0}if(!tt&&Ie[0]==="enter"&&Ie[1].type==="listItemPrefix"||tt===-1&&Ie[0]==="exit"&&(Ie[1].type==="listUnordered"||Ie[1].type==="listOrdered")){if(vr){let et=Xe;for(Ot=void 0;et--;){const Te=fe[et];if(Te[1].type==="lineEnding"||Te[1].type==="lineEndingBlank"){if(Te[0]==="exit")continue;Ot&&(fe[Ot][1].type="lineEndingBlank",Mn=!0),Te[1].type="lineEnding",Ot=et}else if(!(Te[1].type==="linePrefix"||Te[1].type==="blockQuotePrefix"||Te[1].type==="blockQuotePrefixWhitespace"||Te[1].type==="blockQuoteMarker"||Te[1].type==="listItemIndent"))break}Et&&(!Ot||Et<Ot)&&(vr._spread=!0),vr.end=Object.assign({},Ot?fe[Ot][1].start:Ie[1].end),fe.splice(Ot||Xe,0,["exit",vr,Ie[2]]),Xe++,Ue++}if(Ie[1].type==="listItemPrefix"){const et={type:"listItem",_spread:!1,start:Object.assign({},Ie[1].start),end:void 0};vr=et,fe.splice(Xe,0,["enter",et,Ie[2]]),Xe++,Ue++,Et=void 0,ve=!0}}}return fe[_e][1]._spread=Mn,Ue}function a(fe,_e){return Ue;function Ue(Xe){u.call(this,fe(Xe),Xe),_e&&_e.call(this,Xe)}}function o(){this.stack.push({type:"fragment",children:[]})}function u(fe,_e,Ue){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([_e,Ue||void 0]),fe.position={start:is(_e.start),end:void 0}}function f(fe){return _e;function _e(Ue){fe&&fe.call(this,Ue),d.call(this,Ue)}}function d(fe,_e){const Ue=this.stack.pop(),Xe=this.tokenStack.pop();if(Xe)Xe[0].type!==fe.type&&(_e?_e.call(this,fe,Xe[0]):(Xe[1]||gT).call(this,fe,Xe[0]));else throw new Error("Cannot close `"+fe.type+"` ("+Cc({start:fe.start,end:fe.end})+"): it’s not open");Ue.position.end=is(fe.end)}function h(){return q9(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function y(fe){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function v(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=fe}function k(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=fe}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=fe.replace(/(\r?\n|\r)$/g,"")}function A(fe){const _e=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=_e,Ue.identifier=El(this.sliceSerialize(fe)).toLowerCase()}function N(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=fe}function O(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=fe}function M(fe){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Ue=this.sliceSerialize(fe).length;_e.depth=Ue}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function D(fe){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function Y(){this.data.setextHeadingSlurpLineEnding=void 0}function q(fe){const Ue=this.stack[this.stack.length-1].children;let Xe=Ue[Ue.length-1];(!Xe||Xe.type!=="text")&&(Xe=nn(),Xe.position={start:is(fe.start),end:void 0},Ue.push(Xe)),this.stack.push(Xe)}function W(fe){const _e=this.stack.pop();_e.value+=this.sliceSerialize(fe),_e.position.end=is(fe.end)}function F(fe){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ue=_e.children[_e.children.length-1];Ue.position.end=is(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(_e.type)&&(q.call(this,fe),W.call(this,fe))}function $(){this.data.atHardBreak=!0}function R(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=fe}function z(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=fe}function V(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=fe}function U(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=_e,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function G(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=_e,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function le(fe){const _e=this.sliceSerialize(fe),Ue=this.stack[this.stack.length-2];Ue.label=UK(_e),Ue.identifier=El(_e).toLowerCase()}function ye(){const fe=this.stack[this.stack.length-1],_e=this.resume(),Ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ue.type==="link"){const Xe=fe.children;Ue.children=Xe}else Ue.alt=_e}function B(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=fe}function H(){const fe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=fe}function Z(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function X(fe){const _e=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=_e,Ue.identifier=El(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function re(fe){this.data.characterReferenceType=fe.type}function me(fe){const _e=this.sliceSerialize(fe),Ue=this.data.characterReferenceType;let Xe;Ue?(Xe=XO(_e,Ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xe=Hb(_e);const tt=this.stack[this.stack.length-1];tt.value+=Xe}function we(fe){const _e=this.stack.pop();_e.position.end=is(fe.end)}function $e(fe){W.call(this,fe);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(fe)}function ne(fe){W.call(this,fe);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(fe)}function Se(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function ge(){return{type:"inlineCode",value:""}}function bt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function We(){return{type:"emphasis",children:[]}}function ct(){return{type:"heading",depth:0,children:[]}}function Ft(){return{type:"break"}}function Pn(){return{type:"html",value:""}}function Xn(){return{type:"image",title:null,url:"",alt:null}}function Ni(){return{type:"link",title:null,url:"",children:[]}}function ci(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function di(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function Pa(){return{type:"paragraph",children:[]}}function ws(){return{type:"strong",children:[]}}function nn(){return{type:"text",value:""}}function _s(){return{type:"thematicBreak"}}}function is(e){return{line:e.line,column:e.column,offset:e.offset}}function lR(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?lR(e,r):zK(e,r)}}function zK(e,t){let n;for(n in t)if(oR.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gT(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Cc({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Cc({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Cc({start:t.start,end:t.end})+") is still open")}function FK(e){const t=this;t.parser=n;function n(r){return $K(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function VK(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function HK(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function GK(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function KK(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function YK(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WK(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ql(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,u+=1,e.footnoteCounts.set(r,u);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return e.patch(t,d),e.applyData(t,d)}function JK(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XK(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function uR(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function QK(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uR(e,t);const i={src:Ql(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function ZK(e,t){const n={src:Ql(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function eY(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function tY(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uR(e,t);const i={href:Ql(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function nY(e,t){const n={href:Ql(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rY(e,t,n){const r=e.all(t),i=n?iY(n):cR(t),a={},o=[];if(typeof t.checked=="boolean"){const h=r[0];let m;h&&h.type==="element"&&h.tagName==="p"?m=h:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const f=r[r.length-1];f&&(i||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function iY(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=cR(n[r])}return t}function cR(e){const t=e.spread;return t??e.children.length>1}function aY(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function sY(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oY(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function lY(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uY(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=Bb(t.children[1]),f=VO(t.children[t.children.length-1]);u&&f&&(o.position={start:u,end:f}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function cY(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,u=o?o.length:t.children.length;let f=-1;const d=[];for(;++f<u;){const m=t.children[f],y={},v=o?o[f]:void 0;v&&(y.align=v);let k={type:"element",tagName:a,properties:y,children:[]};m&&(k.children=e.all(m),e.patch(m,k),k=e.applyData(m,k)),d.push(k)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,h),e.applyData(t,h)}function dY(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const yT=9,vT=32;function fY(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(xT(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(xT(t.slice(i),i>0,!1)),a.join("")}function xT(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===yT||a===vT;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===yT||a===vT;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function hY(e,t){const n={type:"text",value:fY(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function pY(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const mY={blockquote:VK,break:HK,code:GK,delete:KK,emphasis:YK,footnoteReference:WK,heading:JK,html:XK,imageReference:QK,image:ZK,inlineCode:eY,linkReference:tY,link:nY,listItem:rY,list:aY,paragraph:sY,root:oY,strong:lY,table:uY,tableCell:dY,tableRow:cY,text:hY,thematicBreak:pY,toml:Vf,yaml:Vf,definition:Vf,footnoteDefinition:Vf};function Vf(){}const dR=-1,Ap=0,Nc=1,Nh=2,Yb=3,Wb=4,Jb=5,Xb=6,fR=7,hR=8,bT=typeof self=="object"?self:globalThis,gY=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case Ap:case dR:return n(o,i);case Nc:{const u=n([],i);for(const f of o)u.push(r(f));return u}case Nh:{const u=n({},i);for(const[f,d]of o)u[r(f)]=r(d);return u}case Yb:return n(new Date(o),i);case Wb:{const{source:u,flags:f}=o;return n(new RegExp(u,f),i)}case Jb:{const u=n(new Map,i);for(const[f,d]of o)u.set(r(f),r(d));return u}case Xb:{const u=n(new Set,i);for(const f of o)u.add(r(f));return u}case fR:{const{name:u,message:f}=o;return n(new bT[u](f),i)}case hR:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:u}=new Uint8Array(o);return n(new DataView(u),o)}}return n(new bT[a](o),i)};return r},wT=e=>gY(new Map,e)(0),dl="",{toString:yY}={},{keys:vY}=Object,uc=e=>{const t=typeof e;if(t!=="object"||!e)return[Ap,t];const n=yY.call(e).slice(8,-1);switch(n){case"Array":return[Nc,dl];case"Object":return[Nh,dl];case"Date":return[Yb,dl];case"RegExp":return[Wb,dl];case"Map":return[Jb,dl];case"Set":return[Xb,dl];case"DataView":return[Nc,n]}return n.includes("Array")?[Nc,n]:n.includes("Error")?[fR,n]:[Nh,n]},Hf=([e,t])=>e===Ap&&(t==="function"||t==="symbol"),xY=(e,t,n,r)=>{const i=(o,u)=>{const f=r.push(o)-1;return n.set(u,f),f},a=o=>{if(n.has(o))return n.get(o);let[u,f]=uc(o);switch(u){case Ap:{let h=o;switch(f){case"bigint":u=hR,h=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);h=null;break;case"undefined":return i([dR],o)}return i([u,h],o)}case Nc:{if(f){let y=o;return f==="DataView"?y=new Uint8Array(o.buffer):f==="ArrayBuffer"&&(y=new Uint8Array(o)),i([f,[...y]],o)}const h=[],m=i([u,h],o);for(const y of o)h.push(a(y));return m}case Nh:{if(f)switch(f){case"BigInt":return i([f,o.toString()],o);case"Boolean":case"Number":case"String":return i([f,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const h=[],m=i([u,h],o);for(const y of vY(o))(e||!Hf(uc(o[y])))&&h.push([a(y),a(o[y])]);return m}case Yb:return i([u,o.toISOString()],o);case Wb:{const{source:h,flags:m}=o;return i([u,{source:h,flags:m}],o)}case Jb:{const h=[],m=i([u,h],o);for(const[y,v]of o)(e||!(Hf(uc(y))||Hf(uc(v))))&&h.push([a(y),a(v)]);return m}case Xb:{const h=[],m=i([u,h],o);for(const y of o)(e||!Hf(uc(y)))&&h.push(a(y));return m}}const{message:d}=o;return i([u,{name:f,message:d}],o)};return a},_T=(e,{json:t,lossy:n}={})=>{const r=[];return xY(!(t||n),!!t,new Map,r)(e),r},Ah=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?wT(_T(e,t)):structuredClone(e):(e,t)=>wT(_T(e,t));function bY(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function wY(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function _Y(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||bY,r=e.options.footnoteBackLabel||wY,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let f=-1;for(;++f<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[f]);if(!d)continue;const h=e.all(d),m=String(d.identifier).toUpperCase(),y=Ql(m.toLowerCase());let v=0;const k=[],S=e.footnoteCounts.get(m);for(;S!==void 0&&++v<=S;){k.length>0&&k.push({type:"text",value:" "});let A=typeof n=="string"?n:n(f,v);typeof A=="string"&&(A={type:"text",value:A}),k.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,v),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const C=h[h.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const A=C.children[C.children.length-1];A&&A.type==="text"?A.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...k)}else h.push(...k);const T={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(h,!0)};e.patch(d,T),u.push(T)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Ah(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const pR=(function(e){if(e==null)return CY;if(typeof e=="function")return jp(e);if(typeof e=="object")return Array.isArray(e)?SY(e):kY(e);if(typeof e=="string")return EY(e);throw new Error("Expected function, string, or object as test")});function SY(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pR(e[n]);return jp(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function kY(e){const t=e;return jp(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function EY(e){return jp(t);function t(n){return n&&n.type===e}}function jp(e){return t;function t(n,r,i){return!!(TY(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function CY(){return!0}function TY(e){return e!==null&&typeof e=="object"&&"type"in e}const mR=[],NY=!0,ST=!1,AY="skip";function jY(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=pR(i),o=r?-1:1;u(e,void 0,[])();function u(f,d,h){const m=f&&typeof f=="object"?f:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(f.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=mR,k,S,C;if((!t||a(f,d,h[h.length-1]||void 0))&&(v=PY(n(f,h)),v[0]===ST))return v;if("children"in f&&f.children){const T=f;if(T.children&&v[0]!==AY)for(S=(r?T.children.length:-1)+o,C=h.concat(T);S>-1&&S<T.children.length;){const A=T.children[S];if(k=u(A,S,C)(),k[0]===ST)return k;S=typeof k[1]=="number"?k[1]:S+o}}return v}}}function PY(e){return Array.isArray(e)?e:typeof e=="number"?[NY,e]:e==null?mR:[e]}function gR(e,t,n,r){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=r),jY(e,a,u,i);function u(f,d){const h=d[d.length-1],m=h?h.children.indexOf(f):void 0;return o(f,m,h)}}const hx={}.hasOwnProperty,MY={};function OY(e,t){const n=t||MY,r=new Map,i=new Map,a=new Map,o={...mY,...n.handlers},u={all:d,applyData:IY,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:f,options:n,patch:RY,wrap:LY};return gR(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const m=h.type==="definition"?r:i,y=String(h.identifier).toUpperCase();m.has(y)||m.set(y,h)}}),u;function f(h,m){const y=h.type,v=u.handlers[y];if(hx.call(u.handlers,y)&&v)return v(u,h,m);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in h){const{children:S,...C}=h,T=Ah(C);return T.children=u.all(h),T}return Ah(h)}return(u.options.unknownHandler||DY)(u,h,m)}function d(h){const m=[];if("children"in h){const y=h.children;let v=-1;for(;++v<y.length;){const k=u.one(y[v],h);if(k){if(v&&y[v-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=kT(k.value)),!Array.isArray(k)&&k.type==="element")){const S=k.children[0];S&&S.type==="text"&&(S.value=kT(S.value))}Array.isArray(k)?m.push(...k):m.push(k)}}}return m}}function RY(e,t){e.position&&(t.position=y9(e))}function IY(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Ah(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function DY(e,t){const n=t.data||{},r="value"in t&&!(hx.call(n,"hProperties")||hx.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LY(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function kT(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function ET(e,t){const n=OY(e,t),r=n.one(e,void 0),i=_Y(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function UY(e,t){return e&&"run"in e?async function(n,r){const i=ET(n,{file:r,...t});await e.run(i,r)}:function(n,r){return ET(n,{file:r,...e||t})}}function CT(e){if(e)throw e}var K0,TT;function qY(){if(TT)return K0;TT=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},a=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var h=e.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!h&&!m)return!1;var y;for(y in d);return typeof y>"u"||e.call(d,y)},o=function(d,h){n&&h.name==="__proto__"?n(d,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):d[h.name]=h.newValue},u=function(d,h){if(h==="__proto__")if(e.call(d,h)){if(r)return r(d,h).value}else return;return d[h]};return K0=function f(){var d,h,m,y,v,k,S=arguments[0],C=1,T=arguments.length,A=!1;for(typeof S=="boolean"&&(A=S,S=arguments[1]||{},C=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});C<T;++C)if(d=arguments[C],d!=null)for(h in d)m=u(S,h),y=u(d,h),S!==y&&(A&&y&&(a(y)||(v=i(y)))?(v?(v=!1,k=m&&i(m)?m:[]):k=m&&a(m)?m:{},o(S,{name:h,newValue:f(A,k,y)})):typeof y<"u"&&o(S,{name:h,newValue:y}));return S},K0}var $Y=qY();const Y0=Ur($Y);function px(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function BY(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);u(null,...i);function u(f,...d){const h=e[++a];let m=-1;if(f){o(f);return}for(;++m<i.length;)(d[m]===null||d[m]===void 0)&&(d[m]=i[m]);i=d,h?zY(h,u)(...d):o(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function zY(e,t){let n;return r;function r(...o){const u=e.length>o.length;let f;u&&o.push(i);try{f=e.apply(this,o)}catch(d){const h=d;if(u&&n)throw h;return i(h)}u||(f&&f.then&&typeof f.then=="function"?f.then(a,i):f instanceof Error?i(f):a(f))}function i(o,...u){n||(n=!0,t(o,...u))}function a(o){i(null,o)}}const Ri={basename:FY,dirname:VY,extname:HY,join:GY,sep:"/"};function FY(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qc(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function VY(e){if(Qc(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function HY(e){Qc(e);let t=e.length,n=-1,r=0,i=-1,a=0,o;for(;t--;){const u=e.codePointAt(t);if(u===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),u===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function GY(...e){let t=-1,n;for(;++t<e.length;)Qc(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":KY(n)}function KY(e){Qc(e);const t=e.codePointAt(0)===47;let n=YY(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function YY(e,t){let n="",r=0,i=-1,a=0,o=-1,u,f;for(;++o<=e.length;){if(o<e.length)u=e.codePointAt(o);else{if(u===47)break;u=47}if(u===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,a=0}else u===46&&a>-1?a++:a=-1}return n}function Qc(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const WY={cwd:JY};function JY(){return"/"}function mx(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function XY(e){if(typeof e=="string")e=new URL(e);else if(!mx(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return QY(e)}function QY(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const W0=["history","path","basename","stem","extname","dirname"];class yR{constructor(t){let n;t?mx(t)?n={path:t}:typeof t=="string"||ZY(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":WY.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<W0.length;){const a=W0[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)W0.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ri.basename(this.path):void 0}set basename(t){X0(t,"basename"),J0(t,"basename"),this.path=Ri.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ri.dirname(this.path):void 0}set dirname(t){NT(this.basename,"dirname"),this.path=Ri.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ri.extname(this.path):void 0}set extname(t){if(J0(t,"extname"),NT(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ri.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){mx(t)&&(t=XY(t)),X0(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ri.basename(this.path,this.extname):void 0}set stem(t){X0(t,"stem"),J0(t,"stem"),this.path=Ri.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Jn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function J0(e,t){if(e&&e.includes(Ri.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ri.sep+"`")}function X0(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function NT(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ZY(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const eW=(function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),tW={}.hasOwnProperty;class Qb extends eW{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=BY()}copy(){const t=new Qb;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Y0(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(ey("data",this.frozen),this.namespace[t]=n,this):tW.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ey("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Gf(t),r=this.parser||this.Parser;return Q0("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Q0("process",this.parser||this.Parser),Z0("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const u=Gf(t),f=r.parse(u);r.run(f,u,function(h,m,y){if(h||!m||!y)return d(h);const v=m,k=r.stringify(v,y);iW(k)?y.value=k:y.result=k,d(h,y)});function d(h,m){h||!m?o(h):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),Q0("processSync",this.parser||this.Parser),Z0("processSync",this.compiler||this.Compiler),this.process(t,i),jT("processSync","process",n),r;function i(a,o){n=!0,CT(a),r=o}}run(t,n,r){AT(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,u){const f=Gf(n);i.run(t,f,d);function d(h,m,y){const v=m||t;h?u(h):o?o(v):r(void 0,v,y)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),jT("runSync","run",r),i;function a(o,u){CT(o),i=u,r=!0}}stringify(t,n){this.freeze();const r=Gf(n),i=this.compiler||this.Compiler;return Z0("stringify",i),AT(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(ey("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[h,...m]=d;f(h,m)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(i.settings=Y0(!0,i.settings,d.settings))}function u(d){let h=-1;if(d!=null)if(Array.isArray(d))for(;++h<d.length;){const m=d[h];a(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,h){let m=-1,y=-1;for(;++m<r.length;)if(r[m][0]===d){y=m;break}if(y===-1)r.push([d,...h]);else if(h.length>0){let[v,...k]=h;const S=r[y][1];px(S)&&px(v)&&(v=Y0(!0,S,v)),r[y]=[d,v,...k]}}}}const nW=new Qb().freeze();function Q0(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Z0(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ey(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function AT(e){if(!px(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function jT(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Gf(e){return rW(e)?e:new yR(e)}function rW(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function iW(e){return typeof e=="string"||aW(e)}function aW(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const sW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",PT=[],MT={allowDangerousHtml:!0},oW=/^(https?|ircs?|mailto|xmpp)$/i,lW=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Zb(e){const t=uW(e),n=cW(e);return dW(t.runSync(t.parse(n),n),e)}function uW(e){const t=e.rehypePlugins||PT,n=e.remarkPlugins||PT,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...MT}:MT;return nW().use(FK).use(n).use(UY,r).use(t)}function cW(e){const t=e.children||"",n=new yR;return typeof t=="string"&&(n.value=t),n}function dW(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,u=t.unwrapDisallowed,f=t.urlTransform||fW;for(const h of lW)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+sW+h.id,void 0);return gR(e,d),_9(e,{Fragment:c.Fragment,components:i,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function d(h,m,y){if(h.type==="raw"&&y&&typeof m=="number")return o?y.children.splice(m,1):y.children[m]={type:"text",value:h.value},m;if(h.type==="element"){let v;for(v in V0)if(Object.hasOwn(V0,v)&&Object.hasOwn(h.properties,v)){const k=h.properties[v],S=V0[v];(S===null||S.includes(h.tagName))&&(h.properties[v]=f(String(k||""),v,h))}}if(h.type==="element"){let v=n?!n.includes(h.tagName):a?a.includes(h.tagName):!1;if(!v&&r&&typeof m=="number"&&(v=!r(h,m,y)),v&&y&&typeof m=="number")return u&&h.children?y.children.splice(m,1,...h.children):y.children.splice(m,1),m}}}function fW(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||oW.test(e.slice(0,t))?e:""}const hW=({data:e})=>!e||!e.headers||!e.rows?null:c.jsx("div",{className:"overflow-auto max-h-60 mt-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-gray-600 sticky top-0 z-10",children:c.jsx("tr",{children:e.headers.map((t,n)=>c.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:t},n))})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:e.rows.map((t,n)=>c.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:t.map((r,i)=>c.jsx("td",{className:"px-3 py-2 whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:String(r)},i))},n))})]})}),pW=({onClose:e})=>{const[t,n]=_.useState([{sender:"ai",content:{displayText:"¡Hola! Soy el asistente virtual de GestionFarma. ¿En qué puedo ayudarte?",suggestions:["¿Qué medicamentos para la gripe tienes?","Muéstrame los precios de los analgésicos","¿Cuál es su horario de atención?"]}}]),[r,i]=_.useState(""),[a,o]=_.useState(!1),u=_.useRef(null),f=()=>{var v;(v=u.current)==null||v.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{f()},[t]);const d=_.useCallback(async v=>{if(v.trim()===""||a)return;const k={sender:"user",content:v};n(S=>[...S,k]),i(""),o(!0);try{const C={sender:"ai",content:await KH(v)};n(T=>[...T,C])}catch(S){console.error("Error getting public AI response:",S);const C={sender:"ai",content:{displayText:"Lo siento, ocurrió un error. Por favor, intenta de nuevo."}};n(T=>[...T,C])}finally{o(!1)}},[a]),h=()=>d(r),m=v=>d(v),y=v=>{v.key==="Enter"&&h()};return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end justify-end p-4",onClick:e,children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md h-[70vh] flex flex-col animate-slide-in-up",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-soft-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Gl,{className:"h-6 w-6 text-clinical-blue"}),c.jsx("h2",{className:"ml-2 text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Asistente Virtual"})]}),c.jsx("button",{onClick:e,className:"p-1 rounded-full text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700",children:"×"})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[t.map((v,k)=>{const S=v.sender==="user",C=v.content;if(S&&typeof C=="string")return c.jsx("div",{className:"flex justify-end",children:c.jsx("div",{className:"max-w-xs px-4 py-2 rounded-xl bg-clinical-blue text-white",children:C})},k);if(!S&&typeof C=="object"){const T=C;return c.jsx("div",{className:"flex justify-start",children:c.jsxs("div",{className:"max-w-xs px-4 py-3 rounded-xl bg-soft-gray-100 dark:bg-gray-700 w-full",children:[c.jsx("div",{className:"prose prose-sm max-w-none prose-zinc dark:prose-invert",children:c.jsx(Zb,{children:T.displayText})}),T.table&&c.jsx(hW,{data:T.table}),T.suggestions&&c.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:T.suggestions.map((A,N)=>c.jsx("button",{onClick:()=>m(A),className:"px-2.5 py-1 text-xs bg-clinical-blue/10 text-clinical-blue dark:bg-clinical-blue/20 rounded-full hover:bg-clinical-blue/20 dark:hover:bg-clinical-blue/30",children:A},N))})]})},k)}return null}),a&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"max-w-xs px-4 py-3 rounded-xl bg-soft-gray-100 dark:bg-gray-700",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse [animation-delay:0.2s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse [animation-delay:0.4s]"})]})})}),c.jsx("div",{ref:u})]}),c.jsx("div",{className:"p-4 border-t border-soft-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:r,onChange:v=>i(v.target.value),onKeyPress:y,placeholder:"Escribe tu consulta...",className:"w-full pl-4 pr-12 py-3 text-gray-700 bg-soft-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-clinical-blue dark:bg-gray-700 dark:text-gray-200",disabled:a}),c.jsx("button",{onClick:h,disabled:a||r.trim()==="",className:"absolute inset-y-0 right-0 flex items-center justify-center w-12 h-full text-clinical-blue disabled:text-gray-400",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),c.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]}),c.jsx("style",{children:`
            @keyframes slide-in-up {
                0% { transform: translateY(100%); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            .animate-slide-in-up { animation: slide-in-up 0.3s ease-out; }
        `})]})},mW={whatsapp:Pb,facebook:rO,instagram:iO,twitter:aO,tiktok:sO,email:oO},fl={hero:{title:"Tu salud, nuestra prioridad.",subtitle:"Encuentra los medicamentos y productos de cuidado personal que necesitas.",mediaUrl:"",mediaType:"image",overlayEnabled:!0},logo:{base64:""},socials:{whatsapp:{enabled:!1,url:""},facebook:{enabled:!1,url:""},instagram:{enabled:!1,url:""},twitter:{enabled:!1,url:""},tiktok:{enabled:!1,url:""},email:{enabled:!1,url:""}},productSections:[],registration:{enabled:!1}},gW=e=>{if(e&&(e.startsWith("data:image")||e.startsWith("http")))return e},yW=({onClose:e})=>{const[t,n]=_.useState(""),[r,i]=_.useState(""),[a,o]=_.useState(""),[u,f]=_.useState(!1),[d,h]=_.useState(null),[m,y]=_.useState(!1),v=async k=>{k.preventDefault(),f(!0),h(null),y(!1);const{error:S}=await te.from("clientes").insert({nombres:t,dni:r,celular:a,puntos:0});S?h(`Error en el registro: ${S.message}`):(y(!0),n(""),i(""),o("")),f(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-6",onClick:k=>k.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 dark:text-gray-100",children:"Crea tu Cuenta"}),m?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-lg text-green-600 dark:text-green-400",children:"¡Registro exitoso!"}),c.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Gracias por unirte a GestionFarma."}),c.jsx("button",{onClick:e,className:"mt-6 px-5 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Cerrar"})]}):c.jsxs("form",{onSubmit:v,className:"mt-6 space-y-4",children:[d&&c.jsx("p",{className:"text-sm text-red-600 bg-red-100 dark:bg-red-900/50 p-3 rounded-md",children:d}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre Completo"}),c.jsx("input",{type:"text",value:t,onChange:k=>n(k.target.value),required:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"DNI"}),c.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Celular"}),c.jsx("input",{type:"tel",value:a,onChange:k=>o(k.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:u,className:"px-5 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Registrando...":"Registrarse"})]})]})]})})},vW=()=>{const[e,t]=_.useState(fl),[n,r]=_.useState(!0),[i,a]=_.useState(!1),[o,u]=_.useState(!1),{theme:f,toggleTheme:d}=Sp();_.useEffect(()=>{(async()=>{r(!0);const{data:k,error:S}=await te.from("empresas").select("id").order("id",{ascending:!0}).limit(1).single();let C=null;if(k&&(C=`landing_page_settings_empresa_${k.id}`),!C){console.warn("No se encontraron empresas. Mostrando contenido de respaldo.");const{data:N}=await te.from("productos").select("*").limit(4);t(O=>({...O,productSections:[{id:"default",title:"Productos Destacados",products:N||[]}]})),r(!1);return}const{data:T,error:A}=await te.from("configuraciones").select("value").eq("key",C).single();if(A&&A.code!=="PGRST116")console.error(`Error fetching config for key ${C}:`,A);else if(T&&T.value)try{const N=JSON.parse(T.value),O={...fl,...N,hero:{...fl.hero,...N.hero},logo:{...fl.logo,...N.logo},socials:{...fl.socials,...N.socials},registration:{...fl.registration,...N.registration}},M=(N.productSections||[]).flatMap(P=>P.productIds||[]);if(M.length>0){const{data:P,error:D}=await te.from("productos").select("*").in("id",M);if(D)throw D;const Y=new Map(P==null?void 0:P.map(q=>[q.id,q]));O.productSections=(N.productSections||[]).map(q=>({id:q.id,title:q.title,products:(q.productIds||[]).map(W=>Y.get(W)).filter(Boolean)}))}t(O)}catch(N){console.error("Error parsing landing config, using defaults.",N);const{data:O}=await te.from("productos").select("*").limit(4);t(M=>({...M,productSections:[{id:"default",title:"Productos Destacados",products:O||[]}]}))}else{console.warn(`No config found for key ${C}. Displaying default content.`);const{data:N}=await te.from("productos").select("*").limit(4);t(O=>({...O,productSections:[{id:"default",title:"Productos Destacados",products:N||[]}]}))}r(!1)})()},[]);const h=v=>{if(!v)return null;const k=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,S=v.match(k);return S&&S[2].length===11?S[2]:null},m=()=>{if(!e.hero.mediaUrl)return null;if(e.hero.mediaType==="video"){const v=h(e.hero.mediaUrl);return v?c.jsx("iframe",{className:"hero-background pointer-events-none",src:`https://www.youtube.com/embed/${v}?autoplay=1&mute=1&loop=1&playlist=${v}&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1`,frameBorder:"0",allow:"autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube Background Video"}):c.jsx("video",{src:e.hero.mediaUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"hero-background"})}return c.jsx("div",{className:"hero-background bg-cover bg-center",style:{backgroundImage:`url(${e.hero.mediaUrl})`}})},y=Object.entries(e.socials).filter(([,v])=>v.enabled&&v.url);return c.jsxs("div",{className:"bg-soft-gray-100 dark:bg-gray-900 min-h-screen font-sans",children:[c.jsx("header",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm sticky top-0 z-30 shadow-sm",children:c.jsxs("nav",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center",children:[e.logo.base64?c.jsx("img",{src:e.logo.base64,alt:"Logo",className:"h-8 w-auto"}):c.jsx(Nb,{className:"h-8 w-8 text-clinical-blue"}),c.jsxs("h1",{className:"ml-2 text-2xl font-bold text-gray-800 dark:text-gray-100",children:["Gestion",c.jsx("span",{className:"text-clinical-blue",children:"Farma"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[c.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-soft-gray-100 text-gray-500 transition-colors dark:hover:bg-gray-700 dark:text-gray-400","aria-label":"Toggle theme",children:f==="dark"?c.jsx(ZM,{className:"w-6 h-6"}):c.jsx(eO,{className:"w-6 h-6"})}),e.registration.enabled&&c.jsx("button",{onClick:()=>u(!0),className:"px-5 py-2 bg-transparent text-clinical-blue font-semibold rounded-lg border-2 border-clinical-blue hover:bg-clinical-blue/10 transition-colors",children:"Registrarse"}),c.jsx(xp,{to:"/login",className:"px-5 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Iniciar Sesión"})]})]})}),c.jsxs("main",{children:[c.jsxs("section",{className:"relative w-full h-[60vh] bg-gray-300 dark:bg-gray-700 flex items-center justify-center text-center p-4 overflow-hidden group",children:[m(),e.hero.overlayEnabled&&c.jsx("div",{className:"absolute inset-0 bg-black/50 group-hover:bg-black/60 transition-colors duration-500 ease-in-out"}),c.jsxs("div",{className:"relative text-white",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:e.hero.title}),c.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-gray-200",children:e.hero.subtitle})]})]}),c.jsx("div",{className:"container mx-auto px-6 py-12",children:n?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 animate-pulse",children:Array.from({length:4}).map((v,k)=>c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md h-64",children:[c.jsx("div",{className:"w-full h-3/5 bg-gray-300 dark:bg-gray-700 rounded-t-lg"}),c.jsxs("div",{className:"p-4 space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"})]})]},k))}):e.productSections.length>0?e.productSections.map(v=>c.jsxs("section",{className:"mb-12",children:[c.jsx("h3",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-6",children:v.title}),v.products.length>0?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:v.products.map(k=>{var S;return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group transform hover:-translate-y-1 transition-transform duration-300",children:[c.jsx("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:c.jsx("img",{src:gW(k.imagen)||"https://placehold.co/300x200",alt:k.nombre,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:k.nombre}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:k.laboratorio||"Genérico"}),c.jsxs("p",{className:"mt-2 text-lg font-bold text-clinical-blue",children:["S/ ",((S=k.unid_pv)==null?void 0:S.toFixed(2))||"N/A"]})]})]},k.id)})}):c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No hay productos destacados en esta sección."})]},v.id)):c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No hay secciones para mostrar. Configúralas en el panel de administración."})})]}),c.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t dark:border-gray-700 mt-12",children:c.jsxs("div",{className:"container mx-auto px-6 py-8 flex flex-col md:flex-row justify-between items-center",children:[c.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["© ",new Date().getFullYear()," GestionFarma. Todos los derechos reservados."]}),y.length>0&&c.jsx("div",{className:"flex items-center space-x-4 mt-4 md:mt-0",children:y.map(([v,k])=>{const S=k,C=mW[v],T=v==="email"?`mailto:${S.url}`:S.url.startsWith("http")?S.url:`https://${S.url}`;return c.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-clinical-blue dark:text-gray-400 dark:hover:text-clinical-blue transition-colors",children:c.jsx(C,{className:"w-6 h-6"})},v)})})]})}),c.jsx("button",{onClick:()=>a(!0),className:"fixed bottom-6 right-6 bg-clinical-blue text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-clinical-blue transition-transform transform hover:scale-110","aria-label":"Abrir chat de ayuda",children:c.jsx(UB,{className:"w-7 h-7"})}),i&&c.jsx(pW,{onClose:()=>a(!1)}),o&&c.jsx(yW,{onClose:()=>u(!1)}),c.jsx("style",{children:`
                .hero-background {
                    position: absolute;
                    inset: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    animation: kenburns-pan 20s ease-in-out infinite alternate;
                }
                .group:hover .hero-background {
                    animation-play-state: paused;
                    transform: scale(1.05) rotate(1deg);
                    filter: brightness(1.1);
                    transition: transform 0.5s ease-out, filter 0.5s ease-out;
                }
                @keyframes kenburns-pan {
                  0% {
                    transform: scale(1) rotate(0deg);
                  }
                  100% {
                    transform: scale(1.1) rotate(-1deg);
                  }
                }
            `})]})},xW=()=>{const[e,t]=_.useState(""),[n,r]=_.useState(""),[i,a]=_.useState(!1),[o,u]=_.useState(!1),[f,d]=_.useState(null),h=yp();_.useEffect(()=>{const y=localStorage.getItem("rememberedEmail"),v=localStorage.getItem("rememberedPass");y&&v&&(t(y),r(v),a(!0))},[]);const m=async y=>{y.preventDefault(),u(!0),d(null);try{const{error:v}=await te.auth.signInWithPassword({email:e,password:n});if(v)throw v;const{data:k,error:S}=await te.from("usuarios").select("empresa_id, sede_id").eq("email",e).single();if(S||!k)throw await te.auth.signOut(),new Error("No se pudo verificar tu perfil de usuario. Asegúrate de estar registrado en la tabla de usuarios.");if(!k.empresa_id||!k.sede_id){await te.auth.signOut(),d("No estás asignado a una empresa o sede. Contacta a un administrador para obtener acceso."),u(!1);return}i?(localStorage.setItem("rememberedEmail",e),localStorage.setItem("rememberedPass",n)):(localStorage.removeItem("rememberedEmail"),localStorage.removeItem("rememberedPass")),h("/app/dashboard")}catch(v){console.error("Login error:",v),v.message.includes("No se pudo verificar")||v.message.includes("asignado")?d(v.message):d("Credenciales incorrectas. Por favor, verifica tu email y contraseña.")}finally{u(!1)}};return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-soft-gray-100 dark:bg-gray-900 font-sans",children:c.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg dark:bg-gray-800",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Nb,{className:"h-12 w-12 text-clinical-blue"}),c.jsxs("h1",{className:"mt-2 text-3xl font-bold text-gray-800 dark:text-gray-100",children:["Gestion",c.jsx("span",{className:"text-clinical-blue",children:"Farma"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Accede a tu panel de administración"})]}),f&&c.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-sm dark:bg-red-900/40 dark:text-red-200",children:f}),c.jsxs("form",{className:"space-y-6",onSubmit:m,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email o Usuario"}),c.jsx("input",{id:"email",name:"email",type:"text",autoComplete:"email",required:!0,value:e,onChange:y=>t(y.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contraseña"}),c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:y=>r(y.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-clinical-blue focus:ring-blue-500 border-gray-300 rounded",checked:i,onChange:y=>a(y.target.checked)}),c.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Recordar sesión"})]})}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-clinical-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 transition-colors",children:o?"Ingresando...":"Iniciar Sesión"})})]}),c.jsx("div",{className:"text-center text-sm",children:c.jsx(xp,{to:"/",className:"font-medium text-clinical-blue hover:underline",children:"← Volver a la página principal"})})]})})};function vR(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=vR(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function kt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=vR(e))&&(r&&(r+=" "),r+=t);return r}var bW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ew(e){if(typeof e!="string")return!1;var t=bW;return t.includes(e)}var wW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function xR(e){if(typeof e!="string")return!1;var t=wW;return t.includes(e)}function bR(e){return typeof e=="string"&&e.startsWith("data-")}function Si(e){var t=Object.entries(e).filter(n=>{var[r]=n;return xR(r)||bR(r)});return Object.fromEntries(t)}function Ic(e){if(e==null)return null;if(_.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Si(t)}return typeof e=="object"&&!Array.isArray(e)?Si(e):null}function ai(e){var t=Object.entries(e).filter(n=>{var[r]=n;return xR(r)||bR(r)||ew(r)});return Object.fromEntries(t)}var _W=["children","width","height","viewBox","className","style","title","desc"];function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(null,arguments)}function SW(e,t){if(e==null)return{};var n,r,i=kW(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tw=_.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:u,title:f,desc:d}=e,h=SW(e,_W),m=a||{width:r,height:i,x:0,y:0},y=kt("recharts-surface",o);return _.createElement("svg",gx({},ai(h),{className:y,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),_.createElement("title",null,f),_.createElement("desc",null,d),n)}),EW=["children","className"];function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yx.apply(null,arguments)}function CW(e,t){if(e==null)return{};var n,r,i=TW(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gr=_.forwardRef((e,t)=>{var{children:n,className:r}=e,i=CW(e,EW),a=kt("recharts-layer",r);return _.createElement("g",yx({className:a},ai(i),{ref:t}),n)}),wR=_.createContext(null),NW=()=>_.useContext(wR);function Dt(e){return function(){return e}}const _R=Math.cos,jh=Math.sin,Ti=Math.sqrt,Ph=Math.PI,Pp=2*Ph,vx=Math.PI,xx=2*vx,Hs=1e-6,AW=xx-Hs;function SR(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function jW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return SR;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class PW{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?SR:jW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,f=r-t,d=i-n,h=o-t,m=u-n,y=h*h+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Hs)if(!(Math.abs(m*f-d*h)>Hs)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let v=r-o,k=i-u,S=f*f+d*d,C=v*v+k*k,T=Math.sqrt(S),A=Math.sqrt(y),N=a*Math.tan((vx-Math.acos((S+y-C)/(2*T*A)))/2),O=N/A,M=N/T;Math.abs(O-1)>Hs&&this._append`L${t+O*h},${n+O*m}`,this._append`A${a},${a},0,0,${+(m*v>h*k)},${this._x1=t+M*f},${this._y1=n+M*d}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),d=t+u,h=n+f,m=1^o,y=o?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Hs||Math.abs(this._y1-h)>Hs)&&this._append`L${d},${h}`,r&&(y<0&&(y=y%xx+xx),y>AW?this._append`A${r},${r},0,1,${m},${t-u},${n-f}A${r},${r},0,1,${m},${this._x1=d},${this._y1=h}`:y>Hs&&this._append`A${r},${r},0,${+(y>=vx)},${m},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function nw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new PW(t)}function rw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kR(e){this._context=e}kR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Mp(e){return new kR(e)}function ER(e){return e[0]}function CR(e){return e[1]}function TR(e,t){var n=Dt(!0),r=null,i=Mp,a=null,o=nw(u);e=typeof e=="function"?e:e===void 0?ER:Dt(e),t=typeof t=="function"?t:t===void 0?CR:Dt(t);function u(f){var d,h=(f=rw(f)).length,m,y=!1,v;for(r==null&&(a=i(v=o())),d=0;d<=h;++d)!(d<h&&n(m=f[d],d,f))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+e(m,d,f),+t(m,d,f));if(v)return a=null,v+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Dt(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Dt(+f),u):t},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Dt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(a=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=a=null:a=i(r=f),u):r},u}function Kf(e,t,n){var r=null,i=Dt(!0),a=null,o=Mp,u=null,f=nw(d);e=typeof e=="function"?e:e===void 0?ER:Dt(+e),t=typeof t=="function"?t:Dt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?CR:Dt(+n);function d(m){var y,v,k,S=(m=rw(m)).length,C,T=!1,A,N=new Array(S),O=new Array(S);for(a==null&&(u=o(A=f())),y=0;y<=S;++y){if(!(y<S&&i(C=m[y],y,m))===T)if(T=!T)v=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),k=y-1;k>=v;--k)u.point(N[k],O[k]);u.lineEnd(),u.areaEnd()}T&&(N[y]=+e(C,y,m),O[y]=+t(C,y,m),u.point(r?+r(C,y,m):N[y],n?+n(C,y,m):O[y]))}if(A)return u=null,A+""||null}function h(){return TR().defined(i).curve(o).context(a)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Dt(+m),r=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Dt(+m),d):e},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Dt(+m),d):r},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:Dt(+m),n=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Dt(+m),d):t},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Dt(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Dt(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,a!=null&&(u=o(a)),d):o},d.context=function(m){return arguments.length?(m==null?a=u=null:u=o(a=m),d):a},d}class NR{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function MW(e){return new NR(e,!0)}function OW(e){return new NR(e,!1)}const iw={draw(e,t){const n=Ti(t/Ph);e.moveTo(n,0),e.arc(0,0,n,0,Pp)}},RW={draw(e,t){const n=Ti(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},AR=Ti(1/3),IW=AR*2,DW={draw(e,t){const n=Ti(t/IW),r=n*AR;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},LW={draw(e,t){const n=Ti(t),r=-n/2;e.rect(r,r,n,n)}},UW=.8908130915292852,jR=jh(Ph/10)/jh(7*Ph/10),qW=jh(Pp/10)*jR,$W=-_R(Pp/10)*jR,BW={draw(e,t){const n=Ti(t*UW),r=qW*n,i=$W*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Pp*a/5,u=_R(o),f=jh(o);e.lineTo(f*n,-u*n),e.lineTo(u*r-f*i,f*r+u*i)}e.closePath()}},ty=Ti(3),zW={draw(e,t){const n=-Ti(t/(ty*3));e.moveTo(0,n*2),e.lineTo(-ty*n,-n),e.lineTo(ty*n,-n),e.closePath()}},Jr=-.5,Xr=Ti(3)/2,bx=1/Ti(12),FW=(bx/2+1)*3,VW={draw(e,t){const n=Ti(t/FW),r=n/2,i=n*bx,a=r,o=n*bx+n,u=-a,f=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,f),e.lineTo(Jr*r-Xr*i,Xr*r+Jr*i),e.lineTo(Jr*a-Xr*o,Xr*a+Jr*o),e.lineTo(Jr*u-Xr*f,Xr*u+Jr*f),e.lineTo(Jr*r+Xr*i,Jr*i-Xr*r),e.lineTo(Jr*a+Xr*o,Jr*o-Xr*a),e.lineTo(Jr*u+Xr*f,Jr*f-Xr*u),e.closePath()}};function HW(e,t){let n=null,r=nw(i);e=typeof e=="function"?e:Dt(e||iw),t=typeof t=="function"?t:Dt(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Mh(){}function Oh(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function PR(e){this._context=e}PR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GW(e){return new PR(e)}function MR(e){this._context=e}MR.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Oh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KW(e){return new MR(e)}function OR(e){this._context=e}OR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Oh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YW(e){return new OR(e)}function RR(e){this._context=e}RR.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function WW(e){return new RR(e)}function OT(e){return e<0?-1:1}function RT(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(OT(a)+OT(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function IT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ny(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function Rh(e){this._context=e}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ny(this,this._t0,IT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ny(this,IT(this,n=RT(this,e,t)),n);break;default:ny(this,this._t0,n=RT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function IR(e){this._context=new DR(e)}(IR.prototype=Object.create(Rh.prototype)).point=function(e,t){Rh.prototype.point.call(this,t,e)};function DR(e){this._context=e}DR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function JW(e){return new Rh(e)}function XW(e){return new IR(e)}function LR(e){this._context=e}LR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=DT(e),i=DT(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function DT(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function QW(e){return new LR(e)}function Op(e,t){this._context=e,this._t=t}Op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ZW(e){return new Op(e,.5)}function eJ(e){return new Op(e,0)}function tJ(e){return new Op(e,1)}function jl(e,t){if((o=e.length)>1)for(var n=1,r,i,a=e[t[0]],o,u=a.length;n<o;++n)for(i=a,a=e[t[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function wx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function nJ(e,t){return e[t]}function rJ(e){const t=[];return t.key=e,t}function iJ(){var e=Dt([]),t=wx,n=jl,r=nJ;function i(a){var o=Array.from(e.apply(this,arguments),rJ),u,f=o.length,d=-1,h;for(const m of a)for(u=0,++d;u<f;++u)(o[u][d]=[0,+r(m,o[u].key,d,a)]).data=m;for(u=0,h=rw(t(o));u<f;++u)o[h[u]].index=u;return n(o,h),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Dt(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?wx:typeof a=="function"?a:Dt(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??jl,i):n},i}function aJ(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}jl(e,t)}}function sJ(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var o=0,u=0;o<i;++o)u+=e[o][n][1]||0;r[n][1]+=r[n][0]=-u/2}jl(e,t)}}function oJ(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var u=0,f=0,d=0;u<o;++u){for(var h=e[t[u]],m=h[r][1]||0,y=h[r-1][1]||0,v=(m-y)/2,k=0;k<u;++k){var S=e[t[k]],C=S[r][1]||0,T=S[r-1][1]||0;v+=C-T}f+=m,d+=v*m}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,jl(e,t)}}var ry={},iy={},LT;function lJ(){return LT||(LT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(iy)),iy}var ay={},UT;function UR(){return UT||(UT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(ay)),ay}var sy={},qT;function aw(){return qT||(qT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(sy)),sy}var oy={},ly={},$T;function uJ(){return $T||($T=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(ly)),ly}var BT;function sw(){return BT||(BT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uJ(),n=aw();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],o=i.length;if(o===0)return a;let u=0,f="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),u++);u<o;){const m=i[u];d?m==="\\"&&u+1<o?(u++,f+=i[u]):m===d?d="":f+=m:h?m==='"'||m==="'"?d=m:m==="]"?(h=!1,a.push(f),f=""):f+=m:m==="["?(h=!0,f&&(a.push(f),f="")):m==="."?f&&(a.push(f),f=""):f+=m,u++}return f&&a.push(f),a}e.toPath=r})(oy)),oy}var zT;function ow(){return zT||(zT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lJ(),n=UR(),r=aw(),i=sw();function a(u,f,d){if(u==null)return d;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return d;const h=u[f];return h===void 0?n.isDeepKey(f)?a(u,i.toPath(f),d):d:h}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const h=u[f];return h===void 0?d:h}default:{if(Array.isArray(f))return o(u,f,d);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return d;const h=u[f];return h===void 0?d:h}}}function o(u,f,d){if(f.length===0)return d;let h=u;for(let m=0;m<f.length;m++){if(h==null||t.isUnsafeProperty(f[m]))return d;h=h[f[m]]}return h===void 0?d:h}e.get=a})(ry)),ry}var uy,FT;function cJ(){return FT||(FT=1,uy=ow().get),uy}var dJ=cJ();const so=Ur(dJ);var Nn=e=>e===0?0:e>0?1:-1,si=e=>typeof e=="number"&&e!=+e,va=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Le=e=>(typeof e=="number"||e instanceof Number)&&!si(e),qi=e=>Le(e)||typeof e=="string",fJ=0,Dc=e=>{var t=++fJ;return"".concat(e||"").concat(t)},Yn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Le(t)&&typeof t!="string")return r;var a;if(va(t)){if(n==null)return r;var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return si(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},qR=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function $n(e,t,n){return Le(e)&&Le(t)?e+n*(t-e):t}function hJ(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):so(r,t))===n)}var An=e=>e===null||typeof e>"u",Zc=e=>An(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),pJ=["type","size","sizeType"];function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(null,arguments)}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(r){mJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mJ(e,t,n){return(t=gJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gJ(e){var t=yJ(e,"string");return typeof t=="symbol"?t:t+""}function yJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vJ(e,t){if(e==null)return{};var n,r,i=xJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $R={symbolCircle:iw,symbolCross:RW,symbolDiamond:DW,symbolSquare:LW,symbolStar:BW,symbolTriangle:zW,symbolWye:VW},bJ=Math.PI/180,wJ=e=>{var t="symbol".concat(Zc(e));return $R[t]||iw},_J=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*bJ;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},SJ=(e,t)=>{$R["symbol".concat(Zc(e))]=t},lw=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=vJ(e,pJ),a=HT(HT({},i),{},{type:t,size:n,sizeType:r}),o="circle";typeof t=="string"&&(o=t);var u=()=>{var y=wJ(o),v=HW().type(y).size(_J(n,r,o)),k=v();if(k!==null)return k},{className:f,cx:d,cy:h}=a,m=ai(a);return d===+d&&h===+h&&n===+n?_.createElement("path",_x({},m,{className:kt("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(h,")"),d:u()})):null};lw.registerSymbol=SJ;var kJ=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{ew(i)&&(r[i]=(a=>n[i](n,a)))}),r},EJ=(e,t,n)=>r=>(e(t,n,r),null),ed=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];ew(i)&&typeof a=="function"&&(r||(r={}),r[i]=EJ(a,t,n))}),r};function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sx.apply(null,arguments)}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(n),!0).forEach(function(r){uw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uw(e,t,n){return(t=TJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TJ(e){var t=NJ(e,"string");return typeof t=="symbol"?t:t+""}function NJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qr=32;class cw extends _.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Qr/2,a=Qr/6,o=Qr/3,u=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Qr,y2:i,className:"recharts-legend-icon"});if(f==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Qr,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return _.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Qr/8,"h").concat(Qr,"v").concat(Qr*3/4,"h").concat(-Qr,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var d=CJ({},t);return delete d.legendIcon,_.cloneElement(t.legendIcon,d)}return _.createElement(lw,{fill:u,cx:i,cy:i,size:Qr,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:o}=this.props,u={x:0,y:0,width:Qr,height:Qr},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,m)=>{var y=h.formatter||i,v=kt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:h.inactive});if(h.type==="none")return null;var k=h.inactive?a:h.color,S=y?y(h.value,h,m):h.value;return _.createElement("li",Sx({className:v,style:f,key:"legend-item-".concat(m)},ed(this.props,h,m)),_.createElement(tw,{width:n,height:n,viewBox:u,style:d,"aria-label":"".concat(S," legend icon")},this.renderIcon(h,o)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},S))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}uw(cw,"displayName","Legend");uw(cw,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var cy={},dy={},KT;function AJ(){return KT||(KT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],u=r(o);i.has(u)||i.set(u,o)}return Array.from(i.values())}e.uniqBy=t})(dy)),dy}var fy={},YT;function BR(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(fy)),fy}var hy={},py={},my={},WT;function jJ(){return WT||(WT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(my)),my}var JT;function dw(){return JT||(JT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jJ();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(py)),py}var gy={},XT;function PJ(){return XT||(XT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(gy)),gy}var QT;function MJ(){return QT||(QT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dw(),n=PJ();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(hy)),hy}var yy={},vy={},ZT;function OJ(){return ZT||(ZT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow();function n(r){return function(i){return t.get(i,r)}}e.property=n})(vy)),vy}var xy={},by={},wy={},_y={},eN;function zR(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(_y)),_y}var Sy={},tN;function FR(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Sy)),Sy}var ky={},nN;function VR(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(ky)),ky}var rN;function RJ(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw(),n=zR(),r=FR(),i=VR();function a(m,y,v){return typeof v!="function"?t.isMatch(m,y):o(m,y,function k(S,C,T,A,N,O){const M=v(S,C,T,A,N,O);return M!==void 0?!!M:o(S,C,k,O)},new Map)}function o(m,y,v,k){if(y===m)return!0;switch(typeof y){case"object":return u(m,y,v,k);case"function":return Object.keys(y).length>0?o(m,{...y},v,k):i.eq(m,y);default:return n.isObject(m)?typeof y=="string"?y==="":!0:i.eq(m,y)}}function u(m,y,v,k){if(y==null)return!0;if(Array.isArray(y))return d(m,y,v,k);if(y instanceof Map)return f(m,y,v,k);if(y instanceof Set)return h(m,y,v,k);const S=Object.keys(y);if(m==null)return S.length===0;if(S.length===0)return!0;if(k&&k.has(y))return k.get(y)===m;k&&k.set(y,m);try{for(let C=0;C<S.length;C++){const T=S[C];if(!r.isPrimitive(m)&&!(T in m)||y[T]===void 0&&m[T]!==void 0||y[T]===null&&m[T]!==null||!v(m[T],y[T],T,m,y,k))return!1}return!0}finally{k&&k.delete(y)}}function f(m,y,v,k){if(y.size===0)return!0;if(!(m instanceof Map))return!1;for(const[S,C]of y.entries()){const T=m.get(S);if(v(T,C,S,m,y,k)===!1)return!1}return!0}function d(m,y,v,k){if(y.length===0)return!0;if(!Array.isArray(m))return!1;const S=new Set;for(let C=0;C<y.length;C++){const T=y[C];let A=!1;for(let N=0;N<m.length;N++){if(S.has(N))continue;const O=m[N];let M=!1;if(v(O,T,C,m,y,k)&&(M=!0),M){S.add(N),A=!0;break}}if(!A)return!1}return!0}function h(m,y,v,k){return y.size===0?!0:m instanceof Set?d([...m],[...y],v,k):!1}e.isMatchWith=a,e.isSetMatch=h})(wy)),wy}var iN;function fw(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RJ();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(by)),by}var Ey={},Cy={},Ty={},aN;function IJ(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Ty)),Ty}var Ny={},sN;function HR(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Ny)),Ny}var Ay={},oN;function GR(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",u="[object Date]",f="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",y="[object ArrayBuffer]",v="[object Object]",k="[object Error]",S="[object DataView]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",M="[object Int8Array]",P="[object Int16Array]",D="[object Int32Array]",Y="[object BigInt64Array]",q="[object Float32Array]",W="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=Y,e.bigUint64ArrayTag=O,e.booleanTag=i,e.dataViewTag=S,e.dateTag=u,e.errorTag=k,e.float32ArrayTag=q,e.float64ArrayTag=W,e.functionTag=m,e.int16ArrayTag=P,e.int32ArrayTag=D,e.int8ArrayTag=M,e.mapTag=f,e.numberTag=r,e.objectTag=v,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=A,e.uint32ArrayTag=N,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=T})(Ay)),Ay}var jy={},lN;function DJ(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(jy)),jy}var uN;function KR(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IJ(),n=HR(),r=GR(),i=FR(),a=DJ();function o(h,m){return u(h,void 0,h,new Map,m)}function u(h,m,y,v=new Map,k=void 0){const S=k==null?void 0:k(h,m,y,v);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(v.has(h))return v.get(h);if(Array.isArray(h)){const C=new Array(h.length);v.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,v,k);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;v.set(h,C);for(const[T,A]of h)C.set(T,u(A,T,y,v,k));return C}if(h instanceof Set){const C=new Set;v.set(h,C);for(const T of h)C.add(u(T,void 0,y,v,k));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);v.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,v,k);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return v.set(h,C),f(C,h,y,v,k),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return v.set(h,C),f(C,h,y,v,k),C}if(typeof Blob<"u"&&h instanceof Blob){const C=new Blob([h],{type:h.type});return v.set(h,C),f(C,h,y,v,k),C}if(h instanceof Error){const C=new h.constructor;return v.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,f(C,h,y,v,k),C}if(h instanceof Boolean){const C=new Boolean(h.valueOf());return v.set(h,C),f(C,h,y,v,k),C}if(h instanceof Number){const C=new Number(h.valueOf());return v.set(h,C),f(C,h,y,v,k),C}if(h instanceof String){const C=new String(h.valueOf());return v.set(h,C),f(C,h,y,v,k),C}if(typeof h=="object"&&d(h)){const C=Object.create(Object.getPrototypeOf(h));return v.set(h,C),f(C,h,y,v,k),C}return h}function f(h,m,y=h,v,k){const S=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<S.length;C++){const T=S[C],A=Object.getOwnPropertyDescriptor(h,T);(A==null||A.writable)&&(h[T]=u(m[T],T,y,v,k))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=u,e.copyProperties=f})(Cy)),Cy}var cN;function LJ(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KR();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Ey)),Ey}var dN;function UJ(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw(),n=LJ();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(xy)),xy}var Py={},My={},Oy={},fN;function qJ(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KR(),n=GR();function r(i,a){return t.cloneDeepWith(i,(o,u,f,d)=>{const h=a==null?void 0:a(o,u,f,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Oy)),Oy}var hN;function $J(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qJ();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(My)),My}var Ry={},Iy={},pN;function YR(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Iy)),Iy}var Dy={},mN;function BJ(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HR();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Dy)),Dy}var gN;function zJ(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UR(),n=YR(),r=BJ(),i=sw();function a(o,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&t.isDeepKey(u)&&(o==null?void 0:o[u])==null?f=i.toPath(u):f=[u],f.length===0)return!1;let d=o;for(let h=0;h<f.length;h++){const m=f[h];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}e.has=a})(Ry)),Ry}var yN;function FJ(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw(),n=aw(),r=$J(),i=ow(),a=zJ();function o(u,f){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(d){const h=i.get(d,u);return h===void 0?a.has(d,u):f===void 0?h===void 0:t.isMatch(h,f)}}e.matchesProperty=o})(Py)),Py}var vN;function VJ(){return vN||(vN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BR(),n=OJ(),r=UJ(),i=FJ();function a(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=a})(yy)),yy}var xN;function HJ(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AJ(),n=BR(),r=MJ(),i=VJ();function a(o,u=n.identity){return r.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(u)):[]}e.uniqBy=a})(cy)),cy}var Ly,bN;function GJ(){return bN||(bN=1,Ly=HJ().uniqBy),Ly}var KJ=GJ();const wN=Ur(KJ);function WR(e,t,n){return t===!0?wN(e,n):typeof t=="function"?wN(e,t):e}var Uy={exports:{}},qy={},$y={exports:{}},By={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function YJ(){if(_N)return By;_N=1;var e=$l();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function u(m,y){var v=y(),k=r({inst:{value:v,getSnapshot:y}}),S=k[0].inst,C=k[1];return a(function(){S.value=v,S.getSnapshot=y,f(S)&&C({inst:S})},[m,v,y]),i(function(){return f(S)&&C({inst:S}),m(function(){f(S)&&C({inst:S})})},[m]),o(v),v}function f(m){var y=m.getSnapshot;m=m.value;try{var v=y();return!n(m,v)}catch{return!0}}function d(m,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return By.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,By}var SN;function WJ(){return SN||(SN=1,$y.exports=YJ()),$y.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kN;function JJ(){if(kN)return qy;kN=1;var e=$l(),t=WJ();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,u=e.useMemo,f=e.useDebugValue;return qy.useSyncExternalStoreWithSelector=function(d,h,m,y,v){var k=a(null);if(k.current===null){var S={hasValue:!1,value:null};k.current=S}else S=k.current;k=u(function(){function T(P){if(!A){if(A=!0,N=P,P=y(P),v!==void 0&&S.hasValue){var D=S.value;if(v(D,P))return O=D}return O=P}if(D=O,r(N,P))return D;var Y=y(P);return v!==void 0&&v(D,Y)?(N=P,D):(N=P,O=Y)}var A=!1,N,O,M=m===void 0?null:m;return[function(){return T(h())},M===null?void 0:function(){return T(M())}]},[h,m,y,v]);var C=i(d,k[0],k[1]);return o(function(){S.hasValue=!0,S.value=C},[C]),f(C),C},qy}var EN;function XJ(){return EN||(EN=1,Uy.exports=JJ()),Uy.exports}var QJ=XJ(),hw=_.createContext(null),ZJ=e=>e,Wt=()=>{var e=_.useContext(hw);return e?e.store.dispatch:ZJ},mh=()=>{},eX=()=>mh,tX=(e,t)=>e===t;function De(e){var t=_.useContext(hw);return QJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:eX,t?t.store.getState:mh,t?t.store.getState:mh,t?e:mh,tX)}function nX(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function rX(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iX(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var CN=e=>Array.isArray(e)?e:[e];function aX(e){const t=Array.isArray(e[0])?e[0]:e;return iX(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function sX(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var oX=class{constructor(e){this.value=e}deref(){return this.value}},lX=typeof WeakRef<"u"?WeakRef:oX,uX=0,TN=1;function Yf(){return{s:uX,v:void 0,o:null,p:null}}function JR(e,t={}){let n=Yf();const{resultEqualityCheck:r}=t;let i,a=0;function o(){var m;let u=n;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const k=arguments[y];if(typeof k=="function"||typeof k=="object"&&k!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const C=S.get(k);C===void 0?(u=Yf(),S.set(k,u)):u=C}else{let S=u.p;S===null&&(u.p=S=new Map);const C=S.get(k);C===void 0?(u=Yf(),S.set(k,u)):u=C}}const d=u;let h;if(u.s===TN)h=u.v;else if(h=e.apply(null,arguments),a++,r){const y=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;y!=null&&r(y,h)&&(h=y,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new lX(h):h}return d.s=TN,d.v=h,h}return o.clearCache=()=>{n=Yf(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function cX(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,o=0,u,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),nX(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...f},{memoize:m,memoizeOptions:y=[],argsMemoize:v=JR,argsMemoizeOptions:k=[]}=h,S=CN(y),C=CN(k),T=aX(i),A=m(function(){return a++,d.apply(null,arguments)},...S),N=v(function(){o++;const M=sX(T,arguments);return u=A.apply(null,M),u},...C);return Object.assign(N,{resultFunc:d,memoizedResultFunc:A,dependencies:T,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var oe=cX(JR),dX=Object.assign((e,t=oe)=>{rX(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((o,u,f)=>(o[n[f]]=u,o),{}))},{withTypes:()=>dX}),zy={},Fy={},Vy={},NN;function fX(){return NN||(NN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=t(r),u=t(i);if(o===u&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-o:o-u}return 0};e.compareValues=n})(Vy)),Vy}var Hy={},Gy={},AN;function XR(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Gy)),Gy}var jN;function hX(){return jN||(jN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XR(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}e.isKey=i})(Hy)),Hy}var PN;function pX(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fX(),n=hX(),r=sw();function i(a,o,u,f){if(a==null)return[];u=f?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const d=(v,k)=>{let S=v;for(let C=0;C<k.length&&S!=null;++C)S=S[k[C]];return S},h=(v,k)=>k==null||v==null?k:typeof v=="object"&&"key"in v?Object.hasOwn(k,v.key)?k[v.key]:d(k,v.path):typeof v=="function"?v(k):Array.isArray(v)?d(k,v):typeof k=="object"?k[v]:k,m=o.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:m.map(k=>h(k,v))})).slice().sort((v,k)=>{for(let S=0;S<m.length;S++){const C=t.compareValues(v.criteria[S],k.criteria[S],u[S]);if(C!==0)return C}return 0}).map(v=>v.original)}e.orderBy=i})(Fy)),Fy}var Ky={},MN;function mX(){return MN||(MN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),o=(u,f)=>{for(let d=0;d<u.length;d++){const h=u[d];Array.isArray(h)&&f<a?o(h,f+1):i.push(h)}};return o(n,0),i}e.flatten=t})(Ky)),Ky}var Yy={},ON;function QR(){return ON||(ON=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YR(),n=dw(),r=zR(),i=VR();function a(o,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&t.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],o):!1}e.isIterateeCall=a})(Yy)),Yy}var RN;function gX(){return RN||(RN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pX(),n=mX(),r=QR();function i(a,...o){const u=o.length;return u>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:u>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(a,n.flatten(o),["asc"])}e.sortBy=i})(zy)),zy}var Wy,IN;function yX(){return IN||(IN=1,Wy=gX().sortBy),Wy}var vX=yX();const Rp=Ur(vX);var ZR=e=>e.legend.settings,xX=e=>e.legend.size,bX=e=>e.legend.payload,wX=oe([bX,ZR],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Rp(r,n):r});function _X(){return De(wX)}var Wf=1;function eI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-t.height)>Wf||Math.abs(o.left-t.left)>Wf||Math.abs(o.top-t.top)>Wf||Math.abs(o.width-t.width)>Wf)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Un(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var SX=typeof Symbol=="function"&&Symbol.observable||"@@observable",DN=SX,Jy=()=>Math.random().toString(36).substring(7).split("").join("."),kX={INIT:`@@redux/INIT${Jy()}`,REPLACE:`@@redux/REPLACE${Jy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jy()}`},Ih=kX;function pw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tI(e,t,n){if(typeof e!="function")throw new Error(Un(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Un(1));return n(tI)(e,t)}let r=e,i=t,a=new Map,o=a,u=0,f=!1;function d(){o===a&&(o=new Map,a.forEach((C,T)=>{o.set(T,C)}))}function h(){if(f)throw new Error(Un(3));return i}function m(C){if(typeof C!="function")throw new Error(Un(4));if(f)throw new Error(Un(5));let T=!0;d();const A=u++;return o.set(A,C),function(){if(T){if(f)throw new Error(Un(6));T=!1,d(),o.delete(A),a=null}}}function y(C){if(!pw(C))throw new Error(Un(7));if(typeof C.type>"u")throw new Error(Un(8));if(typeof C.type!="string")throw new Error(Un(17));if(f)throw new Error(Un(9));try{f=!0,i=r(i,C)}finally{f=!1}return(a=o).forEach(A=>{A()}),C}function v(C){if(typeof C!="function")throw new Error(Un(10));r=C,y({type:Ih.REPLACE})}function k(){const C=m;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Un(11));function A(){const O=T;O.next&&O.next(h())}return A(),{unsubscribe:C(A)}},[DN](){return this}}}return y({type:Ih.INIT}),{dispatch:y,subscribe:m,getState:h,replaceReducer:v,[DN]:k}}function EX(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Ih.INIT})>"u")throw new Error(Un(12));if(typeof n(void 0,{type:Ih.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function nI(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{EX(n)}catch(a){i=a}return function(o={},u){if(i)throw i;let f=!1;const d={};for(let h=0;h<r.length;h++){const m=r[h],y=n[m],v=o[m],k=y(v,u);if(typeof k>"u")throw u&&u.type,new Error(Un(14));d[m]=k,f=f||k!==v}return f=f||r.length!==Object.keys(o).length,f?d:o}}function Dh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function CX(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(Un(15))};const o={getState:i.getState,dispatch:(f,...d)=>a(f,...d)},u=e.map(f=>f(o));return a=Dh(...u)(i.dispatch),{...i,dispatch:a}}}function rI(e){return pw(e)&&"type"in e&&typeof e.type=="string"}var iI=Symbol.for("immer-nothing"),LN=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state");function wi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pl=Object.getPrototypeOf;function oo(e){return!!e&&!!e[Lr]}function xa(e){var t;return e?aI(e)||Array.isArray(e)||!!e[LN]||!!((t=e.constructor)!=null&&t[LN])||td(e)||Dp(e):!1}var TX=Object.prototype.constructor.toString();function aI(e){if(!e||typeof e!="object")return!1;const t=Pl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===TX}function Lh(e,t){Ip(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Ip(e){const t=e[Lr];return t?t.type_:Array.isArray(e)?1:td(e)?2:Dp(e)?3:0}function kx(e,t){return Ip(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sI(e,t,n){const r=Ip(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function NX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function td(e){return e instanceof Map}function Dp(e){return e instanceof Set}function Gs(e){return e.copy_||e.base_}function Ex(e,t){if(td(e))return new Map(e);if(Dp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=aI(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Lr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],u=r[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[o]})}return Object.create(Pl(e),r)}else{const r=Pl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function mw(e,t=!1){return Lp(e)||oo(e)||!xa(e)||(Ip(e)>1&&Object.defineProperties(e,{set:{value:Jf},add:{value:Jf},clear:{value:Jf},delete:{value:Jf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>mw(n,!0))),e}function Jf(){wi(2)}function Lp(e){return Object.isFrozen(e)}var AX={};function lo(e){const t=AX[e];return t||wi(0,e),t}var Lc;function oI(){return Lc}function jX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function UN(e,t){t&&(lo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cx(e){Tx(e),e.drafts_.forEach(PX),e.drafts_=null}function Tx(e){e===Lc&&(Lc=e.parent_)}function qN(e){return Lc=jX(Lc,e)}function PX(e){const t=e[Lr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $N(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Lr].modified_&&(Cx(t),wi(4)),xa(e)&&(e=Uh(t,e),t.parent_||qh(t,e)),t.patches_&&lo("Patches").generateReplacementPatches_(n[Lr].base_,e,t.patches_,t.inversePatches_)):e=Uh(t,n,[]),Cx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iI?e:void 0}function Uh(e,t,n){if(Lp(t))return t;const r=t[Lr];if(!r)return Lh(t,(i,a)=>BN(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return qh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,o=!1;r.type_===3&&(a=new Set(i),i.clear(),o=!0),Lh(a,(u,f)=>BN(e,r,i,u,f,n,o)),qh(e,i,!1),n&&e.patches_&&lo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function BN(e,t,n,r,i,a,o){if(oo(i)){const u=a&&t&&t.type_!==3&&!kx(t.assigned_,r)?a.concat(r):void 0,f=Uh(e,i,u);if(sI(n,r,f),oo(f))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(xa(i)&&!Lp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Uh(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(td(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&qh(e,i)}}function qh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mw(t,n)}function MX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:oI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=gw;n&&(i=[r],a=Uc);const{revoke:o,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=o,u}var gw={get(e,t){if(t===Lr)return e;const n=Gs(e);if(!kx(n,t))return OX(e,n,t);const r=n[t];return e.finalized_||!xa(r)?r:r===Xy(e.base_,t)?(Qy(e),e.copy_[t]=Ax(r,e)):r},has(e,t){return t in Gs(e)},ownKeys(e){return Reflect.ownKeys(Gs(e))},set(e,t,n){const r=lI(Gs(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Xy(Gs(e),t),a=i==null?void 0:i[Lr];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(NX(n,i)&&(n!==void 0||kx(e.base_,t)))return!0;Qy(e),Nx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Xy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Qy(e),Nx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Gs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){wi(11)},getPrototypeOf(e){return Pl(e.base_)},setPrototypeOf(){wi(12)}},Uc={};Lh(gw,(e,t)=>{Uc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Uc.deleteProperty=function(e,t){return Uc.set.call(this,e,t,void 0)};Uc.set=function(e,t,n){return gw.set.call(this,e[0],t,n,e[0])};function Xy(e,t){const n=e[Lr];return(n?Gs(n):e)[t]}function OX(e,t,n){var i;const r=lI(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function lI(e,t){if(!(t in e))return;let n=Pl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Pl(n)}}function Nx(e){e.modified_||(e.modified_=!0,e.parent_&&Nx(e.parent_))}function Qy(e){e.copy_||(e.copy_=Ex(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var RX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(f=a,...d){return o.produce(f,h=>n.call(this,h,...d))}}typeof n!="function"&&wi(6),r!==void 0&&typeof r!="function"&&wi(7);let i;if(xa(t)){const a=qN(this),o=Ax(t,void 0);let u=!0;try{i=n(o),u=!1}finally{u?Cx(a):Tx(a)}return UN(a,r),$N(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===iI&&(i=void 0),this.autoFreeze_&&mw(i,!0),r){const a=[],o=[];lo("Patches").generateReplacementPatches_(t,i,a,o),r(a,o)}return i}else wi(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...u)=>this.produceWithPatches(o,f=>t(f,...u));let r,i;return[this.produce(t,n,(o,u)=>{r=o,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xa(e)||wi(8),oo(e)&&(e=ma(e));const t=qN(this),n=Ax(e,void 0);return n[Lr].isManual_=!0,Tx(t),n}finishDraft(e,t){const n=e&&e[Lr];(!n||!n.isManual_)&&wi(9);const{scope_:r}=n;return UN(r,t),$N(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=lo("Patches").applyPatches_;return oo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Ax(e,t){const n=td(e)?lo("MapSet").proxyMap_(e,t):Dp(e)?lo("MapSet").proxySet_(e,t):MX(e,t);return(t?t.scope_:oI()).drafts_.push(n),n}function ma(e){return oo(e)||wi(10,e),uI(e)}function uI(e){if(!xa(e)||Lp(e))return e;const t=e[Lr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ex(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ex(e,!0);return Lh(n,(r,i)=>{sI(n,r,uI(i))}),t&&(t.finalized_=!1),n}var IX=new RX,cI=IX.produce;function dI(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var DX=dI(),LX=dI,UX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dh:Dh.apply(null,arguments)};function oi(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Dr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>rI(r)&&r.type===e,n}var fI=class bc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,bc.prototype)}static get[Symbol.species](){return bc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new bc(...t[0].concat(this)):new bc(...t.concat(this))}};function zN(e){return xa(e)?cI(e,()=>{}):e}function Xf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function qX(e){return typeof e=="boolean"}var $X=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new fI;return n&&(qX(n)?o.push(DX):o.push(LX(n.extraArgument))),o},hI="RTK_autoBatch",er=()=>e=>({payload:e,meta:{[hI]:!0}}),FN=e=>t=>{setTimeout(t,e)},pI=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,o=!1;const u=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:FN(10):e.type==="callback"?e.queueNotification:FN(e.timeout),d=()=>{o=!1,a&&(a=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),y=r.subscribe(m);return u.add(h),()=>{y(),u.delete(h)}},dispatch(h){var m;try{return i=!((m=h==null?void 0:h.meta)!=null&&m[hI]),a=!i,a&&(o||(o=!0,f(d))),r.dispatch(h)}finally{i=!0}}})},BX=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new fI(e);return r&&i.push(pI(typeof r=="object"?r:void 0)),i};function zX(e){const t=$X(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(pw(n))u=nI(n);else throw new Error(Dr(1));let f;typeof r=="function"?f=r(t):f=t();let d=Dh;i&&(d=UX({trace:!1,...typeof i=="object"&&i}));const h=CX(...f),m=BX(h);let y=typeof o=="function"?o(m):m();const v=d(...y);return tI(u,a,v)}function mI(e){const t={},n=[];let r;const i={addCase(a,o){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(Dr(28));if(u in t)throw new Error(Dr(29));return t[u]=o,i},addAsyncThunk(a,o){return o.pending&&(t[a.pending.type]=o.pending),o.rejected&&(t[a.rejected.type]=o.rejected),o.fulfilled&&(t[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function FX(e){return typeof e=="function"}function VX(e,t){let[n,r,i]=mI(t),a;if(FX(e))a=()=>zN(e());else{const u=zN(e);a=()=>u}function o(u=a(),f){let d=[n[f.type],...r.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,m)=>{if(m)if(oo(h)){const v=m(h,f);return v===void 0?h:v}else{if(xa(h))return cI(h,y=>m(y,f));{const y=m(h,f);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},u)}return o.getInitialState=a,o}var HX="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",GX=(e=21)=>{let t="",n=e;for(;n--;)t+=HX[Math.random()*64|0];return t},KX=Symbol.for("rtk-slice-createasyncthunk");function YX(e,t){return`${e}/${t}`}function WX({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[KX];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(Dr(11));const u=(typeof i.reducers=="function"?i.reducers(XX()):i.reducers)||{},f=Object.keys(u),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,M){const P=typeof O=="string"?O:O.type;if(!P)throw new Error(Dr(12));if(P in d.sliceCaseReducersByType)throw new Error(Dr(13));return d.sliceCaseReducersByType[P]=M,h},addMatcher(O,M){return d.sliceMatchers.push({matcher:O,reducer:M}),h},exposeAction(O,M){return d.actionCreators[O]=M,h},exposeCaseReducer(O,M){return d.sliceCaseReducersByName[O]=M,h}};f.forEach(O=>{const M=u[O],P={reducerName:O,type:YX(a,O),createNotation:typeof i.reducers=="function"};ZX(M)?tQ(P,M,h,t):QX(P,M,h)});function m(){const[O={},M=[],P=void 0]=typeof i.extraReducers=="function"?mI(i.extraReducers):[i.extraReducers],D={...O,...d.sliceCaseReducersByType};return VX(i.initialState,Y=>{for(let q in D)Y.addCase(q,D[q]);for(let q of d.sliceMatchers)Y.addMatcher(q.matcher,q.reducer);for(let q of M)Y.addMatcher(q.matcher,q.reducer);P&&Y.addDefaultCase(P)})}const y=O=>O,v=new Map,k=new WeakMap;let S;function C(O,M){return S||(S=m()),S(O,M)}function T(){return S||(S=m()),S.getInitialState()}function A(O,M=!1){function P(Y){let q=Y[O];return typeof q>"u"&&M&&(q=Xf(k,P,T)),q}function D(Y=y){const q=Xf(v,M,()=>new WeakMap);return Xf(q,Y,()=>{const W={};for(const[F,$]of Object.entries(i.selectors??{}))W[F]=JX($,Y,()=>Xf(k,Y,T),M);return W})}return{reducerPath:O,getSelectors:D,get selectors(){return D(P)},selectSlice:P}}const N={name:a,reducer:C,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:T,...A(o),injectInto(O,{reducerPath:M,...P}={}){const D=M??o;return O.inject({reducerPath:D,reducer:C},P),{...N,...A(D,!0)}}};return N}}function JX(e,t,n,r){function i(a,...o){let u=t(a);return typeof u>"u"&&r&&(u=n()),e(u,...o)}return i.unwrapped=e,i}var qr=WX();function XX(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function QX({type:e,reducerName:t,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!eQ(r))throw new Error(Dr(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?oi(e,o):oi(e))}function ZX(e){return e._reducerDefinitionType==="asyncThunk"}function eQ(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tQ({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Dr(18));const{payloadCreator:a,fulfilled:o,pending:u,rejected:f,settled:d,options:h}=n,m=i(e,a,h);r.exposeAction(t,m),o&&r.addCase(m.fulfilled,o),u&&r.addCase(m.pending,u),f&&r.addCase(m.rejected,f),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Qf,pending:u||Qf,rejected:f||Qf,settled:d||Qf})}function Qf(){}var nQ="task",gI="listener",yI="completed",yw="cancelled",rQ=`task-${yw}`,iQ=`task-${yI}`,jx=`${gI}-${yw}`,aQ=`${gI}-${yI}`,Up=class{constructor(e){S0(this,"name","TaskAbortError");S0(this,"message");this.code=e,this.message=`${nQ} ${yw} (reason: ${e})`}},vw=(e,t)=>{if(typeof e!="function")throw new TypeError(Dr(32))},$h=()=>{},vI=(e,t=$h)=>(e.catch(t),e),xI=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),eo=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},to=e=>{if(e.aborted){const{reason:t}=e;throw new Up(t)}};function bI(e,t){let n=$h;return new Promise((r,i)=>{const a=()=>i(new Up(e.reason));if(e.aborted){a();return}n=xI(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=$h})}var sQ=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Up?"cancelled":"rejected",error:n}}finally{t==null||t()}},Bh=e=>t=>vI(bI(e,t).then(n=>(to(e),n))),wI=e=>{const t=Bh(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Cl}=Object,VN={},qp="listenerMiddleware",oQ=(e,t)=>{const n=r=>xI(e,()=>eo(r,e.reason));return(r,i)=>{vw(r);const a=new AbortController;n(a);const o=sQ(async()=>{to(e),to(a.signal);const u=await r({pause:Bh(a.signal),delay:wI(a.signal),signal:a.signal});return to(a.signal),u},()=>eo(a,iQ));return i!=null&&i.autoJoin&&t.push(o.catch($h)),{result:Bh(e)(o),cancel(){eo(a,rQ)}}}},lQ=(e,t)=>{const n=async(r,i)=>{to(t);let a=()=>{};const u=[new Promise((f,d)=>{let h=e({predicate:r,effect:(m,y)=>{y.unsubscribe(),f([m,y.getState(),y.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await bI(t,Promise.race(u));return to(t),f}finally{a()}};return(r,i)=>vI(n(r,i))},_I=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=oi(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Dr(21));return vw(a),{predicate:i,type:t,effect:a}},SI=Cl(e=>{const{type:t,predicate:n,effect:r}=_I(e);return{id:GX(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Dr(22))}}},{withTypes:()=>SI}),HN=(e,t)=>{const{type:n,effect:r,predicate:i}=_I(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Px=e=>{e.pending.forEach(t=>{eo(t,jx)})},uQ=(e,t)=>()=>{for(const n of t.keys())Px(n);e.clear()},GN=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},kI=Cl(oi(`${qp}/add`),{withTypes:()=>kI}),cQ=oi(`${qp}/removeAll`),EI=Cl(oi(`${qp}/remove`),{withTypes:()=>EI}),dQ=(...e)=>{console.error(`${qp}/error`,...e)},nd=(e={})=>{const t=new Map,n=new Map,r=v=>{const k=n.get(v)??0;n.set(v,k+1)},i=v=>{const k=n.get(v)??1;k===1?n.delete(v):n.set(v,k-1)},{extra:a,onError:o=dQ}=e;vw(o);const u=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),k=>{v.unsubscribe(),k!=null&&k.cancelActive&&Px(v)}),f=v=>{const k=HN(t,v)??SI(v);return u(k)};Cl(f,{withTypes:()=>f});const d=v=>{const k=HN(t,v);return k&&(k.unsubscribe(),v.cancelActive&&Px(k)),!!k};Cl(d,{withTypes:()=>d});const h=async(v,k,S,C)=>{const T=new AbortController,A=lQ(f,T.signal),N=[];try{v.pending.add(T),r(v),await Promise.resolve(v.effect(k,Cl({},S,{getOriginalState:C,condition:(O,M)=>A(O,M).then(Boolean),take:A,delay:wI(T.signal),pause:Bh(T.signal),extra:a,signal:T.signal,fork:oQ(T.signal,N),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((O,M,P)=>{O!==T&&(eo(O,jx),P.delete(O))})},cancel:()=>{eo(T,jx),v.pending.delete(T)},throwIfCancelled:()=>{to(T.signal)}})))}catch(O){O instanceof Up||GN(o,O,{raisedBy:"effect"})}finally{await Promise.all(N),eo(T,aQ),i(v),v.pending.delete(T)}},m=uQ(t,n);return{middleware:v=>k=>S=>{if(!rI(S))return k(S);if(kI.match(S))return f(S.payload);if(cQ.match(S)){m();return}if(EI.match(S))return d(S.payload);let C=v.getState();const T=()=>{if(C===VN)throw new Error(Dr(23));return C};let A;try{if(A=k(S),t.size>0){const N=v.getState(),O=Array.from(t.values());for(const M of O){let P=!1;try{P=M.predicate(S,N,C)}catch(D){P=!1,GN(o,D,{raisedBy:"predicate"})}P&&h(M,S,v,T)}}}finally{C=VN}return A},startListening:f,stopListening:d,clearListeners:m}};function Dr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fQ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},CI=qr({name:"chartLayout",initialState:fQ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:hQ,setLayout:pQ,setChartSize:mQ,setScale:gQ}=CI.actions,yQ=CI.reducer;function KN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function YN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(n),!0).forEach(function(r){vQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vQ(e,t,n){return(t=xQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xQ(e){var t=bQ(e,"string");return typeof t=="symbol"?t:t+""}function bQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zh=Math.PI/180,wQ=e=>e*180/Math.PI,mn=(e,t,n,r)=>({x:e+Math.cos(-zh*r)*n,y:t+Math.sin(-zh*r)*n}),TI=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},_Q=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},SQ=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,o=_Q({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var u=(n-i)/o,f=Math.acos(u);return r>a&&(f=2*Math.PI-f),{radius:o,angle:wQ(f),angleInRadian:f}},kQ=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},EQ=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return e+o*360},CQ=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:a}=SQ({x:n,y:r},t),{innerRadius:o,outerRadius:u}=t;if(i<o||i>u||i===0)return null;var{startAngle:f,endAngle:d}=kQ(t),h=a,m;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}return m?YN(YN({},t),{},{radius:i,angle:EQ(h,t)}):null};function NI(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function WN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(n),!0).forEach(function(r){TQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TQ(e,t,n){return(t=NQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NQ(e){var t=AQ(e,"string");return typeof t=="symbol"?t:t+""}function AQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qt(e,t,n){return An(e)||An(t)?n:qi(t)?so(e,t,n):typeof t=="function"?t(e):n}var jQ=(e,t,n,r,i)=>{var a,o=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var d=f>0?n[f-1].coordinate:n[u-1].coordinate,h=n[f].coordinate,m=f>=u-1?n[0].coordinate:n[f+1].coordinate,y=void 0;if(Nn(h-d)!==Nn(m-h)){var v=[];if(Nn(m-h)===Nn(i[1]-i[0])){y=m;var k=h+i[1]-i[0];v[0]=Math.min(k,(k+d)/2),v[1]=Math.max(k,(k+d)/2)}else{y=d;var S=m+i[1]-i[0];v[0]=Math.min(h,(S+h)/2),v[1]=Math.max(h,(S+h)/2)}var C=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>C[0]&&e<=C[1]||e>=v[0]&&e<=v[1]){({index:o}=n[f]);break}}else{var T=Math.min(d,m),A=Math.max(d,m);if(e>(T+h)/2&&e<=(A+h)/2){({index:o}=n[f]);break}}}else if(t){for(var N=0;N<u;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:o}=t[N]);break}}return o},PQ=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:u}=t;if((u==="vertical"||u==="horizontal"&&o==="middle")&&a!=="center"&&Le(e[a]))return ti(ti({},e),{},{[a]:e[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&o!=="middle"&&Le(e[o]))return ti(ti({},e),{},{[o]:e[o]+(i||0)})}return e},bo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",AI=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,a,o=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(a=!0),u.coordinate));return i||o.push(t),a||o.push(n),o},jI=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:u,isCategorical:f,categoricalDomain:d,tickCount:h,ticks:m,niceTicks:y,axisType:v}=e;if(!o)return null;var k=u==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,S=i==="category"&&o.bandwidth?o.bandwidth()/k:0;if(S=v==="angleAxis"&&a&&a.length>=2?Nn(a[0]-a[1])*2*S:S,m||y){var C=(m||y||[]).map((T,A)=>{var N=r?r.indexOf(T):T;return{coordinate:o(N)+S,value:T,offset:S,index:A}});return C.filter(T=>!si(T.coordinate))}return f&&d?d.map((T,A)=>({coordinate:o(T)+S,value:T,index:A,offset:S})):o.ticks&&h!=null?o.ticks(h).map((T,A)=>({coordinate:o(T)+S,value:T,offset:S,index:A})):o.domain().map((T,A)=>({coordinate:o(T)+S,value:r?r[T]:T,index:A,offset:S}))},JN=1e-4,MQ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-JN,a=Math.max(r[0],r[1])+JN,o=e(t[0]),u=e(t[n-1]);(o<i||o>a||u<i||u>a)&&e.domain([t[0],t[n-1]])}},OQ=(e,t)=>{if(!t||t.length!==2||!Le(t[0])||!Le(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Le(e[0])||e[0]<n)&&(i[0]=n),(!Le(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},RQ=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var u=si(e[o][n][1])?e[o][n][0]:e[o][n][1];u>=0?(e[o][n][0]=i,e[o][n][1]=i+u,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+u,a=e[o][n][1])}},IQ=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=si(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},DQ={sign:RQ,expand:aJ,none:jl,silhouette:sJ,wiggle:oJ,positive:IQ},LQ=(e,t,n)=>{var r=DQ[n],i=iJ().keys(t).value((a,o)=>+Qt(a,o,0)).order(wx).offset(r);return i(e)};function UQ(e){return e==null?void 0:String(e)}var XN=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+r:null;var u=Qt(a,t.dataKey,t.scale.domain()[o]);return An(u)?null:t.scale(u)-i/2+r},qQ=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},$Q=e=>{var t=e.flat(2).filter(Le);return[Math.min(...t),Math.max(...t)]},BQ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],zQ=(e,t,n)=>{if(e!=null)return BQ(Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:o}=a,u=o.reduce((f,d)=>{var h=NI(d,t,n),m=$Q(h);return[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},QN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xw=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Rp(t,h=>h.coordinate),a=1/0,o=1,u=i.length;o<u;o++){var f=i[o],d=i[o-1];a=Math.min((f.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function eA(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return ti(ti({},t),{},{dataKey:n,payload:r,value:i,name:a})}function $p(e,t){if(e)return String(e);if(typeof t=="string")return t}function FQ(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return r?CQ({x:e,y:t},r):null}var VQ=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:o}=r;return ti(ti(ti({},r),mn(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var u=i.coordinate,{angle:f}=r;return ti(ti(ti({},r),mn(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{x:0,y:0}},HQ=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ea=e=>e.layout.width,Ca=e=>e.layout.height,GQ=e=>e.layout.scale,PI=e=>e.layout.margin,Bp=oe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),zp=oe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),MI="data-recharts-item-index",OI="data-recharts-item-data-key",rd=60;function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(r){KQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KQ(e,t,n){return(t=YQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YQ(e){var t=WQ(e,"string");return typeof t=="symbol"?t:t+""}function WQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JQ=e=>e.brush.height;function XQ(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:rd;return n+i}return n},0)}function QQ(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:rd;return n+i}return n},0)}function ZQ(e){var t=Bp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function eZ(e){var t=Bp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var wn=oe([Ea,Ca,PI,JQ,XQ,QQ,ZQ,eZ,ZR,xX],(e,t,n,r,i,a,o,u,f,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},m={top:(n.top||0)+o,bottom:(n.bottom||0)+u},y=Zf(Zf({},m),h),v=y.bottom;y.bottom+=r,y=PQ(y,f,d);var k=e-y.left-y.right,S=t-y.top-y.bottom;return Zf(Zf({brushBottom:v},y),{},{width:Math.max(k,0),height:Math.max(S,0)})}),tZ=oe(wn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),bw=oe(Ea,Ca,(e,t)=>({x:0,y:0,width:e,height:t})),nZ=_.createContext(null),$r=()=>_.useContext(nZ)!=null,Fp=e=>e.brush,Vp=oe([Fp,wn,PI],(e,t,n)=>({height:e.height,x:Le(e.x)?e.x:t.left,y:Le(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:Le(e.width)?e.width:t.width})),Zy={},ev={},tv={},nA;function rZ(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let o,u=null;const f=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{u!==null&&(n.apply(o,u),o=void 0,u=null)},m=()=>{d&&h(),S()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,m()},r)},k=()=>{y!==null&&(clearTimeout(y),y=null)},S=()=>{k(),o=void 0,u=null},C=()=>{h()},T=function(...A){if(i!=null&&i.aborted)return;o=this,u=A;const N=y==null;v(),f&&N&&h()};return T.schedule=v,T.cancel=S,T.flush=C,i==null||i.addEventListener("abort",S,{once:!0}),T}e.debounce=t})(tv)),tv}var rA;function iZ(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rZ();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:u=!0,maxWait:f}=a,d=Array(2);o&&(d[0]="leading"),u&&(d[1]="trailing");let h,m=null;const y=t.debounce(function(...S){h=r.apply(this,S),m=null},i,{edges:d}),v=function(...S){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(h=r.apply(this,S),m=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,S),h)},k=()=>(y.flush(),h);return v.cancel=y.cancel,v.flush=k,v}e.debounce=n})(ev)),ev}var iA;function aZ(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iZ();function n(r,i=0,a={}){const{leading:o=!0,trailing:u=!0}=a;return t.debounce(r,i,{leading:o,maxWait:i,trailing:u})}e.throttle=n})(Zy)),Zy}var nv,aA;function sZ(){return aA||(aA=1,nv=aZ().throttle),nv}var oZ=sZ();const lZ=Ur(oZ);var Fh=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},RI=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,u=va(r)?e:Number(r),f=va(i)?t:Number(i);return a&&a>0&&(u?f=u/a:f&&(u=f*a),o&&f>o&&(f=o)),{calculatedWidth:u,calculatedHeight:f}},uZ={width:0,height:0,overflow:"visible"},cZ={width:0,overflowX:"visible"},dZ={height:0,overflowY:"visible"},fZ={},hZ=e=>{var{width:t,height:n}=e,r=va(t),i=va(n);return r&&i?uZ:r?cZ:i?dZ:fZ};function pZ(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Wn(e){return Number.isFinite(e)}function Ml(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(null,arguments)}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(r){mZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mZ(e,t,n){return(t=gZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gZ(e){var t=yZ(e,"string");return typeof t=="symbol"?t:t+""}function yZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var II=_.createContext({width:-1,height:-1});function DI(e){var{children:t,width:n,height:r}=e,i=_.useMemo(()=>({width:n,height:r}),[n,r]);return n<=0||r<=0?null:_.createElement(II.Provider,{value:i},t)}var ww=()=>_.useContext(II),vZ=_.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:u,maxHeight:f,children:d,debounce:h=0,id:m,className:y,onResize:v,style:k={}}=e,S=_.useRef(null),C=_.useRef();C.current=v,_.useImperativeHandle(t,()=>S.current);var[T,A]=_.useState({containerWidth:r.width,containerHeight:r.height}),N=_.useCallback((Y,q)=>{A(W=>{var F=Math.round(Y),$=Math.round(q);return W.containerWidth===F&&W.containerHeight===$?W:{containerWidth:F,containerHeight:$}})},[]);_.useEffect(()=>{var Y=$=>{var R,{width:z,height:V}=$[0].contentRect;N(z,V),(R=C.current)===null||R===void 0||R.call(C,z,V)};h>0&&(Y=lZ(Y,h,{trailing:!0,leading:!1}));var q=new ResizeObserver(Y),{width:W,height:F}=S.current.getBoundingClientRect();return N(W,F),q.observe(S.current),()=>{q.disconnect()}},[N,h]);var{containerWidth:O,containerHeight:M}=T;Fh(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:D}=RI(O,M,{width:i,height:a,aspect:n,maxHeight:f});return Fh(P>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,i,a,o,u,n),_.createElement("div",{id:m?"".concat(m):void 0,className:kt("recharts-responsive-container",y),style:oA(oA({},k),{},{width:i,height:a,minWidth:o,minHeight:u,maxHeight:f}),ref:S},_.createElement("div",{style:hZ({width:i,height:a})},_.createElement(DI,{width:P,height:D},d)))}),LI=_.forwardRef((e,t)=>{var n=ww();if(Ml(n.width)&&Ml(n.height))return e.children;var{width:r,height:i}=pZ({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=RI(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return Le(a)&&Le(o)?_.createElement(DI,{width:a,height:o},e.children):_.createElement(vZ,Mx({},e,{width:r,height:i,ref:t}))}),Hp=()=>{var e,t=$r(),n=De(tZ),r=De(Vp),i=(e=De(Fp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},xZ={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},UI=()=>{var e;return(e=De(wn))!==null&&e!==void 0?e:xZ},_w=()=>De(Ea),Sw=()=>De(Ca),bZ=()=>De(e=>e.layout.margin),mt=e=>e.layout.layoutType,kw=()=>De(mt),Gp=e=>{var t=Wt(),n=$r(),{width:r,height:i}=e,a=ww(),o=r,u=i;return a&&(o=a.width>0?a.width:r,u=a.height>0?a.height:i),_.useEffect(()=>{!n&&Ml(o)&&Ml(u)&&t(mQ({width:o,height:u}))},[t,n,o,u]),null},wZ={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},qI=qr({name:"legend",initialState:wZ,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:er()},removeLegendPayload:{reducer(e,t){var n=ma(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:er()}}}),{setLegendSize:lA,setLegendSettings:_Z,addLegendPayload:$I,removeLegendPayload:BI}=qI.actions,SZ=qI.reducer,kZ=["contextPayload"];function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ox.apply(null,arguments)}function uA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(n),!0).forEach(function(r){Ew(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ew(e,t,n){return(t=EZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EZ(e){var t=CZ(e,"string");return typeof t=="symbol"?t:t+""}function CZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TZ(e,t){if(e==null)return{};var n,r,i=NZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function AZ(e){return e.value}function jZ(e){var{contextPayload:t}=e,n=TZ(e,kZ),r=WR(t,e.payloadUniqBy,AZ),i=Ol(Ol({},n),{},{payload:r});return _.isValidElement(e.content)?_.cloneElement(e.content,i):typeof e.content=="function"?_.createElement(e.content,i):_.createElement(cw,i)}function PZ(e,t,n,r,i,a){var{layout:o,align:u,verticalAlign:f}=t,d,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&o==="vertical"?d={left:((r||0)-a.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?h={top:((i||0)-a.height)/2}:h=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ol(Ol({},d),h)}function MZ(e){var t=Wt();return _.useEffect(()=>{t(_Z(e))},[t,e]),null}function OZ(e){var t=Wt();return _.useEffect(()=>(t(lA(e)),()=>{t(lA({width:0,height:0}))}),[t,e]),null}function RZ(e){var t=_X(),n=NW(),r=bZ(),{width:i,height:a,wrapperStyle:o,portal:u}=e,[f,d]=eI([t]),h=_w(),m=Sw();if(h==null||m==null)return null;var y=h-(r.left||0)-(r.right||0),v=id.getWidthOrHeight(e.layout,a,i,y),k=u?o:Ol(Ol({position:"absolute",width:(v==null?void 0:v.width)||i||"auto",height:(v==null?void 0:v.height)||a||"auto"},PZ(o,e,r,h,m,f)),o),S=u??n;if(S==null)return null;var C=_.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:d},_.createElement(MZ,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(OZ,{width:f.width,height:f.height}),_.createElement(jZ,Ox({},e,v,{margin:r,chartWidth:h,chartHeight:m,contextPayload:t})));return nM.createPortal(C,S)}class id extends _.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Le(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return _.createElement(RZ,this.props)}}Ew(id,"displayName","Legend");Ew(id,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(null,arguments)}function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(n),!0).forEach(function(r){IZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IZ(e,t,n){return(t=DZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DZ(e){var t=LZ(e,"string");return typeof t=="symbol"?t:t+""}function LZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UZ(e){return Array.isArray(e)&&qi(e[0])&&qi(e[1])?e.join(" ~ "):e}var qZ=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:u,wrapperClassName:f,labelClassName:d,label:h,labelFormatter:m,accessibilityLayer:y=!1}=e,v=()=>{if(a&&a.length){var M={padding:0,margin:0},P=(u?Rp(a,u):a).map((D,Y)=>{if(D.type==="none")return null;var q=D.formatter||o||UZ,{value:W,name:F}=D,$=W,R=F;if(q){var z=q(W,F,D,Y,a);if(Array.isArray(z))[$,R]=z;else if(z!=null)$=z;else return null}var V=rv({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:V},qi(R)?_.createElement("span",{className:"recharts-tooltip-item-name"},R):null,qi(R)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},$),_.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:M},P)}return null},k=rv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=rv({margin:0},i),C=!An(h),T=C?h:"",A=kt("recharts-default-tooltip",f),N=kt("recharts-tooltip-label",d);C&&m&&a!==void 0&&a!==null&&(T=m(h,a));var O=y?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Rx({className:A,style:k},O),_.createElement("p",{className:N,style:S},_.isValidElement(T)?T:"".concat(T)),v())},cc="recharts-tooltip-wrapper",$Z={visibility:"hidden"};function BZ(e){var{coordinate:t,translateX:n,translateY:r}=e;return kt(cc,{["".concat(cc,"-right")]:Le(n)&&t&&Le(t.x)&&n>=t.x,["".concat(cc,"-left")]:Le(n)&&t&&Le(t.x)&&n<t.x,["".concat(cc,"-bottom")]:Le(r)&&t&&Le(t.y)&&r>=t.y,["".concat(cc,"-top")]:Le(r)&&t&&Le(t.y)&&r<t.y})}function dA(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:u,viewBox:f,viewBoxDimension:d}=e;if(a&&Le(a[r]))return a[r];var h=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return o[r]?h:m;var y=f[r];if(y==null)return 0;if(o[r]){var v=h,k=y;return v<k?Math.max(m,y):Math.max(h,y)}if(d==null)return 0;var S=m+u,C=y+d;return S>C?Math.max(h,y):Math.max(m,y)}function zZ(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function FZ(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:u,viewBox:f}=e,d,h,m;return o.height>0&&o.width>0&&n?(h=dA({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:f,viewBoxDimension:f.width}),m=dA({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:f,viewBoxDimension:f.height}),d=zZ({translateX:h,translateY:m,useTranslate3d:u})):d=$Z,{cssProperties:d,cssClasses:BZ({translateX:h,translateY:m,coordinate:n})}}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(r){Ix(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ix(e,t,n){return(t=VZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VZ(e){var t=HZ(e,"string");return typeof t=="symbol"?t:t+""}function HZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class GZ extends _.PureComponent{constructor(){super(...arguments),Ix(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ix(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:u,isAnimationActive:f,offset:d,position:h,reverseDirection:m,useTranslate3d:y,viewBox:v,wrapperStyle:k,lastBoundingBox:S,innerRef:C,hasPortalFromProps:T}=this.props,{cssClasses:A,cssProperties:N}=FZ({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:m,tooltipBox:{height:S.height,width:S.width},useTranslate3d:y,viewBox:v}),O=T?{}:eh(eh({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),M=eh(eh({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},k);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:M,ref:C},a)}}var KZ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),wo={devToolsEnabled:!1,isSsr:KZ()},zI=()=>De(e=>e.rootProps.accessibilityLayer);function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dx.apply(null,arguments)}function hA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(n),!0).forEach(function(r){YZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YZ(e,t,n){return(t=WZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WZ(e){var t=JZ(e,"string");return typeof t=="symbol"?t:t+""}function JZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mA={curveBasisClosed:KW,curveBasisOpen:YW,curveBasis:GW,curveBumpX:MW,curveBumpY:OW,curveLinearClosed:WW,curveLinear:Mp,curveMonotoneX:JW,curveMonotoneY:XW,curveNatural:QW,curveStep:ZW,curveStepAfter:tJ,curveStepBefore:eJ},th=e=>Wn(e.x)&&Wn(e.y),dc=e=>e.x,fc=e=>e.y,XZ=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Zc(e));return(n==="curveMonotone"||n==="curveBump")&&t?mA["".concat(n).concat(t==="vertical"?"Y":"X")]:mA[n]||Mp},QZ=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,o=XZ(t,i),u=a?n.filter(th):n,f;if(Array.isArray(r)){var d=a?r.filter(m=>th(m)):r,h=u.map((m,y)=>pA(pA({},m),{},{base:d[y]}));return i==="vertical"?f=Kf().y(fc).x1(dc).x0(m=>m.base.x):f=Kf().x(dc).y1(fc).y0(m=>m.base.y),f.defined(th).curve(o),f(h)}return i==="vertical"&&Le(r)?f=Kf().y(fc).x1(dc).x0(r):Le(r)?f=Kf().x(dc).y1(fc).y0(r):f=TR().x(dc).y(fc),f.defined(th).curve(o),f(u)},FI=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?QZ(e):r;return _.createElement("path",Dx({},Si(e),kJ(e),{className:kt("recharts-curve",t),d:a===null?void 0:a,ref:i}))},ZZ=["x","y","top","left","width","height","className"];function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lx.apply(null,arguments)}function gA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(n),!0).forEach(function(r){tee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tee(e,t,n){return(t=nee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nee(e){var t=ree(e,"string");return typeof t=="symbol"?t:t+""}function ree(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iee(e,t){if(e==null)return{};var n,r,i=aee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var see=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),oee=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:u}=e,f=iee(e,ZZ),d=eee({x:t,y:n,top:r,left:i,width:a,height:o},f);return!Le(t)||!Le(n)||!Le(a)||!Le(o)||!Le(r)||!Le(i)?null:_.createElement("path",Lx({},ai(d),{className:kt("recharts-cross",u),d:see(t,n,a,o,r,i)}))};function lee(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function yA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(n),!0).forEach(function(r){cee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cee(e,t,n){return(t=dee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dee(e){var t=fee(e,"string");return typeof t=="symbol"?t:t+""}function fee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ir(e,t){var n=uee({},e),r=t,i=Object.keys(t),a=i.reduce((o,u)=>(o[u]===void 0&&r[u]!==void 0&&(o[u]=r[u]),o),n);return a}function hee(){}function pee(e){return e!=null}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(r){mee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mee(e,t,n){return(t=gee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gee(e){var t=yee(e,"string");return typeof t=="symbol"?t:t+""}function yee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vee=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),VI=(e,t,n)=>e.map(r=>"".concat(vee(r)," ").concat(t,"ms ").concat(n)).join(","),xee=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),qc=(e,t)=>Object.keys(t).reduce((n,r)=>xA(xA({},n),{},{[r]:e(r,t[r])}),{});function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(n),!0).forEach(function(r){bee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bee(e,t,n){return(t=wee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wee(e){var t=_ee(e,"string");return typeof t=="symbol"?t:t+""}function _ee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vh=(e,t,n)=>e+(t-e)*n,Ux=e=>{var{from:t,to:n}=e;return t!==n},HI=(e,t,n)=>{var r=qc((i,a)=>{if(Ux(a)){var[o,u]=e(a.from,a.to,a.velocity);return qn(qn({},a),{},{from:o,velocity:u})}return a},t);return n<1?qc((i,a)=>Ux(a)?qn(qn({},a),{},{velocity:Vh(a.velocity,r[i].velocity,n),from:Vh(a.from,r[i].from,n)}):a,t):HI(e,r,n-1)};function See(e,t,n,r,i,a){var o,u=r.reduce((y,v)=>qn(qn({},y),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>qc((y,v)=>v.from,u),d=()=>!Object.values(u).filter(Ux).length,h=null,m=y=>{o||(o=y);var v=y-o,k=v/n.dt;u=HI(n,u,k),i(qn(qn(qn({},e),t),f())),o=y,d()||(h=a.setTimeout(m))};return()=>(h=a.setTimeout(m),()=>{h()})}function kee(e,t,n,r,i,a,o){var u=null,f=i.reduce((m,y)=>qn(qn({},m),{},{[y]:[e[y],t[y]]}),{}),d,h=m=>{d||(d=m);var y=(m-d)/r,v=qc((S,C)=>Vh(...C,n(y)),f);if(a(qn(qn(qn({},e),t),v)),y<1)u=o.setTimeout(h);else{var k=qc((S,C)=>Vh(...C,n(1)),f);a(qn(qn(qn({},e),t),k))}};return()=>(u=o.setTimeout(h),()=>{u()})}const Eee=(e,t,n,r,i,a)=>{var o=xee(e,t);return n.isStepper===!0?See(e,t,n,o,i,a):kee(e,t,n,r,o,i,a)};var Hh=1e-4,GI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],KI=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),wA=(e,t)=>n=>{var r=GI(e,t);return KI(r,n)},Cee=(e,t)=>n=>{var r=GI(e,t),i=[...r.map((a,o)=>a*o).slice(1),0];return KI(i,n)},_A=function(){for(var t,n,r,i,a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];if(o.length===1)switch(o[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=o[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(k=>parseFloat(k)))}}else o.length===4&&([t,r,n,i]=o);var d=wA(t,n),h=wA(r,i),m=Cee(t,n),y=k=>k>1?1:k<0?0:k,v=k=>{for(var S=k>1?1:k,C=S,T=0;T<8;++T){var A=d(C)-S,N=m(C);if(Math.abs(A-S)<Hh||N<Hh)return h(C);C=y(C-A/N)}return h(C)};return v.isStepper=!1,v},Tee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(o,u,f)=>{var d=-(o-u)*n,h=f*r,m=f+(d-h)*i/1e3,y=f*i/1e3+o;return Math.abs(y-u)<Hh&&Math.abs(m)<Hh?[u,0]:[y,m]};return a.isStepper=!0,a.dt=i,a},Nee=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _A(e);case"spring":return Tee();default:if(e.split("(")[0]==="cubic-bezier")return _A(e)}return typeof e=="function"?e:null};function Aee(e){var t,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var u=o,[f,...d]=u;if(typeof f=="number"){i=e.setTimeout(a.bind(null,d),f);return}a(f),i=e.setTimeout(a.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class jee{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function Pee(){return Aee(new jee)}var Mee=_.createContext(Pee);function Oee(e,t){var n=_.useContext(Mee);return _.useMemo(()=>t??n(e),[e,t,n])}var Ree={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},SA={t:0},iv={t:1};function Kp(e){var t=ir(e,Ree),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:u,onAnimationStart:f,children:d}=t,h=Oee(t.animationId,t.animationManager),[m,y]=_.useState(n?SA:iv),v=_.useRef(null);return _.useEffect(()=>{n||y(iv)},[n]),_.useEffect(()=>{if(!n||!r)return hee;var k=Eee(SA,iv,Nee(a),i,y,h.getTimeoutController()),S=()=>{v.current=k()};return h.start([f,o,S,i,u]),()=>{h.stop(),v.current&&v.current(),u()}},[n,r,i,a,o,f,u,h]),d(m.t)}function Yp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=_.useRef(Dc(t)),r=_.useRef(e);return r.current!==e&&(n.current=Dc(t),r.current=e),n.current}var Iee=["radius"],Dee=["radius"];function kA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(n),!0).forEach(function(r){Lee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lee(e,t,n){return(t=Uee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uee(e){var t=qee(e,"string");return typeof t=="symbol"?t:t+""}function qee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gh.apply(null,arguments)}function CA(e,t){if(e==null)return{};var n,r,i=$ee(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $ee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var TA=(e,t,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,y=4;m<y;m++)h[m]=i[m]>a?a:i[m];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(f,",").concat(e+u*h[0],",").concat(t)),d+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+o*h[1])),d+="L ".concat(e+n,",").concat(t+r-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(f,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),d+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-o*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var v=Math.min(a,i);d="M ".concat(e,",").concat(t+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(f,",").concat(e+u*v,",").concat(t,`
            L `).concat(e+n-u*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(f,",").concat(e+n,",").concat(t+o*v,`
            L `).concat(e+n,",").concat(t+r-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(f,",").concat(e+n-u*v,",").concat(t+r,`
            L `).concat(e+u*v,",").concat(t+r,`
            A `).concat(v,",").concat(v,",0,0,").concat(f,",").concat(e,",").concat(t+r-o*v," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},Bee={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YI=e=>{var t=ir(e,Bee),n=_.useRef(null),[r,i]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var G=n.current.getTotalLength();G&&i(G)}catch{}},[]);var{x:a,y:o,width:u,height:f,radius:d,className:h}=t,{animationEasing:m,animationDuration:y,animationBegin:v,isAnimationActive:k,isUpdateAnimationActive:S}=t,C=_.useRef(u),T=_.useRef(f),A=_.useRef(a),N=_.useRef(o),O=_.useMemo(()=>({x:a,y:o,width:u,height:f,radius:d}),[a,o,u,f,d]),M=Yp(O,"rectangle-");if(a!==+a||o!==+o||u!==+u||f!==+f||u===0||f===0)return null;var P=kt("recharts-rectangle",h);if(!S){var D=ai(t),{radius:Y}=D,q=CA(D,Iee);return _.createElement("path",Gh({},q,{radius:typeof d=="number"?d:void 0,className:P,d:TA(a,o,u,f,d)}))}var W=C.current,F=T.current,$=A.current,R=N.current,z="0px ".concat(r===-1?1:r,"px"),V="".concat(r,"px 0px"),U=VI(["strokeDasharray"],y,typeof m=="string"?m:void 0);return _.createElement(Kp,{animationId:M,key:M,canBegin:r>0,duration:y,easing:m,isActive:S,begin:v},G=>{var le=$n(W,u,G),ye=$n(F,f,G),B=$n($,a,G),H=$n(R,o,G);n.current&&(C.current=le,T.current=ye,A.current=B,N.current=H);var Z;k?G>0?Z={transition:U,strokeDasharray:V}:Z={strokeDasharray:z}:Z={strokeDasharray:V};var I=ai(t),{radius:X}=I,re=CA(I,Dee);return _.createElement("path",Gh({},re,{radius:typeof d=="number"?d:void 0,className:P,d:TA(B,H,le,ye,d),ref:n,style:EA(EA({},Z),t.style)}))})};function WI(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,o=mn(t,n,r,i),u=mn(t,n,r,a);return{points:[o,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(null,arguments)}var zee=(e,t)=>{var n=Nn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},nh=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:u,cornerIsExternal:f}=e,d=u*(o?1:-1)+r,h=Math.asin(u/d)/zh,m=f?i:i+a*h,y=mn(t,n,d,m),v=mn(t,n,r,m),k=f?i-a*h:i,S=mn(t,n,d*Math.cos(h*zh),k);return{center:y,circleTangency:v,lineTangency:S,theta:h}},JI=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=e,u=zee(a,o),f=a+u,d=mn(t,n,i,a),h=mn(t,n,i,f),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>f),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var y=mn(t,n,r,a),v=mn(t,n,r,f);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=f),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},Fee=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:u,startAngle:f,endAngle:d}=e,h=Nn(d-f),{circleTangency:m,lineTangency:y,theta:v}=nh({cx:t,cy:n,radius:i,angle:f,sign:h,cornerRadius:a,cornerIsExternal:u}),{circleTangency:k,lineTangency:S,theta:C}=nh({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:u}),T=u?Math.abs(f-d):Math.abs(f-d)-v-C;if(T<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):JI({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var A="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:O,theta:M}=nh({cx:t,cy:n,radius:r,angle:f,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:P,lineTangency:D,theta:Y}=nh({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),q=u?Math.abs(f-d):Math.abs(f-d)-M-Y;if(q<0&&a===0)return"".concat(A,"L").concat(t,",").concat(n,"Z");A+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(q>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,"Z")}else A+="L".concat(t,",").concat(n,"Z");return A},Vee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XI=e=>{var t=ir(e,Vee),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:h,className:m}=t;if(a<i||d===h)return null;var y=kt("recharts-sector",m),v=a-i,k=Yn(o,v,0,!0),S;return k>0&&Math.abs(d-h)<360?S=Fee({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(k,v/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:h}):S=JI({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),_.createElement("path",qx({},ai(t),{className:y,d:S}))};function Hee(e,t,n){var r,i,a,o;if(e==="horizontal")r=t.x,a=r,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:f,innerRadius:d,outerRadius:h,angle:m}=t,y=mn(u,f,d,m),v=mn(u,f,h,m);r=y.x,i=y.y,a=v.x,o=v.y}else return WI(t);return[{x:r,y:i},{x:a,y:o}]}var av={},sv={},ov={},NA;function Gee(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XR();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(ov)),ov}var AA;function Kee(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gee();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(sv)),sv}var jA;function Yee(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QR(),n=Kee();function r(i,a,o){o&&typeof o!="number"&&t.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const u=Math.max(Math.ceil((a-i)/(o||1)),0),f=new Array(u);for(let d=0;d<u;d++)f[d]=i,i+=o;return f}e.range=r})(av)),av}var lv,PA;function Wee(){return PA||(PA=1,lv=Yee().range),lv}var Jee=Wee();const QI=Ur(Jee);function ds(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xee(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cw(e){let t,n,r;e.length!==2?(t=ds,n=(u,f)=>ds(e(u),f),r=(u,f)=>e(u)-f):(t=e===ds||e===Xee?e:Qee,n=e,r=e);function i(u,f,d=0,h=u.length){if(d<h){if(t(f,f)!==0)return h;do{const m=d+h>>>1;n(u[m],f)<0?d=m+1:h=m}while(d<h)}return d}function a(u,f,d=0,h=u.length){if(d<h){if(t(f,f)!==0)return h;do{const m=d+h>>>1;n(u[m],f)<=0?d=m+1:h=m}while(d<h)}return d}function o(u,f,d=0,h=u.length){const m=i(u,f,d,h-1);return m>d&&r(u[m-1],f)>-r(u[m],f)?m-1:m}return{left:i,center:o,right:a}}function Qee(){return 0}function ZI(e){return e===null?NaN:+e}function*Zee(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ete=Cw(ds),ad=ete.right;Cw(ZI).center;class MA extends Map{constructor(t,n=rte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(OA(this,t))}has(t){return super.has(OA(this,t))}set(t,n){return super.set(tte(this,t),n)}delete(t){return super.delete(nte(this,t))}}function OA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tte({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function nte({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rte(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ite(e=ds){if(e===ds)return eD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function eD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ate=Math.sqrt(50),ste=Math.sqrt(10),ote=Math.sqrt(2);function Kh(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ate?10:a>=ste?5:a>=ote?2:1;let u,f,d;return i<0?(d=Math.pow(10,-i)/o,u=Math.round(e*d),f=Math.round(t*d),u/d<e&&++u,f/d>t&&--f,d=-d):(d=Math.pow(10,i)*o,u=Math.round(e/d),f=Math.round(t/d),u*d<e&&++u,f*d>t&&--f),f<u&&.5<=n&&n<2?Kh(e,t,n*2):[u,f,d]}function $x(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Kh(t,e,n):Kh(e,t,n);if(!(a>=i))return[];const u=a-i+1,f=new Array(u);if(r)if(o<0)for(let d=0;d<u;++d)f[d]=(a-d)/-o;else for(let d=0;d<u;++d)f[d]=(a-d)*o;else if(o<0)for(let d=0;d<u;++d)f[d]=(i+d)/-o;else for(let d=0;d<u;++d)f[d]=(i+d)*o;return f}function Bx(e,t,n){return t=+t,e=+e,n=+n,Kh(e,t,n)[2]}function zx(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Bx(t,e,n):Bx(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function RA(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function IA(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tD(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?eD:ite(i);r>n;){if(r-n>600){const f=r-n+1,d=t-n+1,h=Math.log(f),m=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*m*(f-m)/f)*(d-f/2<0?-1:1),v=Math.max(n,Math.floor(t-d*m/f+y)),k=Math.min(r,Math.floor(t+(f-d)*m/f+y));tD(e,t,v,k,i)}const a=e[t];let o=n,u=r;for(hc(e,n,t),i(e[r],a)>0&&hc(e,n,r);o<u;){for(hc(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?hc(e,n,u):(++u,hc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function hc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function lte(e,t,n){if(e=Float64Array.from(Zee(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return IA(e);if(t>=1)return RA(e);var r,i=(r-1)*t,a=Math.floor(i),o=RA(tD(e,a).subarray(0,a+1)),u=IA(e.subarray(a+1));return o+(u-o)*(i-a)}}function ute(e,t,n=ZI){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function cte(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function ui(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ta(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Fx=Symbol("implicit");function Tw(){var e=new MA,t=[],n=[],r=Fx;function i(a){let o=e.get(a);if(o===void 0){if(r!==Fx)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new MA;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Tw(t,n).unknown(r)},ui.apply(i,arguments),i}function Nw(){var e=Tw().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,f=0,d=0,h=.5;delete e.unknown;function m(){var y=t().length,v=i<r,k=v?i:r,S=v?r:i;a=(S-k)/Math.max(1,y-f+d*2),u&&(a=Math.floor(a)),k+=(S-k-a*(y-f))*h,o=a*(1-f),u&&(k=Math.round(k),o=Math.round(o));var C=cte(y).map(function(T){return k+a*T});return n(v?C.reverse():C)}return e.domain=function(y){return arguments.length?(t(y),m()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(y){return arguments.length?(u=!!y,m()):u},e.padding=function(y){return arguments.length?(f=Math.min(1,d=+y),m()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),m()):f},e.paddingOuter=function(y){return arguments.length?(d=+y,m()):d},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),m()):h},e.copy=function(){return Nw(t(),[r,i]).round(u).paddingInner(f).paddingOuter(d).align(h)},ui.apply(m(),arguments)}function nD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nD(t())},e}function dte(){return nD(Nw.apply(null,arguments).paddingInner(1))}function Aw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rD(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function sd(){}var $c=.7,Yh=1/$c,Tl="\\s*([+-]?\\d+)\\s*",Bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fte=/^#([0-9a-f]{3,8})$/,hte=new RegExp(`^rgb\\(${Tl},${Tl},${Tl}\\)$`),pte=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),mte=new RegExp(`^rgba\\(${Tl},${Tl},${Tl},${Bc}\\)$`),gte=new RegExp(`^rgba\\(${Li},${Li},${Li},${Bc}\\)$`),yte=new RegExp(`^hsl\\(${Bc},${Li},${Li}\\)$`),vte=new RegExp(`^hsla\\(${Bc},${Li},${Li},${Bc}\\)$`),DA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Aw(sd,zc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:LA,formatHex:LA,formatHex8:xte,formatHsl:bte,formatRgb:UA,toString:UA});function LA(){return this.rgb().formatHex()}function xte(){return this.rgb().formatHex8()}function bte(){return iD(this).formatHsl()}function UA(){return this.rgb().formatRgb()}function zc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fte.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qA(t):n===3?new pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hte.exec(e))?new pr(t[1],t[2],t[3],1):(t=pte.exec(e))?new pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mte.exec(e))?rh(t[1],t[2],t[3],t[4]):(t=gte.exec(e))?rh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yte.exec(e))?zA(t[1],t[2]/100,t[3]/100,1):(t=vte.exec(e))?zA(t[1],t[2]/100,t[3]/100,t[4]):DA.hasOwnProperty(e)?qA(DA[e]):e==="transparent"?new pr(NaN,NaN,NaN,0):null}function qA(e){return new pr(e>>16&255,e>>8&255,e&255,1)}function rh(e,t,n,r){return r<=0&&(e=t=n=NaN),new pr(e,t,n,r)}function wte(e){return e instanceof sd||(e=zc(e)),e?(e=e.rgb(),new pr(e.r,e.g,e.b,e.opacity)):new pr}function Vx(e,t,n,r){return arguments.length===1?wte(e):new pr(e,t,n,r??1)}function pr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Aw(pr,Vx,rD(sd,{brighter(e){return e=e==null?Yh:Math.pow(Yh,e),new pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$c:Math.pow($c,e),new pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pr(no(this.r),no(this.g),no(this.b),Wh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$A,formatHex:$A,formatHex8:_te,formatRgb:BA,toString:BA}));function $A(){return`#${Xs(this.r)}${Xs(this.g)}${Xs(this.b)}`}function _te(){return`#${Xs(this.r)}${Xs(this.g)}${Xs(this.b)}${Xs((isNaN(this.opacity)?1:this.opacity)*255)}`}function BA(){const e=Wh(this.opacity);return`${e===1?"rgb(":"rgba("}${no(this.r)}, ${no(this.g)}, ${no(this.b)}${e===1?")":`, ${e})`}`}function Wh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function no(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xs(e){return e=no(e),(e<16?"0":"")+e.toString(16)}function zA(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _i(e,t,n,r)}function iD(e){if(e instanceof _i)return new _i(e.h,e.s,e.l,e.opacity);if(e instanceof sd||(e=zc(e)),!e)return new _i;if(e instanceof _i)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,f=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=f<.5?a+i:2-a-i,o*=60):u=f>0&&f<1?0:o,new _i(o,u,f,e.opacity)}function Ste(e,t,n,r){return arguments.length===1?iD(e):new _i(e,t,n,r??1)}function _i(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Aw(_i,Ste,rD(sd,{brighter(e){return e=e==null?Yh:Math.pow(Yh,e),new _i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$c:Math.pow($c,e),new _i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pr(uv(e>=240?e-240:e+120,i,r),uv(e,i,r),uv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new _i(FA(this.h),ih(this.s),ih(this.l),Wh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wh(this.opacity);return`${e===1?"hsl(":"hsla("}${FA(this.h)}, ${ih(this.s)*100}%, ${ih(this.l)*100}%${e===1?")":`, ${e})`}`}}));function FA(e){return e=(e||0)%360,e<0?e+360:e}function ih(e){return Math.max(0,Math.min(1,e||0))}function uv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jw=e=>()=>e;function kte(e,t){return function(n){return e+n*t}}function Ete(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cte(e){return(e=+e)==1?aD:function(t,n){return n-t?Ete(t,n,e):jw(isNaN(t)?n:t)}}function aD(e,t){var n=t-e;return n?kte(e,n):jw(isNaN(e)?t:e)}const VA=(function e(t){var n=Cte(t);function r(i,a){var o=n((i=Vx(i)).r,(a=Vx(a)).r),u=n(i.g,a.g),f=n(i.b,a.b),d=aD(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=u(h),i.b=f(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function Tte(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Nte(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ate(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Zl(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function jte(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Jh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Pte(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zl(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Hx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cv=new RegExp(Hx.source,"g");function Mte(e){return function(){return e}}function Ote(e){return function(t){return e(t)+""}}function Rte(e,t){var n=Hx.lastIndex=cv.lastIndex=0,r,i,a,o=-1,u=[],f=[];for(e=e+"",t=t+"";(r=Hx.exec(e))&&(i=cv.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,f.push({i:o,x:Jh(r,i)})),n=cv.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?f[0]?Ote(f[0].x):Mte(t):(t=f.length,function(d){for(var h=0,m;h<t;++h)u[(m=f[h]).i]=m.x(d);return u.join("")})}function Zl(e,t){var n=typeof t,r;return t==null||n==="boolean"?jw(t):(n==="number"?Jh:n==="string"?(r=zc(t))?(t=r,VA):Rte:t instanceof zc?VA:t instanceof Date?jte:Nte(t)?Tte:Array.isArray(t)?Ate:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pte:Jh)(e,t)}function Pw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ite(e,t){t===void 0&&(t=e,e=Zl);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Dte(e){return function(){return e}}function Xh(e){return+e}var HA=[0,1];function nr(e){return e}function Gx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dte(isNaN(t)?NaN:.5)}function Lte(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ute(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Gx(i,r),a=n(o,a)):(r=Gx(r,i),a=n(a,o)),function(u){return a(r(u))}}function qte(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Gx(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var f=ad(e,u,1,r)-1;return a[f](i[f](u))}}function od(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wp(){var e=HA,t=HA,n=Zl,r,i,a,o=nr,u,f,d;function h(){var y=Math.min(e.length,t.length);return o!==nr&&(o=Lte(e[0],e[y-1])),u=y>2?qte:Ute,f=d=null,m}function m(y){return y==null||isNaN(y=+y)?a:(f||(f=u(e.map(r),t,n)))(r(o(y)))}return m.invert=function(y){return o(i((d||(d=u(t,e.map(r),Jh)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,Xh),h()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=Pw,h()},m.clamp=function(y){return arguments.length?(o=y?!0:nr,h()):o!==nr},m.interpolate=function(y){return arguments.length?(n=y,h()):n},m.unknown=function(y){return arguments.length?(a=y,m):a},function(y,v){return r=y,i=v,h()}}function Mw(){return Wp()(nr,nr)}function $te(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Rl(e){return e=Qh(Math.abs(e)),e?e[1]:NaN}function Bte(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),a.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function zte(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Fte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fc(e){if(!(t=Fte.exec(e)))throw new Error("invalid format: "+e);var t;return new Ow({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fc.prototype=Ow.prototype;function Ow(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ow.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vte(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var sD;function Hte(e,t){var n=Qh(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(sD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Qh(e,Math.max(0,t+a-1))[0]}function GA(e,t){var n=Qh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const KA={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$te,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>GA(e*100,t),r:GA,s:Hte,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YA(e){return e}var WA=Array.prototype.map,JA=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gte(e){var t=e.grouping===void 0||e.thousands===void 0?YA:Bte(WA.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?YA:zte(WA.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(m){m=Fc(m);var y=m.fill,v=m.align,k=m.sign,S=m.symbol,C=m.zero,T=m.width,A=m.comma,N=m.precision,O=m.trim,M=m.type;M==="n"?(A=!0,M="g"):KA[M]||(N===void 0&&(N=12),O=!0,M="g"),(C||y==="0"&&v==="=")&&(C=!0,y="0",v="=");var P=S==="$"?n:S==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",D=S==="$"?r:/[%p]/.test(M)?o:"",Y=KA[M],q=/[defgprs%]/.test(M);N=N===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function W(F){var $=P,R=D,z,V,U;if(M==="c")R=Y(F)+R,F="";else{F=+F;var G=F<0||1/F<0;if(F=isNaN(F)?f:Y(Math.abs(F),N),O&&(F=Vte(F)),G&&+F==0&&k!=="+"&&(G=!1),$=(G?k==="("?k:u:k==="-"||k==="("?"":k)+$,R=(M==="s"?JA[8+sD/3]:"")+R+(G&&k==="("?")":""),q){for(z=-1,V=F.length;++z<V;)if(U=F.charCodeAt(z),48>U||U>57){R=(U===46?i+F.slice(z+1):F.slice(z))+R,F=F.slice(0,z);break}}}A&&!C&&(F=t(F,1/0));var le=$.length+F.length+R.length,ye=le<T?new Array(T-le+1).join(y):"";switch(A&&C&&(F=t(ye+F,ye.length?T-R.length:1/0),ye=""),v){case"<":F=$+F+R+ye;break;case"=":F=$+ye+F+R;break;case"^":F=ye.slice(0,le=ye.length>>1)+$+F+R+ye.slice(le);break;default:F=ye+$+F+R;break}return a(F)}return W.toString=function(){return m+""},W}function h(m,y){var v=d((m=Fc(m),m.type="f",m)),k=Math.max(-8,Math.min(8,Math.floor(Rl(y)/3)))*3,S=Math.pow(10,-k),C=JA[8+k/3];return function(T){return v(S*T)+C}}return{format:d,formatPrefix:h}}var ah,Rw,oD;Kte({thousands:",",grouping:[3],currency:["$",""]});function Kte(e){return ah=Gte(e),Rw=ah.format,oD=ah.formatPrefix,ah}function Yte(e){return Math.max(0,-Rl(Math.abs(e)))}function Wte(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rl(t)/3)))*3-Rl(Math.abs(e)))}function Jte(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rl(t)-Rl(e))+1}function lD(e,t,n,r){var i=zx(e,t,n),a;switch(r=Fc(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Wte(i,o))&&(r.precision=a),oD(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Jte(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Yte(i))&&(r.precision=a-(r.type==="%")*2);break}}return Rw(r)}function vs(e){var t=e.domain;return e.ticks=function(n){var r=t();return $x(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return lD(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],f,d,h=10;for(u<o&&(d=o,o=u,u=d,d=i,i=a,a=d);h-- >0;){if(d=Bx(o,u,n),d===f)return r[i]=o,r[a]=u,t(r);if(d>0)o=Math.floor(o/d)*d,u=Math.ceil(u/d)*d;else if(d<0)o=Math.ceil(o*d)/d,u=Math.floor(u*d)/d;else break;f=d}return e},e}function uD(){var e=Mw();return e.copy=function(){return od(e,uD())},ui.apply(e,arguments),vs(e)}function cD(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Xh),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return cD(e).unknown(t)},e=arguments.length?Array.from(e,Xh):[0,1],vs(n)}function dD(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function XA(e){return Math.log(e)}function QA(e){return Math.exp(e)}function Xte(e){return-Math.log(-e)}function Qte(e){return-Math.exp(-e)}function Zte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ene(e){return e===10?Zte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ZA(e){return(t,n)=>-e(-t,n)}function Iw(e){const t=e(XA,QA),n=t.domain;let r=10,i,a;function o(){return i=tne(r),a=ene(r),n()[0]<0?(i=ZA(i),a=ZA(a),e(Xte,Qte)):e(XA,QA),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const f=n();let d=f[0],h=f[f.length-1];const m=h<d;m&&([d,h]=[h,d]);let y=i(d),v=i(h),k,S;const C=u==null?10:+u;let T=[];if(!(r%1)&&v-y<C){if(y=Math.floor(y),v=Math.ceil(v),d>0){for(;y<=v;++y)for(k=1;k<r;++k)if(S=y<0?k/a(-y):k*a(y),!(S<d)){if(S>h)break;T.push(S)}}else for(;y<=v;++y)for(k=r-1;k>=1;--k)if(S=y>0?k/a(-y):k*a(y),!(S<d)){if(S>h)break;T.push(S)}T.length*2<C&&(T=$x(d,h,C))}else T=$x(y,v,Math.min(v-y,C)).map(a);return m?T.reverse():T},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Fc(f)).precision==null&&(f.trim=!0),f=Rw(f)),u===1/0)return f;const d=Math.max(1,r*u/t.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=d?f(h):""}},t.nice=()=>n(dD(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function fD(){const e=Iw(Wp()).domain([1,10]);return e.copy=()=>od(e,fD()).base(e.base()),ui.apply(e,arguments),e}function ej(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dw(e){var t=1,n=e(ej(t),tj(t));return n.constant=function(r){return arguments.length?e(ej(t=+r),tj(t)):t},vs(n)}function hD(){var e=Dw(Wp());return e.copy=function(){return od(e,hD()).constant(e.constant())},ui.apply(e,arguments)}function nj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rne(e){return e<0?-e*e:e*e}function Lw(e){var t=e(nr,nr),n=1;function r(){return n===1?e(nr,nr):n===.5?e(nne,rne):e(nj(n),nj(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},vs(t)}function Uw(){var e=Lw(Wp());return e.copy=function(){return od(e,Uw()).exponent(e.exponent())},ui.apply(e,arguments),e}function ine(){return Uw.apply(null,arguments).exponent(.5)}function rj(e){return Math.sign(e)*e*e}function ane(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function pD(){var e=Mw(),t=[0,1],n=!1,r;function i(a){var o=ane(e(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return e.invert(rj(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Xh)).map(rj)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return pD(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ui.apply(i,arguments),vs(i)}function mD(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=ute(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[ad(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ds),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return mD().domain(e).range(t).unknown(r)},ui.apply(a,arguments)}function gD(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(f){return f!=null&&f<=f?i[ad(r,f,0,n)]:a}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return o}return o.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,u()):[e,t]},o.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},o.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},o.unknown=function(f){return arguments.length&&(a=f),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gD().domain([e,t]).range(i).unknown(a)},ui.apply(vs(o),arguments)}function yD(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[ad(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yD().domain(e).range(t).unknown(n)},ui.apply(i,arguments)}const dv=new Date,fv=new Date;function _n(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const f=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return f;let d;do f.push(d=new Date(+a)),t(a,u),e(a);while(d<a&&a<o);return f},i.filter=a=>_n(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(dv.setTime(+a),fv.setTime(+o),e(dv),e(fv),Math.floor(n(dv,fv))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Zh=_n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_n(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zh);Zh.range;const fa=1e3,ni=fa*60,ha=ni*60,ba=ha*24,qw=ba*7,ij=ba*30,hv=ba*365,Qs=_n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fa)},(e,t)=>(t-e)/fa,e=>e.getUTCSeconds());Qs.range;const $w=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fa)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getMinutes());$w.range;const Bw=_n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getUTCMinutes());Bw.range;const zw=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fa-e.getMinutes()*ni)},(e,t)=>{e.setTime(+e+t*ha)},(e,t)=>(t-e)/ha,e=>e.getHours());zw.range;const Fw=_n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ha)},(e,t)=>(t-e)/ha,e=>e.getUTCHours());Fw.range;const ld=_n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ni)/ba,e=>e.getDate()-1);ld.range;const Jp=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ba,e=>e.getUTCDate()-1);Jp.range;const vD=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ba,e=>Math.floor(e/ba));vD.range;function _o(e){return _n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ni)/qw)}const Xp=_o(0),ep=_o(1),sne=_o(2),one=_o(3),Il=_o(4),lne=_o(5),une=_o(6);Xp.range;ep.range;sne.range;one.range;Il.range;lne.range;une.range;function So(e){return _n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/qw)}const Qp=So(0),tp=So(1),cne=So(2),dne=So(3),Dl=So(4),fne=So(5),hne=So(6);Qp.range;tp.range;cne.range;dne.range;Dl.range;fne.range;hne.range;const Vw=_n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Vw.range;const Hw=_n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hw.range;const wa=_n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});wa.range;const _a=_n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_a.range;function xD(e,t,n,r,i,a){const o=[[Qs,1,fa],[Qs,5,5*fa],[Qs,15,15*fa],[Qs,30,30*fa],[a,1,ni],[a,5,5*ni],[a,15,15*ni],[a,30,30*ni],[i,1,ha],[i,3,3*ha],[i,6,6*ha],[i,12,12*ha],[r,1,ba],[r,2,2*ba],[n,1,qw],[t,1,ij],[t,3,3*ij],[e,1,hv]];function u(d,h,m){const y=h<d;y&&([d,h]=[h,d]);const v=m&&typeof m.range=="function"?m:f(d,h,m),k=v?v.range(d,+h+1):[];return y?k.reverse():k}function f(d,h,m){const y=Math.abs(h-d)/m,v=Cw(([,,C])=>C).right(o,y);if(v===o.length)return e.every(zx(d/hv,h/hv,m));if(v===0)return Zh.every(Math.max(zx(d,h,m),1));const[k,S]=o[y/o[v-1][2]<o[v][2]/y?v-1:v];return k.every(S)}return[u,f]}const[pne,mne]=xD(_a,Hw,Qp,vD,Fw,Bw),[gne,yne]=xD(wa,Vw,Xp,ld,zw,$w);function pv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vne(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,f=e.shortMonths,d=mc(i),h=gc(i),m=mc(a),y=gc(a),v=mc(o),k=gc(o),S=mc(u),C=gc(u),T=mc(f),A=gc(f),N={a:G,A:le,b:ye,B,c:null,d:cj,e:cj,f:Bne,g:Xne,G:Zne,H:Une,I:qne,j:$ne,L:bD,m:zne,M:Fne,p:H,q:Z,Q:hj,s:pj,S:Vne,u:Hne,U:Gne,V:Kne,w:Yne,W:Wne,x:null,X:null,y:Jne,Y:Qne,Z:ere,"%":fj},O={a:I,A:X,b:re,B:me,c:null,d:dj,e:dj,f:ire,g:pre,G:gre,H:tre,I:nre,j:rre,L:_D,m:are,M:sre,p:we,q:$e,Q:hj,s:pj,S:ore,u:lre,U:ure,V:cre,w:dre,W:fre,x:null,X:null,y:hre,Y:mre,Z:yre,"%":fj},M={a:W,A:F,b:$,B:R,c:z,d:lj,e:lj,f:Rne,g:oj,G:sj,H:uj,I:uj,j:jne,L:One,m:Ane,M:Pne,p:q,q:Nne,Q:Dne,s:Lne,S:Mne,u:Sne,U:kne,V:Ene,w:_ne,W:Cne,x:V,X:U,y:oj,Y:sj,Z:Tne,"%":Ine};N.x=P(n,N),N.X=P(r,N),N.c=P(t,N),O.x=P(n,O),O.X=P(r,O),O.c=P(t,O);function P(ne,Se){return function(Ee){var ge=[],bt=-1,We=0,ct=ne.length,Ft,Pn,Xn;for(Ee instanceof Date||(Ee=new Date(+Ee));++bt<ct;)ne.charCodeAt(bt)===37&&(ge.push(ne.slice(We,bt)),(Pn=aj[Ft=ne.charAt(++bt)])!=null?Ft=ne.charAt(++bt):Pn=Ft==="e"?" ":"0",(Xn=Se[Ft])&&(Ft=Xn(Ee,Pn)),ge.push(Ft),We=bt+1);return ge.push(ne.slice(We,bt)),ge.join("")}}function D(ne,Se){return function(Ee){var ge=pc(1900,void 0,1),bt=Y(ge,ne,Ee+="",0),We,ct;if(bt!=Ee.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Se&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(We=mv(pc(ge.y,0,1)),ct=We.getUTCDay(),We=ct>4||ct===0?tp.ceil(We):tp(We),We=Jp.offset(We,(ge.V-1)*7),ge.y=We.getUTCFullYear(),ge.m=We.getUTCMonth(),ge.d=We.getUTCDate()+(ge.w+6)%7):(We=pv(pc(ge.y,0,1)),ct=We.getDay(),We=ct>4||ct===0?ep.ceil(We):ep(We),We=ld.offset(We,(ge.V-1)*7),ge.y=We.getFullYear(),ge.m=We.getMonth(),ge.d=We.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ct="Z"in ge?mv(pc(ge.y,0,1)).getUTCDay():pv(pc(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ct+5)%7:ge.w+ge.U*7-(ct+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,mv(ge)):pv(ge)}}function Y(ne,Se,Ee,ge){for(var bt=0,We=Se.length,ct=Ee.length,Ft,Pn;bt<We;){if(ge>=ct)return-1;if(Ft=Se.charCodeAt(bt++),Ft===37){if(Ft=Se.charAt(bt++),Pn=M[Ft in aj?Se.charAt(bt++):Ft],!Pn||(ge=Pn(ne,Ee,ge))<0)return-1}else if(Ft!=Ee.charCodeAt(ge++))return-1}return ge}function q(ne,Se,Ee){var ge=d.exec(Se.slice(Ee));return ge?(ne.p=h.get(ge[0].toLowerCase()),Ee+ge[0].length):-1}function W(ne,Se,Ee){var ge=v.exec(Se.slice(Ee));return ge?(ne.w=k.get(ge[0].toLowerCase()),Ee+ge[0].length):-1}function F(ne,Se,Ee){var ge=m.exec(Se.slice(Ee));return ge?(ne.w=y.get(ge[0].toLowerCase()),Ee+ge[0].length):-1}function $(ne,Se,Ee){var ge=T.exec(Se.slice(Ee));return ge?(ne.m=A.get(ge[0].toLowerCase()),Ee+ge[0].length):-1}function R(ne,Se,Ee){var ge=S.exec(Se.slice(Ee));return ge?(ne.m=C.get(ge[0].toLowerCase()),Ee+ge[0].length):-1}function z(ne,Se,Ee){return Y(ne,t,Se,Ee)}function V(ne,Se,Ee){return Y(ne,n,Se,Ee)}function U(ne,Se,Ee){return Y(ne,r,Se,Ee)}function G(ne){return o[ne.getDay()]}function le(ne){return a[ne.getDay()]}function ye(ne){return f[ne.getMonth()]}function B(ne){return u[ne.getMonth()]}function H(ne){return i[+(ne.getHours()>=12)]}function Z(ne){return 1+~~(ne.getMonth()/3)}function I(ne){return o[ne.getUTCDay()]}function X(ne){return a[ne.getUTCDay()]}function re(ne){return f[ne.getUTCMonth()]}function me(ne){return u[ne.getUTCMonth()]}function we(ne){return i[+(ne.getUTCHours()>=12)]}function $e(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var Se=P(ne+="",N);return Se.toString=function(){return ne},Se},parse:function(ne){var Se=D(ne+="",!1);return Se.toString=function(){return ne},Se},utcFormat:function(ne){var Se=P(ne+="",O);return Se.toString=function(){return ne},Se},utcParse:function(ne){var Se=D(ne+="",!0);return Se.toString=function(){return ne},Se}}}var aj={"-":"",_:" ",0:"0"},jn=/^\s*\d+/,xne=/^%/,bne=/[\\^$*+?|[\]().{}]/g;function pt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function wne(e){return e.replace(bne,"\\$&")}function mc(e){return new RegExp("^(?:"+e.map(wne).join("|")+")","i")}function gc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _ne(e,t,n){var r=jn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Sne(e,t,n){var r=jn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function kne(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ene(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Cne(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sj(e,t,n){var r=jn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function oj(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Tne(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Nne(e,t,n){var r=jn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Ane(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function lj(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function jne(e,t,n){var r=jn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uj(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Pne(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mne(e,t,n){var r=jn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function One(e,t,n){var r=jn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Rne(e,t,n){var r=jn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ine(e,t,n){var r=xne.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Dne(e,t,n){var r=jn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Lne(e,t,n){var r=jn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cj(e,t){return pt(e.getDate(),t,2)}function Une(e,t){return pt(e.getHours(),t,2)}function qne(e,t){return pt(e.getHours()%12||12,t,2)}function $ne(e,t){return pt(1+ld.count(wa(e),e),t,3)}function bD(e,t){return pt(e.getMilliseconds(),t,3)}function Bne(e,t){return bD(e,t)+"000"}function zne(e,t){return pt(e.getMonth()+1,t,2)}function Fne(e,t){return pt(e.getMinutes(),t,2)}function Vne(e,t){return pt(e.getSeconds(),t,2)}function Hne(e){var t=e.getDay();return t===0?7:t}function Gne(e,t){return pt(Xp.count(wa(e)-1,e),t,2)}function wD(e){var t=e.getDay();return t>=4||t===0?Il(e):Il.ceil(e)}function Kne(e,t){return e=wD(e),pt(Il.count(wa(e),e)+(wa(e).getDay()===4),t,2)}function Yne(e){return e.getDay()}function Wne(e,t){return pt(ep.count(wa(e)-1,e),t,2)}function Jne(e,t){return pt(e.getFullYear()%100,t,2)}function Xne(e,t){return e=wD(e),pt(e.getFullYear()%100,t,2)}function Qne(e,t){return pt(e.getFullYear()%1e4,t,4)}function Zne(e,t){var n=e.getDay();return e=n>=4||n===0?Il(e):Il.ceil(e),pt(e.getFullYear()%1e4,t,4)}function ere(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pt(t/60|0,"0",2)+pt(t%60,"0",2)}function dj(e,t){return pt(e.getUTCDate(),t,2)}function tre(e,t){return pt(e.getUTCHours(),t,2)}function nre(e,t){return pt(e.getUTCHours()%12||12,t,2)}function rre(e,t){return pt(1+Jp.count(_a(e),e),t,3)}function _D(e,t){return pt(e.getUTCMilliseconds(),t,3)}function ire(e,t){return _D(e,t)+"000"}function are(e,t){return pt(e.getUTCMonth()+1,t,2)}function sre(e,t){return pt(e.getUTCMinutes(),t,2)}function ore(e,t){return pt(e.getUTCSeconds(),t,2)}function lre(e){var t=e.getUTCDay();return t===0?7:t}function ure(e,t){return pt(Qp.count(_a(e)-1,e),t,2)}function SD(e){var t=e.getUTCDay();return t>=4||t===0?Dl(e):Dl.ceil(e)}function cre(e,t){return e=SD(e),pt(Dl.count(_a(e),e)+(_a(e).getUTCDay()===4),t,2)}function dre(e){return e.getUTCDay()}function fre(e,t){return pt(tp.count(_a(e)-1,e),t,2)}function hre(e,t){return pt(e.getUTCFullYear()%100,t,2)}function pre(e,t){return e=SD(e),pt(e.getUTCFullYear()%100,t,2)}function mre(e,t){return pt(e.getUTCFullYear()%1e4,t,4)}function gre(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dl(e):Dl.ceil(e),pt(e.getUTCFullYear()%1e4,t,4)}function yre(){return"+0000"}function fj(){return"%"}function hj(e){return+e}function pj(e){return Math.floor(+e/1e3)}var hl,kD,ED;vre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vre(e){return hl=vne(e),kD=hl.format,hl.parse,ED=hl.utcFormat,hl.utcParse,hl}function xre(e){return new Date(e)}function bre(e){return e instanceof Date?+e:+new Date(+e)}function Gw(e,t,n,r,i,a,o,u,f,d){var h=Mw(),m=h.invert,y=h.domain,v=d(".%L"),k=d(":%S"),S=d("%I:%M"),C=d("%I %p"),T=d("%a %d"),A=d("%b %d"),N=d("%B"),O=d("%Y");function M(P){return(f(P)<P?v:u(P)<P?k:o(P)<P?S:a(P)<P?C:r(P)<P?i(P)<P?T:A:n(P)<P?N:O)(P)}return h.invert=function(P){return new Date(m(P))},h.domain=function(P){return arguments.length?y(Array.from(P,bre)):y().map(xre)},h.ticks=function(P){var D=y();return e(D[0],D[D.length-1],P??10)},h.tickFormat=function(P,D){return D==null?M:d(D)},h.nice=function(P){var D=y();return(!P||typeof P.range!="function")&&(P=t(D[0],D[D.length-1],P??10)),P?y(dD(D,P)):h},h.copy=function(){return od(h,Gw(e,t,n,r,i,a,o,u,f,d))},h}function wre(){return ui.apply(Gw(gne,yne,wa,Vw,Xp,ld,zw,$w,Qs,kD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _re(){return ui.apply(Gw(pne,mne,_a,Hw,Qp,Jp,Fw,Bw,Qs,ED).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zp(){var e=0,t=1,n,r,i,a,o=nr,u=!1,f;function d(m){return m==null||isNaN(m=+m)?f:o(i===0?.5:(m=(a(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(m){return arguments.length?(u=!!m,d):u},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(y){var v,k;return arguments.length?([v,k]=y,o=m(v,k),d):[o(0),o(1)]}}return d.range=h(Zl),d.rangeRound=h(Pw),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return a=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),d}}function xs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function CD(){var e=vs(Zp()(nr));return e.copy=function(){return xs(e,CD())},Ta.apply(e,arguments)}function TD(){var e=Iw(Zp()).domain([1,10]);return e.copy=function(){return xs(e,TD()).base(e.base())},Ta.apply(e,arguments)}function ND(){var e=Dw(Zp());return e.copy=function(){return xs(e,ND()).constant(e.constant())},Ta.apply(e,arguments)}function Kw(){var e=Lw(Zp());return e.copy=function(){return xs(e,Kw()).exponent(e.exponent())},Ta.apply(e,arguments)}function Sre(){return Kw.apply(null,arguments).exponent(.5)}function AD(){var e=[],t=nr;function n(r){if(r!=null&&!isNaN(r=+r))return t((ad(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ds),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>lte(e,a/r))},n.copy=function(){return AD(t).domain(e)},Ta.apply(n,arguments)}function em(){var e=0,t=.5,n=1,r=1,i,a,o,u,f,d=nr,h,m=!1,y;function v(S){return isNaN(S=+S)?y:(S=.5+((S=+h(S))-a)*(r*S<r*a?u:f),d(m?Math.max(0,Math.min(1,S)):S))}v.domain=function(S){return arguments.length?([e,t,n]=S,i=h(e=+e),a=h(t=+t),o=h(n=+n),u=i===a?0:.5/(a-i),f=a===o?0:.5/(o-a),r=a<i?-1:1,v):[e,t,n]},v.clamp=function(S){return arguments.length?(m=!!S,v):m},v.interpolator=function(S){return arguments.length?(d=S,v):d};function k(S){return function(C){var T,A,N;return arguments.length?([T,A,N]=C,d=Ite(S,[T,A,N]),v):[d(0),d(.5),d(1)]}}return v.range=k(Zl),v.rangeRound=k(Pw),v.unknown=function(S){return arguments.length?(y=S,v):y},function(S){return h=S,i=S(e),a=S(t),o=S(n),u=i===a?0:.5/(a-i),f=a===o?0:.5/(o-a),r=a<i?-1:1,v}}function jD(){var e=vs(em()(nr));return e.copy=function(){return xs(e,jD())},Ta.apply(e,arguments)}function PD(){var e=Iw(em()).domain([.1,1,10]);return e.copy=function(){return xs(e,PD()).base(e.base())},Ta.apply(e,arguments)}function MD(){var e=Dw(em());return e.copy=function(){return xs(e,MD()).constant(e.constant())},Ta.apply(e,arguments)}function Yw(){var e=Lw(em());return e.copy=function(){return xs(e,Yw()).exponent(e.exponent())},Ta.apply(e,arguments)}function kre(){return Yw.apply(null,arguments).exponent(.5)}const wc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nw,scaleDiverging:jD,scaleDivergingLog:PD,scaleDivergingPow:Yw,scaleDivergingSqrt:kre,scaleDivergingSymlog:MD,scaleIdentity:cD,scaleImplicit:Fx,scaleLinear:uD,scaleLog:fD,scaleOrdinal:Tw,scalePoint:dte,scalePow:Uw,scaleQuantile:mD,scaleQuantize:gD,scaleRadial:pD,scaleSequential:CD,scaleSequentialLog:TD,scaleSequentialPow:Kw,scaleSequentialQuantile:AD,scaleSequentialSqrt:Sre,scaleSequentialSymlog:ND,scaleSqrt:ine,scaleSymlog:hD,scaleThreshold:yD,scaleTime:wre,scaleUtc:_re,tickFormat:lD},Symbol.toStringTag,{value:"Module"}));var bs=e=>e.chartData,Ww=oe([bs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jw=(e,t,n,r)=>r?Ww(e):bs(e);function uo(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Wn(t)&&Wn(n))return!0}return!1}function mj(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function OD(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Wn(n))i=n;else if(typeof n=="function")return;if(Wn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(uo(o))return o}}function Ere(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(uo(r))return mj(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,o,u;if(i==="auto")t!=null&&(o=Math.min(...t));else if(Le(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&QN.test(i)){var f=QN.exec(i);if(f==null||t==null)o=void 0;else{var d=+f[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(Le(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&ZN.test(a)){var h=ZN.exec(a);if(h==null||t==null)u=void 0;else{var m=+h[1];u=t[1]+m}}else u=t==null?void 0:t[1];var y=[o,u];if(uo(y))return t==null?y:mj(y,t,n)}}}var eu=1e9,Cre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Qw,Kt=!0,li="[DecimalError] ",ro=li+"Invalid argument: ",Xw=li+"Exponent out of range: ",tu=Math.floor,Ks=Math.pow,Tre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rr,Cn=1e7,zt=7,RD=9007199254740991,np=tu(RD/zt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*zt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return ga(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return Pt(ga(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return gn(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Rr))throw Error(li+"NaN");if(n.s<1)throw Error(li+(n.s?"NaN":"-Infinity"));return n.eq(Rr)?new r(0):(Kt=!1,t=ga(Vc(n,a),Vc(e,a),a),Kt=!0,Pt(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LD(t,e):ID(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(li+"NaN");return n.s?(Kt=!1,t=ga(n,e,0,1).times(e),Kt=!0,n.minus(t)):Pt(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return DD(this)};Ae.naturalLogarithm=Ae.ln=function(){return Vc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ID(t,e):LD(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ro+e);if(t=gn(i)+1,r=i.d.length-1,n=r*zt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,a,o,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(li+"NaN")}for(e=gn(u),Kt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=Di(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=tu((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=o=n+3;;)if(a=r,r=a.plus(ga(u,a,o+2)).times(.5),Di(a.d).slice(0,o)===(t=Di(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Pt(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(t!="9999")break;o+=4}return Kt=!0,Pt(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,a,o,u,f,d,h=this,m=h.constructor,y=h.d,v=(e=new m(e)).d;if(!h.s||!e.s)return new m(0);for(e.s*=h.s,n=h.e+e.e,f=y.length,d=v.length,f<d&&(a=y,y=v,v=a,o=f,f=d,d=o),a=[],o=f+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=f+r;i>r;)u=a[i]+v[r]*y[i-r-1]+t,a[i--]=u%Cn|0,t=u/Cn|0;a[i]=(a[i]+t)%Cn|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Kt?Pt(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:($i(e,0,eu),t===void 0?t=r.rounding:$i(t,0,8),Pt(n,e+gn(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=co(r,!0):($i(e,0,eu),t===void 0?t=i.rounding:$i(t,0,8),r=Pt(new i(r),e+1,t),n=co(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?co(i):($i(e,0,eu),t===void 0?t=a.rounding:$i(t,0,8),r=Pt(new a(i),e+gn(i)+1,t),n=co(r.abs(),!1,e+gn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return Pt(new t(e),gn(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,a,o,u=this,f=u.constructor,d=12,h=+(e=new f(e));if(!e.s)return new f(Rr);if(u=new f(u),!u.s){if(e.s<1)throw Error(li+"Infinity");return u}if(u.eq(Rr))return u;if(r=f.precision,e.eq(Rr))return Pt(u,r);if(t=e.e,n=e.d.length-1,o=t>=n,a=u.s,o){if((n=h<0?-h:h)<=RD){for(i=new f(Rr),t=Math.ceil(r/zt+4),Kt=!1;n%2&&(i=i.times(u),yj(i.d,t)),n=tu(n/2),n!==0;)u=u.times(u),yj(u.d,t);return Kt=!0,e.s<0?new f(Rr).div(i):Pt(i,r)}}else if(a<0)throw Error(li+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,Kt=!1,i=e.times(Vc(u,r+d)),Kt=!0,i=DD(i),i.s=a,i};Ae.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=gn(i),r=co(i,n<=a.toExpNeg||n>=a.toExpPos)):($i(e,1,eu),t===void 0?t=a.rounding:$i(t,0,8),i=Pt(new a(i),e,t),n=gn(i),r=co(i,e<=n||n<=a.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):($i(e,1,eu),t===void 0?t=r.rounding:$i(t,0,8)),Pt(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gn(e),n=e.constructor;return co(e,t<=n.toExpNeg||t>=n.toExpPos)};function ID(e,t){var n,r,i,a,o,u,f,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Kt?Pt(t,m):t;if(f=e.d,d=t.d,o=e.e,i=t.e,f=f.slice(),a=o-i,a){for(a<0?(r=f,a=-a,u=d.length):(r=d,i=o,u=f.length),o=Math.ceil(m/zt),u=o>u?o+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=f.length,a=d.length,u-a<0&&(a=u,r=d,d=f,f=r),n=0;a;)n=(f[--a]=f[a]+d[a]+n)/Cn|0,f[a]%=Cn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return t.d=f,t.e=i,Kt?Pt(t,m):t}function $i(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ro+e)}function Di(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=zt-r.length,n&&(a+=os(n)),a+=r;o=e[t],r=o+"",n=zt-r.length,n&&(a+=os(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ga=(function(){function e(r,i){var a,o=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+o,r[u]=a%Cn|0,o=a/Cn|0;return o&&r.unshift(o),r}function t(r,i,a,o){var u,f;if(a!=o)f=a>o?1:-1;else for(u=f=0;u<a;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Cn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var u,f,d,h,m,y,v,k,S,C,T,A,N,O,M,P,D,Y,q=r.constructor,W=r.s==i.s?1:-1,F=r.d,$=i.d;if(!r.s)return new q(r);if(!i.s)throw Error(li+"Division by zero");for(f=r.e-i.e,D=$.length,M=F.length,v=new q(W),k=v.d=[],d=0;$[d]==(F[d]||0);)++d;if($[d]>(F[d]||0)&&--f,a==null?A=a=q.precision:o?A=a+(gn(r)-gn(i))+1:A=a,A<0)return new q(0);if(A=A/zt+2|0,d=0,D==1)for(h=0,$=$[0],A++;(d<M||h)&&A--;d++)N=h*Cn+(F[d]||0),k[d]=N/$|0,h=N%$|0;else{for(h=Cn/($[0]+1)|0,h>1&&($=e($,h),F=e(F,h),D=$.length,M=F.length),O=D,S=F.slice(0,D),C=S.length;C<D;)S[C++]=0;Y=$.slice(),Y.unshift(0),P=$[0],$[1]>=Cn/2&&++P;do h=0,u=t($,S,D,C),u<0?(T=S[0],D!=C&&(T=T*Cn+(S[1]||0)),h=T/P|0,h>1?(h>=Cn&&(h=Cn-1),m=e($,h),y=m.length,C=S.length,u=t(m,S,y,C),u==1&&(h--,n(m,D<y?Y:$,y))):(h==0&&(u=h=1),m=$.slice()),y=m.length,y<C&&m.unshift(0),n(S,m,C),u==-1&&(C=S.length,u=t($,S,D,C),u<1&&(h++,n(S,D<C?Y:$,C))),C=S.length):u===0&&(h++,S=[0]),k[d++]=h,u&&S[0]?S[C++]=F[O]||0:(S=[F[O]],C=1);while((O++<M||S[0]!==void 0)&&A--)}return k[0]||k.shift(),v.e=f,Pt(v,o?a+gn(v)+1:a)}})();function DD(e,t){var n,r,i,a,o,u,f=0,d=0,h=e.constructor,m=h.precision;if(gn(e)>16)throw Error(Xw+gn(e));if(!e.s)return new h(Rr);for(Kt=!1,u=m,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(r=Math.log(Ks(2,d))/Math.LN10*2+5|0,u+=r,n=i=a=new h(Rr),h.precision=u;;){if(i=Pt(i.times(e),u),n=n.times(++f),o=a.plus(ga(i,n,u)),Di(o.d).slice(0,u)===Di(a.d).slice(0,u)){for(;d--;)a=Pt(a.times(a),u);return h.precision=m,t==null?(Kt=!0,Pt(a,m)):a}a=o}}function gn(e){for(var t=e.e*zt,n=e.d[0];n>=10;n/=10)t++;return t}function gv(e,t,n){if(t>e.LN10.sd())throw Kt=!0,n&&(e.precision=n),Error(li+"LN10 precision limit exceeded");return Pt(new e(e.LN10),t)}function os(e){for(var t="";e--;)t+="0";return t}function Vc(e,t){var n,r,i,a,o,u,f,d,h,m=1,y=10,v=e,k=v.d,S=v.constructor,C=S.precision;if(v.s<1)throw Error(li+(v.s?"NaN":"-Infinity"));if(v.eq(Rr))return new S(0);if(t==null?(Kt=!1,d=C):d=t,v.eq(10))return t==null&&(Kt=!0),gv(S,d);if(d+=y,S.precision=d,n=Di(k),r=n.charAt(0),a=gn(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(e),n=Di(v.d),r=n.charAt(0),m++;a=gn(v),r>1?(v=new S("0."+n),a++):v=new S(r+"."+n.slice(1))}else return f=gv(S,d+2,C).times(a+""),v=Vc(new S(r+"."+n.slice(1)),d-y).plus(f),S.precision=C,t==null?(Kt=!0,Pt(v,C)):v;for(u=o=v=ga(v.minus(Rr),v.plus(Rr),d),h=Pt(v.times(v),d),i=3;;){if(o=Pt(o.times(h),d),f=u.plus(ga(o,new S(i),d)),Di(f.d).slice(0,d)===Di(u.d).slice(0,d))return u=u.times(2),a!==0&&(u=u.plus(gv(S,d+2,C).times(a+""))),u=ga(u,new S(m),d),S.precision=C,t==null?(Kt=!0,Pt(u,C)):u;u=f,i+=2}}function gj(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=tu(n/zt),e.d=[],r=(n+1)%zt,n<0&&(r+=zt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=zt;r<i;)e.d.push(+t.slice(r,r+=zt));t=t.slice(r),r=zt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Kt&&(e.e>np||e.e<-np))throw Error(Xw+n)}else e.s=0,e.e=0,e.d=[0];return e}function Pt(e,t,n){var r,i,a,o,u,f,d,h,m=e.d;for(o=1,a=m[0];a>=10;a/=10)o++;if(r=t-o,r<0)r+=zt,i=t,d=m[h=0];else{if(h=Math.ceil((r+1)/zt),a=m.length,h>=a)return e;for(d=a=m[h],o=1;a>=10;a/=10)o++;r%=zt,i=r-zt+o}if(n!==void 0&&(a=Ks(10,o-i-1),u=d/a%10|0,f=t<0||m[h+1]!==void 0||d%a,f=n<4?(u||f)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?d/Ks(10,o-i):0:m[h-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return f?(a=gn(e),m.length=1,t=t-a-1,m[0]=Ks(10,(zt-t%zt)%zt),e.e=tu(-t/zt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=h,a=1,h--):(m.length=h+1,a=Ks(10,zt-r),m[h]=i>0?(d/Ks(10,o-i)%Ks(10,i)|0)*a:0),f)for(;;)if(h==0){(m[0]+=a)==Cn&&(m[0]=1,++e.e);break}else{if(m[h]+=a,m[h]!=Cn)break;m[h--]=0,a=1}for(r=m.length;m[--r]===0;)m.pop();if(Kt&&(e.e>np||e.e<-np))throw Error(Xw+gn(e));return e}function LD(e,t){var n,r,i,a,o,u,f,d,h,m,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Kt?Pt(t,v):t;if(f=e.d,m=t.d,r=t.e,d=e.e,f=f.slice(),o=d-r,o){for(h=o<0,h?(n=f,o=-o,u=m.length):(n=m,r=d,u=f.length),i=Math.max(Math.ceil(v/zt),u)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=m.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(f[i]!=m[i]){h=f[i]<m[i];break}o=0}for(h&&(n=f,f=m,m=n,t.s=-t.s),u=f.length,i=m.length-u;i>0;--i)f[u++]=0;for(i=m.length;i>o;){if(f[--i]<m[i]){for(a=i;a&&f[--a]===0;)f[a]=Cn-1;--f[a],f[i]+=Cn}f[i]-=m[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,Kt?Pt(t,v):t):new y(0)}function co(e,t,n){var r,i=gn(e),a=Di(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+os(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+os(-i-1)+a,n&&(r=n-o)>0&&(a+=os(r))):i>=o?(a+=os(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+os(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=os(r))),e.s<0?"-"+a:a}function yj(e,t){if(e.length>t)return e.length=t,!0}function UD(e){var t,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ro+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return gj(o,a.toString())}else if(typeof a!="string")throw Error(ro+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Tre.test(a))gj(o,a);else throw Error(ro+a)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=UD,i.config=i.set=Nre,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Nre(e){if(!e||typeof e!="object")throw Error(li+"Object expected");var t,n,r,i=["precision",1,eu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(tu(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(ro+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ro+n+": "+r);return this}var Qw=UD(Cre);Rr=new Qw(1);const St=Qw;var Are=e=>e,qD={},$D=e=>e===qD,vj=e=>function t(){return arguments.length===0||arguments.length===1&&$D(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},BD=(e,t)=>e===1?t:vj(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==qD).length;return a>=e?t(...r):BD(e-a,vj(function(){for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];var d=r.map(h=>$D(h)?u.shift():h);return t(...d,...u)}))}),tm=e=>BD(e.length,e),Kx=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},jre=tm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Pre=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Are;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((u,f)=>f(u),a(...arguments))}},Yx=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),zD=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((o,u)=>{var f;return o===((f=t)===null||f===void 0?void 0:f[u])})||(t=i,n=e(...i)),n}};function FD(e){var t;return e===0?t=1:t=Math.floor(new St(e).abs().log(10).toNumber())+1,t}function VD(e,t,n){for(var r=new St(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}tm((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});tm((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});tm((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var HD=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},GD=(e,t,n)=>{if(e.lte(0))return new St(0);var r=FD(e.toNumber()),i=new St(10).pow(r),a=e.div(i),o=r!==1?.05:.1,u=new St(Math.ceil(a.div(o).toNumber())).add(n).mul(o),f=u.mul(i);return t?new St(f.toNumber()):new St(Math.ceil(f.toNumber()))},Mre=(e,t,n)=>{var r=new St(1),i=new St(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new St(10).pow(FD(e)-1),i=new St(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new St(Math.floor(e)))}else e===0?i=new St(Math.floor((t-1)/2)):n||(i=new St(Math.floor(e)));var o=Math.floor((t-1)/2),u=Pre(jre(f=>i.add(new St(f-o).mul(r)).toNumber()),Kx);return u(0,t)},KD=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var o=GD(new St(n).sub(t).div(r-1),i,a),u;t<=0&&n>=0?u=new St(0):(u=new St(t).add(n).div(2),u=u.sub(new St(u).mod(o)));var f=Math.ceil(u.sub(t).div(o).toNumber()),d=Math.ceil(new St(n).sub(u).div(o).toNumber()),h=f+d+1;return h>r?KD(t,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,f=n>0?f:f+(r-h)),{step:o,tickMin:u.sub(new St(f).mul(o)),tickMax:u.add(new St(d).mul(o))})};function Ore(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[o,u]=HD([t,n]);if(o===-1/0||u===1/0){var f=u===1/0?[o,...Kx(0,r-1).map(()=>1/0)]:[...Kx(0,r-1).map(()=>-1/0),u];return t>n?Yx(f):f}if(o===u)return Mre(o,r,i);var{step:d,tickMin:h,tickMax:m}=KD(o,u,a,i,0),y=VD(h,m.add(new St(.1).mul(d)),d);return t>n?Yx(y):y}function Rre(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=HD([n,r]);if(a===-1/0||o===1/0)return[n,r];if(a===o)return[a];var u=Math.max(t,2),f=GD(new St(o).sub(a).div(u-1),i,0),d=[...VD(new St(a),new St(o),f),o];return i===!1&&(d=d.map(h=>Math.round(h))),n>r?Yx(d):d}var Ire=zD(Ore),Dre=zD(Rre),YD=e=>e.rootProps.maxBarSize,Lre=e=>e.rootProps.barGap,WD=e=>e.rootProps.barCategoryGap,Ure=e=>e.rootProps.barSize,ud=e=>e.rootProps.stackOffset,Zw=e=>e.options.chartName,e1=e=>e.rootProps.syncId,JD=e=>e.rootProps.syncMethod,t1=e=>e.options.eventEmitter,ca={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Pr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},nm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},qre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ca.angleAxisId,includeHidden:!1,name:void 0,reversed:ca.reversed,scale:ca.scale,tick:ca.tick,tickCount:void 0,ticks:void 0,type:ca.type,unit:void 0},$re={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:Pr.type,unit:void 0},Bre={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},zre={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:"category",unit:void 0},n1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Bre:qre,r1=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?zre:$re,rm=e=>e.polarOptions,i1=oe([Ea,Ca,wn],TI),XD=oe([rm,i1],(e,t)=>{if(e!=null)return Yn(e.innerRadius,t,0)}),QD=oe([rm,i1],(e,t)=>{if(e!=null)return Yn(e.outerRadius,t,t*.8)}),Fre=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},ZD=oe([rm],Fre);oe([n1,ZD],nm);var e4=oe([i1,XD,QD],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});oe([r1,e4],nm);var t4=oe([mt,rm,XD,QD,Ea,Ca],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:o,cy:u,startAngle:f,endAngle:d}=t;return{cx:Yn(o,i,i/2),cy:Yn(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),Jt=(e,t)=>t,cd=(e,t,n)=>n;function a1(e){return e==null?void 0:e.id}var Sn=e=>{var t=mt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},nu=e=>e.tooltip.settings.axisId,kn=e=>{var t=Sn(e),n=nu(e);return dd(e,t,n)},n4=oe([kn],e=>e==null?void 0:e.dataKey);function r4(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return e.forEach(u=>{var f,d=(f=u.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var h=a1(u);d.forEach((m,y)=>{var v=a==null||i?y:String(Qt(m,a,null)),k=Qt(m,u.dataKey,0),S;o.has(v)?S=o.get(v):S={},Object.assign(S,{[h]:k}),o.set(v,S)})}}),Array.from(o.values())}function im(e){return e.stackId!=null&&e.dataKey!=null}var am=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function sm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(n),!0).forEach(function(r){Vre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vre(e,t,n){return(t=Hre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hre(e){var t=Gre(e,"string");return typeof t=="symbol"?t:t+""}function Gre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wx=[0,"auto"],Ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},i4=(e,t)=>e.cartesianAxis.xAxis[t],Na=(e,t)=>{var n=i4(e,t);return n??Ar},jr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Wx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:rd},a4=(e,t)=>e.cartesianAxis.yAxis[t],Aa=(e,t)=>{var n=a4(e,t);return n??jr},Kre={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},s1=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??Kre},Zt=(e,t,n)=>{switch(t){case"xAxis":return Na(e,n);case"yAxis":return Aa(e,n);case"zAxis":return s1(e,n);case"angleAxis":return n1(e,n);case"radiusAxis":return r1(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Yre=(e,t,n)=>{switch(t){case"xAxis":return Na(e,n);case"yAxis":return Aa(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},dd=(e,t,n)=>{switch(t){case"xAxis":return Na(e,n);case"yAxis":return Aa(e,n);case"angleAxis":return n1(e,n);case"radiusAxis":return r1(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},s4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function o1(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var l1=e=>e.graphicalItems.cartesianItems,Wre=oe([Jt,cd],o1),u1=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),fd=oe([l1,Zt,Wre],u1,{memoizeOptions:{resultEqualityCheck:sm}}),o4=oe([fd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(im)),l4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Jre=oe([fd],l4),c1=e=>e.map(t=>t.data).filter(Boolean).flat(1),Xre=oe([fd],c1,{memoizeOptions:{resultEqualityCheck:sm}}),d1=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},f1=oe([Xre,Jw],d1),h1=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Qt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Qt(i,r)}))):e.map(r=>({value:r})),om=oe([f1,Zt,fd],h1);function u4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function gh(e){if(qi(e)||e instanceof Date){var t=Number(e);if(Wn(t))return t}}function bj(e){if(Array.isArray(e)){var t=[gh(e[0]),gh(e[1])];return uo(t)?t:void 0}var n=gh(e);if(n!=null)return[n,n]}function ru(e){return e.map(gh).filter(pee)}function Qre(e,t,n){return!n||typeof t!="number"||si(t)?[]:n.length?ru(n.flatMap(r=>{var i=Qt(e,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Wn(a)||!Wn(o)))return[t-a,t+o]})):[]}var Zre=oe([o4,Jw,kn],r4),c4=(e,t,n)=>{var r={},i=t.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[o,u]=a,f=u.map(a1);return[o,{stackedData:LQ(e,f,n),graphicalItems:u}]}))},Jx=oe([Zre,o4,ud],c4),d4=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var o=zQ(e,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},eie=oe([Zt],e=>e.allowDataOverflow),p1=e=>{var t;if(e==null||!("domain"in e))return Wx;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=ru(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Wx},m1=oe([Zt],p1),g1=oe([m1,eie],OD),tie=oe([Jx,bs,Jt,g1],d4,{memoizeOptions:{resultEqualityCheck:am}}),lm=e=>e.errorBars,nie=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>u4(n,r)),ip=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),u=Math.max(...a);return[o,u]}},y1=(e,t,n,r,i)=>{var a,o;if(n.length>0&&e.forEach(u=>{n.forEach(f=>{var d,h,m=(d=r[f.id])===null||d===void 0?void 0:d.filter(T=>u4(i,T)),y=Qt(u,(h=t.dataKey)!==null&&h!==void 0?h:f.dataKey),v=Qre(u,y,m);if(v.length>=2){var k=Math.min(...v),S=Math.max(...v);(a==null||k<a)&&(a=k),(o==null||S>o)&&(o=S)}var C=bj(y);C!=null&&(a=a==null?C[0]:Math.min(a,C[0]),o=o==null?C[1]:Math.max(o,C[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var f=bj(Qt(u,t.dataKey));f!=null&&(a=a==null?f[0]:Math.min(a,f[0]),o=o==null?f[1]:Math.max(o,f[1]))}),Wn(a)&&Wn(o))return[a,o]},rie=oe([f1,Zt,Jre,lm,Jt],y1,{memoizeOptions:{resultEqualityCheck:am}});function iie(e){var{value:t}=e;if(qi(t)||t instanceof Date)return t}var aie=(e,t,n)=>{var r=e.map(iie).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&qR(r))?QI(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},f4=e=>e.referenceElements.dots,iu=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),sie=oe([f4,Jt,cd],iu),h4=e=>e.referenceElements.areas,oie=oe([h4,Jt,cd],iu),p4=e=>e.referenceElements.lines,lie=oe([p4,Jt,cd],iu),m4=(e,t)=>{var n=ru(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uie=oe(sie,Jt,m4),g4=(e,t)=>{var n=ru(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cie=oe([oie,Jt],g4),y4=(e,t)=>{var n=ru(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},die=oe(lie,Jt,y4),fie=oe(uie,die,cie,(e,t,n)=>ip(e,n,t)),v1=(e,t,n,r,i,a,o,u)=>{if(n!=null)return n;var f=o==="vertical"&&u==="xAxis"||o==="horizontal"&&u==="yAxis",d=f?ip(r,a,i):ip(a,i);return Ere(t,d,e.allowDataOverflow)},hie=oe([Zt,m1,g1,tie,rie,fie,mt,Jt],v1,{memoizeOptions:{resultEqualityCheck:am}}),pie=[0,1],x1=(e,t,n,r,i,a,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:u,type:f}=e,d=bo(t,a);return d&&u==null?QI(0,n.length):f==="category"?aie(r,e,d):i==="expand"?pie:o}},b1=oe([Zt,mt,f1,om,ud,Jt,hie],x1),v4=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:o}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(Zc(a));return u in wc?u:"point"}}},au=oe([Zt,mt,s4,Zw,Jt],v4);function mie(e){if(e!=null){if(e in wc)return wc[e]();var t="scale".concat(Zc(e));if(t in wc)return wc[t]()}}function w1(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=mie(t);if(i!=null){var a=i.domain(n).range(r);return MQ(a),a}}}var _1=(e,t,n)=>{var r=p1(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&uo(e))return Ire(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&uo(e))return Dre(e,t.tickCount,t.allowDecimals)}},S1=oe([b1,dd,au],_1),k1=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&uo(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],o=t[1],u=n[n.length-1];return[Math.min(i,a),Math.max(o,u)]}return t},gie=oe([Zt,b1,S1,Jt],k1),yie=oe(om,Zt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(ru(e.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),x4=oe(yie,mt,WD,wn,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Wn(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var o=Yn(n,e*a),u=e*a/2;return u-o-(u-o)/a*o}return 0}),vie=(e,t)=>{var n=Na(e,t);return n==null||typeof n.padding!="string"?0:x4(e,"xAxis",t,n.padding)},xie=(e,t)=>{var n=Aa(e,t);return n==null||typeof n.padding!="string"?0:x4(e,"yAxis",t,n.padding)},bie=oe(Na,vie,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),wie=oe(Aa,xie,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),_ie=oe([wn,bie,Vp,Fp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Sie=oe([wn,mt,wie,Vp,Fp,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),hd=(e,t,n,r)=>{var i;switch(t){case"xAxis":return _ie(e,n,r);case"yAxis":return Sie(e,n,r);case"zAxis":return(i=s1(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return ZD(e);case"radiusAxis":return e4(e,n);default:return}},b4=oe([Zt,hd],nm),su=oe([Zt,au,gie,b4],w1);oe([fd,lm,Jt],nie);function w4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var um=(e,t)=>t,cm=(e,t,n)=>n,kie=oe(Bp,um,cm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(w4)),Eie=oe(zp,um,cm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(w4)),_4=(e,t)=>({width:e.width,height:t.height}),Cie=(e,t)=>{var n=typeof t.width=="number"?t.width:rd;return{width:n,height:e.height}},S4=oe(wn,Na,_4),Tie=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Nie=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Aie=oe(Ca,wn,kie,um,cm,(e,t,n,r,i)=>{var a={},o;return n.forEach(u=>{var f=_4(t,u);o==null&&(o=Tie(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;a[u.id]=o-Number(d)*f.height,o+=(d?-1:1)*f.height}),a}),jie=oe(Ea,wn,Eie,um,cm,(e,t,n,r,i)=>{var a={},o;return n.forEach(u=>{var f=Cie(t,u);o==null&&(o=Nie(t,r,e));var d=r==="left"&&!i||r==="right"&&i;a[u.id]=o-Number(d)*f.width,o+=(d?-1:1)*f.width}),a}),Pie=(e,t)=>{var n=Na(e,t);if(n!=null)return Aie(e,n.orientation,n.mirror)},Mie=oe([wn,Na,Pie,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),Oie=(e,t)=>{var n=Aa(e,t);if(n!=null)return jie(e,n.orientation,n.mirror)},Rie=oe([wn,Aa,Oie,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),k4=oe(wn,Aa,(e,t)=>{var n=typeof t.width=="number"?t.width:rd;return{width:n,height:e.height}}),wj=(e,t,n)=>{switch(t){case"xAxis":return S4(e,n).width;case"yAxis":return k4(e,n).height;default:return}},E4=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,u=bo(e,r),f=t.map(d=>d.value);if(o&&u&&a==="category"&&i&&qR(f))return f}},E1=oe([mt,om,Zt,Jt],E4),C4=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=bo(e,r);if(o&&(i==="number"||a!=="auto"))return t.map(u=>u.value)}},C1=oe([mt,om,dd,Jt],C4),_j=oe([mt,Yre,au,su,E1,C1,hd,S1,Jt],(e,t,n,r,i,a,o,u,f)=>{if(t==null)return null;var d=bo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:u,range:o,realScaleType:n,scale:r}}),Iie=(e,t,n,r,i,a,o,u,f)=>{if(!(t==null||r==null)){var d=bo(e,f),{type:h,ticks:m,tickCount:y}=t,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,k=h==="category"&&r.bandwidth?r.bandwidth()/v:0;k=f==="angleAxis"&&a!=null&&a.length>=2?Nn(a[0]-a[1])*2*k:k;var S=m||i;if(S){var C=S.map((T,A)=>{var N=o?o.indexOf(T):T;return{index:A,coordinate:r(N)+k,value:T,offset:k}});return C.filter(T=>!si(T.coordinate))}return d&&u?u.map((T,A)=>({coordinate:r(T)+k,value:T,index:A,offset:k})):r.ticks?r.ticks(y).map(T=>({coordinate:r(T)+k,value:T,offset:k})):r.domain().map((T,A)=>({coordinate:r(T)+k,value:o?o[T]:T,index:A,offset:k}))}},T4=oe([mt,dd,au,su,S1,hd,E1,C1,Jt],Iie),Die=(e,t,n,r,i,a,o)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=bo(e,o),{tickCount:f}=t,d=0;return d=o==="angleAxis"&&(r==null?void 0:r.length)>=2?Nn(r[0]-r[1])*2*d:d,u&&a?a.map((h,m)=>({coordinate:n(h)+d,value:h,index:m,offset:d})):n.ticks?n.ticks(f).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,m)=>({coordinate:n(h)+d,value:i?i[h]:h,index:m,offset:d}))}},Ll=oe([mt,dd,su,hd,E1,C1,Jt],Die),Ul=oe(Zt,su,(e,t)=>{if(!(e==null||t==null))return rp(rp({},e),{},{scale:t})}),Lie=oe([Zt,au,b1,b4],w1);oe((e,t,n)=>s1(e,n),Lie,(e,t)=>{if(!(e==null||t==null))return rp(rp({},e),{},{scale:t})});var Uie=oe([mt,Bp,zp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),N4=e=>e.options.defaultTooltipEventType,A4=e=>e.options.validateTooltipEventTypes;function j4(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function T1(e,t){var n=N4(e),r=A4(e);return j4(t,n,r)}function qie(e){return De(t=>T1(t,e))}var P4=(e,t)=>{var n,r=Number(t);if(!(si(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},$ie=e=>e.tooltip.settings,cs={active:!1,index:null,dataKey:void 0,coordinate:void 0},Bie={itemInteraction:{click:cs,hover:cs},axisInteraction:{click:cs,hover:cs},keyboardInteraction:cs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},M4=qr({name:"tooltip",initialState:Bie,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:er()},removeTooltipEntrySettings:{reducer(e,t){var n=ma(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:er()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:zie,removeTooltipEntrySettings:Fie,setTooltipSettingsState:Vie,setActiveMouseOverItemIndex:O4,mouseLeaveItem:Hie,mouseLeaveChart:R4,setActiveClickItemIndex:Gie,setMouseOverAxisIndex:I4,setMouseClickAxisIndex:Kie,setSyncInteraction:Xx,setKeyboardInteraction:Qx}=M4.actions,Yie=M4.reducer;function Sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(n),!0).forEach(function(r){Wie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wie(e,t,n){return(t=Jie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jie(e){var t=Xie(e,"string");return typeof t=="symbol"?t:t+""}function Xie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qie(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Zie(e){return e.index!=null}var D4=(e,t,n,r)=>{if(t==null)return cs;var i=Qie(e,t,n);if(i==null)return cs;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Zie(i)){if(a)return sh(sh({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return sh(sh({},cs),{},{coordinate:i.coordinate})},N1=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!Wn(r))return n;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(r,a)))},L4=(e,t,n,r,i,a,o,u)=>{if(!(a==null||u==null)){var f=o[0],d=f==null?void 0:u(f.positions,a);if(d!=null)return d;var h=i==null?void 0:i[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},U4=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},pd=e=>e.options.tooltipPayloadSearcher,ou=e=>e.tooltip;function kj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ej(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(n),!0).forEach(function(r){eae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eae(e,t,n){return(t=tae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tae(e){var t=nae(e,"string");return typeof t=="symbol"?t:t+""}function nae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rae(e,t){return e??t}var q4=(e,t,n,r,i,a,o)=>{if(!(t==null||a==null)){var{chartData:u,computedData:f,dataStartIndex:d,dataEndIndex:h}=n,m=[];return e.reduce((y,v)=>{var k,{dataDefinedOnItem:S,settings:C}=v,T=rae(S,u),A=Array.isArray(T)?NI(T,d,h):T,N=(k=C==null?void 0:C.dataKey)!==null&&k!==void 0?k:r,O=C==null?void 0:C.nameKey,M;if(r&&Array.isArray(A)&&!Array.isArray(A[0])&&o==="axis"?M=hJ(A,r,i):M=a(A,t,f,O),Array.isArray(M))M.forEach(D=>{var Y=Ej(Ej({},C),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(eA({tooltipEntrySettings:Y,dataKey:D.dataKey,payload:D.payload,value:Qt(D.payload,D.dataKey),name:D.name}))});else{var P;y.push(eA({tooltipEntrySettings:C,dataKey:N,payload:M,value:Qt(M,N),name:(P=Qt(M,O))!==null&&P!==void 0?P:C==null?void 0:C.name}))}return y},m)}},A1=oe([kn,mt,s4,Zw,Sn],v4),iae=oe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),aae=oe([Sn,nu],o1),md=oe([iae,kn,aae],u1,{memoizeOptions:{resultEqualityCheck:sm}}),sae=oe([md],e=>e.filter(im)),oae=oe([md],c1,{memoizeOptions:{resultEqualityCheck:sm}}),lu=oe([oae,bs],d1),lae=oe([sae,bs,kn],r4),j1=oe([lu,kn,md],h1),$4=oe([kn],p1),uae=oe([kn],e=>e.allowDataOverflow),B4=oe([$4,uae],OD),cae=oe([md],e=>e.filter(im)),dae=oe([lae,cae,ud],c4),fae=oe([dae,bs,Sn,B4],d4),hae=oe([md],l4),pae=oe([lu,kn,hae,lm,Sn],y1,{memoizeOptions:{resultEqualityCheck:am}}),mae=oe([f4,Sn,nu],iu),gae=oe([mae,Sn],m4),yae=oe([h4,Sn,nu],iu),vae=oe([yae,Sn],g4),xae=oe([p4,Sn,nu],iu),bae=oe([xae,Sn],y4),wae=oe([gae,bae,vae],ip),_ae=oe([kn,$4,B4,fae,pae,wae,mt,Sn],v1),z4=oe([kn,mt,lu,j1,ud,Sn,_ae],x1),Sae=oe([z4,kn,A1],_1),kae=oe([kn,z4,Sae,Sn],k1),F4=e=>{var t=Sn(e),n=nu(e),r=!1;return hd(e,t,n,r)},V4=oe([kn,F4],nm),H4=oe([kn,A1,kae,V4],w1),Eae=oe([mt,j1,kn,Sn],E4),Cae=oe([mt,j1,kn,Sn],C4),Tae=(e,t,n,r,i,a,o,u)=>{if(t){var{type:f}=t,d=bo(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=f==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Nn(i[0]-i[1])*2*m:m,d&&o?o.map((y,v)=>({coordinate:r(y)+m,value:y,index:v,offset:m})):r.domain().map((y,v)=>({coordinate:r(y)+m,value:a?a[y]:y,index:v,offset:m}))}}},ja=oe([mt,kn,A1,H4,F4,Eae,Cae,Sn],Tae),P1=oe([N4,A4,$ie],(e,t,n)=>j4(n.shared,e,t)),G4=e=>e.tooltip.settings.trigger,M1=e=>e.tooltip.settings.defaultIndex,dm=oe([ou,P1,G4,M1],D4),fo=oe([dm,lu],N1),K4=oe([ja,fo],P4),Y4=oe([dm],e=>{if(e)return e.dataKey}),W4=oe([ou,P1,G4,M1],U4),Nae=oe([Ea,Ca,mt,wn,ja,M1,W4,pd],L4),Aae=oe([dm,Nae],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),jae=oe([dm],e=>e.active),Pae=oe([W4,fo,bs,n4,K4,pd,P1],q4);oe([Pae],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(n),!0).forEach(function(r){Mae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mae(e,t,n){return(t=Oae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oae(e){var t=Rae(e,"string");return typeof t=="symbol"?t:t+""}function Rae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iae=()=>De(kn),Dae=()=>{var e=Iae(),t=De(ja),n=De(H4);return xw(Tj(Tj({},e),{},{scale:n}),t)},Lae=()=>De(Zw),O1=(e,t)=>t,J4=(e,t,n)=>n,R1=(e,t,n,r)=>r,Uae=oe(ja,e=>Rp(e,t=>t.coordinate)),I1=oe([ou,O1,J4,R1],D4),X4=oe([I1,lu],N1),qae=(e,t,n)=>{if(t!=null){var r=ou(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Q4=oe([ou,O1,J4,R1],U4),ap=oe([Ea,Ca,mt,wn,ja,R1,Q4,pd],L4),$ae=oe([I1,ap],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),Z4=oe(ja,X4,P4),Bae=oe([Q4,X4,bs,n4,Z4,pd,O1],q4),zae=oe([I1],e=>({isActive:e.active,activeIndex:e.index})),Fae=(e,t,n,r,i,a,o,u)=>{if(!(!e||!t||!r||!i||!a)){var f=FQ(e.chartX,e.chartY,t,n,u);if(f){var d=HQ(f,t),h=jQ(d,o,a,r,i),m=VQ(t,a,h,f);return{activeIndex:String(h),activeCoordinate:m}}}};function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zx.apply(null,arguments)}function Nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nj(Object(n),!0).forEach(function(r){Vae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vae(e,t,n){return(t=Hae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hae(e){var t=Gae(e,"string");return typeof t=="symbol"?t:t+""}function Gae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kae(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:o,cursor:u,tooltipEventType:f,chartName:d}=e,h=t,m=n,y=r;if(!u||!h||d!=="ScatterChart"&&f!=="axis")return null;var v,k;if(d==="ScatterChart")v=h,k=oee;else if(d==="BarChart")v=lee(o,h,i,a),k=YI;else if(o==="radial"){var{cx:S,cy:C,radius:T,startAngle:A,endAngle:N}=WI(h);v={cx:S,cy:C,startAngle:A,endAngle:N,innerRadius:T,outerRadius:T},k=XI}else v={points:Hee(o,h,i)},k=FI;var O=typeof u=="object"&&"className"in u?u.className:void 0,M=oh(oh(oh(oh({stroke:"#ccc",pointerEvents:"none"},i),v),Ic(u)),{},{payload:m,payloadIndex:y,className:kt("recharts-tooltip-cursor",O)});return _.isValidElement(u)?_.cloneElement(u,M):_.createElement(k,M)}function Yae(e){var t=Dae(),n=UI(),r=kw(),i=Lae();return _.createElement(Kae,Zx({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var eL=_.createContext(null),Wae=()=>_.useContext(eL),yv={exports:{}},Aj;function Jae(){return Aj||(Aj=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,h){this.fn=f,this.context=d,this.once=h||!1}function a(f,d,h,m,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,m||f,y),k=n?n+d:d;return f._events[k]?f._events[k].fn?f._events[k]=[f._events[k],v]:f._events[k].push(v):(f._events[k]=v,f._eventsCount++),f}function o(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)t.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},u.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,v=m.length,k=new Array(v);y<v;y++)k[y]=m[y].fn;return k},u.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},u.prototype.emit=function(d,h,m,y,v,k){var S=n?n+d:d;if(!this._events[S])return!1;var C=this._events[S],T=arguments.length,A,N;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,m),!0;case 4:return C.fn.call(C.context,h,m,y),!0;case 5:return C.fn.call(C.context,h,m,y,v),!0;case 6:return C.fn.call(C.context,h,m,y,v,k),!0}for(N=1,A=new Array(T-1);N<T;N++)A[N-1]=arguments[N];C.fn.apply(C.context,A)}else{var O=C.length,M;for(N=0;N<O;N++)switch(C[N].once&&this.removeListener(d,C[N].fn,void 0,!0),T){case 1:C[N].fn.call(C[N].context);break;case 2:C[N].fn.call(C[N].context,h);break;case 3:C[N].fn.call(C[N].context,h,m);break;case 4:C[N].fn.call(C[N].context,h,m,y);break;default:if(!A)for(M=1,A=new Array(T-1);M<T;M++)A[M-1]=arguments[M];C[N].fn.apply(C[N].context,A)}}return!0},u.prototype.on=function(d,h,m){return a(this,d,h,m,!1)},u.prototype.once=function(d,h,m){return a(this,d,h,m,!0)},u.prototype.removeListener=function(d,h,m,y){var v=n?n+d:d;if(!this._events[v])return this;if(!h)return o(this,v),this;var k=this._events[v];if(k.fn)k.fn===h&&(!y||k.once)&&(!m||k.context===m)&&o(this,v);else{for(var S=0,C=[],T=k.length;S<T;S++)(k[S].fn!==h||y&&!k[S].once||m&&k[S].context!==m)&&C.push(k[S]);C.length?this._events[v]=C.length===1?C[0]:C:o(this,v)}return this},u.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(yv)),yv.exports}var Xae=Jae();const Qae=Ur(Xae);var Hc=new Qae,eb="recharts.syncEvent.tooltip",jj="recharts.syncEvent.brush";function tL(e,t){if(t){var n=Number.parseInt(t,10);if(!si(n))return e==null?void 0:e[n]}}var Zae={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},nL=qr({name:"options",initialState:Zae,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ese=nL.reducer,{createEventEmitter:tse}=nL.actions;function nse(e){return e.tooltip.syncInteraction}var rse={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rL=qr({name:"chartData",initialState:rse,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:Pj,setDataStartEndIndexes:ise,setComputedData:qpe}=rL.actions,ase=rL.reducer,sse=["x","y"];function Mj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mj(Object(n),!0).forEach(function(r){ose(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ose(e,t,n){return(t=lse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lse(e){var t=use(e,"string");return typeof t=="symbol"?t:t+""}function use(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cse(e,t){if(e==null)return{};var n,r,i=dse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iL=()=>{};function fse(){var e=De(e1),t=De(t1),n=Wt(),r=De(JD),i=De(ja),a=kw(),o=Hp(),u=De(f=>f.rootProps.className);_.useEffect(()=>{if(e==null)return iL;var f=(d,h,m)=>{if(t!==m&&e===d){if(r==="index"){var y;if(o&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate&&h.payload.sourceViewBox){var v=h.payload.coordinate,{x:k,y:S}=v,C=cse(v,sse),{x:T,y:A,width:N,height:O}=h.payload.sourceViewBox,M=pl(pl({},C),{},{x:o.x+(N?(k-T)/N:0)*o.width,y:o.y+(O?(S-A)/O:0)*o.height});n(pl(pl({},h),{},{payload:pl(pl({},h.payload),{},{coordinate:M})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var D={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},Y=r(i,D);P=i[Y]}else r==="value"&&(P=i.find(U=>String(U.value)===h.payload.label));var{coordinate:q}=h.payload;if(P==null||h.payload.active===!1||q==null||o==null){n(Xx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:W,y:F}=q,$=Math.min(W,o.x+o.width),R=Math.min(F,o.y+o.height),z={x:a==="horizontal"?P.coordinate:$,y:a==="horizontal"?R:P.coordinate},V=Xx({active:h.payload.active,coordinate:z,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox});n(V)}}};return Hc.on(eb,f),()=>{Hc.off(eb,f)}},[u,n,t,e,r,i,a,o])}function hse(){var e=De(e1),t=De(t1),n=Wt();_.useEffect(()=>{if(e==null)return iL;var r=(i,a,o)=>{t!==o&&e===i&&n(ise(a))};return Hc.on(jj,r),()=>{Hc.off(jj,r)}},[n,t,e])}function pse(){var e=Wt();_.useEffect(()=>{e(tse())},[e]),fse(),hse()}function mse(e,t,n,r,i,a){var o=De(v=>qae(v,e,t)),u=De(t1),f=De(e1),d=De(JD),h=De(nse),m=h==null?void 0:h.active,y=Hp();_.useEffect(()=>{if(!m&&f!=null&&u!=null){var v=Xx({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y});Hc.emit(eb,f,v,u)}},[m,n,o,i,r,u,f,d,a,y])}function Oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(n),!0).forEach(function(r){gse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gse(e,t,n){return(t=yse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yse(e){var t=vse(e,"string");return typeof t=="symbol"?t:t+""}function vse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xse(e){return e.dataKey}function bse(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(qZ,t)}var Ij=[],wse={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!wo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aL(e){var t=ir(e,wse),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:o,filterNull:u,isAnimationActive:f,offset:d,payloadUniqBy:h,position:m,reverseDirection:y,useTranslate3d:v,wrapperStyle:k,cursor:S,shared:C,trigger:T,defaultIndex:A,portal:N,axisId:O}=t,M=Wt(),P=typeof A=="number"?String(A):A;_.useEffect(()=>{M(Vie({shared:C,trigger:T,axisId:O,active:n,defaultIndex:P}))},[M,C,T,O,n,P]);var D=Hp(),Y=zI(),q=qie(C),{activeIndex:W,isActive:F}=De(re=>zae(re,q,T,P)),$=De(re=>Bae(re,q,T,P)),R=De(re=>Z4(re,q,T,P)),z=De(re=>$ae(re,q,T,P)),V=$,U=Wae(),G=n??F,[le,ye]=eI([V,G]),B=q==="axis"?R:void 0;mse(q,T,z,B,W,G);var H=N??U;if(H==null)return null;var Z=V??Ij;G||(Z=Ij),u&&Z.length&&(Z=WR(V.filter(re=>re.value!=null&&(re.hide!==!0||t.includeHidden)),h,xse));var I=Z.length>0,X=_.createElement(GZ,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:f,active:G,coordinate:z,hasPayload:I,offset:d,position:m,reverseDirection:y,useTranslate3d:v,viewBox:D,wrapperStyle:k,lastBoundingBox:le,innerRef:ye,hasPortalFromProps:!!N},bse(o,Rj(Rj({},t),{},{payload:Z,label:B,active:G,coordinate:z,accessibilityLayer:Y})));return _.createElement(_.Fragment,null,nM.createPortal(X,H),G&&_.createElement(Yae,{cursor:S,tooltipEventType:q,coordinate:z,payload:V,index:W}))}var gd=e=>null;gd.displayName="Cell";function _se(e,t,n){return(t=Sse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sse(e){var t=kse(e,"string");return typeof t=="symbol"?t:t+""}function kse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ese{constructor(t){_se(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Dj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cse(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dj(Object(n),!0).forEach(function(r){Tse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tse(e,t,n){return(t=Nse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nse(e){var t=Ase(e,"string");return typeof t=="symbol"?t:t+""}function Ase(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jse={cacheSize:2e3,enableCache:!0},sL=Cse({},jse),Lj=new Ese(sL.cacheSize),Pse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Uj="recharts_measurement_span";function Mse(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(u)}var qj=(e,t)=>{try{var n=document.getElementById(Uj);n||(n=document.createElement("span"),n.setAttribute("id",Uj),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Pse,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ac=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||wo.isSsr)return{width:0,height:0};if(!sL.enableCache)return qj(t,n);var r=Mse(t,n),i=Lj.get(r);if(i)return i;var a=qj(t,n);return Lj.set(r,a),a},$j=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ose=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Rse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ise=Object.keys(oL),xl="NaN";function Dse(e,t){return e*oL[t]}class hr{static parse(t){var n,[,r,i]=(n=Rse.exec(t))!==null&&n!==void 0?n:[];return new hr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,si(t)&&(this.unit=""),n!==""&&!Ose.test(n)&&(this.num=NaN,this.unit=""),Ise.includes(n)&&(this.num=Dse(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new hr(NaN,""):new hr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new hr(NaN,""):new hr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return si(this.num)}}function lL(e){if(e.includes(xl))return xl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=$j.exec(t))!==null&&n!==void 0?n:[],o=hr.parse(r??""),u=hr.parse(a??""),f=i==="*"?o.multiply(u):o.divide(u);if(f.isNaN())return xl;t=t.replace($j,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,m,y]=(d=Bj.exec(t))!==null&&d!==void 0?d:[],v=hr.parse(h??""),k=hr.parse(y??""),S=m==="+"?v.add(k):v.subtract(k);if(S.isNaN())return xl;t=t.replace(Bj,S.toString())}return t}var zj=/\(([^()]*)\)/;function Lse(e){for(var t=e,n;(n=zj.exec(t))!=null;){var[,r]=n;t=t.replace(zj,lL(r))}return t}function Use(e){var t=e.replace(/\s+/g,"");return t=Lse(t),t=lL(t),t}function qse(e){try{return Use(e)}catch{return xl}}function vv(e){var t=qse(e.slice(5,-1));return t===xl?"":t}var $se=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bse=["dx","dy","angle","className","breakAll"];function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tb.apply(null,arguments)}function Fj(e,t){if(e==null)return{};var n,r,i=zse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uL=/[ \f\n\r\t\v\u2028\u2029]+/,cL=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];An(t)||(n?i=t.toString().split(""):i=t.toString().split(uL));var a=i.map(u=>({word:u,width:Ac(u,r).width})),o=n?0:Ac(" ",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Fse=(e,t,n,r,i)=>{var{maxLines:a,children:o,style:u,breakAll:f}=e,d=Le(a),h=o,m=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(($,R)=>{var{word:z,width:V}=R,U=$[$.length-1];if(U&&(r==null||i||U.width+V+n<Number(r)))U.words.push(z),U.width+=V+n;else{var G={words:[z],width:V};$.push(G)}return $},[])},y=m(t),v=W=>W.reduce((F,$)=>F.width>$.width?F:$);if(!d||i)return y;var k=y.length>a||v(y).width>Number(r);if(!k)return y;for(var S="…",C=W=>{var F=h.slice(0,W),$=cL({breakAll:f,style:u,children:F+S}).wordsWithComputedWidth,R=m($),z=R.length>a||v(R).width>Number(r);return[z,R]},T=0,A=h.length-1,N=0,O;T<=A&&N<=h.length-1;){var M=Math.floor((T+A)/2),P=M-1,[D,Y]=C(P),[q]=C(M);if(!D&&!q&&(T=M+1),D&&q&&(A=M-1),!D&&q){O=Y;break}N++}return O||y},Vj=e=>{var t=An(e)?[]:e.toString().split(uL);return[{words:t}]},Vse=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=e;if((t||n)&&!wo.isSsr){var u,f,d=cL({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:m}=d;u=h,f=m}else return Vj(r);return Fse({breakAll:a,children:r,maxLines:o,style:i},u,f,t,n)}return Vj(r)},Hj="#808080",fm=_.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:u="start",verticalAnchor:f="end",fill:d=Hj}=e,h=Fj(e,$se),m=_.useMemo(()=>Vse({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:o,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,o,h.style,h.width]),{dx:y,dy:v,angle:k,className:S,breakAll:C}=h,T=Fj(h,Bse);if(!qi(n)||!qi(r)||m.length===0)return null;var A=n+(Le(y)?y:0),N=r+(Le(v)?v:0),O;switch(f){case"start":O=vv("calc(".concat(a,")"));break;case"middle":O=vv("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:O=vv("calc(".concat(m.length-1," * -").concat(i,")"));break}var M=[];if(o){var P=m[0].width,{width:D}=h;M.push("scale(".concat(Le(D)?D/P:1,")"))}return k&&M.push("rotate(".concat(k,", ").concat(A,", ").concat(N,")")),M.length&&(T.transform=M.join(" ")),_.createElement("text",tb({},ai(T),{ref:t,x:A,y:N,className:kt("recharts-text",S),textAnchor:u,fill:d.includes("url")?Hj:d}),m.map((Y,q)=>{var W=Y.words.join(C?"":" ");return _.createElement("tspan",{x:A,dy:q===0?O:i,key:"".concat(W,"-").concat(q)},W)}))});fm.displayName="Text";var Hse=["labelRef"];function Gse(e,t){if(e==null)return{};var n,r,i=Kse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Gj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(n),!0).forEach(function(r){Yse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yse(e,t,n){return(t=Wse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wse(e){var t=Jse(e,"string");return typeof t=="symbol"?t:t+""}function Jse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},da.apply(null,arguments)}var dL=_.createContext(null),Xse=e=>{var{x:t,y:n,width:r,height:i,children:a}=e,o=_.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return _.createElement(dL.Provider,{value:o},a)},fL=()=>{var e=_.useContext(dL),t=Hp();return e||t},Qse=_.createContext(null),Zse=()=>{var e=_.useContext(Qse),t=De(t4);return e||t},eoe=e=>{var{value:t,formatter:n}=e,r=An(e.children)?t:e.children;return typeof n=="function"?n(r):r},D1=e=>e!=null&&typeof e=="function",toe=(e,t)=>{var n=Nn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},noe=(e,t,n,r,i)=>{var{offset:a,className:o}=e,{cx:u,cy:f,innerRadius:d,outerRadius:h,startAngle:m,endAngle:y,clockWise:v}=i,k=(d+h)/2,S=toe(m,y),C=S>=0?1:-1,T,A;switch(t){case"insideStart":T=m+C*a,A=v;break;case"insideEnd":T=y-C*a,A=!v;break;case"end":T=y+C*a,A=v;break;default:throw new Error("Unsupported position ".concat(t))}A=S<=0?A:!A;var N=mn(u,f,k,T),O=mn(u,f,k,T+(A?1:-1)*359),M="M".concat(N.x,",").concat(N.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(A?0:1,`,
    `).concat(O.x,",").concat(O.y),P=An(e.id)?Dc("recharts-radial-line-"):e.id;return _.createElement("text",da({},r,{dominantBaseline:"central",className:kt("recharts-radial-bar-label",o)}),_.createElement("defs",null,_.createElement("path",{id:P,d:M})),_.createElement("textPath",{xlinkHref:"#".concat(P)},n))},roe=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:f}=e,d=(u+f)/2;if(n==="outside"){var{x:h,y:m}=mn(r,i,o+t,d);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(a+o)/2,{x:v,y:k}=mn(r,i,y,d);return{x:v,y:k,textAnchor:"middle",verticalAnchor:"middle"}},hL=e=>"cx"in e&&Le(e.cx),ioe=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!hL(n)&&(a=n);var{x:o,y:u,width:f,height:d}=t,h=d>=0?1:-1,m=h*r,y=h>0?"end":"start",v=h>0?"start":"end",k=f>=0?1:-1,S=k*r,C=k>0?"end":"start",T=k>0?"start":"end";if(i==="top"){var A={x:o+f/2,y:u-h*r,textAnchor:"middle",verticalAnchor:y};return sn(sn({},A),a?{height:Math.max(u-a.y,0),width:f}:{})}if(i==="bottom"){var N={x:o+f/2,y:u+d+m,textAnchor:"middle",verticalAnchor:v};return sn(sn({},N),a?{height:Math.max(a.y+a.height-(u+d),0),width:f}:{})}if(i==="left"){var O={x:o-S,y:u+d/2,textAnchor:C,verticalAnchor:"middle"};return sn(sn({},O),a?{width:Math.max(O.x-a.x,0),height:d}:{})}if(i==="right"){var M={x:o+f+S,y:u+d/2,textAnchor:T,verticalAnchor:"middle"};return sn(sn({},M),a?{width:Math.max(a.x+a.width-M.x,0),height:d}:{})}var P=a?{width:f,height:d}:{};return i==="insideLeft"?sn({x:o+S,y:u+d/2,textAnchor:T,verticalAnchor:"middle"},P):i==="insideRight"?sn({x:o+f-S,y:u+d/2,textAnchor:C,verticalAnchor:"middle"},P):i==="insideTop"?sn({x:o+f/2,y:u+m,textAnchor:"middle",verticalAnchor:v},P):i==="insideBottom"?sn({x:o+f/2,y:u+d-m,textAnchor:"middle",verticalAnchor:y},P):i==="insideTopLeft"?sn({x:o+S,y:u+m,textAnchor:T,verticalAnchor:v},P):i==="insideTopRight"?sn({x:o+f-S,y:u+m,textAnchor:C,verticalAnchor:v},P):i==="insideBottomLeft"?sn({x:o+S,y:u+d-m,textAnchor:T,verticalAnchor:y},P):i==="insideBottomRight"?sn({x:o+f-S,y:u+d-m,textAnchor:C,verticalAnchor:y},P):i&&typeof i=="object"&&(Le(i.x)||va(i.x))&&(Le(i.y)||va(i.y))?sn({x:o+Yn(i.x,f),y:u+Yn(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):sn({x:o+f/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},aoe={offset:5};function ls(e){var t=ir(e,aoe),{viewBox:n,position:r,value:i,children:a,content:o,className:u="",textBreakAll:f,labelRef:d}=t,h=Zse(),m=fL(),y=r==="center"?m:h??m,v=n||y;if(!v||An(i)&&An(a)&&!_.isValidElement(o)&&typeof o!="function")return null;var k=sn(sn({},t),{},{viewBox:v});if(_.isValidElement(o)){var{labelRef:S}=k,C=Gse(k,Hse);return _.cloneElement(o,C)}var T;if(typeof o=="function"){if(T=_.createElement(o,k),_.isValidElement(T))return T}else T=eoe(t);var A=hL(v),N=ai(t);if(A&&(r==="insideStart"||r==="insideEnd"||r==="end"))return noe(t,r,T,N,v);var O=A?roe(v,t.offset,t.position):ioe(t,v);return _.createElement(fm,da({ref:d,className:kt("recharts-label",u)},N,O,{breakAll:f}),T)}ls.displayName="Label";var soe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?_.createElement(ls,da({key:"label-implicit"},r)):qi(e)?_.createElement(ls,da({key:"label-implicit",value:e},r)):_.isValidElement(e)?e.type===ls?_.cloneElement(e,sn({key:"label-implicit"},r)):_.createElement(ls,da({key:"label-implicit",content:e},r)):D1(e)?_.createElement(ls,da({key:"label-implicit",content:e},r)):e&&typeof e=="object"?_.createElement(ls,da({},e,{key:"label-implicit"},r)):null};function ooe(e){var{label:t,labelRef:n}=e,r=fL();return soe(t,r,n)||null}var xv={},bv={},Kj;function loe(){return Kj||(Kj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(bv)),bv}var wv={},Yj;function uoe(){return Yj||(Yj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(wv)),wv}var Wj;function coe(){return Wj||(Wj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=loe(),n=uoe(),r=dw();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(xv)),xv}var _v,Jj;function doe(){return Jj||(Jj=1,_v=coe().last),_v}var foe=doe();const hoe=Ur(foe);var poe=["valueAccessor"],moe=["dataKey","clockWise","id","textBreakAll"];function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sp.apply(null,arguments)}function Xj(e,t){if(e==null)return{};var n,r,i=goe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function goe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yoe=e=>Array.isArray(e.value)?hoe(e.value):e.value,pL=_.createContext(void 0),voe=pL.Provider,mL=_.createContext(void 0),xoe=mL.Provider;function boe(){return _.useContext(pL)}function woe(){return _.useContext(mL)}function yh(e){var{valueAccessor:t=yoe}=e,n=Xj(e,poe),{dataKey:r,clockWise:i,id:a,textBreakAll:o}=n,u=Xj(n,moe),f=boe(),d=woe(),h=f||d;return!h||!h.length?null:_.createElement(gr,{className:"recharts-label-list"},h.map((m,y)=>{var v,k=An(r)?t(m,y):Qt(m&&m.payload,r),S=An(a)?{}:{id:"".concat(a,"-").concat(y)};return _.createElement(ls,sp({key:"label-".concat(y)},ai(m),u,S,{fill:(v=n.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:k,textBreakAll:o,viewBox:m.viewBox,index:y}))}))}yh.displayName="LabelList";function gL(e){var{label:t}=e;return t?t===!0?_.createElement(yh,{key:"labelList-implicit"}):_.isValidElement(t)||D1(t)?_.createElement(yh,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(yh,sp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var yL=e=>e.graphicalItems.polarItems,_oe=oe([Jt,cd],o1),hm=oe([yL,Zt,_oe],u1),Soe=oe([hm],c1),pm=oe([Soe,Ww],d1),koe=oe([pm,Zt,hm],h1);oe([pm,Zt,hm],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var a,o=Qt(r,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Qt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Qj=()=>{},Eoe=oe([pm,Zt,hm,lm,Jt],y1),Coe=oe([Zt,m1,g1,Qj,Eoe,Qj,mt,Jt],v1),vL=oe([Zt,mt,pm,koe,ud,Jt,Coe],x1),Toe=oe([vL,Zt,au],_1);oe([Zt,vL,Toe,Jt],k1);var Noe={radiusAxis:{},angleAxis:{}},xL=qr({name:"polarAxis",initialState:Noe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:$pe,removeRadiusAxis:Bpe,addAngleAxis:zpe,removeAngleAxis:Fpe}=xL.actions,Aoe=xL.reducer;function Zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(n),!0).forEach(function(r){joe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zj(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function joe(e,t,n){return(t=Poe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Poe(e){var t=Moe(e,"string");return typeof t=="symbol"?t:t+""}function Moe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ooe=(e,t)=>t,L1=oe([yL,Ooe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),Roe=[],U1=(e,t,n)=>(n==null?void 0:n.length)===0?Roe:n,bL=oe([Ww,L1,U1],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>eP(eP({},t.presentationProps),a.props))),i!=null)return i}}),Ioe=oe([bL,L1,U1],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var a,o=Qt(r,t.nameKey,t.name),u;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:$p(o,t.dataKey),color:u,payload:r,type:t.legendType}})}),Doe=oe([bL,L1,U1,wn],(e,t,n,r)=>{if(!(t==null||e==null))return Ule({offset:r,pieSettings:t,displayedData:e,cells:n})}),Sv={exports:{}},At={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP;function Loe(){if(tP)return At;tP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function k(S){if(typeof S=="object"&&S!==null){var C=S.$$typeof;switch(C){case e:switch(S=S.type,S){case n:case i:case r:case f:case d:case y:return S;default:switch(S=S&&S.$$typeof,S){case o:case u:case m:case h:return S;case a:return S;default:return C}}case t:return C}}}return At.ContextConsumer=a,At.ContextProvider=o,At.Element=e,At.ForwardRef=u,At.Fragment=n,At.Lazy=m,At.Memo=h,At.Portal=t,At.Profiler=i,At.StrictMode=r,At.Suspense=f,At.SuspenseList=d,At.isContextConsumer=function(S){return k(S)===a},At.isContextProvider=function(S){return k(S)===o},At.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},At.isForwardRef=function(S){return k(S)===u},At.isFragment=function(S){return k(S)===n},At.isLazy=function(S){return k(S)===m},At.isMemo=function(S){return k(S)===h},At.isPortal=function(S){return k(S)===t},At.isProfiler=function(S){return k(S)===i},At.isStrictMode=function(S){return k(S)===r},At.isSuspense=function(S){return k(S)===f},At.isSuspenseList=function(S){return k(S)===d},At.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===r||S===f||S===d||typeof S=="object"&&S!==null&&(S.$$typeof===m||S.$$typeof===h||S.$$typeof===o||S.$$typeof===a||S.$$typeof===u||S.$$typeof===v||S.getModuleId!==void 0)},At.typeOf=k,At}var nP;function Uoe(){return nP||(nP=1,Sv.exports=Loe()),Sv.exports}var qoe=Uoe(),rP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",iP=null,kv=null,wL=e=>{if(e===iP&&Array.isArray(kv))return kv;var t=[];return _.Children.forEach(e,n=>{An(n)||(qoe.isFragment(n)?t=t.concat(wL(n.props.children)):t.push(n))}),kv=t,iP=e,t};function q1(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>rP(i)):r=[rP(t)],wL(e).forEach(i=>{var a=so(i,"type.displayName")||so(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var Ev={},aP;function $oe(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Ev)),Ev}var Cv,sP;function Boe(){return sP||(sP=1,Cv=$oe().isPlainObject),Cv}var zoe=Boe();const Foe=Ur(zoe);function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(n),!0).forEach(function(r){Voe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Voe(e,t,n){return(t=Hoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hoe(e){var t=Goe(e,"string");return typeof t=="symbol"?t:t+""}function Goe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},op.apply(null,arguments)}var uP=(e,t,n,r,i)=>{var a=n-r,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-a/2,",").concat(t+i),o+="L ".concat(e+n-a/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},Koe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yoe=e=>{var t=ir(e,Koe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:o,className:u}=t,{animationEasing:f,animationDuration:d,animationBegin:h,isUpdateAnimationActive:m}=t,y=_.useRef(null),[v,k]=_.useState(-1),S=_.useRef(i),C=_.useRef(a),T=_.useRef(o),A=_.useRef(n),N=_.useRef(r),O=Yp(e,"trapezoid-");if(_.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var z=y.current.getTotalLength();z&&k(z)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var M=kt("recharts-trapezoid",u);if(!m)return _.createElement("g",null,_.createElement("path",op({},ai(t),{className:M,d:uP(n,r,i,a,o)})));var P=S.current,D=C.current,Y=T.current,q=A.current,W=N.current,F="0px ".concat(v===-1?1:v,"px"),$="".concat(v,"px 0px"),R=VI(["strokeDasharray"],d,f);return _.createElement(Kp,{animationId:O,key:O,canBegin:v>0,duration:d,easing:f,isActive:m,begin:h},z=>{var V=$n(P,i,z),U=$n(D,a,z),G=$n(Y,o,z),le=$n(q,n,z),ye=$n(W,r,z);y.current&&(S.current=V,C.current=U,T.current=G,A.current=le,N.current=ye);var B=z>0?{transition:R,strokeDasharray:$}:{strokeDasharray:F};return _.createElement("path",op({},ai(t),{className:M,d:uP(le,ye,V,U,G),ref:y,style:lP(lP({},B),t.style)}))})},Woe=["option","shapeType","propTransformer","activeClassName","isActive"];function Joe(e,t){if(e==null)return{};var n,r,i=Xoe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xoe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(r){Qoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qoe(e,t,n){return(t=Zoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zoe(e){var t=ele(e,"string");return typeof t=="symbol"?t:t+""}function ele(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tle(e,t){return lp(lp({},t),e)}function nle(e,t){return e==="symbols"}function dP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return _.createElement(YI,n);case"trapezoid":return _.createElement(Yoe,n);case"sector":return _.createElement(XI,n);case"symbols":if(nle(t))return _.createElement(lw,n);break;default:return null}}function rle(e){return _.isValidElement(e)?e.props:e}function _L(e){var{option:t,shapeType:n,propTransformer:r=tle,activeClassName:i="recharts-active-shape",isActive:a}=e,o=Joe(e,Woe),u;if(_.isValidElement(t))u=_.cloneElement(t,lp(lp({},o),rle(t)));else if(typeof t=="function")u=t(o);else if(Foe(t)&&typeof t!="boolean"){var f=r(t,o);u=_.createElement(dP,{shapeType:n,elementProps:f})}else{var d=o;u=_.createElement(dP,{shapeType:n,elementProps:d})}return a?_.createElement(gr,{className:i},u):u}var $1=(e,t)=>{var n=Wt();return(r,i)=>a=>{e==null||e(r,i,a),n(O4({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},B1=e=>{var t=Wt();return(n,r)=>i=>{e==null||e(n,r,i),t(Hie())}},z1=(e,t)=>{var n=Wt();return(r,i)=>a=>{e==null||e(r,i,a),n(Gie({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function SL(e){var{fn:t,args:n}=e,r=Wt(),i=$r();return _.useLayoutEffect(()=>{if(!i){var a=t(n);return r(zie(a)),()=>{r(Fie(a))}}},[t,n,r,i]),null}var kL=()=>{};function ile(e){var{legendPayload:t}=e,n=Wt(),r=$r();return _.useLayoutEffect(()=>r?kL:(n($I(t)),()=>{n(BI(t))}),[n,r,t]),null}function ale(e){var{legendPayload:t}=e,n=Wt(),r=De(mt);return _.useLayoutEffect(()=>r!=="centric"&&r!=="radial"?kL:(n($I(t)),()=>{n(BI(t))}),[n,r,t]),null}var Tv,sle=()=>{var[e]=_.useState(()=>Dc("uid-"));return e},ole=(Tv=vU.useId)!==null&&Tv!==void 0?Tv:sle;function lle(e,t){var n=ole();return t||(e?"".concat(e,"-").concat(n):n)}var ule=_.createContext(void 0),EL=e=>{var{id:t,type:n,children:r}=e,i=lle("recharts-".concat(n),t);return _.createElement(ule.Provider,{value:i},r(i))},cle={cartesianItems:[],polarItems:[]},CL=qr({name:"graphicalItems",initialState:cle,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:er()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=ma(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:er()},removeCartesianGraphicalItem:{reducer(e,t){var n=ma(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:er()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:er()},removePolarGraphicalItem:{reducer(e,t){var n=ma(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:er()}}}),{addCartesianGraphicalItem:dle,replaceCartesianGraphicalItem:fle,removeCartesianGraphicalItem:hle,addPolarGraphicalItem:ple,removePolarGraphicalItem:mle}=CL.actions,gle=CL.reducer;function yle(e){var t=Wt(),n=_.useRef(null);return _.useLayoutEffect(()=>{n.current===null?t(dle(e)):n.current!==e&&t(fle({prev:n.current,next:e})),n.current=e},[t,e]),_.useLayoutEffect(()=>()=>{n.current&&(t(hle(n.current)),n.current=null)},[t]),null}function vle(e){var t=Wt();return _.useLayoutEffect(()=>(t(ple(e)),()=>{t(mle(e))}),[t,e]),null}var xle=["onMouseEnter","onClick","onMouseLeave"],ble=["id"],wle=["id"];function F1(e,t){if(e==null)return{};var n,r,i=_le(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _le(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function fP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(n),!0).forEach(function(r){Sle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sle(e,t,n){return(t=kle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kle(e){var t=Ele(e,"string");return typeof t=="symbol"?t:t+""}function Ele(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fs.apply(null,arguments)}function Cle(e){var t=_.useMemo(()=>q1(e.children,gd),[e.children]),n=De(r=>Ioe(r,e.id,t));return n==null?null:_.createElement(ale,{legendPayload:n})}function Tle(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:o,name:u,hide:f,tooltipType:d}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:t,nameKey:n,name:$p(u,t),hide:f,type:d,color:o,unit:""}}}var Nle=(e,t)=>e>t?"start":e<t?"end":"middle",Ale=(e,t,n)=>Yn(typeof t=="function"?t(e):t,n,n*.8),jle=(e,t,n)=>{var{top:r,left:i,width:a,height:o}=t,u=TI(a,o),f=i+Yn(e.cx,a,a/2),d=r+Yn(e.cy,o,o/2),h=Yn(e.innerRadius,u,0),m=Ale(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:f,cy:d,innerRadius:h,outerRadius:m,maxRadius:y}},Ple=(e,t)=>{var n=Nn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function Mle(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Ole=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var n=kt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(FI,fs({},t,{type:"linear",className:n}))},Rle=(e,t,n)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),_.isValidElement(r)))return r;var i=kt("recharts-pie-label-text",Mle(e));return _.createElement(fm,fs({},t,{alignmentBaseline:"middle",className:i}),r)};function Ile(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:a,dataKey:o}=n;if(!r||!i||!t)return null;var u=Si(n),f=Ic(i),d=Ic(a),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((y,v)=>{var k=(y.startAngle+y.endAngle)/2,S=mn(y.cx,y.cy,y.outerRadius+h,k),C=Gt(Gt(Gt(Gt({},u),y),{},{stroke:"none"},f),{},{index:v,textAnchor:Nle(S.x,y.cx)},S),T=Gt(Gt(Gt(Gt({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:v,points:[mn(y.cx,y.cy,y.outerRadius,k),S],key:"line"});return _.createElement(gr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},a&&Ole(a,T),Rle(i,C,Qt(y,o)))});return _.createElement(gr,{className:"recharts-pie-labels"},m)}function Dle(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?_.createElement(gL,{label:i}):_.createElement(Ile,{sectors:t,props:n,showLabels:r})}function Lle(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,a=De(fo),{onMouseEnter:o,onClick:u,onMouseLeave:f}=i,d=F1(i,xle),h=$1(o,i.dataKey),m=B1(f),y=z1(u,i.dataKey);return t==null||t.length===0?null:_.createElement(_.Fragment,null,t.map((v,k)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var S=n&&String(k)===a,C=a?r:null,T=S?n:C,A=Gt(Gt({},v),{},{stroke:v.stroke,tabIndex:-1,[MI]:k,[OI]:i.dataKey});return _.createElement(gr,fs({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},ed(d,v,k),{onMouseEnter:h(v,k),onMouseLeave:m(v,k),onClick:y(v,k)}),_.createElement(_L,fs({option:T,isActive:S,shapeType:"sector"},A)))}))}function Ule(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:a}=e,{cornerRadius:o,startAngle:u,endAngle:f,dataKey:d,nameKey:h,tooltipType:m}=n,y=Math.abs(n.minAngle),v=Ple(u,f),k=Math.abs(v),S=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(P=>Qt(P,d,0)!==0).length,T=(k>=360?C:C-1)*S,A=k-C*y-T,N=r.reduce((P,D)=>{var Y=Qt(D,d,0);return P+(Le(Y)?Y:0)},0),O;if(N>0){var M;O=r.map((P,D)=>{var Y=Qt(P,d,0),q=Qt(P,h,D),W=jle(n,a,P),F=(Le(Y)?Y:0)/N,$,R=Gt(Gt({},P),i&&i[D]&&i[D].props);D?$=M.endAngle+Nn(v)*S*(Y!==0?1:0):$=u;var z=$+Nn(v)*((Y!==0?y:0)+F*A),V=($+z)/2,U=(W.innerRadius+W.outerRadius)/2,G=[{name:q,value:Y,payload:R,dataKey:d,type:m}],le=mn(W.cx,W.cy,U,V);return M=Gt(Gt(Gt(Gt({},n.presentationProps),{},{percent:F,cornerRadius:o,name:q,tooltipPayload:G,midAngle:V,middleRadius:U,tooltipPosition:le},R),W),{},{value:Y,startAngle:$,endAngle:z,payload:R,paddingAngle:Nn(v)*S}),M})}return O}function qle(e){var{showLabels:t,sectors:n,children:r}=e,i=_.useMemo(()=>!t||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,t]);return _.createElement(xoe,{value:t?i:void 0},r)}function $le(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:u,activeShape:f,inactiveShape:d,onAnimationStart:h,onAnimationEnd:m}=t,y=Yp(t,"recharts-pie-"),v=n.current,[k,S]=_.useState(!1),C=_.useCallback(()=>{typeof m=="function"&&m(),S(!1)},[m]),T=_.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return _.createElement(qle,{showLabels:!k,sectors:r},_.createElement(Kp,{animationId:y,begin:a,duration:o,isActive:i,easing:u,onAnimationStart:T,onAnimationEnd:C,key:y},A=>{var N=[],O=r&&r[0],M=O==null?void 0:O.startAngle;return r==null||r.forEach((P,D)=>{var Y=v&&v[D],q=D>0?so(P,"paddingAngle",0):0;if(Y){var W=$n(Y.endAngle-Y.startAngle,P.endAngle-P.startAngle,A),F=Gt(Gt({},P),{},{startAngle:M+q,endAngle:M+W+q});N.push(F),M=F.endAngle}else{var{endAngle:$,startAngle:R}=P,z=$n(0,$-R,A),V=Gt(Gt({},P),{},{startAngle:M+q,endAngle:M+z+q});N.push(V),M=V.endAngle}}),n.current=N,_.createElement(gr,null,_.createElement(Lle,{sectors:N,activeShape:f,inactiveShape:d,allOtherPieProps:t}))}),_.createElement(Dle,{showLabels:!k,sectors:r,props:t}),t.children)}var Ble={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!wo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function zle(e){var{id:t}=e,n=F1(e,ble),{hide:r,className:i,rootTabIndex:a}=e,o=_.useMemo(()=>q1(e.children,gd),[e.children]),u=De(h=>Doe(h,t,o)),f=_.useRef(null),d=kt("recharts-pie",i);return r||u==null?(f.current=null,_.createElement(gr,{tabIndex:a,className:d})):_.createElement(_.Fragment,null,_.createElement(SL,{fn:Tle,args:Gt(Gt({},e),{},{sectors:u})}),_.createElement(gr,{tabIndex:a,className:d},_.createElement($le,{props:Gt(Gt({},n),{},{sectors:u}),previousSectorsRef:f})))}function TL(e){var t=ir(e,Ble),{id:n}=t,r=F1(t,wle),i=Si(r);return _.createElement(EL,{id:n,type:"pie"},a=>_.createElement(_.Fragment,null,_.createElement(vle,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),_.createElement(Cle,fs({},r,{id:a})),_.createElement(zle,fs({},r,{id:a}))))}TL.displayName="Pie";function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(n),!0).forEach(function(r){Fle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fle(e,t,n){return(t=Vle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vle(e){var t=Hle(e,"string");return typeof t=="symbol"?t:t+""}function Hle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gle={xAxis:{},yAxis:{},zAxis:{}},NL=qr({name:"cartesianAxis",initialState:Gle,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:er()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:er()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:er()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:er()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:er()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:er()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);e.yAxis[n]=pP(pP({},e.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:Kle,removeXAxis:Yle,addYAxis:Wle,removeYAxis:Jle,addZAxis:Vpe,removeZAxis:Hpe,updateYAxisWidth:Xle}=NL.actions,Qle=NL.reducer,Zle=oe([wn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),eue=oe([Zle,Ea,Ca],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),AL=()=>De(eue),tue="Invariant failed";function nue(e,t){throw new Error(tue)}var rue=["x","y"];function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nb.apply(null,arguments)}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(r){iue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iue(e,t,n){return(t=aue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aue(e){var t=sue(e,"string");return typeof t=="symbol"?t:t+""}function sue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oue(e,t){if(e==null)return{};var n,r,i=lue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function uue(e,t){var{x:n,y:r}=e,i=oue(e,rue),a="".concat(n),o=parseInt(a,10),u="".concat(r),f=parseInt(u,10),d="".concat(t.height||i.height),h=parseInt(d,10),m="".concat(t.width||i.width),y=parseInt(m,10);return yc(yc(yc(yc(yc({},t),i),o?{x:o}:{}),f?{y:f}:{}),{},{height:h,width:y,name:t.name,radius:t.radius})}function V1(e){return _.createElement(_L,nb({shapeType:"rectangle",propTransformer:uue,activeClassName:"recharts-active-bar"},e))}var cue=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Le(t))return t;var a=Le(r)||An(r);return a?t(r,i):(a||nue(),n)}},due={},jL=qr({name:"errorBars",initialState:due,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Gpe,replaceErrorBar:Kpe,removeErrorBar:Ype}=jL.actions,fue=jL.reducer,hue=["children"];function pue(e,t){if(e==null)return{};var n,r,i=mue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gue={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yue=_.createContext(gue);function vue(e){var{children:t}=e,n=pue(e,hue);return _.createElement(yue.Provider,{value:n},t)}function PL(e,t){var n,r,i=De(d=>Na(d,e)),a=De(d=>Aa(d,t)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ar.allowDataOverflow,u=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:jr.allowDataOverflow,f=o||u;return{needClip:f,needClipX:o,needClipY:u}}function xue(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=AL(),{needClipX:a,needClipY:o,needClip:u}=PL(t,n);if(!u)return null;var{x:f,y:d,width:h,height:m}=i;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:a?f:f-h/2,y:o?d:d-m/2,width:a?h:h*2,height:o?m:m*2}))}var bue=["onMouseEnter","onMouseLeave","onClick"],wue=["value","background","tooltipPosition"],_ue=["id"],Sue=["onMouseEnter","onClick","onMouseLeave"];function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hs.apply(null,arguments)}function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(r){kue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kue(e,t,n){return(t=Eue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eue(e){var t=Cue(e,"string");return typeof t=="symbol"?t:t+""}function Cue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function up(e,t){if(e==null)return{};var n,r,i=Tue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Nue=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:$p(n,t),payload:e}]};function Aue(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:$p(a,t),hide:o,type:e.tooltipType,color:e.fill,unit:u}}}function jue(e){var t=De(fo),{data:n,dataKey:r,background:i,allOtherBarProps:a}=e,{onMouseEnter:o,onMouseLeave:u,onClick:f}=a,d=up(a,bue),h=$1(o,r),m=B1(u),y=z1(f,r);if(!i||n==null)return null;var v=Ic(i);return _.createElement(_.Fragment,null,n.map((k,S)=>{var{value:C,background:T,tooltipPosition:A}=k,N=up(k,wue);if(!T)return null;var O=h(k,S),M=m(k,S),P=y(k,S),D=tr(tr(tr(tr(tr({option:i,isActive:String(S)===t},N),{},{fill:"#eee"},T),v),ed(d,k,S)),{},{onMouseEnter:O,onMouseLeave:M,onClick:P,dataKey:r,index:S,className:"recharts-bar-background-rectangle"});return _.createElement(V1,hs({key:"background-bar-".concat(S)},D))}))}function Pue(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return tr(tr({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return _.createElement(voe,{value:t?i:void 0},n)}function Mue(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:a,dataKey:o}=e,u=De(fo),f=De(Y4),d=n&&String(a)===u&&(f==null||o===f),h=d?n:t;return _.createElement(V1,hs({},r,{name:String(r.name)},i,{isActive:d,option:h,index:a,dataKey:o}))}function Oue(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:a}=e;return _.createElement(V1,hs({},n,{name:String(n.name)},r,{isActive:!1,option:t,index:i,dataKey:a}))}function Rue(e){var{data:t,props:n}=e,r=Si(n),{id:i}=r,a=up(r,_ue),{shape:o,dataKey:u,activeBar:f}=n,{onMouseEnter:d,onClick:h,onMouseLeave:m}=n,y=up(n,Sue),v=$1(d,u),k=B1(m),S=z1(h,u);return t?_.createElement(_.Fragment,null,t.map((C,T)=>_.createElement(gr,hs({key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(T),className:"recharts-bar-rectangle"},ed(y,C,T),{onMouseEnter:v(C,T),onMouseLeave:k(C,T),onClick:S(C,T)}),f?_.createElement(Mue,{shape:o,activeBar:f,baseProps:a,entry:C,index:T,dataKey:u}):_.createElement(Oue,{shape:o,baseProps:a,entry:C,index:T,dataKey:u})))):null}function Iue(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:u,animationEasing:f,onAnimationEnd:d,onAnimationStart:h}=t,m=n.current,y=Yp(t,"recharts-bar-"),[v,k]=_.useState(!1),S=!v,C=_.useCallback(()=>{typeof d=="function"&&d(),k(!1)},[d]),T=_.useCallback(()=>{typeof h=="function"&&h(),k(!0)},[h]);return _.createElement(Pue,{showLabels:S,rects:r},_.createElement(Kp,{animationId:y,begin:o,duration:u,isActive:a,easing:f,onAnimationEnd:C,onAnimationStart:T,key:y},A=>{var N=A===1?r:r==null?void 0:r.map((O,M)=>{var P=m&&m[M];if(P)return tr(tr({},O),{},{x:$n(P.x,O.x,A),y:$n(P.y,O.y,A),width:$n(P.width,O.width,A),height:$n(P.height,O.height,A)});if(i==="horizontal"){var D=$n(0,O.height,A);return tr(tr({},O),{},{y:O.y+O.height-D,height:D})}var Y=$n(0,O.width,A);return tr(tr({},O),{},{width:Y})});return A>0&&(n.current=N??null),N==null?null:_.createElement(gr,null,_.createElement(Rue,{props:t,data:N}))}),_.createElement(gL,{label:t.label}),t.children)}function Due(e){var t=_.useRef(null);return _.createElement(Iue,{previousRectanglesRef:t,props:e})}var ML=0,Lue=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Qt(e,t)}};class Uue extends _.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:o,needClip:u,background:f,id:d}=this.props;if(t||n==null)return null;var h=kt("recharts-bar",i),m=d;return _.createElement(gr,{className:h,id:d},u&&_.createElement("defs",null,_.createElement(xue,{clipPathId:m,xAxisId:a,yAxisId:o})),_.createElement(gr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},_.createElement(jue,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),_.createElement(Due,this.props)))}}var que={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!wo.isSsr,legendType:"rect",minPointSize:ML,xAxisId:0,yAxisId:0};function $ue(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:h}=e,{needClip:m}=PL(t,n),y=kw(),v=$r(),k=q1(e.children,gd),S=De(A=>pce(A,t,n,v,e.id,k));if(y!=="vertical"&&y!=="horizontal")return null;var C,T=S==null?void 0:S[0];return T==null||T.height==null||T.width==null?C=0:C=y==="vertical"?T.height/2:T.width/2,_.createElement(vue,{xAxisId:t,yAxisId:n,data:S,dataPointFormatter:Lue,errorBarOffset:C},_.createElement(Uue,hs({},e,{layout:y,needClip:m,data:S,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:h})))}function Bue(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:o,yAxis:u,xAxisTicks:f,yAxisTicks:d,stackedData:h,displayedData:m,offset:y,cells:v,parentViewBox:k}=e,S=t==="horizontal"?u:o,C=h?S.scale.domain():null,T=qQ({numericAxis:S});return m.map((A,N)=>{var O,M,P,D,Y,q;h?O=OQ(h[N],C):(O=Qt(A,n),Array.isArray(O)||(O=[T,O]));var W=cue(r,ML)(O[1],N);if(t==="horizontal"){var F,[$,R]=[u.scale(O[0]),u.scale(O[1])];M=XN({axis:o,ticks:f,bandSize:a,offset:i.offset,entry:A,index:N}),P=(F=R??$)!==null&&F!==void 0?F:void 0,D=i.size;var z=$-R;if(Y=si(z)?0:z,q={x:M,y:y.top,width:D,height:y.height},Math.abs(W)>0&&Math.abs(Y)<Math.abs(W)){var V=Nn(Y||W)*(Math.abs(W)-Math.abs(Y));P-=V,Y+=V}}else{var[U,G]=[o.scale(O[0]),o.scale(O[1])];if(M=U,P=XN({axis:u,ticks:d,bandSize:a,offset:i.offset,entry:A,index:N}),D=G-U,Y=i.size,q={x:y.left,y:P,width:y.width,height:Y},Math.abs(W)>0&&Math.abs(D)<Math.abs(W)){var le=Nn(D||W)*(Math.abs(W)-Math.abs(D));D+=le}}if(M==null||P==null||D==null||Y==null)return null;var ye=tr(tr({},A),{},{x:M,y:P,width:D,height:Y,value:h?O:O[1],payload:A,background:q,tooltipPosition:{x:M+D/2,y:P+Y/2},parentViewBox:k},v&&v[N]&&v[N].props);return ye}).filter(Boolean)}function zue(e){var t=ir(e,que),n=$r();return _.createElement(EL,{id:t.id,type:"bar"},r=>_.createElement(_.Fragment,null,_.createElement(ile,{legendPayload:Nue(t)}),_.createElement(SL,{fn:Aue,args:t}),_.createElement(yle,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:UQ(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),_.createElement($ue,hs({},t,{id:r}))))}var OL=_.memo(zue);OL.displayName="Bar";function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){Fue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fue(e,t,n){return(t=Vue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vue(e){var t=Hue(e,"string");return typeof t=="symbol"?t:t+""}function Hue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gue=(e,t)=>t,Kue=(e,t,n)=>n,Yue=(e,t,n,r)=>r,Wue=(e,t,n,r,i)=>i,yd=oe([l1,Wue],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Jue=oe([yd],e=>e==null?void 0:e.maxBarSize),Xue=(e,t,n,r,i,a)=>a,vP=(e,t,n)=>{var r=n??e;if(!An(r))return Yn(r,t,0)},Que=oe([mt,l1,Gue,Kue,Yue],(e,t,n,r,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Zue=(e,t,n,r)=>{var i=mt(e);return i==="horizontal"?Jx(e,"yAxis",n,r):Jx(e,"xAxis",t,r)},ece=(e,t,n)=>{var r=mt(e);return r==="horizontal"?wj(e,"xAxis",t):wj(e,"yAxis",n)},tce=(e,t,n)=>{var r={},i=e.filter(im),a=e.filter(d=>d.stackId==null),o=i.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),r),u=Object.entries(o).map(d=>{var[h,m]=d,y=m.map(k=>k.dataKey),v=vP(t,n,m[0].barSize);return{stackId:h,dataKeys:y,barSize:v}}),f=a.map(d=>{var h=[d.dataKey].filter(y=>y!=null),m=vP(t,n,d.barSize);return{stackId:void 0,dataKeys:h,barSize:m}});return[...u,...f]},nce=oe([Que,Ure,ece],tce),rce=(e,t,n,r,i)=>{var a,o,u=yd(e,t,n,r,i);if(u!=null){var f=mt(e),d=YD(e),{maxBarSize:h}=u,m=An(h)?d:h,y,v;return f==="horizontal"?(y=Ul(e,"xAxis",t,r),v=Ll(e,"xAxis",t,r)):(y=Ul(e,"yAxis",n,r),v=Ll(e,"yAxis",n,r)),(a=(o=xw(y,v,!0))!==null&&o!==void 0?o:m)!==null&&a!==void 0?a:0}},RL=(e,t,n,r)=>{var i=mt(e),a,o;return i==="horizontal"?(a=Ul(e,"xAxis",t,r),o=Ll(e,"xAxis",t,r)):(a=Ul(e,"yAxis",n,r),o=Ll(e,"yAxis",n,r)),xw(a,o)};function ice(e,t,n,r,i){var a=r.length;if(!(a<1)){var o=Yn(e,n,0,!0),u,f=[];if(Wn(r[0].barSize)){var d=!1,h=n/a,m=r.reduce((T,A)=>T+(A.barSize||0),0);m+=(a-1)*o,m>=n&&(m-=(a-1)*o,o=0),m>=n&&h>0&&(d=!0,h*=.9,m=a*h);var y=(n-m)/2>>0,v={offset:y-o,size:0};u=r.reduce((T,A)=>{var N,O={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:v.offset+v.size+o,size:d?h:(N=A.barSize)!==null&&N!==void 0?N:0}},M=[...T,O];return v=M[M.length-1].position,M},f)}else{var k=Yn(t,n,0,!0);n-2*k-(a-1)*o<=0&&(o=0);var S=(n-2*k-(a-1)*o)/a;S>1&&(S>>=0);var C=Wn(i)?Math.min(S,i):S;u=r.reduce((T,A,N)=>[...T,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:k+(S+o)*N+(S-C)/2,size:C}}],f)}return u}}var ace=(e,t,n,r,i,a,o)=>{var u=An(o)?t:o,f=ice(n,r,i!==a?i:a,e,u);return i!==a&&f!=null&&(f=f.map(d=>lh(lh({},d),{},{position:lh(lh({},d.position),{},{offset:d.position.offset-i/2})}))),f},sce=oe([nce,YD,Lre,WD,rce,RL,Jue],ace),oce=(e,t,n,r)=>Ul(e,"xAxis",t,r),lce=(e,t,n,r)=>Ul(e,"yAxis",n,r),uce=(e,t,n,r)=>Ll(e,"xAxis",t,r),cce=(e,t,n,r)=>Ll(e,"yAxis",n,r),dce=oe([sce,yd],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),fce=(e,t)=>{var n=a1(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===n)}}}},hce=oe([Zue,yd],fce),pce=oe([wn,bw,oce,lce,uce,cce,dce,mt,Jw,RL,hce,yd,Xue],(e,t,n,r,i,a,o,u,f,d,h,m,y)=>{var{chartData:v,dataStartIndex:k,dataEndIndex:S}=f;if(!(m==null||o==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||a==null||d==null)){var{data:C}=m,T;if(C!=null&&C.length>0?T=C:T=v==null?void 0:v.slice(k,S+1),T!=null)return Bue({layout:u,barSettings:m,pos:o,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:h,displayedData:T,offset:e,cells:y})}}),IL=e=>{var{chartData:t}=e,n=Wt(),r=$r();return _.useEffect(()=>r?()=>{}:(n(Pj(t)),()=>{n(Pj(void 0))}),[t,n,r]),null},xP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},DL=qr({name:"brush",initialState:xP,reducers:{setBrushSettings(e,t){return t.payload==null?xP:t.payload}}}),{setBrushSettings:Wpe}=DL.actions,mce=DL.reducer;function gce(e,t,n){return(t=yce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yce(e){var t=vce(e,"string");return typeof t=="symbol"?t:t+""}function vce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H1{static create(t){return new H1(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}gce(H1,"EPS",1e-4);function xce(e){return(e%180+180)%180}var bce=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=xce(i),o=a*Math.PI/180,u=Math.atan(r/n),f=o>u&&o<Math.PI-u?r/Math.sin(o):n/Math.cos(o);return Math.abs(f)},wce={dots:[],areas:[],lines:[]},LL=qr({name:"referenceElements",initialState:wce,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ma(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ma(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ma(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Jpe,removeDot:Xpe,addArea:Qpe,removeArea:Zpe,addLine:eme,removeLine:tme}=LL.actions,_ce=LL.reducer,Sce=_.createContext(void 0),kce=e=>{var{children:t}=e,[n]=_.useState("".concat(Dc("recharts"),"-clip")),r=AL();if(r==null)return null;var{x:i,y:a,width:o,height:u}=r;return _.createElement(Sce.Provider,{value:n},_.createElement("defs",null,_.createElement("clipPath",{id:n},_.createElement("rect",{x:i,y:a,height:u,width:o}))),t)};function ql(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function UL(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Ece(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return bce(r,n)}function Cce(e,t,n){var r=n==="width",{x:i,y:a,width:o,height:u}=e;return t===1?{start:r?i:a,end:r?i+o:a+u}:{start:r?i+o:a+u,end:r?i:a}}function cp(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function Tce(e,t){return UL(e,t+1)}function Nce(e,t,n,r,i){for(var a=(r||[]).slice(),{start:o,end:u}=t,f=0,d=1,h=o,m=function(){var k=r==null?void 0:r[f];if(k===void 0)return{v:UL(r,d)};var S=f,C,T=()=>(C===void 0&&(C=n(k,S)),C),A=k.coordinate,N=f===0||cp(e,A,T,h,u);N||(f=0,h=o,d+=1),N&&(h=A+e*(T()/2+i),f+=d)},y;d<=a.length;)if(y=m(),y)return y.v;return[]}function bP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(n),!0).forEach(function(r){Ace(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ace(e,t,n){return(t=jce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jce(e){var t=Pce(e,"string");return typeof t=="symbol"?t:t+""}function Pce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mce(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:u}=t,{end:f}=t,d=function(y){var v=a[y],k,S=()=>(k===void 0&&(k=n(v,y)),k);if(y===o-1){var C=e*(v.coordinate+e*S()/2-f);a[y]=v=Hn(Hn({},v),{},{tickCoord:C>0?v.coordinate-C*e:v.coordinate})}else a[y]=v=Hn(Hn({},v),{},{tickCoord:v.coordinate});var T=cp(e,v.tickCoord,S,u,f);T&&(f=v.tickCoord-e*(S()/2+i),a[y]=Hn(Hn({},v),{},{isShow:!0}))},h=o-1;h>=0;h--)d(h);return a}function Oce(e,t,n,r,i,a){var o=(r||[]).slice(),u=o.length,{start:f,end:d}=t;if(a){var h=r[u-1],m=n(h,u-1),y=e*(h.coordinate+e*m/2-d);o[u-1]=h=Hn(Hn({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate});var v=cp(e,h.tickCoord,()=>m,f,d);v&&(d=h.tickCoord-e*(m/2+i),o[u-1]=Hn(Hn({},h),{},{isShow:!0}))}for(var k=a?u-1:u,S=function(A){var N=o[A],O,M=()=>(O===void 0&&(O=n(N,A)),O);if(A===0){var P=e*(N.coordinate-e*M()/2-f);o[A]=N=Hn(Hn({},N),{},{tickCoord:P<0?N.coordinate-P*e:N.coordinate})}else o[A]=N=Hn(Hn({},N),{},{tickCoord:N.coordinate});var D=cp(e,N.tickCoord,M,f,d);D&&(f=N.tickCoord+e*(M()/2+i),o[A]=Hn(Hn({},N),{},{isShow:!0}))},C=0;C<k;C++)S(C);return o}function G1(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:u,interval:f,tickFormatter:d,unit:h,angle:m}=e;if(!i||!i.length||!r)return[];if(Le(f)||wo.isSsr){var y;return(y=Tce(i,Le(f)?f:0))!==null&&y!==void 0?y:[]}var v=[],k=u==="top"||u==="bottom"?"width":"height",S=h&&k==="width"?Ac(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(N,O)=>{var M=typeof d=="function"?d(N.value,O):N.value;return k==="width"?Ece(Ac(M,{fontSize:t,letterSpacing:n}),S,m):Ac(M,{fontSize:t,letterSpacing:n})[k]},T=i.length>=2?Nn(i[1].coordinate-i[0].coordinate):1,A=Cce(a,T,k);return f==="equidistantPreserveStart"?Nce(T,A,C,i,o):(f==="preserveStart"||f==="preserveStartEnd"?v=Oce(T,A,C,i,o,f==="preserveStartEnd"):v=Mce(T,A,C,i,o),v.filter(N=>N.isShow))}var Rce=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>o&&(o=m.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+a,d=o+f+u+(n?r:0);return Math.round(d)}return 0},Ice=["axisLine","width","height","className","hide","ticks"],Dce=["viewBox"],Lce=["viewBox"];function rb(e,t){if(e==null)return{};var n,r,i=Uce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Uce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ho.apply(null,arguments)}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){qce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qce(e,t,n){return(t=$ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ce(e){var t=Bce(e,"string");return typeof t=="symbol"?t:t+""}function Bce(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K1={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function zce(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:u,otherSvgProps:f}=e;if(!u)return null;var d=bn(bn(bn({},f),Si(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);d=bn(bn({},d),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);d=bn(bn({},d),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return _.createElement("line",ho({},d,{className:kt("recharts-cartesian-axis-line",so(u,"className"))}))}function Fce(e,t,n,r,i,a,o,u,f){var d,h,m,y,v,k,S=u?-1:1,C=e.tickSize||o,T=Le(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":d=h=e.coordinate,y=n+ +!u*i,m=y-S*C,k=m-S*f,v=T;break;case"left":m=y=e.coordinate,h=t+ +!u*r,d=h-S*C,v=d-S*f,k=T;break;case"right":m=y=e.coordinate,h=t+ +u*r,d=h+S*C,v=d+S*f,k=T;break;default:d=h=e.coordinate,y=n+ +u*i,m=y+S*C,k=m+S*f,v=T;break}return{line:{x1:d,y1:m,x2:h,y2:y},tick:{x:v,y:k}}}function Vce(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Hce(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Gce(e){var{option:t,tickProps:n,value:r}=e,i,a=kt(n.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))i=_.cloneElement(t,bn(bn({},n),{},{className:a}));else if(typeof t=="function")i=t(bn(bn({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=kt(o,t==null?void 0:t.className)),i=_.createElement(fm,ho({},n,{className:o}),r)}return i}function Kce(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:a,unit:o,padding:u,tickTextProps:f,orientation:d,mirror:h,x:m,y,width:v,height:k,tickSize:S,tickMargin:C,fontSize:T,letterSpacing:A,getTicksConfig:N,events:O}=e,M=G1(bn(bn({},N),{},{ticks:t}),T,A),P=Vce(d,h),D=Hce(d,h),Y=Si(N),q=Ic(n),W={};typeof r=="object"&&(W=r);var F=bn(bn({},Y),{},{fill:"none"},W),$=M.map((R,z)=>{var{line:V,tick:U}=Fce(R,m,y,v,k,d,S,h,C),G=bn(bn(bn(bn({textAnchor:P,verticalAnchor:D},Y),{},{stroke:"none",fill:i},q),U),{},{index:z,payload:R,visibleTicksCount:M.length,tickFormatter:a,padding:u},f);return _.createElement(gr,ho({className:"recharts-cartesian-axis-tick",key:"tick-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},ed(O,R,z)),r&&_.createElement("line",ho({},F,V,{className:kt("recharts-cartesian-axis-tick-line",so(r,"className"))})),n&&_.createElement(Gce,{option:n,tickProps:G,value:"".concat(typeof a=="function"?a(R.value,z):R.value).concat(o||"")}))});return $.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},$):null}var Yce=_.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:u}=e,f=rb(e,Ice),[d,h]=_.useState(""),[m,y]=_.useState(""),v=_.useRef(null);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return Rce({ticks:v.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var k=_.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=C;var T=C[0];if(T){var A=window.getComputedStyle(T),N=A.fontSize,O=A.letterSpacing;(N!==d||O!==m)&&(h(N),y(O))}}},[d,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:_.createElement(gr,{className:kt("recharts-cartesian-axis",a),ref:k},_.createElement(zce,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Si(e)}),_.createElement(Kce,{ticks:u,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:d,letterSpacing:m,getTicksConfig:e,events:f}),_.createElement(Xse,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(ooe,{label:e.label,labelRef:e.labelRef}),e.children))}),Wce=_.memo(Yce,(e,t)=>{var{viewBox:n}=e,r=rb(e,Dce),{viewBox:i}=t,a=rb(t,Lce);return ql(n,i)&&ql(r,a)}),Y1=_.forwardRef((e,t)=>{var n=ir(e,K1);return _.createElement(Wce,ho({},n,{ref:t}))});Y1.displayName="CartesianAxis";var Jce=["x1","y1","x2","y2","key"],Xce=["offset"],Qce=["xAxisId","yAxisId"],Zce=["xAxisId","yAxisId"];function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(r){ede(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ede(e,t,n){return(t=tde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tde(e){var t=nde(e,"string");return typeof t=="symbol"?t:t+""}function nde(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}function dp(e,t){if(e==null)return{};var n,r,i=rde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ide=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:u}=e;return _.createElement("rect",{x:r,y:i,ry:u,width:a,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function qL(e,t){var n;if(_.isValidElement(e))n=_.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:a,y2:o,key:u}=t,f=dp(t,Jce),d=Si(f),{offset:h}=d,m=dp(d,Xce);n=_.createElement("line",Zs({},m,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:u}))}return n}function ade(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,u=dp(e,Qce),f=i.map((d,h)=>{var m=Gn(Gn({},u),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return qL(r,m)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function sde(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,u=dp(e,Zce),f=i.map((d,h)=>{var m=Gn(Gn({},u),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return qL(r,m)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function ode(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:u,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var d=u.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==d[0]&&d.unshift(0);var h=d.map((m,y)=>{var v=!d[y+1],k=v?i+o-m:d[y+1]-m;if(k<=0)return null;var S=y%t.length;return _.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:k,width:a,stroke:"none",fill:t[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function lde(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:u,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var d=f.map(m=>Math.round(m+i-i)).sort((m,y)=>m-y);i!==d[0]&&d.unshift(0);var h=d.map((m,y)=>{var v=!d[y+1],k=v?i+o-m:d[y+1]-m;if(k<=0)return null;var S=y%n.length;return _.createElement("rect",{key:"react-".concat(y),x:m,y:a,width:k,height:u,stroke:"none",fill:n[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var ude=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return AI(G1(Gn(Gn(Gn({},K1),n),{},{ticks:jI(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},cde=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return AI(G1(Gn(Gn(Gn({},K1),n),{},{ticks:jI(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},dde={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function $L(e){var t=_w(),n=Sw(),r=UI(),i=Gn(Gn({},ir(e,dde)),{},{x:Le(e.x)?e.x:r.left,y:Le(e.y)?e.y:r.top,width:Le(e.width)?e.width:r.width,height:Le(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:o,x:u,y:f,width:d,height:h,syncWithTicks:m,horizontalValues:y,verticalValues:v}=i,k=$r(),S=De(q=>_j(q,"xAxis",a,k)),C=De(q=>_j(q,"yAxis",o,k));if(!Le(d)||d<=0||!Le(h)||h<=0||!Le(u)||u!==+u||!Le(f)||f!==+f)return null;var T=i.verticalCoordinatesGenerator||ude,A=i.horizontalCoordinatesGenerator||cde,{horizontalPoints:N,verticalPoints:O}=i;if((!N||!N.length)&&typeof A=="function"){var M=y&&y.length,P=A({yAxis:C?Gn(Gn({},C),{},{ticks:M?y:C.ticks}):void 0,width:t,height:n,offset:r},M?!0:m);Fh(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(N=P)}if((!O||!O.length)&&typeof T=="function"){var D=v&&v.length,Y=T({xAxis:S?Gn(Gn({},S),{},{ticks:D?v:S.ticks}):void 0,width:t,height:n,offset:r},D?!0:m);Fh(Array.isArray(Y),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Y,"]")),Array.isArray(Y)&&(O=Y)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(ide,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),_.createElement(ode,Zs({},i,{horizontalPoints:N})),_.createElement(lde,Zs({},i,{verticalPoints:O})),_.createElement(ade,Zs({},i,{offset:r,horizontalPoints:N,xAxis:S,yAxis:C})),_.createElement(sde,Zs({},i,{offset:r,verticalPoints:O,xAxis:S,yAxis:C})))}$L.displayName="CartesianGrid";var fde=["dangerouslySetInnerHTML","ticks"],hde=["id"],pde=["domain"],mde=["domain"];function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ib.apply(null,arguments)}function fp(e,t){if(e==null)return{};var n,r,i=gde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yde(e){var t=Wt();return _.useLayoutEffect(()=>(t(Kle(e)),()=>{t(Yle(e))}),[e,t]),null}var vde=e=>{var{xAxisId:t,className:n}=e,r=De(bw),i=$r(),a="xAxis",o=De(C=>su(C,a,t,i)),u=De(C=>T4(C,a,t,i)),f=De(C=>S4(C,t)),d=De(C=>Mie(C,t)),h=De(C=>i4(C,t));if(f==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:y}=e,v=fp(e,fde),{id:k}=h,S=fp(h,hde);return _.createElement(Y1,ib({},v,S,{scale:o,x:d.x,y:d.y,width:f.width,height:f.height,className:kt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:u}))},xde={allowDataOverflow:Ar.allowDataOverflow,allowDecimals:Ar.allowDecimals,allowDuplicatedCategory:Ar.allowDuplicatedCategory,height:Ar.height,hide:!1,mirror:Ar.mirror,orientation:Ar.orientation,padding:Ar.padding,reversed:Ar.reversed,scale:Ar.scale,tickCount:Ar.tickCount,type:Ar.type,xAxisId:0},bde=e=>{var t,n,r,i,a,o=ir(e,xde);return _.createElement(_.Fragment,null,_.createElement(yde,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),_.createElement(vde,o))},wde=(e,t)=>{var{domain:n}=e,r=fp(e,pde),{domain:i}=t,a=fp(t,mde);return ql(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:ql({domain:n},{domain:i}):!1},BL=_.memo(bde,wde);BL.displayName="XAxis";var _de=["dangerouslySetInnerHTML","ticks"],Sde=["id"],kde=["domain"],Ede=["domain"];function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ab.apply(null,arguments)}function hp(e,t){if(e==null)return{};var n,r,i=Cde(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Cde(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Tde(e){var t=Wt();return _.useLayoutEffect(()=>(t(Wle(e)),()=>{t(Jle(e))}),[e,t]),null}var Nde=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=_.useRef(null),o=_.useRef(null),u=De(bw),f=$r(),d=Wt(),h="yAxis",m=De(M=>su(M,h,t,f)),y=De(M=>k4(M,t)),v=De(M=>Rie(M,t)),k=De(M=>T4(M,h,t,f)),S=De(M=>a4(M,t));if(_.useLayoutEffect(()=>{if(!(r!=="auto"||!y||D1(i)||_.isValidElement(i)||S==null)){var M=a.current;if(M){var P=M.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&d(Xle({id:t,width:P}))}}},[k,y,d,i,t,r,S]),y==null||v==null||S==null)return null;var{dangerouslySetInnerHTML:C,ticks:T}=e,A=hp(e,_de),{id:N}=S,O=hp(S,Sde);return _.createElement(Y1,ab({},A,O,{ref:a,labelRef:o,scale:m,x:v.x,y:v.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:y.width,height:y.height,className:kt("recharts-".concat(h," ").concat(h),n),viewBox:u,ticks:k}))},Ade={allowDataOverflow:jr.allowDataOverflow,allowDecimals:jr.allowDecimals,allowDuplicatedCategory:jr.allowDuplicatedCategory,hide:!1,mirror:jr.mirror,orientation:jr.orientation,padding:jr.padding,reversed:jr.reversed,scale:jr.scale,tickCount:jr.tickCount,type:jr.type,width:jr.width,yAxisId:0},jde=e=>{var t,n,r,i,a,o=ir(e,Ade);return _.createElement(_.Fragment,null,_.createElement(Tde,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),_.createElement(Nde,o))},Pde=(e,t)=>{var{domain:n}=e,r=hp(e,kde),{domain:i}=t,a=hp(t,Ede);return ql(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:ql({domain:n},{domain:i}):!1},zL=_.memo(jde,Pde);zL.displayName="YAxis";var Nv={exports:{}},Av={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP;function Mde(){if(SP)return Av;SP=1;var e=$l();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,o=e.useMemo,u=e.useDebugValue;return Av.useSyncExternalStoreWithSelector=function(f,d,h,m,y){var v=i(null);if(v.current===null){var k={hasValue:!1,value:null};v.current=k}else k=v.current;v=o(function(){function C(M){if(!T){if(T=!0,A=M,M=m(M),y!==void 0&&k.hasValue){var P=k.value;if(y(P,M))return N=P}return N=M}if(P=N,n(A,M))return P;var D=m(M);return y!==void 0&&y(P,D)?(A=M,P):(A=M,N=D)}var T=!1,A,N,O=h===void 0?null:h;return[function(){return C(d())},O===null?void 0:function(){return C(O())}]},[d,h,m,y]);var S=r(f,v[0],v[1]);return a(function(){k.hasValue=!0,k.value=S},[S]),u(S),S},Av}var kP;function Ode(){return kP||(kP=1,Nv.exports=Mde()),Nv.exports}Ode();function Rde(e){e()}function Ide(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Rde(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var EP={notify(){},get:()=>[]};function Dde(e,t){let n,r=EP,i=0,a=!1;function o(S){h();const C=r.subscribe(S);let T=!1;return()=>{T||(T=!0,C(),m())}}function u(){r.notify()}function f(){k.onStateChange&&k.onStateChange()}function d(){return a}function h(){i++,n||(n=e.subscribe(f),r=Ide())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=EP)}function y(){a||(a=!0,h())}function v(){a&&(a=!1,m())}const k={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>r};return k}var Lde=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ude=Lde(),qde=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$de=qde(),Bde=()=>Ude||$de?_.useLayoutEffect:_.useEffect,zde=Bde(),jv=Symbol.for("react-redux-context"),Pv=typeof globalThis<"u"?globalThis:{};function Fde(){if(!_.createContext)return{};const e=Pv[jv]??(Pv[jv]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var Vde=Fde();function Hde(e){const{children:t,context:n,serverState:r,store:i}=e,a=_.useMemo(()=>{const f=Dde(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),o=_.useMemo(()=>i.getState(),[i]);zde(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),o!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,o]);const u=n||Vde;return _.createElement(u.Provider,{value:a},t)}var Gde=Hde,Kde=(e,t)=>t,W1=oe([Kde,mt,t4,Sn,V4,ja,Uae,wn],Fae),J1=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},FL=oi("mouseClick"),VL=nd();VL.startListening({actionCreator:FL,effect:(e,t)=>{var n=e.payload,r=W1(t.getState(),J1(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(Kie({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var sb=oi("mouseMove"),HL=nd();HL.startListening({actionCreator:sb,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=T1(r,r.tooltip.settings.shared),a=W1(r,J1(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(I4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(R4()))}});var CP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},GL=qr({name:"rootProps",initialState:CP,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:CP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Yde=GL.reducer,{updateOptions:Wde}=GL.actions,KL=qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Jde}=KL.actions,Xde=KL.reducer,YL=oi("keyDown"),WL=oi("focus"),X1=nd();X1.startListening({actionCreator:YL,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(N1(i,lu(n))),u=ja(n);if(a==="Enter"){var f=ap(n,"axis","hover",String(i.index));t.dispatch(Qx({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var d=Uie(n),h=d==="left-to-right"?1:-1,m=a==="ArrowRight"?1:-1,y=o+m*h;if(!(u==null||y>=u.length||y<0)){var v=ap(n,"axis","hover",String(y));t.dispatch(Qx({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});X1.startListening({actionCreator:WL,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=ap(n,"axis","hover",String(a));t.dispatch(Qx({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Zr=oi("externalEvent"),JL=nd();JL.startListening({actionCreator:Zr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:Aae(n),activeDataKey:Y4(n),activeIndex:fo(n),activeLabel:K4(n),activeTooltipIndex:fo(n),isTooltipActive:jae(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Qde=oe([ou],e=>e.tooltipItemPayloads),Zde=oe([Qde,pd,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=t(a,n);return o}}}),XL=oi("touchMove"),QL=nd();QL.startListening({actionCreator:XL,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=T1(r,r.tooltip.settings.shared);if(i==="axis"){var a=W1(r,J1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(I4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,u=n.touches[0],f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(MI),h=(o=f.getAttribute(OI))!==null&&o!==void 0?o:void 0,m=Zde(t.getState(),d,h);t.dispatch(O4({activeDataKey:h,activeIndex:d,activeCoordinate:m}))}}});var efe=nI({brush:mce,cartesianAxis:Qle,chartData:ase,errorBars:fue,graphicalItems:gle,layout:yQ,legend:SZ,options:ese,polarAxis:Aoe,polarOptions:Xde,referenceElements:_ce,rootProps:Yde,tooltip:Yie}),tfe=function(t){return zX({reducer:efe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([VL.middleware,HL.middleware,X1.middleware,JL.middleware,QL.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(pI({type:"raf"}))},devTools:wo.devToolsEnabled})};function ZL(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=$r(),a=_.useRef(null);if(i)return n;a.current==null&&(a.current=tfe(t));var o=hw;return _.createElement(Gde,{context:o,store:a.current},n)}function e3(e){var{layout:t,margin:n}=e,r=Wt(),i=$r();return _.useEffect(()=>{i||(r(pQ(t)),r(hQ(n)))},[r,i,t,n]),null}function t3(e){var t=Wt();return _.useEffect(()=>{t(Wde(e))},[t,e]),null}var nfe=["children"];function rfe(e,t){if(e==null)return{};var n,r,i=ife(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ife(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pp.apply(null,arguments)}var afe={width:"100%",height:"100%",display:"block"},sfe=_.forwardRef((e,t)=>{var n=_w(),r=Sw(),i=zI();if(!Ml(n)||!Ml(r))return null;var{children:a,otherAttributes:o,title:u,desc:f}=e,d,h;return typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0,_.createElement(tw,pp({},o,{title:u,desc:f,role:h,tabIndex:d,width:n,height:r,style:afe,ref:t}),a)}),ofe=e=>{var{children:t}=e,n=De(Vp);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return _.createElement(tw,{width:r,height:i,x:o,y:a},t)},TP=_.forwardRef((e,t)=>{var{children:n}=e,r=rfe(e,nfe),i=$r();return i?_.createElement(ofe,null,n):_.createElement(sfe,pp({ref:t},r),n)});function lfe(){var e=Wt(),[t,n]=_.useState(null),r=De(GQ);return _.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Wn(a)&&a!==r&&e(gQ(a))}},[t,e,r]),n}function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ufe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){cfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cfe(e,t,n){return(t=dfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dfe(e){var t=ffe(e,"string");return typeof t=="symbol"?t:t+""}function ffe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(null,arguments)}var hfe=()=>(pse(),null);function mp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var pfe=_.forwardRef((e,t)=>{var n,r,i=_.useRef(null),[a,o]=_.useState({containerWidth:mp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:mp((r=e.style)===null||r===void 0?void 0:r.height)}),u=_.useCallback((d,h)=>{o(m=>{var y=Math.round(d),v=Math.round(h);return m.containerWidth===y&&m.containerHeight===v?m:{containerWidth:y,containerHeight:v}})},[]),f=_.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:h,height:m}=d.getBoundingClientRect();u(h,m);var y=k=>{var{width:S,height:C}=k[0].contentRect;u(S,C)},v=new ResizeObserver(y);v.observe(d),i.current=v}},[t,u]);return _.useEffect(()=>()=>{var d=i.current;d!=null&&d.disconnect()},[u]),_.createElement(_.Fragment,null,_.createElement(Gp,{width:a.containerWidth,height:a.containerHeight}),_.createElement("div",po({ref:f},e)))}),mfe=_.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=_.useState({containerWidth:mp(n),containerHeight:mp(r)}),o=_.useCallback((f,d)=>{a(h=>{var m=Math.round(f),y=Math.round(d);return h.containerWidth===m&&h.containerHeight===y?h:{containerWidth:m,containerHeight:y}})},[]),u=_.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:d,height:h}=f.getBoundingClientRect();o(d,h)}},[t,o]);return _.createElement(_.Fragment,null,_.createElement(Gp,{width:i.containerWidth,height:i.containerHeight}),_.createElement("div",po({ref:u},e)))}),gfe=_.forwardRef((e,t)=>{var{width:n,height:r}=e;return _.createElement(_.Fragment,null,_.createElement(Gp,{width:n,height:r}),_.createElement("div",po({ref:t},e)))}),yfe=_.forwardRef((e,t)=>{var{width:n,height:r}=e;return va(n)||va(r)?_.createElement(mfe,po({},e,{ref:t})):_.createElement(gfe,po({},e,{ref:t}))});function vfe(e){return e===!0?pfe:yfe}var xfe=_.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:u,onMouseDown:f,onMouseEnter:d,onMouseLeave:h,onMouseMove:m,onMouseUp:y,onTouchEnd:v,onTouchMove:k,onTouchStart:S,style:C,width:T,responsive:A,dispatchTouchEvents:N=!0}=e,O=_.useRef(null),M=Wt(),[P,D]=_.useState(null),[Y,q]=_.useState(null),W=lfe(),F=ww(),$=(F==null?void 0:F.width)>0?F.width:T,R=(F==null?void 0:F.height)>0?F.height:i,z=_.useCallback(ne=>{W(ne),typeof t=="function"&&t(ne),D(ne),q(ne),ne!=null&&(O.current=ne)},[W,t,D,q]),V=_.useCallback(ne=>{M(FL(ne)),M(Zr({handler:a,reactEvent:ne}))},[M,a]),U=_.useCallback(ne=>{M(sb(ne)),M(Zr({handler:d,reactEvent:ne}))},[M,d]),G=_.useCallback(ne=>{M(R4()),M(Zr({handler:h,reactEvent:ne}))},[M,h]),le=_.useCallback(ne=>{M(sb(ne)),M(Zr({handler:m,reactEvent:ne}))},[M,m]),ye=_.useCallback(()=>{M(WL())},[M]),B=_.useCallback(ne=>{M(YL(ne.key))},[M]),H=_.useCallback(ne=>{M(Zr({handler:o,reactEvent:ne}))},[M,o]),Z=_.useCallback(ne=>{M(Zr({handler:u,reactEvent:ne}))},[M,u]),I=_.useCallback(ne=>{M(Zr({handler:f,reactEvent:ne}))},[M,f]),X=_.useCallback(ne=>{M(Zr({handler:y,reactEvent:ne}))},[M,y]),re=_.useCallback(ne=>{M(Zr({handler:S,reactEvent:ne}))},[M,S]),me=_.useCallback(ne=>{N&&M(XL(ne)),M(Zr({handler:k,reactEvent:ne}))},[M,N,k]),we=_.useCallback(ne=>{M(Zr({handler:v,reactEvent:ne}))},[M,v]),$e=vfe(A);return _.createElement(eL.Provider,{value:P},_.createElement(wR.Provider,{value:Y},_.createElement($e,{width:$??(C==null?void 0:C.width),height:R??(C==null?void 0:C.height),className:kt("recharts-wrapper",r),style:ufe({position:"relative",cursor:"default",width:$,height:R},C),onClick:V,onContextMenu:H,onDoubleClick:Z,onFocus:ye,onKeyDown:B,onMouseDown:I,onMouseEnter:U,onMouseLeave:G,onMouseMove:le,onMouseUp:X,onTouchEnd:we,onTouchMove:me,onTouchStart:re,ref:z},_.createElement(hfe,null),n)))}),bfe=["width","height","responsive","children","className","style","compact","title","desc"];function wfe(e,t){if(e==null)return{};var n,r,i=_fe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _fe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var n3=_.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:u,compact:f,title:d,desc:h}=e,m=wfe(e,bfe),y=Si(m);return f?_.createElement(_.Fragment,null,_.createElement(Gp,{width:n,height:r}),_.createElement(TP,{otherAttributes:y,title:d,desc:h},a)):_.createElement(xfe,{className:o,style:u,width:n,height:r,responsive:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(TP,{otherAttributes:y,title:d,desc:h,ref:t},_.createElement(kce,null,a)))});function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ob.apply(null,arguments)}var Sfe={top:5,right:5,bottom:5,left:5},kfe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Sfe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Efe=_.forwardRef(function(t,n){var r,i=ir(t.categoricalChartProps,kfe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:d}=t,h={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(ZL,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},_.createElement(IL,{chartData:d.data}),_.createElement(e3,{layout:i.layout,margin:i.margin}),_.createElement(t3,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(n3,ob({},i,{ref:n})))}),Cfe=["axis","item"],Tfe=_.forwardRef((e,t)=>_.createElement(Efe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cfe,tooltipPayloadSearcher:tL,categoricalChartProps:e,ref:t}));function Nfe(e){var t=Wt();return _.useEffect(()=>{t(Jde(e))},[t,e]),null}var Afe=["layout"];function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lb.apply(null,arguments)}function jfe(e,t){if(e==null)return{};var n,r,i=Pfe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pfe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Mfe={top:5,right:5,bottom:5,left:5},Ofe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Mfe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Rfe=_.forwardRef(function(t,n){var r,i=ir(t.categoricalChartProps,Ofe),{layout:a}=i,o=jfe(i,Afe),{chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return _.createElement(ZL,{preloadedState:{options:m},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:u},_.createElement(IL,{chartData:i.data}),_.createElement(e3,{layout:a,margin:i.margin}),_.createElement(t3,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),_.createElement(Nfe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),_.createElement(n3,lb({},o,{ref:n})))}),Ife=["item"],Dfe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Lfe=_.forwardRef((e,t)=>{var n=ir(e,Dfe);return _.createElement(Rfe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ife,tooltipPayloadSearcher:tL,categoricalChartProps:n,ref:t})});const Ufe={blue:"bg-blue-100 text-clinical-blue dark:bg-blue-900/50",green:"bg-green-100 text-pharmacy-green dark:bg-green-900/50",red:"bg-red-100 text-red-500 dark:bg-red-900/50",yellow:"bg-yellow-100 text-yellow-500 dark:bg-yellow-900/50"},uh=({title:e,value:t,icon:n,color:r})=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 flex items-center dark:bg-gray-800 dark:hover:border-gray-600 dark:border-transparent dark:border",children:[c.jsx("div",{className:`flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full ${Ufe[r]}`,children:n}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e}),c.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:t})]})]}),qfe=({data:e})=>{const{theme:t}=Sp(),n=t==="dark"?"#9CA3AF":"#6B7280",r=t==="dark"?"#1F2937":"#FFFFFF",i=t==="dark"?"#374151":"#E5E7EB";return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-96 dark:bg-gray-800 dark:text-gray-300",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 dark:text-gray-100",children:"Productos Más Vendidos"}),c.jsx(LI,{width:"100%",height:"100%",children:c.jsxs(Tfe,{data:e,margin:{top:5,right:20,left:-10,bottom:40},children:[c.jsx($L,{strokeDasharray:"3 3",vertical:!1,stroke:t==="dark"?"#374151":"#E5E7EB"}),c.jsx(BL,{dataKey:"name",angle:-25,textAnchor:"end",height:60,interval:0,tick:{fontSize:12,fill:n}}),c.jsx(zL,{tick:{fontSize:12,fill:n}}),c.jsx(aL,{cursor:{fill:"rgba(0, 122, 255, 0.1)"},contentStyle:{borderRadius:"0.5rem",border:`1px solid ${i}`,backgroundColor:r},labelStyle:{color:n}}),c.jsx(id,{wrapperStyle:{paddingTop:"20px"}}),c.jsx(OL,{dataKey:"ventas",fill:"#007AFF",name:"Nro. de Ventas",barSize:30,radius:[4,4,0,0]})]})})]})},Bn=({columns:e,data:t,title:n})=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 flex flex-col",children:[n&&c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 dark:text-gray-100",children:n}),c.jsx("div",{className:"overflow-auto max-h-[70vh] rounded-lg border dark:border-gray-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:c.jsx("tr",{children:e.map((r,i)=>c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider dark:text-gray-300",children:r.header},i))})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:t.length>0?t.map((r,i)=>c.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:e.map((a,o)=>c.jsx("td",{className:"px-6 py-4 whitespace-normal break-words text-sm text-black dark:text-gray-100",children:a.render?a.render(r):String(r[a.accessor]??"")},o))},i)):c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No hay datos para mostrar."})})})]})})]}),$fe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Bfe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"8",r:"7"}),c.jsx("polyline",{points:"8.21 13.89 7 22 12 17 17 22 15.79 13.88"})]}),zfe=({data:e})=>{const{theme:t}=Sp(),n=["#0088FE","#00C49F","#FFBB28","#FF8042"],r=t==="dark"?"#9CA3AF":"#6B7280",i=t==="dark"?"#1F2937":"#FFFFFF",a=t==="dark"?"#374151":"#E5E7EB";return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-96 dark:bg-gray-800 flex flex-col",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 dark:text-gray-100",children:"Ventas por Método de Pago"}),c.jsx(LI,{width:"100%",height:"100%",children:c.jsxs(Lfe,{children:[c.jsx(TL,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:o,percent:u})=>`${o} ${(u*100).toFixed(0)}%`,children:e.map((o,u)=>c.jsx(gd,{fill:n[u%n.length]},`cell-${u}`))}),c.jsx(aL,{contentStyle:{borderRadius:"0.5rem",border:`1px solid ${a}`,backgroundColor:i},labelStyle:{color:r},formatter:o=>`S/ ${o.toFixed(2)}`}),c.jsx(id,{})]})})]})},Ffe=({data:e})=>{const t=Math.max(...e.map(r=>r.revenue),0),n=["bg-blue-500","bg-blue-400","bg-blue-300","bg-sky-300","bg-sky-200"];return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm h-96 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 dark:text-gray-100",children:"Top 5 Productos por Ingresos"}),c.jsxs("div",{className:"space-y-4",children:[e.map((r,i)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:r.name}),c.jsxs("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:["S/ ",r.revenue.toFixed(2)]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:c.jsx("div",{className:`h-2.5 rounded-full ${n[i%n.length]}`,style:{width:`${t>0?r.revenue/t*100:0}%`}})})]},r.name)),e.length===0&&c.jsx("p",{className:"text-center text-sm text-gray-500 pt-10",children:"No hay datos de ingresos para mostrar."})]})]})},Vfe=()=>{const{profile:e,user:t,sede:n,empresa:r}=Mt(),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState({totalSalesToday:0,totalRevenueToday:0,totalCommissionsMonth:0}),[h,m]=_.useState({lowStock:0}),[y,v]=_.useState([]),[k,S]=_.useState([]),[C,T]=_.useState([]),[A,N]=_.useState([]),O=_.useCallback(async()=>{if(!t||!e||!n||!r){a(!1);return}try{a(!0),u(null);const P=new Date;P.setHours(0,0,0,0);const D=P.toISOString(),Y=new Date(P.getFullYear(),P.getMonth(),1).toISOString(),[q,W,F,$,R]=await Promise.all([te.from("ventas").select("total").eq("usuario",t.email).gte("fecha_venta",D).eq("sede_id",n.id).eq("empresa_id",r.id),te.from("comisiones_generadas").select("monto_comision").eq("usuario_id",e.id).gte("fecha_generacion",Y).eq("sede_id",n.id).eq("empresa_id",r.id),te.from("detalle_ventas").select("producto_nombre, subtotal, cantidad").eq("usuario",t.email).eq("sede_id",n.id).eq("empresa_id",r.id),te.from("ventas").select("cliente, tipo_pago, total").eq("usuario",t.email).eq("sede_id",n.id).eq("empresa_id",r.id),te.from("productos").select("stock_unid, stock_min").eq("sede_id",n.id).eq("empresa_id",r.id)]);if(q.error)throw new Error(`Ventas Hoy: ${q.error.message}`);if(W.error)throw new Error(`Comisiones: ${W.error.message}`);if(F.error)throw new Error(`Detalle Ventas: ${F.error.message}`);if($.error)throw new Error(`Ventas Generales: ${$.error.message}`);if(R.error)throw new Error(`Stock Bajo: ${R.error.message}`);const z=(q.data||[]).reduce((X,re)=>X+(re.total||0),0),V=(W.data||[]).reduce((X,re)=>X+(re.monto_comision||0),0);d({totalSalesToday:(q.data||[]).length,totalRevenueToday:z,totalCommissionsMonth:V});const U=(R.data||[]).filter(X=>X.stock_unid!=null&&X.stock_min!=null&&X.stock_unid<=X.stock_min).length;m({lowStock:U});const G=(F.data||[]).reduce((X,re)=>(re.producto_nombre&&(X[re.producto_nombre]=(X[re.producto_nombre]||0)+(re.cantidad||0)),X),{}),le=Object.entries(G).sort(([,X],[,re])=>re-X).slice(0,7).map(([X,re])=>({name:X.split(" ")[0],ventas:re}));v(le);const ye=($.data||[]).reduce((X,re)=>{const me=re.tipo_pago||"Efectivo";return X[me]=(X[me]||0)+(re.total||0),X},{});S(Object.entries(ye).map(([X,re])=>({name:X,value:re})));const B=(F.data||[]).reduce((X,re)=>(re.producto_nombre&&(X[re.producto_nombre]=(X[re.producto_nombre]||0)+(re.subtotal||0)),X),{}),H=Object.entries(B).sort(([,X],[,re])=>re-X).slice(0,5).map(([X,re])=>({name:X,revenue:re}));T(H);const Z=($.data||[]).reduce((X,re)=>{const me=re.cliente||"Cliente Varios";return X[me]=(X[me]||0)+1,X},{}),I=Object.entries(Z).filter(([X])=>X!=="Cliente Varios").sort(([,X],[,re])=>re-X).slice(0,5).map(([X,re])=>({cliente:X,visitas:re}));N(I)}catch(P){u(`Error al cargar datos del dashboard: ${P.message}`),console.error("Error fetching dashboard data:",P)}finally{a(!1)}},[t,e,n,r]);_.useEffect(()=>{O()},[O]);const M=[{header:"Cliente",accessor:"cliente"},{header:"N° de Ventas",accessor:"visitas"}];return i?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:o}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(uh,{title:"Mis Ventas del Día",value:f.totalSalesToday,icon:c.jsx(Cb,{className:"w-6 h-6"}),color:"blue"}),c.jsx(uh,{title:"Mis Ingresos del Día",value:`S/ ${f.totalRevenueToday.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:c.jsx($fe,{}),color:"green"}),c.jsx(uh,{title:"Mis Comisiones (Mes)",value:`S/ ${f.totalCommissionsMonth.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:c.jsx(Bfe,{}),color:"yellow"}),c.jsx(uh,{title:"Productos con Stock Bajo",value:h.lowStock,icon:c.jsx(Wc,{className:"w-6 h-6"}),color:"red"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(qfe,{data:y}),c.jsx(zfe,{data:k})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Ffe,{data:C}),c.jsx(Bn,{title:"Clientes Más Atendidos",columns:M,data:A})]})]})},Q1=({sale:e,onClose:t})=>{const[n,r]=_.useState([]),[i,a]=_.useState(!1),[o,u]=_.useState(null);return _.useEffect(()=>{if(!e)return;(async()=>{a(!0),u(null);const{data:d,error:h}=await te.from("detalle_ventas").select("id, producto_nombre, cantidad, precio_unitario, subtotal, tipo").eq("venta_id",e.id);h?(console.error("Error fetching sale details:",h),u("No se pudieron cargar los detalles de la venta.")):r(d||[]),a(!1)})()},[e]),e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex justify-center items-center p-4 transition-opacity duration-300",onClick:t,children:c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-2xl z-50 max-h-[90vh] flex flex-col animate-fade-in-down dark:bg-gray-800",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["Detalle de Venta N° ",c.jsx("span",{className:"text-clinical-blue",children:e.id})]}),c.jsx("button",{onClick:t,className:"text-2xl p-1 rounded-full hover:bg-gray-200 text-gray-500 leading-none dark:text-gray-400 dark:hover:bg-gray-700",children:"×"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm mb-4",children:[c.jsxs("div",{children:[c.jsx("strong",{className:"text-gray-600 dark:text-gray-400",children:"Cliente:"})," ",c.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:e.cliente||"Cliente Varios"})]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-gray-600 dark:text-gray-400",children:"Fecha:"})," ",c.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(e.fecha_venta).toLocaleString("es-PE")})]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-gray-600 dark:text-gray-400",children:"Usuario:"})," ",c.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:e.usuario})]}),c.jsxs("div",{children:[c.jsx("strong",{className:"text-gray-600 dark:text-gray-400",children:"Tipo de Pago:"})," ",c.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:e.tipo_pago})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto border rounded-lg dark:border-gray-700",children:i?c.jsx("div",{className:"flex justify-center items-center h-40",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-center py-10 text-red-500 dark:text-red-400",children:o}):c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{className:"bg-soft-gray-100 sticky top-0 z-10 dark:bg-gray-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300 uppercase",children:"Producto"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600 dark:text-gray-300 uppercase",children:"Cantidad"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase",children:"P. Unit."}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600 dark:text-gray-300 uppercase",children:"Subtotal"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-600",children:n.length>0?n.map(f=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100",children:f.producto_nombre}),c.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-center text-gray-700 dark:text-gray-300",children:[f.cantidad," x ",f.tipo]}),c.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-right text-gray-700 dark:text-gray-300",children:["S/ ",f.precio_unitario.toFixed(2)]}),c.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-right font-semibold text-gray-900 dark:text-gray-100",children:["S/ ",f.subtotal.toFixed(2)]})]},f.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No hay detalles para esta venta."})})})]})}),c.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-gray-800 border-t pt-4 mt-4 dark:text-gray-100 dark:border-gray-700",children:[c.jsx("span",{children:"Total de Venta:"}),c.jsxs("span",{className:"text-clinical-blue",children:["S/ ",e.total_a_pagar?e.total_a_pagar.toFixed(2):e.total.toFixed(2)]})]}),c.jsx("style",{children:`
                    @keyframes fade-in-down {
                      0% { opacity: 0; transform: translateY(-10px); }
                      100% { opacity: 1; transform: translateY(0); }
                    }
                    .animate-fade-in-down { animation: fade-in-down 0.2s ease-out; }
                `})]})}):null},ub=(e,t="boleta")=>{const{saleData:n,details:r,clientName:i,totals:a}=e,o='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"/><path d="m8.5 8.5 7 7"/></svg>',u=n.id;return`
        <html>
        <head>
            <title>${t==="factura"?"Factura de Venta":"Boleta de Venta"} N° ${u}</title>
            <style>
                @media print {
                    @page { size: 58mm auto; margin: 2mm; }
                    body { font-family: 'Courier New', monospace; font-size: 8pt; color: #000; }
                    .receipt { width: 100%; }
                    .center { text-align: center; }
                    .header { margin-bottom: 5px; }
                    .header h1 { font-size: 11pt; margin: 0; }
                    .header p { margin: 1px 0; font-size: 7pt; }
                    .item-table { width: 100%; border-collapse: collapse; font-size: 8pt; }
                    .item-table th, .item-table td { padding: 1mm 0; }
                    .item-table thead tr { border-bottom: 1px dashed #000; }
                    .item-table .desc { text-align: left; }
                    .item-table .qty, .item-table .price, .item-table .sub { text-align: right; }
                    .totals-table { width: 100%; margin-top: 5px; font-size: 9pt; }
                    .totals-table td { padding: 1px 0; }
                    .totals-table .label { text-align: left; }
                    .totals-table .value { text-align: right; }
                    .totals-table .total .value { font-weight: bold; }
                    .footer { margin-top: 5px; }
                    .qr-code { margin-top: 5px; }
                    .advice { margin-top: 5px; padding: 5px; border: 1px dashed #000; text-align: center; font-style: italic; font-size: 7pt; }
                    hr.dashed { border: none; border-top: 1px dashed #000; margin: 5px 0; }
                }
            </style>
        </head>
        <body>
            <div class="receipt">
                <div class="header center">
                    ${o}
                    <h1>GestionFarma</h1>
                    <p>RUC: 20123456789</p>
                    <p>Av. Principal 123, Lima, Perú</p>
                    <p>Cel: 987654321</p>
                </div>
                <hr class="dashed">
                <p>${t==="factura"?"Factura":"Boleta"} de Venta N°: ${u}</p>
                <p>Fecha: ${new Date(n.fecha_venta).toLocaleString("es-PE")}</p>
                <p>Cliente: ${i}</p>
                <hr class="dashed">
                <table class="item-table">
                    <thead><tr><th class="desc">Producto</th><th class="qty">Cant</th><th class="sub">Total</th></tr></thead>
                    <tbody>
                        ${r.map(h=>`
                            <tr>
                                <td class="desc">${h.isRedeemed?`(CANJE) ${h.producto_nombre}`:h.producto_nombre}</td>
                                <td class="qty">${h.cantidad}</td>
                                <td class="sub">S/${h.subtotal.toFixed(2)}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
                <hr class="dashed">
                <table class="totals-table">
                    <tr><td class="label">OP. GRAVADA:</td><td class="value">S/ ${a.baseImponible.toFixed(2)}</td></tr>
                    <tr><td class="label">IGV (18%):</td><td class="value">S/ ${a.igv.toFixed(2)}</td></tr>
                    <tr><td class="label">SUBTOTAL:</td><td class="value">S/ ${a.subtotal.toFixed(2)}</td></tr>
                    <tr><td class="label">DESCUENTO:</td><td class="value">- S/ ${a.totalDiscount.toFixed(2)}</td></tr>
                    ${a.redondeo!==0?`<tr><td class="label">REDONDEO:</td><td class="value">S/ ${a.redondeo.toFixed(2)}</td></tr>`:""}
                    <tr class="total"><td class="label">TOTAL A PAGAR:</td><td class="value">S/ ${a.totalAPagar.toFixed(2)}</td></tr>
                </table>
                 <p>Tipo de Pago: ${n.tipo_pago}</p>
                ${n.consejo_ticket?`<div class="advice">${n.consejo_ticket}</div>`:""}
                <hr class="dashed">
                <div class="footer center">
                    <p>¡Gracias por su compra!</p>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${encodeURIComponent(`Venta ID: ${u}`)}" alt="QR Code">
                    </div>
                </div>
            </div>
        </body>
        </html>
    `},Hfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),c.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),c.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Gfe=e=>{if(!e)return c.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-200",children:"N/A"});const t=e.toLowerCase();let n="bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-200";return t==="completada"||t==="pagado"?n="bg-green-100 text-pharmacy-green dark:bg-green-900/50 dark:text-green-300":t==="pendiente"?n="bg-yellow-100 text-yellow-600 dark:bg-yellow-900/50 dark:text-yellow-300":(t==="cancelada"||t==="anulada")&&(n="bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-300"),c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n}`,children:e})},Kfe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(null),[h,m]=_.useState(null);_.useEffect(()=>{(async()=>{if(!e||!t){a(!1);return}a(!0);const{data:C,error:T}=await te.from("ventas").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("fecha_venta",{ascending:!1});T?(console.error("Error fetching ventas:",T),u(`Error al cargar ventas: ${T.message}. Asegúrate de que la tabla "ventas" exista y tenga una política de RLS que permita la lectura.`)):(r(C||[]),u(null)),a(!1)})()},[e,t]);const y=S=>{d(S)},v=async S=>{m(S.id);try{const{data:C,error:T}=await te.from("detalle_ventas").select("*").eq("venta_id",S.id);if(T)throw T;const A=S.total,N=S.total_a_pagar||S.total;let O=0;S.descuento_soles?O=S.descuento_soles:S.descuento_porcentaje?O=A*(S.descuento_porcentaje/100):O=A-N;const M=N/1.18,P=N-M,D={saleData:S,details:C,clientName:S.cliente||"Cliente Varios",totals:{subtotal:A,totalDiscount:O,baseImponible:M,igv:P,redondeo:N-(A-O),totalAPagar:N,vuelto:0}},Y=ub(D,S.documento_tipo||"boleta"),q=window.open("","_blank");q&&(q.document.write(Y),q.document.close(),q.focus(),setTimeout(()=>{q.print(),q.close()},250))}catch(C){u(`Error al reimprimir: ${C.message}`)}finally{m(null)}},k=[{header:"ID Venta",accessor:"id"},{header:"Fecha",accessor:"fecha_venta",render:S=>S.fecha_venta?new Date(S.fecha_venta).toLocaleString("es-PE",{dateStyle:"short",timeStyle:"short"}):"-"},{header:"Cliente",accessor:"cliente"},{header:"Usuario",accessor:"usuario"},{header:"Tipo Pago",accessor:"tipo_pago"},{header:"Total",accessor:"total",render:S=>`S/ ${S.total.toFixed(2)}`},{header:"Estado",accessor:"estado",render:S=>Gfe(S.estado)},{header:"Acciones",accessor:"id",render:S=>c.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[c.jsx("button",{onClick:()=>y(S),className:"text-gray-500 hover:text-clinical-blue p-1 rounded-full hover:bg-blue-100 transition-colors dark:text-gray-400 dark:hover:bg-gray-700",title:"Ver Detalle",children:c.jsx(MB,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>v(S),disabled:h===S.id,className:"text-gray-500 hover:text-clinical-blue p-1 rounded-full hover:bg-blue-100 transition-colors disabled:opacity-50 disabled:cursor-wait dark:text-gray-400 dark:hover:bg-gray-700",title:"Reimprimir Documento",children:h===S.id?c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-clinical-blue"}):c.jsx(Hfe,{className:"w-5 h-5"})})]})}];return i?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:o}):c.jsxs("div",{children:[c.jsx(Bn,{title:"Historial de Ventas",columns:k,data:n}),c.jsx(Q1,{sale:f,onClose:()=>d(null)})]})},Yfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),c.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),c.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Wfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m3 16 4 4 4-4"}),c.jsx("path",{d:"M7 20V4"}),c.jsx("path",{d:"M11 4h10"}),c.jsx("path",{d:"M11 8h7"}),c.jsx("path",{d:"M11 12h4"})]}),Jfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m3 8 4-4 4 4"}),c.jsx("path",{d:"M7 4v16"}),c.jsx("path",{d:"M11 4h10"}),c.jsx("path",{d:"M11 8h7"}),c.jsx("path",{d:"M11 12h4"})]}),Xfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Qfe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Zfe=({title:e,message:t})=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 text-center dark:bg-gray-800",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:e}),c.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:t})]}),ehe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState("listado"),[i,a]=_.useState([]),[o,u]=_.useState(!0),[f,d]=_.useState(null),[h,m]=_.useState(""),[y,v]=_.useState({key:"nombre",direction:"ascending"}),[k,S]=_.useState("all"),[C,T]=_.useState(30),[A,N]=_.useState("days"),O=_.useCallback(async()=>{if(!e||!t){u(!1);return}u(!0);const{data:R,error:z}=await te.from("productos").select("*").eq("sede_id",e.id).eq("empresa_id",t.id);z?d(`Error al cargar productos: ${z.message}.`):a(R||[]),u(!1)},[e,t]);_.useEffect(()=>{O()},[O]);const M=R=>{let z="ascending";y&&y.key===R&&y.direction==="ascending"&&(z="descending"),v({key:R,direction:z})},P=R=>!y||y.key!==R?null:y.direction==="ascending"?c.jsx(Wfe,{className:"inline-block ml-1 h-3 w-3"}):c.jsx(Jfe,{className:"inline-block ml-1 h-3 w-3"}),D=_.useMemo(()=>{let R=[...i];if(h&&(R=R.filter(z=>{var V,U;return z.nombre.toLowerCase().includes(h.toLowerCase())||((V=z.codigo)==null?void 0:V.toLowerCase().includes(h.toLowerCase()))||((U=z.laboratorio)==null?void 0:U.toLowerCase().includes(h.toLowerCase()))})),n==="reportes"){const z=new Date;switch(z.setHours(0,0,0,0),k){case"lowStock":R=R.filter(U=>(U.stock_unid??0)<=(U.stock_min??0));break;case"expired":R=R.filter(U=>U.f_vencimiento&&new Date(U.f_vencimiento)<z);break;case"expiring":const V=new Date(z);A==="days"?V.setDate(z.getDate()+C):A==="months"?V.setMonth(z.getMonth()+C):A==="years"&&V.setFullYear(z.getFullYear()+C),R=R.filter(U=>U.f_vencimiento&&new Date(U.f_vencimiento)>=z&&new Date(U.f_vencimiento)<=V);break}}return y!==null&&R.sort((z,V)=>{const U=z[y.key],G=V[y.key];return U==null?1:G==null?-1:U<G?y.direction==="ascending"?-1:1:U>G?y.direction==="ascending"?1:-1:0}),R},[i,h,y,n,k,C,A]),Y=()=>{const R=n==="reportes"?`Reporte: ${k}`:"Listado General",z=window.open("","_blank");z&&(z.document.write(`
                <html><head><title>Reporte de Inventario</title>
                <style>
                    @media print {
                        body { font-family: 'Courier New', monospace; font-size: 10px; width: 58mm; margin: 0; padding: 5mm; }
                        @page { size: 58mm auto; margin: 5mm; }
                        h1, h2, p { margin: 0; text-align: center; }
                        h1 { font-size: 14px; }
                        h2 { font-size: 11px; font-weight: normal; margin-top: 5px; }
                        p { font-size: 9px; margin-top: 2px; }
                        hr { border: none; border-top: 1px dashed black; margin: 5px 0; }
                        .item { padding: 3px 0; border-bottom: 1px dashed #ccc; }
                        .item:last-child { border-bottom: none; }
                        .item-header { display: flex; justify-content: space-between; font-weight: bold; }
                        .item-header span:first-child { width: 75%; }
                        .item-header span:last-child { width: 25%; text-align: right; }
                        .item-details { font-size: 9px; color: #333; }
                    }
                </style>
                </head><body>
                    <h1>GestionFarma</h1>
                    <h2>${R}</h2>
                    <p>Fecha: ${new Date().toLocaleString("es-PE")}</p>
                    <hr />
                    ${D.length===0?"<p>No hay datos para mostrar.</p>":D.map(V=>`
                        <div class="item">
                           <div class="item-header">
                               <span>${V.nombre.substring(0,30)}</span>
                               <span>S: ${V.stock_unid??0}</span>
                           </div>
                           <div class="item-details">
                               <span>SKU: ${V.codigo||"N/A"}</span> | <span>Vence: ${V.f_vencimiento||"N/A"}</span>
                           </div>
                        </div>
                    `).join("")}
                    <hr />
                    <p style="text-align: center;">-- Fin del Reporte --</p>
                </body></html>`),z.document.close(),z.focus(),setTimeout(()=>{z.print(),z.close()},250))},q=R=>{const z=R.stock_unid||0,V=R.stock_min||10;return z<=0?c.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-white bg-black rounded-full dark:bg-gray-600",children:"Agotado"}):z<=V?c.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-200 rounded-full dark:bg-red-900/50 dark:text-red-300",children:z}):z<=V*2?c.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-200 rounded-full dark:bg-yellow-900/50 dark:text-yellow-300",children:z}):c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:z})},W=()=>{if(o)return c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})});if(f)return c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg mt-6 dark:bg-red-900/40 dark:text-red-300",children:f});const R=()=>c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:c.jsx("tr",{children:F.map(V=>c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider dark:text-gray-300",children:c.jsxs("button",{onClick:()=>M(V.key),className:"flex items-center",children:[V.header," ",P(V.key)]})},V.key))})}),z=()=>c.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:D.length>0?D.map((V,U)=>c.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:F.map(G=>c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black dark:text-gray-100",children:G.render?G.render(V):String(V[G.key]??"-")},G.key))},V.id||U)):c.jsx("tr",{children:c.jsx("td",{colSpan:F.length,className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No se encontraron productos."})})});switch(n){case"ingresos":return c.jsx(the,{onDataChange:O,sede:e,empresa:t});case"ordenes":return c.jsx(nhe,{onDataChange:O,sede:e,empresa:t});case"cruce":return c.jsx(Zfe,{title:"Cruce de Inventario",message:"Esta herramienta para realizar auditorías y comparar stock físico vs. sistema está en construcción."});case"reportes":case"listado":default:return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-4",children:[c.jsxs("div",{className:"relative w-full md:w-1/3",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre, código o laboratorio...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-clinical-blue focus:border-clinical-blue dark:bg-gray-700 dark:border-gray-600 text-black dark:text-white",value:h,onChange:V=>m(V.target.value)}),c.jsx(Xfe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),n==="reportes"&&c.jsxs("div",{className:"flex-grow flex flex-wrap items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>S("lowStock"),className:`px-3 py-1 text-sm rounded-full ${k==="lowStock"?"bg-red-500 text-white":"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-200"}`,children:"Stock Bajo"}),c.jsx("button",{onClick:()=>S("expired"),className:`px-3 py-1 text-sm rounded-full ${k==="expired"?"bg-black text-white":"bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:"Vencidos"}),c.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 dark:bg-yellow-900/50 rounded-full pl-1",children:[c.jsx("button",{onClick:()=>S("expiring"),className:`px-3 py-1 text-sm rounded-full ${k==="expiring"?"bg-yellow-500 text-white":"text-yellow-700 dark:text-yellow-200"}`,children:"Por Vencer en"}),c.jsx("input",{type:"number",min:"1",value:C,onChange:V=>T(V.target.value?parseInt(V.target.value,10):0),disabled:k!=="expiring",className:"w-14 p-0 text-center bg-transparent text-yellow-800 dark:text-yellow-200 text-sm font-semibold border-0 focus:ring-0 [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),c.jsxs("select",{value:A,onChange:V=>N(V.target.value),disabled:k!=="expiring",className:"bg-transparent text-yellow-800 dark:text-yellow-200 text-sm font-semibold border-0 focus:ring-0 pr-3",children:[c.jsx("option",{value:"days",children:"días"}),c.jsx("option",{value:"months",children:"meses"}),c.jsx("option",{value:"years",children:"años"})]})]})]}),c.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:[c.jsx(Yfe,{className:"w-5 h-5"})," Imprimir / Descargar"]})]}),c.jsx("div",{className:"overflow-auto max-h-[60vh] border dark:border-gray-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx(R,{}),c.jsx(z,{})]})})]})}},F=[{header:"Código",key:"codigo",render:R=>R.codigo||"-"},{header:"Nombre",key:"nombre"},{header:"Stock (Unid)",key:"stock_unid",render:R=>q(R)},{header:"PV (Unid)",key:"unid_pv",render:R=>R.unid_pv?`S/ ${R.unid_pv.toFixed(2)}`:"-"},{header:"Vencimiento",key:"f_vencimiento"},{header:"Lote",key:"lote",render:R=>R.lote||"-"},{header:"Laboratorio",key:"laboratorio",render:R=>R.laboratorio||"-"}],$=({tabId:R,label:z})=>c.jsx("button",{onClick:()=>r(R),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${n===R?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:z});return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Gestión de Inventario"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx($,{tabId:"listado",label:"Listado General"}),c.jsx($,{tabId:"reportes",label:"Reportes de Stock"}),c.jsx($,{tabId:"ingresos",label:"Ingresos de Mercadería"}),c.jsx($,{tabId:"ordenes",label:"Órdenes de Compra"}),c.jsx($,{tabId:"cruce",label:"Cruce de Inventario"})]}),W()]})},the=({onDataChange:e,sede:t,empresa:n})=>{const[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState(!1),m=_.useCallback(async()=>{if(!t||!n)return;o(!0);const{data:k,error:S}=await te.from("ingresos").select("*").eq("sede_id",t.id).eq("empresa_id",n.id).order("f_ingreso",{ascending:!1}).limit(100);S?f(`Error al cargar ingresos: ${S.message}`):i(k||[]),o(!1)},[t,n]);_.useEffect(()=>{m()},[m]);const y=()=>{m(),e()},v=[{header:"Fecha Ingreso",accessor:"f_ingreso",render:k=>new Date(k.f_ingreso).toLocaleDateString("es-PE")},{header:"N° Factura",accessor:"numero_factura"},{header:"Proveedor",accessor:"proveedor"},{header:"Producto",accessor:"producto"},{header:"Unidades Ingresadas",accessor:"cantidad"},{header:"Costo Unitario",accessor:"precio_compra",render:k=>`S/ ${k.precio_compra.toFixed(2)}`},{header:"Usuario",accessor:"usuario"}];return a?c.jsx("div",{className:"mt-6 flex justify-center items-center h-64",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):u?c.jsx("div",{className:"mt-6 text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:u}):c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Historial de Ingresos"}),c.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"}),"Registrar Nuevo Ingreso"]})]}),c.jsx(Bn,{title:"",columns:v,data:r}),d&&c.jsx(rhe,{onClose:()=>h(!1),onSaveSuccess:y,sede:t,empresa:n})]})},nhe=({onDataChange:e,sede:t,empresa:n})=>{const[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState(!1),m=_.useCallback(async()=>{if(!t||!n)return;o(!0);const{data:k,error:S}=await te.from("orden_compra").select("*").eq("sede_id",t.id).eq("empresa_id",n.id).order("fecha_pedido",{ascending:!1});S?f(`Error al cargar órdenes: ${S.message}`):i(k||[]),o(!1)},[t,n]);_.useEffect(()=>{m()},[m]);const y=()=>{m(),e()},v=[{header:"ID",accessor:"id"},{header:"Proveedor",accessor:"proveedor"},{header:"Fecha Pedido",accessor:"fecha_pedido",render:k=>k.fecha_pedido?new Date(k.fecha_pedido).toLocaleDateString("es-PE"):"-"},{header:"Estado",accessor:"estado"},{header:"Usuario",accessor:"usuario"},{header:"Acciones",accessor:"id",render:k=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{className:"p-1 text-blue-600 hover:text-blue-800",children:c.jsx(yo,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-1 text-red-600 hover:text-red-800",children:c.jsx(io,{className:"w-5 h-5"})})]})}];return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Órdenes de Compra"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[c.jsx(Gl,{className:"w-5 h-5"}),"Asistente de Pedidos Inteligente"]}),c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(tO,{className:"w-5 h-5"}),"Crear Orden de Compra"]})]})]}),a?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):u?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:u}):c.jsx(Bn,{title:"",columns:v,data:r}),d&&c.jsx(ihe,{onClose:()=>h(!1),onSaveSuccess:y,sede:t,empresa:n})]})},Mv={cantidadCompra:1,unidadCompra:"Unidad",costoTotalItem:0,lote:"",f_vencimiento:"",ganancia:30,unid_pv:0,blister_u:void 0,blister_pv:void 0,caja_u:void 0,caja_pv:void 0,paquete_u:void 0,paquete_pv:void 0},rhe=({onClose:e,onSaveSuccess:t,sede:n,empresa:r})=>{var B,H,Z;const{user:i}=Mt(),[a,o]=_.useState([]),[u,f]=_.useState(null),[d,h]=_.useState(""),[m,y]=_.useState(new Date().toISOString().split("T")[0]),[v,k]=_.useState(""),[S,C]=_.useState([]),[T,A]=_.useState(null),[N,O]=_.useState([]),[M,P]=_.useState(Mv),[D,Y]=_.useState(!1),[q,W]=_.useState(null),[F,$]=_.useState(null);_.useEffect(()=>{if(!n||!r)return;(async()=>{const{data:X}=await te.from("proveedores").select("*").eq("sede_id",n.id).eq("empresa_id",r.id);o(X||[])})()},[n,r]),_.useEffect(()=>{if(v.length<2||!n||!r){C([]);return}const X=setTimeout(async()=>{const{data:re}=await te.from("productos").select("*").eq("sede_id",n.id).eq("empresa_id",r.id).ilike("nombre",`%${v}%`).limit(5);C(re||[])},300);return()=>clearTimeout(X)},[v,n,r]),_.useEffect(()=>{T&&($(T.unid_pv||null),P(I=>({...I,unid_pv:T.unid_pv||0,blister_u:T.blister_u||void 0,blister_pv:T.blister_pv||void 0,caja_u:T.caja_u||void 0,caja_pv:T.caja_pv||void 0,paquete_u:T.paquete_u||void 0,paquete_pv:T.paquete_pv||void 0})))},[T]);const R=_.useMemo(()=>{if(!T)return{totalUnidades:0,costoUnitario:0,sug_unid_pv:0,sug_blister_pv:0,sug_caja_pv:0,sug_paquete_pv:0};let I=1;M.unidadCompra==="Blister"&&(I=M.blister_u||T.blister_u||1),M.unidadCompra==="Caja"&&(I=M.caja_u||T.caja_u||1),M.unidadCompra==="Paquete"&&(I=M.paquete_u||T.paquete_u||1);const X=M.cantidadCompra*I,re=X>0?M.costoTotalItem/X:0,me=1+M.ganancia/100,we=re*me,$e=M.blister_u??T.blister_u,ne=M.caja_u??T.caja_u,Se=M.paquete_u??T.paquete_u,Ee=$e?we*$e:0,ge=ne?we*ne:0,bt=Se?we*Se:0;return{totalUnidades:X,costoUnitario:re,sug_unid_pv:we,sug_blister_pv:Ee,sug_caja_pv:ge,sug_paquete_pv:bt}},[T,M]);_.useEffect(()=>{T&&P(I=>({...I,unid_pv:R.sug_unid_pv,blister_pv:R.sug_blister_pv,caja_pv:R.sug_caja_pv,paquete_pv:R.sug_paquete_pv}))},[R.sug_unid_pv,R.sug_blister_pv,R.sug_caja_pv,R.sug_paquete_pv,T]);const z=I=>{const{name:X,value:re,type:me}=I.target,we=me==="number"&&re!==""?parseFloat(re):re;P($e=>({...$e,[X]:we===""?void 0:we}))},V=async I=>{const X=I.target.value;if(X&&T&&n&&r){const{data:re}=await te.from("ingresos").select("f_vencimiento").eq("producto",T.nombre).eq("lote",X).eq("sede_id",n.id).eq("empresa_id",r.id).not("f_vencimiento","is",null).order("f_ingreso",{ascending:!1}).limit(1).single();re&&re.f_vencimiento&&P(me=>({...me,f_vencimiento:re.f_vencimiento}))}},U=()=>{if(W(null),!T||!M.lote||!M.f_vencimiento){W("Completa todos los campos del producto (Lote, Vencimiento).");return}if(R.totalUnidades<=0){W("La cantidad y costo deben ser mayores a cero.");return}O(I=>[...I,{product:T,cantidadCompra:M.cantidadCompra,unidadCompra:M.unidadCompra,costoTotalItem:M.costoTotalItem,lote:M.lote,f_vencimiento:M.f_vencimiento,ganancia:M.ganancia,totalUnidades:R.totalUnidades,costoUnitario:R.costoUnitario,unid_pv:M.unid_pv,blister_u:M.blister_u,blister_pv:M.blister_pv,caja_u:M.caja_u,caja_pv:M.caja_pv,paquete_u:M.paquete_u,paquete_pv:M.paquete_pv}]),A(null),k(""),P(Mv),$(null)},G=I=>{O(X=>X.filter((re,me)=>me!==I))},le=async()=>{if(W(null),N.length===0||!u||!d||!n||!r){W("Completa los datos de la factura y añade al menos un producto.");return}Y(!0);try{const I=N.map(ne=>{const Se=(ne.product.stock_unid||0)+ne.totalUnidades;return te.from("productos").update({stock_unid:Se,costo_x_unid:ne.costoUnitario,lote:ne.lote,f_vencimiento:ne.f_vencimiento,unid_pv:ne.unid_pv,blister_u:ne.blister_u,blister_pv:ne.blister_pv,caja_u:ne.caja_u,caja_pv:ne.caja_pv,paquete_u:ne.paquete_u,paquete_pv:ne.paquete_pv}).eq("id",ne.product.id)}),X=a.find(ne=>ne.id===u),re=N.map(ne=>({usuario:(i==null?void 0:i.email)||"desconocido",numero_factura:d,proveedor:(X==null?void 0:X.nombre)||"Desconocido",producto:ne.product.nombre,cantidad:ne.totalUnidades,precio_compra:ne.costoUnitario,unidades:ne.totalUnidades,porcentaje_venta:ne.ganancia,f_ingreso:m,f_vencimiento:ne.f_vencimiento,sede_id:n.id,empresa_id:r.id})),me=te.from("ingresos").insert(re),we=[...I,me];(await Promise.all(we)).forEach(ne=>{if(ne.error)throw ne.error}),t(),e()}catch(I){W(`Error al guardar: ${I.message}`)}finally{Y(!1)}},ye=I=>{if(!I)return[];const X=["Unidad"];return(I.blister_u||M.blister_u)&&X.push("Blister"),(I.caja_u||M.caja_u)&&X.push("Caja"),(I.paquete_u||M.paquete_u)&&X.push("Paquete"),X};return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full h-full max-w-7xl flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Registrar Ingreso de Mercadería"}),c.jsx("button",{onClick:e,className:"p-2 rounded-full text-2xl leading-none hover:bg-gray-200 dark:hover:bg-gray-600",children:"×"})]}),c.jsxs("div",{className:"flex-grow p-6 space-y-4 overflow-y-auto",children:[c.jsxs("fieldset",{className:"p-4 border rounded-md dark:border-gray-600",children:[c.jsx("legend",{className:"text-md font-semibold text-gray-900 dark:text-gray-200 px-2",children:"Datos de la Factura"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Proveedor"}),c.jsxs("select",{value:u||"",onChange:I=>f(Number(I.target.value)),className:"mt-1 block w-full input-style",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccionar proveedor"}),a.map(I=>c.jsx("option",{value:I.id,children:I.nombre},I.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Número de Factura"}),c.jsx("input",{type:"text",value:d,onChange:I=>h(I.target.value),className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha de Ingreso"}),c.jsx("input",{type:"date",value:m,onChange:I=>y(I.target.value),className:"mt-1 block w-full input-style"})]})]})]}),c.jsxs("fieldset",{className:"p-4 border rounded-md dark:border-gray-600",children:[c.jsx("legend",{className:"text-md font-semibold text-gray-900 dark:text-gray-200 px-2",children:"Añadir Producto a la Factura"}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Buscar Producto"}),c.jsx("input",{type:"text",value:v,onChange:I=>k(I.target.value),disabled:!!T,placeholder:"Escriba para buscar...",className:"mt-1 block w-full input-style"}),T&&c.jsx("button",{type:"button",onClick:()=>{A(null),k(""),P(Mv),$(null)},className:"absolute right-2 top-[29px] text-sm text-red-500 hover:underline",children:"Limpiar"}),S.length>0&&!T&&c.jsx("ul",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-md shadow-lg max-h-40 overflow-y-auto",children:S.map(I=>c.jsx("li",{onClick:()=>{A(I),k(I.nombre),C([])},className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer text-black dark:text-white",children:I.nombre},I.id))})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-6 gap-y-4 pt-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cantidad Compra"}),c.jsx("input",{type:"number",name:"cantidadCompra",value:M.cantidadCompra,onChange:z,min:"1",disabled:!T,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Empaque"}),c.jsx("select",{name:"unidadCompra",value:M.unidadCompra,onChange:z,disabled:!T,className:"mt-1 block w-full input-style",children:ye(T).map(I=>c.jsx("option",{value:I,children:I},I))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Costo Total (S/)"}),c.jsx("input",{type:"number",name:"costoTotalItem",step:"0.01",value:M.costoTotalItem,onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Lote"}),c.jsx("input",{type:"text",name:"lote",value:M.lote,onChange:z,onBlur:V,disabled:!T,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Vencimiento"}),c.jsx("input",{type:"date",name:"f_vencimiento",value:M.f_vencimiento,onChange:z,disabled:!T,className:"mt-1 block w-full input-style",placeholder:"dd/mm/aaaa"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ganancia (%)"}),c.jsx("input",{type:"number",name:"ganancia",value:M.ganancia,onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-md font-semibold mb-3 text-gray-800 dark:text-gray-200",children:"Precios de Venta y Empaque"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"PV Unid. (Sugerido)"}),c.jsx("input",{type:"number",name:"unid_pv",step:"0.01",value:((B=M.unid_pv)==null?void 0:B.toFixed(2))||"",onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 col-span-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unid./Blister"}),c.jsx("input",{type:"number",name:"blister_u",value:M.blister_u||"",onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"PV Blister"}),c.jsx("input",{type:"number",name:"blister_pv",step:"0.01",value:((H=M.blister_pv)==null?void 0:H.toFixed(2))||"",onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 col-span-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unid./Caja"}),c.jsx("input",{type:"number",name:"caja_u",value:M.caja_u||"",onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"PV Caja"}),c.jsx("input",{type:"number",name:"caja_pv",step:"0.01",value:((Z=M.caja_pv)==null?void 0:Z.toFixed(2))||"",onChange:z,disabled:!T,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Precio de Venta Anterior (Unid.)"}),c.jsx("div",{className:"mt-1 p-2.5 bg-gray-100 dark:bg-gray-700/50 rounded-lg text-gray-700 dark:text-gray-300 font-semibold",children:F!==null?`S/ ${F.toFixed(2)}`:"N/A"})]})]})]})]}),T&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/40 rounded-md grid grid-cols-2 md:grid-cols-5 gap-3 text-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Unidades a Ingresar"}),c.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:R.totalUnidades})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Costo / Unid."}),c.jsxs("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:["S/ ",R.costoUnitario.toFixed(3)]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PV Unid. Sugerido"}),c.jsxs("p",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:["S/ ",R.sug_unid_pv.toFixed(2)]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PV Blister Sug."}),c.jsx("p",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:R.sug_blister_pv?`S/ ${R.sug_blister_pv.toFixed(2)}`:"-"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PV Caja Sug."}),c.jsx("p",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:R.sug_caja_pv?`S/ ${R.sug_caja_pv.toFixed(2)}`:"-"})]})]}),c.jsx("div",{className:"text-right mt-4",children:c.jsx("button",{type:"button",onClick:U,disabled:!T,className:"px-5 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300 transition-colors",children:"Añadir a la lista"})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Productos en esta Factura"}),c.jsx("div",{className:"overflow-auto max-h-56 border rounded-lg dark:border-gray-600",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:c.jsxs("tr",{className:"text-left text-xs text-gray-600 dark:text-gray-300 uppercase",children:[c.jsx("th",{className:"p-2",children:"Producto"}),c.jsx("th",{className:"p-2",children:"Lote"}),c.jsx("th",{className:"p-2",children:"Vence"}),c.jsx("th",{className:"p-2",children:"Unid. a Ingresar"}),c.jsx("th",{className:"p-2",children:"Costo/Unid."}),c.jsx("th",{className:"p-2",children:"PV/Unid. Sug."}),c.jsx("th",{className:"p-2"})]})}),c.jsx("tbody",{className:"divide-y dark:divide-gray-600",children:N.length>0?N.map((I,X)=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 text-black dark:text-white",children:[c.jsx("td",{className:"p-2 font-medium",children:I.product.nombre}),c.jsx("td",{className:"p-2",children:I.lote}),c.jsx("td",{className:"p-2",children:I.f_vencimiento}),c.jsx("td",{className:"p-2 font-semibold",children:I.totalUnidades}),c.jsxs("td",{className:"p-2",children:["S/ ",I.costoUnitario.toFixed(3)]}),c.jsxs("td",{className:"p-2 font-semibold text-green-600 dark:text-green-400",children:["S/ ",I.unid_pv.toFixed(2)]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>G(X),className:"text-red-500 hover:text-red-700 p-1",children:c.jsx(io,{className:"w-4 h-4"})})})]},X)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"text-center p-8 text-gray-500 dark:text-gray-400",children:"Añade productos desde el formulario de arriba."})})})]})})]}),q&&c.jsx("div",{className:"text-red-500 bg-red-100 p-3 rounded-md dark:bg-red-900/40 dark:text-red-300 text-sm",children:q})]}),c.jsxs("div",{className:"p-4 border-t dark:border-gray-700 flex justify-end items-center gap-4 bg-soft-gray-100 dark:bg-gray-800/50",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-100 dark:hover:bg-gray-500 font-semibold",children:"Cancelar"}),c.jsxs("button",{onClick:le,disabled:D||N.length===0,className:"px-6 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300 flex items-center font-bold text-base",children:[D&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),D?"Guardando...":"Guardar Ingreso"]})]})]}),c.jsx("style",{children:`
             .input-style {
                @apply bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-black dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:bg-gray-100 dark:disabled:bg-gray-700/50 placeholder-gray-400 dark:placeholder-gray-500;
             }
             @keyframes fade-in { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
             .animate-fade-in { animation: fade-in 0.2s ease-out; }
           `})]})},ihe=({onClose:e,onSaveSuccess:t,sede:n,empresa:r})=>{const{user:i}=Mt(),[a,o]=_.useState({}),[u,f]=_.useState([]),[d,h]=_.useState(!0),[m,y]=_.useState({}),[v,k]=_.useState({}),[S,C]=_.useState({}),[T,A]=_.useState(!1),[N,O]=_.useState("none");_.useEffect(()=>{(async()=>{if(!n||!r){h(!1);return}h(!0);const[W,F]=await Promise.all([te.from("productos").select("*").eq("sede_id",n.id).eq("empresa_id",r.id),te.from("proveedores").select("*").eq("sede_id",n.id).eq("empresa_id",r.id)]);if(W.data){let $=W.data.filter(U=>(U.stock_unid??0)<=(U.stock_min??0)&&(U.stock_min??0)>0);$.length>0?O("critical"):($=W.data.filter(U=>(U.stock_unid??0)>(U.stock_min??0)&&(U.stock_unid??0)<50),$.length>0?O("proactive"):O("none"));const R=$.reduce((U,G)=>{const le=G.laboratorio||"Sin Laboratorio";return U[le]||(U[le]=[]),U[le].push(G),U},{});o(R);const z=$.reduce((U,G)=>({...U,[G.id]:!0}),{});y(z);let V={};$.forEach(U=>{let G=0;if(N==="critical"){const le=(U.stock_min||20)-(U.stock_unid||0);G=le>0?le:U.stock_min||20}else{const le=50-(U.stock_unid||0);G=le>0?le:20}V[U.id]=G}),k(V)}F.data&&f(F.data),h(!1)})()},[n,r,N]);const M=q=>{y(W=>({...W,[q]:!W[q]}))},P=(q,W)=>{const F=W===""?"":parseInt(W,10);(F===""||!isNaN(F)&&F>=0)&&k($=>({...$,[q]:F}))},D=(q,W)=>{C(F=>({...F,[q]:W}))},Y=async()=>{if(!n||!r)return;A(!0);const q=Object.entries(S).filter(([,W])=>W&&W!=="").map(([W,F])=>({lab:W,supplierId:F}));if(q.length===0){alert("Por favor, selecciona un proveedor para al menos un laboratorio."),A(!1);return}try{for(const{lab:W,supplierId:F}of q){const $=u.find(le=>le.id===parseInt(String(F)));if(!$)continue;const R=(a[W]||[]).filter(le=>m[le.id]&&(v[le.id]||0)>0);if(R.length===0)continue;const{data:z,error:V}=await te.from("orden_compra").insert({proveedor:$.nombre,fecha_pedido:new Date().toISOString().split("T")[0],estado:"Borrador",usuario:(i==null?void 0:i.email)||"desconocido",sede_id:n.id,empresa_id:r.id}).select().single();if(V)throw V;const U=R.map(le=>({orden_id:z.id,producto_id:le.id,producto_nombre:le.nombre,unidades:v[le.id]||0,costo_unitario_estimado:le.costo_x_unid||0})),{error:G}=await te.from("orden_compra_detalle").insert(U);if(G)throw G}alert(`${q.length} órdenes de compra generadas como borrador.`),t(),e()}catch(W){alert(`Error al generar órdenes: ${W.message}`)}finally{A(!1)}};return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full h-full max-w-4xl flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[c.jsx(Gl,{className:"w-6 h-6 text-purple-500"}),"Asistente de Pedidos Inteligente"]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:c.jsx(Qfe,{className:"w-6 h-6"})})]}),d?c.jsx("div",{className:"flex-grow flex justify-center items-center",children:c.jsx("div",{className:"w-12 h-12 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):Object.keys(a).length===0?c.jsxs("div",{className:"flex-grow flex flex-col justify-center items-center text-center p-8",children:[c.jsx("svg",{className:"w-16 h-16 text-green-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"¡Todo en orden!"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"No se encontraron productos con stock bajo o crítico que necesiten ser repuestos en este momento."})]}):c.jsx("div",{className:"flex-grow p-6 space-y-6 overflow-y-auto",children:Object.entries(a).map(([q,W])=>c.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-600",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200",children:q}),c.jsxs("select",{onChange:F=>D(q,F.target.value),className:"w-1/2 mt-1 block input-style text-sm",children:[c.jsx("option",{value:"",children:"Seleccionar Proveedor..."}),Array.isArray(u)&&u.map(F=>c.jsx("option",{value:F.id,children:F.nombre},F.id))]})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-2 w-10"}),c.jsx("th",{className:"px-2 py-2 text-left",children:"Producto"}),c.jsx("th",{className:"px-2 py-2 text-center",children:"Stock Actual/Mín"}),c.jsx("th",{className:"px-2 py-2 text-center w-28",children:"Pedir"})]})}),c.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:W.map(F=>c.jsxs("tr",{className:`${m[F.id]?"":"opacity-50"}`,children:[c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"checkbox",checked:m[F.id]||!1,onChange:()=>M(F.id)})}),c.jsx("td",{className:"px-2 py-2 font-medium",children:F.nombre}),c.jsxs("td",{className:"px-2 py-2 text-center",children:[F.stock_unid||0," / ",F.stock_min||0]}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",value:v[F.id]||"",onChange:$=>P(F.id,$.target.value),className:"w-full text-center input-style text-sm p-1"})})]},F.id))})]})})]},q))}),c.jsxs("div",{className:"p-4 border-t dark:border-gray-700 flex justify-end items-center gap-4 bg-soft-gray-100 dark:bg-gray-800/50",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-100 dark:hover:bg-gray-500 font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:Y,disabled:T||Object.keys(a).length===0,className:"px-6 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300 flex items-center font-bold text-base",children:T?"Generando...":"Generar Órdenes"})]})]}),c.jsx("style",{children:`
             .input-style { @apply bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-black dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:bg-gray-100 dark:disabled:bg-gray-700/50 placeholder-gray-400 dark:placeholder-gray-500; }
             @keyframes fade-in { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
             .animate-fade-in { animation: fade-in 0.2s ease-out; }
           `})]})},ahe=({data:e})=>!e||!e.headers||!e.rows?null:c.jsx("div",{className:"overflow-auto max-h-72 mt-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-gray-600 sticky top-0 z-10",children:c.jsx("tr",{children:e.headers.map((t,n)=>c.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:t},n))})}),c.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:[e.rows.map((t,n)=>c.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:t.map((r,i)=>c.jsx("td",{className:"px-3 py-2 whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:String(r)},i))},n)),e.rows.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:e.headers.length,className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No se encontraron datos."})})]})]})}),she=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([{sender:"ai",content:{displayText:"Hola, soy GestionFarma AI. Estoy conectado a toda tu base de datos y puedo responder preguntas complejas. ¿Qué te gustaría saber hoy?",suggestions:["¿Cuál fue el producto más vendido hoy?","Muéstrame los productos con bajo stock","¿Cuál fue la última venta?"]}}]),[i,a]=_.useState(""),[o,u]=_.useState(!1),f=_.useRef(null),d=()=>{var k;(k=f.current)==null||k.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{d()},[n]);const h=_.useCallback(async k=>{if(k.trim()===""||o)return;const S={sender:"user",content:k};r(C=>[...C,S]),a(""),u(!0);try{const T={sender:"ai",content:await Ub(k,e==null?void 0:e.id,t==null?void 0:t.id)};r(A=>[...A,T])}catch(C){console.error("Error getting AI response:",C);const T={sender:"ai",content:{displayText:"Lo siento, ocurrió un error al procesar tu solicitud. Revisa la consola para más detalles."}};r(A=>[...A,T])}finally{u(!1)}},[o,e,t]),m=()=>{h(i)},y=k=>{h(k)},v=k=>{k.key==="Enter"&&m()};return c.jsxs("div",{className:"flex flex-col h-[calc(100vh-10rem)] bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsxs("div",{className:"flex items-center p-4 border-b border-soft-gray-200 dark:border-gray-700",children:[c.jsx(Tb,{className:"h-6 w-6 text-clinical-blue"}),c.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Asistente de Consultas IA"})]}),c.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:[n.map((k,S)=>{const C=k.sender==="user",T=k.content;if(C&&typeof T=="string")return c.jsx("div",{className:"flex justify-end",children:c.jsx("div",{className:"max-w-xl lg:max-w-4xl px-4 py-3 rounded-xl bg-clinical-blue text-white",children:T})},S);if(!C&&typeof T=="object"){const A=T;return c.jsx("div",{className:"flex justify-start",children:c.jsxs("div",{className:"max-w-xl lg:max-w-4xl px-4 py-3 rounded-xl bg-soft-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200 w-full",children:[c.jsx("div",{className:"prose prose-sm max-w-none prose-zinc dark:prose-invert",children:c.jsx(Zb,{children:A.displayText})}),A.table&&c.jsx(ahe,{data:A.table}),A.suggestions&&A.suggestions.length>0&&c.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:A.suggestions.map((N,O)=>c.jsx("button",{onClick:()=>y(N),className:"px-3 py-1.5 text-xs bg-clinical-blue/10 text-clinical-blue dark:bg-clinical-blue/20 rounded-full hover:bg-clinical-blue/20 dark:hover:bg-clinical-blue/30 transition-colors",children:N},O))})]})},S)}return null}),o&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"max-w-lg px-4 py-3 rounded-xl bg-soft-gray-100 text-gray-800 dark:bg-gray-700",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse [animation-delay:0.2s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-pulse [animation-delay:0.4s]"})]})})}),c.jsx("div",{ref:f})]}),c.jsx("div",{className:"p-4 border-t border-soft-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:i,onChange:k=>a(k.target.value),onKeyPress:v,placeholder:"Ej: ¿Cuáles fueron las 5 ventas con mayor total esta semana?",className:"w-full px-4 py-3 pr-12 text-gray-700 bg-soft-gray-100 border border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-clinical-blue dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400",disabled:o}),c.jsx("button",{onClick:m,disabled:o||i.trim()==="",className:"absolute inset-y-0 right-0 flex items-center justify-center w-12 h-full text-clinical-blue disabled:text-gray-400 disabled:cursor-not-allowed hover:bg-clinical-blue/10 dark:hover:bg-clinical-blue/20 rounded-r-lg",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),c.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]})},ohe=200,lhe=async(e,t,n)=>{if(!(e.stock_unid===null||e.stock_min===null||e.stock_unid>e.stock_min))try{const{count:r}=await te.from("notificaciones").select("id",{count:"exact",head:!0}).eq("tipo","stock_bajo").eq("referencia_id",e.id).eq("estado","no leido").eq("sede_id",t);if(r===0){const i=`¡Stock bajo! El producto "${e.nombre}" solo tiene ${e.stock_unid} unidades restantes.`;await te.from("notificaciones").insert({tipo:"stock_bajo",mensaje:i,estado:"no leido",referencia_id:e.id,sede_id:t,empresa_id:n})}}catch(r){console.error("Error creating stock notification:",r)}},uhe=async(e,t,n)=>{if(!(e.total_a_pagar===null||e.total_a_pagar<ohe))try{const{count:r}=await te.from("notificaciones").select("id",{count:"exact",head:!0}).eq("tipo","venta_grande").eq("referencia_id",e.id).eq("estado","no leido").eq("sede_id",t);if(r===0){const i=`¡Venta grande registrada! Venta N°${e.id} por un total de S/ ${e.total_a_pagar.toFixed(2)}.`;await te.from("notificaciones").insert({tipo:"venta_grande",mensaje:i,estado:"no leido",referencia_id:e.id,sede_id:t,empresa_id:n})}}catch(r){console.error("Error creating large sale notification:",r)}},che=async(e,t,n)=>{try{const{count:r}=await te.from("notificaciones").select("id",{count:"exact",head:!0}).eq("tipo","nuevo_cliente").eq("referencia_id",e.id).eq("estado","no leido").eq("sede_id",t);if(r===0){const i=`Nuevo cliente registrado: ${e.nombres}. ¡Dale la bienvenida!`;await te.from("notificaciones").insert({tipo:"nuevo_cliente",mensaje:i,estado:"no leido",referencia_id:e.id,sede_id:t,empresa_id:n})}}catch(r){console.error("Error creating new client notification:",r)}},mm=async e=>{if(!e.ok){const t=await e.json().catch(()=>({message:e.statusText}));throw new Error(`Error ${e.status}: ${t.message||"Error desconocido"}`)}return e.json()},dhe=async(e,t)=>{const n={};t&&(n.apikey=t);const r=e.replace(/\/qr\/?$/i,"").replace(/\/$/,""),i=await fetch(`${r}/status`,{method:"GET",headers:n});return mm(i)},fhe=async(e,t)=>{const n=e.replace(/\/qr\/?$/i,"").replace(/\/$/,""),r={"Content-Type":"application/json"};t&&(r.apikey=t);const i=await fetch(`${n}/qr`,{method:"GET",headers:r});return i.status===404?{qr:null}:mm(i)},hhe=async(e,t,n,r,i,a)=>{const o=e.replace(/\/qr\/?$/i,"").replace(/\/$/,""),u={"Content-Type":"application/json"};a&&(u.apikey=a);const f=await fetch(`${o}/message/sendPdf/${encodeURIComponent(t)}`,{method:"POST",headers:u,body:JSON.stringify({number:n,html:r,filename:i})});return mm(f)},phe=async(e,t,n,r,i)=>{const a=e.replace(/\/qr\/?$/i,"").replace(/\/$/,""),o=await fetch(`${a}/message/sendText/${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/json",apikey:n},body:JSON.stringify({number:r,options:{delay:1200,presence:"composing"},textMessage:{text:i}})});return mm(o)},mhe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),ghe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),yhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),r3=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),c.jsx("path",{d:"M5 3v4"}),c.jsx("path",{d:"M19 17v4"}),c.jsx("path",{d:"M3 5h4"}),c.jsx("path",{d:"M17 19h4"})]}),AP=()=>c.jsx("svg",{className:"h-10 w-10 text-green-500 mx-auto",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jP=()=>c.jsx("svg",{className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),vhe=()=>c.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),xhe=()=>c.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),PP=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),c.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),c.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),bhe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:c.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.001.004l-1.03 3.75 3.803-1.002z"})}),MP=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),whe=e=>{if(!e)return{color:"bg-gray-400",tooltip:"Sin fecha de vencimiento"};const t=new Date(e+"T00:00:00"),n=new Date;n.setHours(0,0,0,0);const r=t.getTime()-n.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<0?{color:"bg-red-500",tooltip:`Vencido hace ${Math.abs(i)} días`}:i<=90?{color:"bg-orange-500",tooltip:`Vence en ${i} días`}:i<=180?{color:"bg-blue-500",tooltip:"Vence en menos de 6 meses"}:{color:"bg-green-500",tooltip:"Vencimiento lejano"}},rr="w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-900 dark:border-gray-600 dark:text-gray-200",_he=({onClose:e,onSave:t,sede:n,empresa:r})=>{const[i,a]=_.useState({nombre:"",unid_pv:"",stock_unid:"",costo_x_unid:""}),[o,u]=_.useState(!1),f=async d=>{if(d.preventDefault(),!n||!r)return;u(!0);const{data:h,error:m}=await te.from("productos").insert([{...i,stock_min:10,sede_id:n.id,empresa_id:r.id}]).select().single();m?alert(`Error al crear producto: ${m.message}`):(t(h),e()),u(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Crear Producto Rápido"}),c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Nombre"}),c.jsx("input",{type:"text",value:i.nombre,onChange:d=>a(h=>({...h,nombre:d.target.value})),required:!0,className:rr})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Precio Venta (Unidad)"}),c.jsx("input",{type:"number",step:"0.1",value:i.unid_pv,onChange:d=>a(h=>({...h,unid_pv:parseFloat(d.target.value)||""})),required:!0,className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Stock Inicial"}),c.jsx("input",{type:"number",value:i.stock_unid,onChange:d=>a(h=>({...h,stock_unid:parseInt(d.target.value)||""})),required:!0,className:rr})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Costo (Unidad)"}),c.jsx("input",{type:"number",step:"0.1",value:i.costo_x_unid,onChange:d=>a(h=>({...h,costo_x_unid:parseFloat(d.target.value)||""})),className:rr})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg disabled:bg-green-300",children:o?"Guardando...":"Guardar y Añadir"})]})]})]})})},She=({onClose:e,onSave:t,sede:n,empresa:r})=>{const[i,a]=_.useState({nombres:"",dni:"",celular:""}),[o,u]=_.useState(!1),f=async d=>{if(d.preventDefault(),!n||!r)return;u(!0);const{data:h,error:m}=await te.from("clientes").insert({...i,puntos:0,sede_id:n.id,empresa_id:r.id}).select().single();m?alert(`Error al crear cliente: ${m.message}`):(t(h),e()),u(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Crear Nuevo Cliente"}),c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Nombres Completos"}),c.jsx("input",{type:"text",value:i.nombres,onChange:d=>a(h=>({...h,nombres:d.target.value})),required:!0,className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"DNI"}),c.jsx("input",{type:"text",value:i.dni,onChange:d=>a(h=>({...h,dni:d.target.value})),className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Celular"}),c.jsx("input",{type:"tel",value:i.celular,onChange:d=>a(h=>({...h,celular:d.target.value})),className:rr})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg disabled:bg-green-300",children:o?"Guardando...":"Guardar y Seleccionar"})]})]})]})})},khe=({onClose:e,showNotification:t,sede:n,empresa:r})=>{const[i,a]=_.useState({nombre:"",ruc:"",cel1:""}),[o,u]=_.useState(!1),f=async d=>{if(d.preventDefault(),!n||!r)return;u(!0);const{error:h}=await te.from("proveedores").insert({...i,sede_id:n.id,empresa_id:r.id});h?t(`Error al crear proveedor: ${h.message}`,"error"):(t("Proveedor creado exitosamente.","success"),e()),u(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Crear Nuevo Proveedor"}),c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Nombre o Razón Social"}),c.jsx("input",{type:"text",value:i.nombre,onChange:d=>a(h=>({...h,nombre:d.target.value})),required:!0,className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"RUC"}),c.jsx("input",{type:"text",value:i.ruc,onChange:d=>a(h=>({...h,ruc:d.target.value})),className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Celular"}),c.jsx("input",{type:"tel",value:i.cel1,onChange:d=>a(h=>({...h,cel1:d.target.value})),className:rr})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg disabled:bg-green-300",children:o?"Guardando...":"Guardar Proveedor"})]})]})]})})},Ehe=({client:e,initialProduct:t,onClose:n,showNotification:r,sede:i,empresa:a})=>{const[o,u]=_.useState({cliente_id:e==null?void 0:e.id,cliente_nombre:e==null?void 0:e.nombres,producto_nombre:t,cantidad:1,estado:"Pendiente",notas:""}),[f,d]=_.useState(!1),h=async m=>{if(m.preventDefault(),!i||!a)return;d(!0);const{error:y}=await te.from("pedidos_clientes").insert({...o,sede_id:i.id,empresa_id:a.id});y?r(`Error al registrar faltante: ${y.message}`,"error"):(r("Producto faltante registrado con éxito.","success"),n()),d(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Registrar Producto Faltante"}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Producto"}),c.jsx("input",{type:"text",value:o.producto_nombre,onChange:m=>u(y=>({...y,producto_nombre:m.target.value})),required:!0,className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Cliente (Opcional)"}),c.jsx("input",{type:"text",value:o.cliente_nombre||"",readOnly:!0,disabled:!0,className:`${rr} bg-gray-100 dark:bg-gray-900`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Cantidad Solicitada"}),c.jsx("input",{type:"number",value:o.cantidad,onChange:m=>u(y=>({...y,cantidad:parseInt(m.target.value)||1})),required:!0,className:rr})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Notas (Opcional)"}),c.jsx("textarea",{value:o.notas||"",onChange:m=>u(y=>({...y,notas:m.target.value})),rows:2,className:rr})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg disabled:bg-green-300",children:f?"Guardando...":"Registrar"})]})]})]})})},Che=({onClose:e,onSelectProduct:t})=>{const[n,r]=_.useState(""),[i,a]=_.useState(!1),[o,u]=_.useState(null),f=async()=>{a(!0);const d=await Ub(`Recomiéndame 3 productos para "${n}". Incluye nombre y precio unitario en una tabla.`);u(d),a(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[c.jsx(r3,{className:"w-6 h-6 text-purple-500"})," Asistente IA de Productos"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:n,onChange:d=>r(d.target.value),placeholder:"Ej: Dolor de cabeza, gripe...",className:rr}),c.jsx("button",{onClick:f,disabled:i||!n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg disabled:bg-purple-300",children:i?"...":"Buscar"})]}),i&&c.jsx("div",{className:"text-center py-4",children:"Buscando recomendaciones..."}),o&&c.jsxs("div",{className:"mt-4",children:[c.jsx("p",{children:o.displayText}),o.table&&c.jsx("ul",{className:"mt-2 space-y-2",children:o.table.rows.map((d,h)=>c.jsx("li",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:c.jsxs("span",{children:[d[0]," - ",d[1]]})},h))})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cerrar"})})]})})},The=({client:e,onClose:t,onUpdate:n})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Gestionar Puntos (En desarrollo)"})," ",c.jsx("p",{children:"Esta función para añadir o quitar puntos manualmente está en construcción."}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 rounded-lg",children:"Cerrar"})})]})}),Nhe=({caja:e,onClose:t,onCajaClosed:n})=>{const[r,i]=_.useState({total:0,efectivo:0,yape:0,transferencia:0,otros:0}),[a,o]=_.useState(!0),[u,f]=_.useState(""),[d,h]=_.useState(!1);_.useEffect(()=>{(async()=>{o(!0);const{data:S,error:C}=await te.from("ventas").select("total_a_pagar, tipo_pago").eq("usuario",e.usuario).eq("estado","Completada").gte("fecha_venta",e.f_apertura).eq("sede_id",e.sede_id).eq("empresa_id",e.empresa_id);if(C)alert("Error al cargar resumen de ventas: "+C.message);else{const T=(S||[]).reduce((A,N)=>{const O=N.total_a_pagar||0;switch(A.total+=O,N.tipo_pago){case"Efectivo":A.efectivo+=O;break;case"Yape":A.yape+=O;break;case"Transferencia":A.transferencia+=O;break;case"Otros":A.otros+=O;break;default:A.efectivo+=O}return A},{total:0,efectivo:0,yape:0,transferencia:0,otros:0});i(T)}o(!1)})()},[e]);const m=_.useMemo(()=>{if(u==="")return 0;const k=r.efectivo+(e.monto_apertura||0);return u-k},[u,r.efectivo,e.monto_apertura]),y=async()=>{if(u===""||u<0){alert("Ingresa un monto físico válido.");return}h(!0);const k=m>0?m:0,S=m<0?Math.abs(m):0,{error:C}=await te.from("caja").update({estado:"cerrada",f_cierre:new Date().toISOString(),monto_sistema:r.total,monto_fisico:u,monto_sobrante:k,monto_faltante:S,monto_yape:r.yape,monto_transferencia:r.transferencia,monto_otros:r.otros,monto_efectivo:r.efectivo}).eq("id",e.id);C?(alert("Error al cerrar la caja: "+C.message),h(!1)):(alert("Caja cerrada exitosamente."),n(),t())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg z-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Cierre de Caja"}),a?c.jsx("div",{className:"flex justify-center items-center h-48",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Resumen del Sistema"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Monto Apertura:"})," ",c.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:["S/ ",(e.monto_apertura||0).toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ventas en Efectivo:"})," ",c.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:["S/ ",r.efectivo.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between font-bold border-t pt-1 mt-1 dark:border-gray-600",children:[c.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:"Total Efectivo Sistema:"})," ",c.jsxs("span",{className:"text-gray-900 dark:text-white",children:["S/ ",(r.efectivo+(e.monto_apertura||0)).toFixed(2)]})]}),c.jsx("hr",{className:"my-2 border-dashed dark:border-gray-600"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ventas Yape/Plin:"})," ",c.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:["S/ ",(r.yape+r.otros).toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ventas Transferencia:"})," ",c.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:["S/ ",r.transferencia.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between font-bold text-xl border-t-2 pt-2 mt-2 dark:border-gray-500",children:[c.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:"Total General Sistema:"})," ",c.jsxs("span",{className:"text-clinical-blue",children:["S/ ",r.total.toFixed(2)]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"monto_fisico",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Monto Físico en Caja (S/)"}),c.jsx("input",{type:"number",step:"0.10",id:"monto_fisico",value:u,onChange:k=>f(k.target.value===""?"":parseFloat(k.target.value)),required:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"})]}),u!==""&&c.jsxs("div",{className:`p-3 rounded-lg text-center font-bold text-lg ${m===0?"bg-gray-100 dark:bg-gray-700":m>0?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:[m===0&&"Cuadre Perfecto",m>0&&`Sobrante: S/ ${m.toFixed(2)}`,m<0&&`Faltante: S/ ${Math.abs(m).toFixed(2)}`]})]}),c.jsxs("div",{className:"flex justify-end pt-6 space-x-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-100 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{onClick:y,disabled:a||d||u==="",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:d?"Cerrando...":"Confirmar Cierre"})]})]})})},Ahe=({cajaInfo:e,onCajaClosed:t})=>{const{sede:n,empresa:r}=Mt(),[i,a]=_.useState([]),[o,u]=_.useState(""),[f,d]=_.useState([]),[h,m]=_.useState({nombre:!0,principio_activo:!0,codigo:!1,laboratorio:!1}),[y,v]=_.useState(""),[k,S]=_.useState(!1),[C,T]=_.useState([]),[A,N]=_.useState(null),[O,M]=_.useState(0),P=_.useRef(null),[D,Y]=_.useState([]),[q,W]=_.useState(!1),[F,$]=_.useState("Efectivo"),[R,z]=_.useState(0),[V,U]=_.useState(0),[G,le]=_.useState(""),[ye,B]=_.useState([]),[H,Z]=_.useState(""),[I,X]=_.useState(!1),[re,me]=_.useState(null),[we,$e]=_.useState(null),[ne,Se]=_.useState(!1),[Ee,ge]=_.useState(null),[bt,We]=_.useState(""),[ct,Ft]=_.useState("boleta"),[Pn,Xn]=_.useState(!1),[Ni,ci]=_.useState(!1),[di,Pa]=_.useState(!1),[ws,nn]=_.useState(!1),[_s,fe]=_.useState(!1),[_e,Ue]=_.useState([]),[Xe,tt]=_.useState(!1),[Mn,vr]=_.useState(""),[Ot,Et]=_.useState(!1),[ve,Ie]=_.useState(!1),et=yp(),Te=(Q,ue)=>{me({message:Q,type:ue})};_.useEffect(()=>{if(re){const Q=setTimeout(()=>me(null),5e3);return()=>clearTimeout(Q)}},[re]),_.useEffect(()=>{if(P.current&&f.length>0){const Q=P.current.children[O];Q&&Q.scrollIntoView({behavior:"smooth",block:"nearest"})}},[O,f]),_.useEffect(()=>{if(Ee&&Ee.clientName!=="Cliente Varios"){const Q=C.find(ue=>ue.nombres===Ee.clientName);if(Q&&Q.celular){const ue=Q.celular.replace(/[^0-9]/g,"");We(ue.length===9?`51${ue}`:ue)}}},[Ee,C]);const On=_.useCallback((Q,ue)=>{switch(ue){case"Blister":return Q.blister_u||1;case"Caja":return Q.caja_u||1;case"Paquete":return Q.paquete_u||1;default:return 1}},[]);_.useEffect(()=>{(async()=>{if(!n||!r)return;const{data:ue,error:ke}=await te.from("promociones").select("*").eq("sede_id",n.id).eq("empresa_id",r.id);ke?Te(`Error al verificar promociones: ${ke.message}`,"error"):B(ue||[]);const{data:xe,error:je}=await te.from("ventas").select("*").eq("estado","Pendiente").eq("usuario",e.usuario||"desconocido").eq("sede_id",n.id).eq("empresa_id",r.id).maybeSingle();if(je)Te(`Error al buscar venta pendiente: ${je.message}`,"error");else if(xe){Se(!0),$e(xe);const{data:He,error:Fe}=await te.from("detalle_ventas").select("*").eq("venta_id",xe.id);if(Fe)Te(`Error al cargar el carrito guardado: ${Fe.message}`,"error");else if(He){const Ne=He.filter(Ce=>Ce.producto_id>0).map(Ce=>Ce.producto_id),lt=He.filter(Ce=>Ce.producto_id<0).map(Ce=>Math.abs(Ce.producto_id)),[ut,gt]=await Promise.all([Ne.length>0?te.from("productos").select("*").in("id",Ne):Promise.resolve({data:[],error:null}),lt.length>0?te.from("productos_canje").select("*").in("id",lt):Promise.resolve({data:[],error:null})]);if(ut.error||gt.error)Te("Error al cargar productos del carrito.","error");else{const Ce=new Map((ut.data||[]).map(Ge=>[Ge.id,Ge])),it=new Map((gt.data||[]).map(Ge=>[Ge.id,Ge])),Vt=He.map(Ge=>{if(Ge.producto_id<0){const ln=it.get(Math.abs(Ge.producto_id));return{id:Ge.producto_id,nombre:(ln==null?void 0:ln.nombre)||Ge.producto_nombre.replace("(CANJE) ",""),producto_nombre:Ge.producto_nombre,cantidad:Ge.cantidad,subtotal:Ge.subtotal,selectedUnit:"Unidad",price:0,unitsPerSelection:1,isRedeemed:!0,pointsCost:(ln==null?void 0:ln.puntos_requeridos)||0,detail_id:Ge.id}}else{const ln=Ce.get(Ge.producto_id);return ln?{...ln,cantidad:Ge.cantidad,subtotal:Ge.subtotal,selectedUnit:Ge.tipo,price:Ge.precio_unitario,unitsPerSelection:On(ln,Ge.tipo),isRedeemed:!1,detail_id:Ge.id,producto_nombre:Ge.producto_nombre}:null}}).filter(Ge=>Ge!==null);if(a(Vt),xe.cliente&&xe.cliente!=="Cliente Varios"){const{data:Ge}=await te.from("clientes").select("*").eq("nombres",xe.cliente).single();Ge&&N(Ge)}}}Se(!1)}})()},[e.usuario,On,n,r]);const Ai=_.useCallback(async()=>{if(we)return we;if(!n||!r)return Te("No se puede iniciar la venta: falta información de la sede/empresa.","error"),null;const{data:Q,error:ue}=await te.from("ventas").insert({usuario:e.usuario||"desconocido",estado:"Pendiente",total:0,total_a_pagar:0,sede_id:n.id,empresa_id:r.id}).select().single();return ue?(Te(`No se pudo iniciar la venta: ${ue.message}`,"error"),null):($e(Q),Q)},[we,e.usuario,n,r]),Bi=Q=>{m(ue=>{const ke={...ue,[Q]:!ue[Q]};return Object.values(ke).some(je=>je)?ke:ue})},Ma=_.useMemo(()=>`Buscar por ${Object.entries(h).filter(([,ue])=>ue).map(([ue])=>{switch(ue){case"nombre":return"Nombre";case"principio_activo":return"P. Activo";case"codigo":return"Código / Barras";case"laboratorio":return"Laboratorio";default:return""}}).join(", ")}...`,[h]),xr=_.useCallback(async Q=>{if(Q.length<2||!n||!r){d([]);return}const ue=Object.entries(h).filter(([,He])=>He).map(([He])=>`${He}.ilike.%${Q}%`);if(ue.length===0){d([]);return}const ke=ue.join(","),{data:xe,error:je}=await te.from("productos").select("*").eq("sede_id",n.id).eq("empresa_id",r.id).or(ke).gt("stock_unid",0).limit(10);je?(Te(`Error al buscar productos: ${je.message}`,"error"),d([])):d(xe||[])},[h,n,r]);_.useEffect(()=>{const Q=setTimeout(()=>xr(o),300);return M(0),()=>clearTimeout(Q)},[o,xr]);const zi=Q=>{if(f.length!==0){if(Q.key==="ArrowDown")Q.preventDefault(),M(ue=>(ue+1)%f.length);else if(Q.key==="ArrowUp")Q.preventDefault(),M(ue=>(ue-1+f.length)%f.length);else if(Q.key==="Enter"&&(Q.preventDefault(),O>=0&&O<f.length)){const ue=f[O];fi(ue)}}};_.useEffect(()=>{(async()=>{if(!A||!n||!r){Y([]);return}W(!0);const{data:ue,error:ke}=await te.rpc("get_frequent_products_by_client",{client_name:A.nombres,p_sede_id:n.id,p_empresa_id:r.id});ke?(console.error("Error fetching frequent products:",ke),Y([])):Y(ue||[]),W(!1)})()},[A,n,r]),_.useEffect(()=>{if(y.length<2||!n||!r){T([]),k&&S(!1);return}const ue=setTimeout(async()=>{S(!0);const{data:ke}=await te.from("clientes").select("*").eq("sede_id",n.id).eq("empresa_id",r.id).or(`nombres.ilike.%${y}%,dni.ilike.%${y}%`).limit(5);T(ke||[]),S(!1)},300);return()=>clearTimeout(ue)},[y,n,r]);const Fi=Q=>{N(Q||null),v(""),T([])},on=_.useMemo(()=>{const Q=i.reduce((ut,gt)=>ut+gt.subtotal,0);let ue=0;R&&Number(R)>0?ue=Q*(Number(R)/100):V&&Number(V)>0&&(ue=Number(V));const ke=Q-ue,xe=ke/1.18,je=ke-xe,He=F==="Efectivo"?10:100,Fe=Math.round(ke*He)/He,Ne=Fe-ke,lt=F==="Efectivo"&&G&&Number(G)>0?Number(G)-Fe:0;return{subtotal:Q,totalDiscount:ue,baseImponible:xe,igv:je,redondeo:Ne,totalAPagar:Fe,vuelto:lt}},[i,R,V,F,G]),ko=_.useMemo(()=>{const Q=new Date().toISOString().split("T")[0];return ye.filter(ue=>ue.fecha_inicio<=Q&&ue.fecha_fin>=Q)},[ye]),uu=_.useMemo(()=>{if(!A||on.totalAPagar<=0)return 0;const Q=ko.find(ke=>ke.id===parseInt(H)),ue=(Q==null?void 0:Q.multiplicador)||1;return Math.floor(on.totalAPagar*ue)},[A,on.totalAPagar,H,ko]),fi=async(Q,ue=1,ke="Unidad")=>{if(!Q||!n||!r)return;Se(!0);const xe=await Ai();if(!xe){Se(!1);return}const je=ke==="Unidad"&&Q.unid_pv||0,He=On(Q,ke),Fe=ue*He,Ne=`${Q.nombre}`,lt=i.find(ut=>ut.id===Q.id&&ut.selectedUnit===ke);if(lt)await Vi(Q.id,lt.cantidad+ue,!1);else{if(Fe>(Q.stock_unid||0)){Te("Stock insuficiente.","warning"),Se(!1);return}const ut=(Q.stock_unid||0)-Fe,{data:gt,error:Ce}=await te.from("productos").update({stock_unid:ut}).eq("id",Q.id).select().single();if(Ce||!gt){Te(`Error al actualizar stock: ${Ce==null?void 0:Ce.message}`,"error"),Se(!1);return}const it=ue*je,{data:Vt,error:Ge}=await te.from("detalle_ventas").insert({venta_id:xe.id,producto_id:Q.id,producto_nombre:Ne,cantidad:ue,precio_unitario:je,subtotal:it,usuario:xe.usuario,tipo:ke,sede_id:n.id,empresa_id:r.id}).select().single();if(Ge){Te(`Error al añadir producto: ${Ge.message}`,"error"),await te.from("productos").update({stock_unid:Q.stock_unid}).eq("id",Q.id),Se(!1);return}const ln={...Q,stock_unid:gt.stock_unid,cantidad:ue,selectedUnit:ke,price:je,unitsPerSelection:He,subtotal:it,detail_id:Vt.id,producto_nombre:Ne};a(pi=>[...pi,ln])}u(""),d([]),M(0),Se(!1)},gm=(Q,ue)=>{Q.key==="+"?(Q.preventDefault(),Vi(ue.id,ue.cantidad+1)):Q.key==="-"&&(Q.preventDefault(),Vi(ue.id,ue.cantidad-1))},Vi=async(Q,ue,ke=!0)=>{const xe=i.find(Ce=>Ce.id===Q);if(!xe||xe.isRedeemed)return;if(xe.selectedUnit==="Unidad"&&ke&&ue>1&&!isNaN(ue)){let Ce=null;if(xe.paquete_u&&ue===xe.paquete_u?Ce="Paquete":xe.caja_u&&ue===xe.caja_u?Ce="Caja":xe.blister_u&&ue===xe.blister_u&&(Ce="Blister"),Ce){Se(!0);let it=0,Vt=1;switch(Ce){case"Blister":it=xe.blister_pv||0,Vt=xe.blister_u||1;break;case"Caja":it=xe.caja_pv||0,Vt=xe.caja_u||1;break;case"Paquete":it=xe.paquete_pv||0,Vt=xe.paquete_u||1;break}const Ge=1,ln=Ge*it,pi=xe.cantidad*xe.unitsPerSelection,Hi=(xe.stock_unid||0)+pi,Qn=Ge*Vt;if(Qn>Hi){Te(`Stock insuficiente para convertir a ${Ce}.`,"warning"),Se(!1);return}const ar=Hi-Qn,{data:wd,error:_d}=await te.from("productos").update({stock_unid:ar}).eq("id",Q).select().single();if(_d){Te(`Error al actualizar stock: ${_d.message}`,"error"),Se(!1);return}await te.from("detalle_ventas").update({cantidad:Ge,subtotal:ln,tipo:Ce,precio_unitario:it}).eq("id",xe.detail_id),a(pu=>pu.map(Eo=>Eo.id===Q?{...Eo,cantidad:Ge,subtotal:ln,stock_unid:wd.stock_unid,selectedUnit:Ce,price:it,unitsPerSelection:Vt}:Eo)),Se(!1);return}}if(ke&&Se(!0),ue<1){await cu(Q),ke&&Se(!1);return}const je=xe.cantidad*xe.unitsPerSelection,He=(xe.stock_unid||0)+je,Fe=ue*xe.unitsPerSelection;if(Fe>He){Te(`Stock insuficiente. Máximo: ${Math.floor(He/xe.unitsPerSelection)}`,"warning"),ke&&Se(!1);return}const Ne=He-Fe,{data:lt,error:ut}=await te.from("productos").update({stock_unid:Ne}).eq("id",Q).select().single();if(ut||!lt){Te(`Error al actualizar stock: ${ut==null?void 0:ut.message}`,"error"),ke&&Se(!1);return}const gt=ue*xe.price;await te.from("detalle_ventas").update({cantidad:ue,subtotal:gt}).eq("id",xe.detail_id),a(Ce=>Ce.map(it=>it.id===Q?{...it,cantidad:ue,subtotal:gt,stock_unid:lt.stock_unid}:it)),ke&&Se(!1)},vd=async(Q,ue)=>{Se(!0);const ke=i.find(Vt=>Vt.id===Q);if(!ke||!we||ke.isRedeemed){Se(!1);return}let xe=0,je=1;switch(ue){case"Blister":xe=ke.blister_pv||0,je=ke.blister_u||1;break;case"Caja":xe=ke.caja_pv||0,je=ke.caja_u||1;break;case"Paquete":xe=ke.paquete_pv||0,je=ke.paquete_u||1;break;default:xe=ke.unid_pv||0,je=1}const He=ke.cantidad*ke.unitsPerSelection,Fe=(ke.stock_unid||0)+He,Ne=ke.cantidad*je;if(Ne>Fe){Te(`Stock insuficiente para ${ue}.`,"warning"),Se(!1);return}const lt=Fe-Ne,{data:ut,error:gt}=await te.from("productos").update({stock_unid:lt}).eq("id",Q).select().single();if(gt||!ut){Te(`Error al cambiar unidad: ${gt==null?void 0:gt.message}`,"error"),Se(!1);return}const Ce=`${ke.nombre.split(" (")[0]}`,it=ke.cantidad*xe;await te.from("detalle_ventas").update({tipo:ue,precio_unitario:xe,subtotal:it,producto_nombre:Ce}).eq("id",ke.detail_id),a(Vt=>Vt.map(Ge=>Ge.id===Q?{...Ge,selectedUnit:ue,price:xe,unitsPerSelection:je,subtotal:it,producto_nombre:Ce,stock_unid:ut.stock_unid}:Ge)),Se(!1)},cu=async Q=>{Se(!0);const ue=i.find(ke=>ke.id===Q);if(!ue||!we){Se(!1);return}if(!ue.isRedeemed){const ke=ue.cantidad*ue.unitsPerSelection,{data:xe,error:je}=await te.from("productos").select("stock_unid").eq("id",Q).single();if(je||!xe){Te(`Error al leer stock: ${je==null?void 0:je.message}`,"error"),Se(!1);return}const He=(xe.stock_unid||0)+ke;await te.from("productos").update({stock_unid:He}).eq("id",Q)}await te.from("detalle_ventas").delete().eq("id",ue.detail_id),a(ke=>ke.filter(xe=>xe.id!==Q)),Se(!1)},du=async()=>{if(!A||!n||!r)return;Xn(!0);const Q=ko.map(Fe=>Fe.id);if(Q.length===0){Te("No hay promociones activas con productos de canje.","info"),Ue([]);return}const{data:ue,error:ke}=await te.from("productos_canje").select("*").eq("sede_id",n.id).eq("empresa_id",r.id).in("id_promo",Q).gt("stock",0);if(ke){Te("Error al cargar productos de canje.","error"),Ue([]);return}if(ue.length===0){Te("No se encontraron productos de canje con stock disponible para las promociones activas.","info"),Ue([]);return}const xe=ue.map(Fe=>({...Fe,promociones:ye.find(Ne=>Ne.id===Fe.id_promo)||null})),je=A.puntos||0,He=xe.sort((Fe,Ne)=>{const lt=je>=Fe.puntos_requeridos,ut=je>=Ne.puntos_requeridos;return lt&&!ut?-1:!lt&&ut?1:Fe.puntos_requeridos-Ne.puntos_requeridos});Ue(He)},fu=async Q=>{const ue=await Ai();if(!ue||!A||!n||!r)return;if((A.puntos||0)<Q.puntos_requeridos){Te("Puntos insuficientes.","warning");return}const ke=`(CANJE) ${Q.nombre}`,{data:xe,error:je}=await te.from("detalle_ventas").insert({venta_id:ue.id,producto_id:-Q.id,producto_nombre:ke,cantidad:1,precio_unitario:0,subtotal:0,usuario:ue.usuario,tipo:"Unidad",sede_id:n.id,empresa_id:r.id}).select().single();if(je){Te(`Error al añadir canje: ${je.message}`,"error");return}const He={id:-Q.id,nombre:Q.nombre,producto_nombre:ke,cantidad:1,subtotal:0,selectedUnit:"Unidad",price:0,unitsPerSelection:1,isRedeemed:!0,pointsCost:Q.puntos_requeridos,detail_id:xe.id};a(Fe=>[...Fe,He]),Xn(!1)},xd=Q=>{const ue=[];return Q.unid_pv!=null&&ue.push({value:"Unidad",label:"Unidad"}),Q.blister_pv!=null&&ue.push({value:"Blister",label:"Blister"}),Q.caja_pv!=null&&ue.push({value:"Caja",label:"Caja"}),Q.paquete_pv!=null&&ue.push({value:"Paquete",label:"Paquete"}),ue},bd=async()=>{if(!(i.length===0||!we||!n||!r)){X(!0);try{const Q={cliente:A?A.nombres:"Cliente Varios",total:on.subtotal,total_a_pagar:on.totalAPagar,descuento_porcentaje:R&&Number(R)>0?Number(R):null,descuento_soles:V&&Number(V)>0?Number(V):null,tipo_pago:F,estado:"Completada",fecha_venta:new Date().toISOString(),consejo_ticket:Mn||null},{data:ue,error:ke}=await te.from("ventas").update(Q).eq("id",we.id).select().single();if(ke)throw ke;const xe=new Date().toISOString().split("T")[0],{data:je,error:He}=await te.from("comisiones_reglas").select("*").eq("activa",!0).lte("fecha_inicio",xe).or(`fecha_fin.is.null,fecha_fin.gte.${xe}`).eq("sede_id",n.id).eq("empresa_id",r.id);if(He)console.error("No se pudieron cargar las reglas de comisión, omitiendo generación.",He);else if(je&&je.length>0){const Ne=new Map(je.map(Ce=>[Ce.producto_id,Ce])),lt=[],{data:ut}=await te.from("usuarios").select("id").eq("email",ue.usuario).single(),gt=ut==null?void 0:ut.id;if(gt){for(const Ce of i.filter(it=>!it.isRedeemed)){const it=Ne.get(Ce.id);if(it){let Vt=0;it.tipo_comision==="porcentaje"?Vt=Ce.subtotal*it.valor_comision/100:Vt=Ce.cantidad*Ce.unitsPerSelection*it.valor_comision,Vt>0&&lt.push({venta_id:ue.id,detalle_venta_id:Ce.detail_id,usuario_id:gt,producto_id:Ce.id,monto_comision:Vt,regla_id:it.id,fecha_generacion:new Date().toISOString(),sede_id:n.id,empresa_id:r.id})}}if(lt.length>0){const{error:Ce}=await te.from("comisiones_generadas").insert(lt);Ce&&console.error("Error al guardar comisiones generadas:",Ce)}}}if(A){const Ne=i.filter(Ce=>Ce.isRedeemed).reduce((Ce,it)=>Ce+(it.pointsCost||0),0),ut=(A.puntos||0)+uu-Ne,{error:gt}=await te.from("clientes").update({puntos:ut}).eq("id",A.id);if(gt)throw gt;for(const Ce of i.filter(it=>it.isRedeemed)){const it=Math.abs(Ce.id),{error:Vt}=await te.from("historial_canjes").insert({cliente_id:A.id,cliente:A.nombres,producto_id:it,producto:Ce.nombre,fecha:new Date().toISOString(),usuario:e.usuario||"desconocido",puntos_gastados:Ce.pointsCost,sede_id:n.id,empresa_id:r.id});if(Vt)throw Vt;const{data:Ge,error:ln}=await te.from("productos_canje").select("stock").eq("id",it).single();if(ln)throw ln;const pi=(Ge.stock||0)-Ce.cantidad,Hi=pi>0?"Disponible":"Agotado",{error:Qn}=await te.from("productos_canje").update({stock:pi,estado:Hi}).eq("id",it);if(Qn)throw Qn}}const Fe=new Map;i.filter(Ne=>!Ne.isRedeemed).forEach(Ne=>{const lt=Fe.get(Ne.id);lt?lt.quantity+=Ne.cantidad*Ne.unitsPerSelection:Fe.set(Ne.id,{product:Ne,quantity:Ne.cantidad*Ne.unitsPerSelection})});for(const[,{product:Ne,quantity:lt}]of Fe)await te.rpc("increment_product_cont",{product_id_in:Ne.id,count_in:lt}),n&&r&&await lhe(Ne,n.id,r.id);n&&r&&await uhe(ue,n.id,r.id),ge({saleData:ue,details:[...i],clientName:A?A.nombres:"Cliente Varios",totals:on}),document.dispatchEvent(new CustomEvent("saleCompleted"))}catch(Q){Te(`Error al procesar la venta: ${Q.message}`,"error")}finally{X(!1)}}},hi=()=>{a([]),N(null),z(0),U(0),le(""),$e(null),ge(null),We(""),vr("")},yn=async()=>{if(!we||i.length===0||!n||!r){Te("No hay una venta en progreso para cancelar.","info");return}if(window.confirm(`¿Estás seguro de que quieres cancelar la Venta #${we.id}? Todos los productos se devolverán al stock.`)){X(!0);try{const Q=i.filter(xe=>!xe.isRedeemed).map(async xe=>{const je=xe.cantidad*xe.unitsPerSelection,{data:He,error:Fe}=await te.from("productos").select("stock_unid").eq("id",xe.id).single();if(Fe)throw Fe;const Ne=(He.stock_unid||0)+je;return te.from("productos").update({stock_unid:Ne}).eq("id",xe.id)}),ke=(await Promise.all(Q)).find(xe=>xe.error);if(ke)throw ke.error;await te.from("ventas").update({estado:"Cancelada",total:0,total_a_pagar:0}).eq("id",we.id).eq("sede_id",n.id).eq("empresa_id",r.id),Te(`Venta #${we.id} cancelada.`,"success"),hi()}catch(Q){Te(`Error al cancelar la venta: ${Q.message}`,"error")}finally{X(!1)}}},zn=()=>{if(!Ee)return;const Q=ub(Ee,ct),ue=window.open("","_blank");ue&&(ue.document.write(Q),ue.document.close(),ue.focus(),setTimeout(()=>{ue.print(),ue.close()},250))},Oa=async()=>{if(!Ee||!bt){Te("Por favor, ingresa un número de WhatsApp válido.","warning");return}const Q=["whatsapp_api_url","whatsapp_api_key","whatsapp_session_name"],{data:ue,error:ke}=await te.from("configuraciones").select("key, value").in("key",Q);if(ke){Te("Error al cargar la configuración de WhatsApp.","error");return}const xe=new Map(ue.map(Ce=>[Ce.key,Ce.value])),je=String(xe.get("whatsapp_api_url")||""),He=String(xe.get("whatsapp_api_key")||""),Fe=String(xe.get("whatsapp_session_name")||"");if(!je){Te("La URL del servicio de WhatsApp no está configurada. Ve a Configuraciones.","error");return}const{saleData:Ne,totals:lt}=Ee,ut=Ee.details.map(Ce=>`- ${Ce.cantidad}x ${Ce.producto_nombre} (S/${Ce.subtotal.toFixed(2)})`).join(`
`),gt=`*Boleta de Venta - GestionFarma*
-----------------------------------
*Venta N°:* ${Ne.id}
*Fecha:* ${new Date(Ne.fecha_venta).toLocaleString("es-PE")}

*Productos:*
${ut}
-----------------------------------
*Subtotal:* S/ ${lt.subtotal.toFixed(2)}
*Descuento:* - S/ ${lt.totalDiscount.toFixed(2)}
*TOTAL:* *S/ ${lt.totalAPagar.toFixed(2)}*

¡Gracias por su compra!`;try{Te("Enviando boleta por WhatsApp...","info"),await phe(je,Fe,He,bt,gt),Te("Boleta enviada exitosamente.","success")}catch(Ce){Te(`Error al enviar el mensaje: ${Ce.message}`,"error")}},hu=_.useMemo(()=>i.length===0||I||ne?!1:F==="Efectivo"?G!==""&&Number(G)>=on.totalAPagar:!0,[i,I,ne,F,G,on.totalAPagar]),Ss="w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200",ks={success:{bg:"bg-green-100 dark:bg-green-900/40",border:"border-green-500",text:"text-green-800 dark:text-green-200",icon:c.jsx(AP,{})},warning:{bg:"bg-yellow-100 dark:bg-yellow-900/40",border:"border-yellow-500",text:"text-yellow-800 dark:text-yellow-200",icon:c.jsx(jP,{})},error:{bg:"bg-red-100 dark:bg-red-900/40",border:"border-red-500",text:"text-red-800 dark:text-red-200",icon:c.jsx(vhe,{})},info:{bg:"bg-blue-100 dark:bg-blue-900/40",border:"border-blue-500",text:"text-blue-800 dark:text-blue-200",icon:c.jsx(jP,{})}};return c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 h-[calc(100vh-10rem)] relative mt-6",children:[re&&c.jsxs("div",{className:`fixed top-24 right-8 z-50 p-4 border-l-4 rounded-md shadow-lg flex items-center max-w-sm ${ks[re.type].bg} ${ks[re.type].border} ${ks[re.type].text}`,role:"alert",children:[" ",c.jsx("div",{className:"flex-shrink-0",children:ks[re.type].icon})," ",c.jsx("div",{className:"ml-3 flex-1",children:c.jsx("p",{className:"text-sm font-medium",children:re.message})})," ",c.jsxs("button",{onClick:()=>me(null),className:`ml-auto -mx-1.5 -my-1.5 p-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${ks[re.type].bg}`,children:[" ",c.jsx("span",{className:"sr-only",children:"Cerrar"}),c.jsx(xhe,{})," "]})," "]}),Ee&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 text-center",children:[c.jsx(AP,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-4",children:"Venta Finalizada con Éxito"}),c.jsxs("p",{className:"text-gray-600 mt-2",children:["Venta N° ",Ee.saleData.id," por un total de"," ",c.jsxs("span",{className:"font-bold",children:["S/ ",Ee.totals.totalAPagar.toFixed(2)]}),"."]}),c.jsxs("div",{className:"mt-6 space-y-4",children:[c.jsxs("button",{onClick:zn,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 text-white rounded-lg hover:bg-black transition-colors",children:[c.jsx(PP,{})," Imprimir"," ",ct==="factura"?"Factura":"Boleta"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex items-end gap-2",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Documento"}),c.jsxs("select",{value:ct,onChange:Q=>Ft(Q.target.value),className:"mt-1 px-3 py-2 border border-gray-300 rounded-lg",children:[c.jsx("option",{value:"boleta",children:"Boleta"}),c.jsx("option",{value:"factura",children:"Factura"})]})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Prefijo"}),c.jsx("input",{type:"text",value:"51",readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("label",{className:"text-xs text-gray-600",children:"Número"}),c.jsx("input",{type:"tel",value:bt.replace(/^51/,""),onChange:Q=>We(`51${Q.target.value.replace(/[^0-9]/g,"")}`),placeholder:"N° sin prefijo (ej: 912345678)",className:"w-full mt-1 pl-3 pr-28 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),c.jsx("div",{className:"absolute right-1 top-9",children:c.jsxs("button",{onClick:Oa,className:"flex items-center gap-1.5 px-3 py-2 bg-green-500 text-white rounded-md text-sm hover:bg-green-600 transition-colors",children:[c.jsx(bhe,{})," Enviar"]})})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:async()=>{if(!Ee||!bt){Te("Por favor, ingresa un número de WhatsApp válido.","warning");return}const Q=ub(Ee,ct);try{Te(`Enviando ${ct==="factura"?"factura":"boleta"} PDF por WhatsApp...`,"info");const ue=["whatsapp_api_url","whatsapp_api_key","whatsapp_session_name"],{data:ke,error:xe}=await te.from("configuraciones").select("key, value").in("key",ue);if(xe){Te("Error al cargar configuración.","error");return}const je=new Map((ke||[]).map(ut=>[ut.key,ut.value])),He=String(je.get("whatsapp_api_url")||""),Fe=String(je.get("whatsapp_api_key")||""),Ne=String(je.get("whatsapp_session_name")||"my-session");if(!He){Te("La URL del servicio de WhatsApp no está configurada. Ve a Configuraciones.","error");return}const lt=`${ct}_${Ee.saleData.id}.pdf`;await hhe(He,Ne,bt,Q,lt,Fe),Te(`${ct==="factura"?"Factura":"Boleta"} PDF enviada correctamente.`,"success")}catch(ue){Te(`Error al enviar PDF: ${ue.message||String(ue)}`,"error")}},className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:[c.jsx(PP,{})," Enviar"," ",ct==="factura"?"Factura":"Boleta"," (PDF)"]})})]}),c.jsx("button",{onClick:hi,className:"w-full mt-6 px-4 py-3 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Realizar Nueva Venta"})]})]})}),Pn&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl z-50 max-h-[90vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Canjear Puntos"}),c.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:_e.length>0?c.jsx("ul",{className:"space-y-3",children:_e.map(Q=>{const ue=(A==null?void 0:A.puntos)||0,ke=ue>=Q.puntos_requeridos,xe=Q.puntos_requeridos-ue,je=Q.promociones,He=new Date().toISOString().split("T")[0],Fe=je?je.fecha_inicio<=He&&je.fecha_fin>=He:!1,Ne=je?Math.ceil((new Date(je.fecha_fin).getTime()-new Date().getTime())/(1e3*60*60*24)):null;return c.jsxs("li",{className:`flex justify-between items-start p-3 bg-soft-gray-100 rounded-lg transition-opacity ${Fe?"":"opacity-60"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-900",children:Q.nombre}),c.jsxs("p",{className:"text-sm text-clinical-blue font-bold",children:[Q.puntos_requeridos," Puntos"]}),je&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1 space-y-0.5",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold",children:"Promo:"})," ",je.nombre]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-semibold",children:"Válido hasta:"})," ",new Date(je.fecha_fin+"T00:00:00").toLocaleDateString("es-PE"),c.jsxs("span",{className:`font-semibold ml-2 ${Ne!==null&&Ne<7?"text-red-600":"text-gray-700"}`,children:["(",Ne!==null&&Ne>=0?`${Ne} días restantes`:"Expirado",")"]})]})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0 pl-4",children:[c.jsx("button",{onClick:()=>fu(Q),disabled:!ke||!Fe,className:"px-4 py-2 bg-pharmacy-green text-white text-sm font-semibold rounded-md hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed",children:"Canjear"}),!ke&&c.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Te faltan ",xe," puntos"]}),!Fe&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Promo inactiva"})]})]},Q.id)})}):c.jsx("p",{className:"text-center py-10 text-gray-500",children:"No hay productos disponibles para canjear."})}),c.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t",children:c.jsx("button",{onClick:()=>Xn(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cerrar"})})]})}),Xe&&c.jsx(Nhe,{caja:e,onClose:()=>tt(!1),onCajaClosed:t}),Ni&&A&&c.jsx(The,{client:A,onClose:()=>ci(!1),onUpdate:Q=>{N(ue=>ue?{...ue,puntos:Q}:null),T(ue=>ue.map(ke=>ke.id===A.id?{...ke,puntos:Q}:ke))}}),di&&c.jsx(_he,{onClose:()=>Pa(!1),onSave:Q=>fi(Q),sede:n,empresa:r}),Ot&&c.jsx(She,{onClose:()=>Et(!1),onSave:Q=>Fi(Q),sede:n,empresa:r}),ve&&c.jsx(khe,{onClose:()=>Ie(!1),showNotification:Te,sede:n,empresa:r}),ws&&c.jsx(Ehe,{client:A,initialProduct:o,onClose:()=>nn(!1),showNotification:Te,sede:n,empresa:r}),_s&&c.jsx(Che,{onClose:()=>fe(!1),onSelectProduct:fi}),c.jsxs("div",{className:"lg:col-span-3 bg-white rounded-lg border border-gray-200 shadow-md flex flex-col p-4 dark:bg-gray-800 dark:border-gray-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-4",children:["Punto de Venta",we&&c.jsxs("span",{className:"text-sm font-normal text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:["Venta #",we.id]})]}),c.jsx("button",{onClick:()=>tt(!0),className:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors",children:"Cerrar Caja"})]}),c.jsxs("div",{className:"mb-2 flex items-center space-x-3 text-xs text-gray-600 dark:text-gray-300",children:[c.jsx("span",{className:"font-medium",children:"Buscar por:"}),Object.entries({nombre:"Nombre",principio_activo:"P. Activo",codigo:"Código",laboratorio:"Lab."}).map(([Q,ue])=>c.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:h[Q],onChange:()=>Bi(Q),className:"h-4 w-4 rounded border-gray-300 text-clinical-blue focus:ring-clinical-blue"}),c.jsx("span",{children:ue})]},Q))]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:Ma,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-clinical-blue dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",value:o,onChange:Q=>u(Q.target.value),onKeyDown:zi}),c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:c.jsx(mhe,{})}),f.length>0&&c.jsx("ul",{ref:P,className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto dark:bg-gray-700 dark:border-gray-600",children:f.map((Q,ue)=>{var je;const ke=whe(Q.f_vencimiento),xe=ue===O;return c.jsxs("li",{onClick:()=>fi(Q),onMouseEnter:()=>M(ue),className:`px-4 py-2 cursor-pointer flex items-center ${xe?"bg-clinical-blue text-white":"hover:bg-soft-gray-100 dark:hover:bg-gray-600"}`,children:[c.jsx("span",{className:`w-2.5 h-2.5 ${ke.color} rounded-full mr-3 flex-shrink-0`,title:ke.tooltip}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("span",{className:`font-medium ${xe?"text-white":"text-gray-800 dark:text-gray-100"}`,children:Q.nombre}),c.jsxs("div",{className:`text-xs ${xe?"text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:[c.jsxs("span",{children:["(Stock: ",Q.stock_unid,")"]}),c.jsxs("span",{className:"ml-2 font-semibold",children:["U: S/",((je=Q.unid_pv)==null?void 0:je.toFixed(2))||"0.00",Q.blister_pv&&` | B: S/${Q.blister_pv.toFixed(2)}`,Q.caja_pv&&` | C: S/${Q.caja_pv.toFixed(2)}`]})]})]})]},Q.id)})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[c.jsxs("button",{onClick:()=>Pa(!0),className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 flex items-center gap-1",children:[c.jsx(ms,{className:"w-4 h-4"})," Producto"]}),c.jsxs("button",{onClick:()=>Et(!0),className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 flex items-center gap-1",children:[c.jsx(XM,{className:"w-4 h-4"})," Cliente"]}),c.jsxs("button",{onClick:()=>Ie(!0),className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 flex items-center gap-1",children:[c.jsx(CB,{className:"w-4 h-4"})," Proveedor"]}),c.jsxs("button",{onClick:()=>et("/app/comisiones"),className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 flex items-center gap-1",children:[c.jsx(QM,{className:"w-4 h-4"})," Comisiones"]}),c.jsxs("button",{onClick:()=>fe(!0),className:"flex items-center gap-1 text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-200 rounded-md hover:bg-purple-200 dark:hover:bg-purple-900",children:[c.jsx(r3,{className:"w-3 h-3"})," Asistente IA"]}),o.length>2&&f.length===0&&c.jsx("button",{onClick:()=>nn(!0),className:"text-xs px-2 py-1 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 rounded-md hover:bg-yellow-200 dark:hover:bg-yellow-900",children:"Registrar como Faltante"})]}),c.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto pr-2 relative",children:[ne&&c.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-gray-800/50 flex justify-center items-center z-20",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-800 uppercase bg-soft-gray-100 sticky top-0 z-10 dark:bg-gray-700 dark:text-gray-300",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Producto"}),c.jsx("th",{className:"px-4 py-3 w-32",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 w-36 text-center",children:"Cantidad"}),c.jsx("th",{className:"px-4 py-3 w-28 text-right",children:"P. Unit."}),c.jsx("th",{className:"px-4 py-3 w-28 text-right",children:"Subtotal"}),c.jsx("th",{className:"px-4 py-3 w-16 text-center"})]})}),c.jsx("tbody",{className:"dark:text-gray-200",children:i.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"text-center py-16 text-gray-500 dark:text-gray-400",children:"Añade productos para iniciar una venta"})}):i.map(Q=>c.jsxs("tr",{className:`border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 ${Q.isRedeemed?"bg-yellow-50 dark:bg-yellow-900/40":""}`,children:[c.jsx("td",{className:"px-4 py-3 font-medium",children:Q.producto_nombre}),c.jsx("td",{className:"px-4 py-3",children:Q.isRedeemed?c.jsx("span",{className:"px-2 py-1 text-xs font-semibold bg-yellow-200 text-yellow-800 rounded-full dark:bg-yellow-800 dark:text-yellow-200",children:"CANJE"}):c.jsx("select",{value:Q.selectedUnit,onChange:ue=>vd(Q.id,ue.target.value),className:"appearance-none text-xs bg-gray-800 text-white border-transparent focus:ring-2 focus:ring-offset-2 focus:ring-clinical-blue focus:border-clinical-blue rounded-md py-1 px-2",children:xd(Q).map(ue=>c.jsx("option",{value:ue.value,children:ue.label},ue.value))})}),c.jsx("td",{className:"px-4 py-3 text-center",children:Q.isRedeemed?Q.cantidad:c.jsxs("div",{className:"flex items-center justify-center bg-gray-800 rounded-md",children:[c.jsx("button",{type:"button",onClick:()=>Vi(Q.id,Q.cantidad-1),className:"w-7 h-7 text-white text-lg hover:bg-gray-700 rounded-l-md transition-colors",children:"-"}),c.jsx("input",{type:"number",value:Q.cantidad,onChange:ue=>Vi(Q.id,parseInt(ue.target.value)||1),onKeyDown:ue=>gm(ue,Q),className:"w-12 text-center bg-gray-800 text-white border-0 focus:ring-0 font-medium appearance-none [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),c.jsx("button",{type:"button",onClick:()=>Vi(Q.id,Q.cantidad+1),className:"w-7 h-7 text-white text-lg hover:bg-gray-700 rounded-r-md transition-colors",children:"+"})]})}),c.jsx("td",{className:"px-4 py-3 text-right",children:Q.isRedeemed?"S/ 0.00":`S/ ${Q.price.toFixed(2)}`}),c.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["S/ ",Q.subtotal.toFixed(2)]}),c.jsx("td",{className:"px-4 py-3 text-center",children:c.jsx("button",{onClick:()=>cu(Q.id),className:"text-red-500 hover:text-red-700",children:c.jsx(ghe,{className:"w-4 h-4"})})})]},Q.detail_id||Q.id))})]})]})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 shadow-md p-6 flex flex-col dark:bg-gray-800 dark:border-gray-700",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 dark:text-gray-100",children:"Resumen de Venta"}),c.jsxs("div",{className:"flex-grow space-y-4 overflow-y-auto pr-2",children:[c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600 transition-all duration-300",children:A?c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cliente Seleccionado:"}),c.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:A.nombres}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.dni})]}),c.jsx("button",{onClick:()=>Fi(null),className:"text-xs font-semibold text-red-500 hover:underline",children:"Limpiar"})]}),c.jsxs("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/40 border border-blue-200 dark:border-blue-700 rounded-lg space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Puntos: ",c.jsx("span",{className:"font-bold text-lg text-clinical-blue",children:A.puntos||0})]}),c.jsx("button",{onClick:()=>ci(!0),className:"text-xs px-2 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Gestionar"})]}),c.jsxs("button",{onClick:du,className:"w-full flex items-center justify-center gap-2 text-sm py-2 bg-yellow-400 text-yellow-900 font-semibold rounded-md hover:bg-yellow-500 transition-colors",children:[c.jsx(MP,{className:"w-4 h-4"})," Canjear Puntos"]})]})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1",children:"Buscar Cliente por Nombre o DNI"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:y,onChange:Q=>v(Q.target.value),placeholder:"Cliente Varios",className:`${Ss} dark:bg-gray-900`}),k&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})]}),C.length>0&&c.jsx("ul",{className:"relative z-20 mt-1 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-md shadow-lg max-h-40 overflow-y-auto",children:C.map(Q=>c.jsxs("li",{onClick:()=>Fi(Q),className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer flex justify-between items-center text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:Q.nombres}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Q.dni})]}),c.jsxs("div",{className:"flex items-center text-xs font-semibold text-yellow-600 dark:text-yellow-400",children:[c.jsx(MP,{className:"w-3 h-3 mr-1"})," ",Q.puntos||0]})]},Q.id))})]})}),A&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2",children:["Compras Frecuentes de ",A.nombres.split(" ")[0]]}),q?c.jsxs("div",{className:"space-y-2 animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-5/6"}),c.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-4/6"})]}):D.length>0?c.jsx("ul",{className:"space-y-1",children:D.map(Q=>c.jsxs("li",{className:"flex justify-between items-center text-sm group",children:[c.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate pr-2",children:Q.nombre}),c.jsx("button",{onClick:()=>fi(Q),className:"p-1 rounded-full text-gray-400 group-hover:text-clinical-blue group-hover:bg-blue-100 dark:group-hover:bg-blue-900/50 transition-colors",children:c.jsx(yhe,{className:"w-4 h-4"})})]},Q.id))}):c.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 py-2",children:"No hay compras frecuentes para este cliente."})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Método de Pago"}),c.jsxs("select",{value:F,onChange:Q=>$(Q.target.value),className:`${Ss} dark:bg-gray-900`,children:[c.jsx("option",{children:"Efectivo"}),c.jsx("option",{children:"Yape"}),c.jsx("option",{children:"Transferencia"}),c.jsx("option",{children:"Otros"})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Dscto. (%)"}),c.jsx("input",{type:"number",value:R,onChange:Q=>{z(Q.target.value===""?"":parseFloat(Q.target.value)),U(0)},className:`${Ss} dark:bg-gray-900`})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Dscto. (S/)"}),c.jsx("input",{type:"number",value:V,onChange:Q=>{U(Q.target.value===""?"":parseFloat(Q.target.value)),z(0)},className:`${Ss} dark:bg-gray-900`})]})]}),F==="Efectivo"&&c.jsx("div",{className:"pt-2",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Recibido"}),c.jsx("input",{type:"number",value:G,onChange:Q=>le(Q.target.value===""?"":parseFloat(Q.target.value)),className:`${Ss} dark:bg-gray-900`,placeholder:"0.00"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Vuelto"}),c.jsxs("div",{className:"mt-1 px-3 py-2 bg-soft-gray-100 rounded-md font-semibold text-lg text-gray-800 dark:bg-gray-600 dark:text-gray-100",children:["S/ ",on.vuelto>0?on.vuelto.toFixed(2):"0.00"]})]})]})})]})]}),c.jsxs("div",{className:"mt-auto pt-4 space-y-1 text-md",children:[c.jsxs("div",{className:"flex justify-between text-gray-600 text-sm dark:text-gray-400",children:[c.jsx("span",{children:"Op. Gravada:"}),c.jsxs("span",{children:["S/ ",on.baseImponible.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-gray-600 text-sm dark:text-gray-400",children:[c.jsx("span",{children:"IGV (18%):"}),c.jsxs("span",{children:["S/ ",on.igv.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-gray-600 font-semibold dark:text-gray-300",children:[c.jsx("span",{children:"Subtotal:"}),c.jsxs("span",{children:["S/ ",on.subtotal.toFixed(2)]})]}),on.totalDiscount>0&&c.jsxs("div",{className:"flex justify-between text-red-600",children:[c.jsx("span",{children:"Descuento:"}),c.jsxs("span",{children:["- S/ ",on.totalDiscount.toFixed(2)]})]}),on.redondeo!==0&&c.jsxs("div",{className:"flex justify-between text-blue-600",children:[c.jsx("span",{children:"Redondeo:"}),c.jsxs("span",{children:["S/ ",on.redondeo.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between font-bold text-2xl border-t-2 border-dashed pt-2 mt-2 dark:text-gray-100 dark:border-gray-600",children:[c.jsx("span",{children:"TOTAL:"}),c.jsxs("span",{children:["S/ ",on.totalAPagar.toFixed(2)]})]})]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:yn,disabled:I||i.length===0,className:"w-full md:w-1/3 py-4 bg-red-600 text-white font-bold text-sm rounded-lg hover:bg-red-700 disabled:bg-gray-400 transition-colors",children:"Cancelar Venta"}),c.jsxs("button",{onClick:bd,disabled:!hu,className:"w-full md:w-2/3 py-4 bg-pharmacy-green text-white font-bold text-xl rounded-lg hover:bg-green-600 shadow-md hover:shadow-lg transition-all duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none flex justify-center items-center",children:[I&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),I?"Procesando...":"Finalizar Venta"]})]})]})]})},jhe=()=>{const{user:e,sede:t,empresa:n}=Mt(),[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null);_.useEffect(()=>{(async()=>{if(!e||!t||!n)return;o(!0);const{data:m,error:y}=await te.from("caja").select("*").eq("sede_id",t.id).eq("empresa_id",n.id).order("f_apertura",{ascending:!1});y?f(`Error al cargar el historial: ${y.message}`):i(m||[]),o(!1)})()},[e,t,n]);const d=[{header:"F. Apertura",accessor:"f_apertura",render:h=>h.f_apertura?new Date(h.f_apertura).toLocaleString("es-PE"):"-"},{header:"F. Cierre",accessor:"f_cierre",render:h=>h.f_cierre?new Date(h.f_cierre).toLocaleString("es-PE"):"-"},{header:"Monto Apertura",accessor:"monto_apertura",render:h=>{var m;return`S/ ${(m=h.monto_apertura)==null?void 0:m.toFixed(2)}`}},{header:"Monto Sistema",accessor:"monto_sistema",render:h=>h.monto_sistema?`S/ ${h.monto_sistema.toFixed(2)}`:"-"},{header:"Monto Físico",accessor:"monto_fisico",render:h=>h.monto_fisico?`S/ ${h.monto_fisico.toFixed(2)}`:"-"},{header:"Diferencia",accessor:"id",render:h=>h.monto_sobrante&&h.monto_sobrante>0?c.jsxs("span",{className:"font-semibold text-pharmacy-green",children:["S/ ",h.monto_sobrante.toFixed(2)," (Sobrante)"]}):h.monto_faltante&&h.monto_faltante>0?c.jsxs("span",{className:"font-semibold text-red-500",children:["- S/ ",h.monto_faltante.toFixed(2)," (Faltante)"]}):"S/ 0.00"},{header:"Estado",accessor:"estado"}];return a?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"w-12 h-12 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):u?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg mt-4 dark:bg-red-900/40 dark:text-red-300",children:u}):c.jsx("div",{className:"mt-6",children:c.jsx(Bn,{title:"Historial de Cajas",columns:d,data:r})})},Phe=()=>{const{user:e,sede:t,empresa:n}=Mt(),[r,i]=_.useState(null),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState(!1),[m,y]=_.useState(""),[v,k]=_.useState("pos"),S=_.useCallback(async()=>{if(!e||!t||!n){o(!1);return}o(!0);const{data:A,error:N}=await te.from("caja").select("*").eq("estado","abierta").eq("usuario",e.email).eq("sede_id",t.id).eq("empresa_id",n.id).order("f_apertura",{ascending:!1}).limit(1).single();N&&N.code!=="PGRST116"?(console.error("Error fetching current caja:",N),f(`Error al cargar el estado de la caja: ${N.message}`)):(i(A),f(null)),o(!1)},[e,t,n]);_.useEffect(()=>{S()},[S]);const C=async A=>{if(A.preventDefault(),!e||!t||!n){alert("No se ha podido identificar al usuario o su sede/empresa. Por favor, inicie sesión de nuevo.");return}if(m===""||m<0){alert("Por favor, ingresa un monto de apertura válido.");return}const{error:N}=await te.from("caja").insert([{usuario:e.email,f_apertura:new Date().toISOString(),monto_apertura:m,estado:"abierta",sede_id:t.id,empresa_id:n.id}]);N?(alert(`Error al abrir la caja: ${N.message}`),console.error("Error opening caja:",N)):(h(!1),y(""),S())},T=()=>v==="historial"?c.jsx(jhe,{}):a?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):u?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:u}):r?c.jsx(Ahe,{cajaInfo:r,onCajaClosed:S}):c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 mt-6",children:c.jsxs("div",{className:"text-center p-8 border border-gray-200 rounded-lg dark:border-gray-700",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200",children:"Caja Cerrada"}),c.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"No hay ninguna caja abierta para tu usuario. Para iniciar las ventas, por favor, abre una nueva caja."}),c.jsx("button",{onClick:()=>h(!0),className:"mt-6 px-6 py-3 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Abrir Caja"})]})});return c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Gestión de Caja"}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mt-4",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>k("pos"),className:`${v==="pos"?"border-clinical-blue text-clinical-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Punto de Venta"}),c.jsx("button",{onClick:()=>k("historial"),className:`${v==="historial"?"border-clinical-blue text-clinical-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Historial de Cajas"})]})})]}),c.jsx("div",{className:"flex-grow min-h-0",children:T()}),d&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md z-50 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4 dark:text-gray-100",children:"Abrir Nueva Caja"}),c.jsxs("form",{onSubmit:C,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"monto_apertura",className:"block text-sm font-medium text-gray-900 dark:text-gray-200",children:"Monto de Apertura (S/)"}),c.jsx("input",{type:"number",name:"monto_apertura",id:"monto_apertura",value:m,onChange:A=>y(A.target.value===""?"":parseFloat(A.target.value)),step:"0.10",min:"0",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-clinical-blue focus:border-clinical-blue sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",placeholder:"0.00"})]}),c.jsxs("div",{className:"flex justify-end pt-6 space-x-2",children:[c.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-100 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Confirmar Apertura"})]})]})]})})]})},i3=({category:e,level:t,onAddSubcategory:n,onEdit:r,onDelete:i})=>{const[a,o]=_.useState(!1),u=e.children.length>0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2 py-2 px-3 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 group",style:{paddingLeft:`${t*1.5+.75}rem`},children:[c.jsxs("div",{className:"flex items-center flex-grow cursor-pointer",onClick:()=>u&&o(!a),children:[u?c.jsx(Kl,{className:`w-4 h-4 text-gray-500 transform transition-transform ${a?"rotate-90":""}`}):c.jsx("span",{className:"w-4 h-4"}),c.jsx(BB,{className:"w-5 h-5 text-yellow-500 mx-2"}),c.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:e.nombre})]}),c.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>n(e.id),title:"Añadir subcategoría",className:"p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-900/50",children:c.jsx(ms,{className:"w-4 h-4 text-green-500"})}),c.jsx("button",{onClick:()=>r(e),title:"Editar",className:"p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50",children:c.jsx(yo,{className:"w-4 h-4 text-blue-500"})}),c.jsx("button",{onClick:()=>i(e),title:"Eliminar",className:"p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50",children:c.jsx(io,{className:"w-4 h-4 text-red-500"})})]})]}),a&&u&&c.jsx("div",{children:e.children.map(f=>c.jsx(i3,{category:f,level:t+1,onAddSubcategory:n,onEdit:r,onDelete:i},f.id))})]})},Mhe=({categoria:e,onClose:t,onSave:n,sede:r,empresa:i})=>{const[a,o]=_.useState(e),[u,f]=_.useState(!1),d=y=>{const{name:v,value:k}=y.target;o(S=>({...S,[v]:k}))},h=async y=>{if(y.preventDefault(),!a||!a.nombre)return;if(!r||!i){alert("No se ha podido identificar la sede o empresa. Por favor, reinicie la sesión.");return}f(!0);const{id:v,...k}=a,S={...k,sede_id:r.id,empresa_id:i.id},{error:C}=v?await te.from("categorias").update(S).eq("id",v):await te.from("categorias").insert([S]);C?alert(`Error al guardar la categoría: ${C.message}`):n(),f(!1)},m="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:[a!=null&&a.id?"Editar":"Crear"," Categoría"]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:a!=null&&a.parent_id?"Creando una subcategoría.":"Creando una categoría principal."}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),c.jsx("input",{type:"text",name:"nombre",value:(a==null?void 0:a.nombre)||"",onChange:d,required:!0,className:m})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción (opcional)"}),c.jsx("textarea",{name:"descripcion",value:(a==null?void 0:a.descripcion)||"",onChange:d,rows:3,className:m})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:u?"Guardando...":"Guardar"})]})]})]})})},Ohe=({sede:e,empresa:t})=>{const[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(!1),[h,m]=_.useState(null),y=_.useCallback(async()=>{if(!e||!t){a(!1);return}a(!0);const{data:A,error:N}=await te.from("categorias").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("nombre");N?u(`Error al cargar categorías: ${N.message}`):r(A||[]),a(!1)},[e,t]);_.useEffect(()=>{y()},[y]);const v=_.useMemo(()=>{const A=new Map,N=[];return n.forEach(O=>{A.set(O.id,{...O,children:[]})}),n.forEach(O=>{O.parent_id&&A.has(O.parent_id)?A.get(O.parent_id).children.push(A.get(O.id)):N.push(A.get(O.id))}),N},[n]),k=()=>{m({nombre:"",descripcion:"",parent_id:null}),d(!0)},S=A=>{m({nombre:"",descripcion:"",parent_id:A}),d(!0)},C=A=>{m(A),d(!0)},T=async A=>{const O=n.some(M=>M.parent_id===A.id)?`¿Estás seguro de que quieres eliminar "${A.nombre}"? Sus subcategorías se convertirán en categorías principales.`:`¿Estás seguro de que quieres eliminar "${A.nombre}"?`;if(window.confirm(O)){const{error:M}=await te.from("categorias").delete().eq("id",A.id);M?alert(`Error al eliminar: ${M.message}`):y()}};return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Categorías de Productos"}),c.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"})," Crear Categoría Principal"]})]}),i?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):o?c.jsx("div",{className:"text-red-500 p-4 bg-red-50 dark:bg-red-900/40 rounded-md",children:o}):c.jsx("div",{className:"border rounded-lg dark:border-gray-700 p-2",children:v.length>0?v.map(A=>c.jsx(i3,{category:A,level:0,onAddSubcategory:S,onEdit:C,onDelete:T},A.id)):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay categorías. ¡Crea la primera!"})}),f&&c.jsx(Mhe,{categoria:h,onClose:()=>d(!1),onSave:()=>{d(!1),y()},sede:e,empresa:t})]})},Rhe=({sede:e,empresa:t})=>{const[n,r]=_.useState([]),[i,a]=_.useState([]),[o,u]=_.useState(!0),[f,d]=_.useState(null),[h,m]=_.useState(!1),[y,v]=_.useState(null),[k,S]=_.useState(""),C=_.useCallback(async()=>{if(!e||!t){u(!1);return}u(!0),d(null);const[M,P]=await Promise.all([te.from("productos").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("nombre"),te.from("categorias").select("*").eq("sede_id",e.id).eq("empresa_id",t.id)]);M.error?d(`Error al cargar productos: ${M.error.message}`):r(M.data||[]),P.error?d(D=>`${D?D+" ":""}Error al cargar categorías: ${P.error.message}`):a(P.data||[]),u(!1)},[e,t]);_.useEffect(()=>{C()},[C]);const T=_.useCallback(M=>{if(!M)return"Sin categoría";if(i.length===0)return M;const P=(Y,q)=>{const W=q.find(F=>F.id===Y);return W?W.parent_id?[...P(W.parent_id,q),W.nombre]:[W.nombre]:[]},D=i.find(Y=>Y.nombre===M);return D?P(D.id,i).join(" / "):M},[i]),A=_.useMemo(()=>n.filter(M=>M.nombre.toLowerCase().includes(k.toLowerCase())),[n,k]),N=[{header:"Nombre",accessor:"nombre"},{header:"Categoría",accessor:"categoria",render:M=>T(M.categoria)},{header:"Stock",accessor:"stock_unid"},{header:"P. Venta",accessor:"unid_pv",render:M=>M.unid_pv?`S/ ${M.unid_pv.toFixed(2)}`:"-"},{header:"Acciones",accessor:"id",render:M=>c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>{v(M),m(!0)},children:c.jsx(yo,{className:"w-5 h-5 text-blue-500"})}),c.jsx("button",{onClick:()=>O(M.id),children:c.jsx(io,{className:"w-5 h-5 text-red-500"})})]})}],O=async M=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?")){const{error:P}=await te.from("productos").delete().eq("id",M);P?alert(`Error al eliminar: ${P.message}`):C()}};return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mt-6 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"relative w-1/3",children:[c.jsx("input",{type:"text",value:k,onChange:M=>S(M.target.value),placeholder:"Buscar producto...",className:"w-full pl-10 pr-4 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"}),c.jsx(DB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),c.jsxs("button",{onClick:()=>{v(null),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"})," Añadir Producto"]})]}),o?c.jsx("div",{className:"text-center py-10",children:"Cargando productos..."}):f?c.jsx("div",{className:"text-red-500 p-4 bg-red-100 rounded-md dark:bg-red-900/40 dark:text-red-300",children:f}):c.jsx(Bn,{data:A,columns:N,title:""}),h&&c.jsx(Ihe,{product:y,categories:i,onClose:()=>m(!1),onSave:()=>{m(!1),C()},sede:e,empresa:t})]})},ml=({title:e,children:t,isOpen:n,onToggle:r})=>c.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsxs("button",{type:"button",onClick:r,className:"w-full flex justify-between items-center p-3 text-left font-semibold text-gray-800 dark:text-gray-100 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",children:[c.jsx("span",{children:e}),c.jsx(Kl,{className:`w-5 h-5 transform transition-transform ${n?"rotate-90":""}`})]}),c.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-[1000px]":"max-h-0"}`,children:c.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-b-lg",children:t})})]}),Ihe=({product:e,categories:t,onClose:n,onSave:r,sede:i,empresa:a})=>{const[o,u]=_.useState(e||{activo:!0}),[f,d]=_.useState(null),[h,m]=_.useState((e==null?void 0:e.imagen)||null),[y,v]=_.useState(!1),[k,S]=_.useState(!1),[C,T]=_.useState("basic"),A=_.useRef(null),N=F=>{const{name:$,value:R,type:z}=F.target;if(z==="checkbox"){const{checked:V}=F.target;u(U=>({...U,[$]:V}))}else u(z==="number"?V=>({...V,[$]:R===""?null:parseFloat(R)}):V=>({...V,[$]:R===""?null:R}))},O=F=>{var R;const $=(R=F.target.files)==null?void 0:R[0];if($){d($);const z=new FileReader;z.onloadend=()=>{m(z.result)},z.readAsDataURL($)}},M=()=>{d(null),m(null),u(F=>({...F,imagen:null}))},P=F=>{const $=t.find(R=>R.id===F);$&&u(R=>({...R,categoria:$.nombre})),S(!1)},D=async F=>{if(F.preventDefault(),!i||!a){alert("No se ha podido identificar la sede o empresa. Por favor, reinicie la sesión.");return}v(!0);const{id:$,...R}=o,z={...R,sede_id:i.id,empresa_id:a.id};if(f){const U=f.name.split(".").pop(),G=`${Date.now()}.${U}`,{error:le,data:ye}=await te.storage.from("avatars").upload(`public/${G}`,f);if(le){alert(`Error subiendo imagen: ${le.message}`),v(!1);return}const{data:B}=te.storage.from("avatars").getPublicUrl(ye.path);z.imagen=B.publicUrl}else h===null&&(z.imagen=null);const{error:V}=$?await te.from("productos").update(z).eq("id",$):await te.from("productos").insert([z]);V?alert(`Error: ${V.message}`):r(),v(!1)},Y=F=>{if(!F)return"Seleccionar categoría";const $=(z,V)=>{const U=V.find(G=>G.id===z);return U?U.parent_id?[...$(U.parent_id,V),U.nombre]:[U.nombre]:[]},R=t.find(z=>z.nombre===F);return R?$(R.id,t).join(" / "):F},q="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5",W=F=>T(C===F?null:F);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4 flex-shrink-0",children:[e!=null&&e.id?"Editar":"Nuevo"," Producto"]}),c.jsxs("form",{onSubmit:D,className:"flex-grow overflow-y-auto pr-2 space-y-3",children:[c.jsx(ml,{title:"Información Básica",isOpen:C==="basic",onToggle:()=>W("basic"),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Nombre"}),c.jsx("input",{type:"text",name:"nombre",value:o.nombre||"",onChange:N,required:!0,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Código de Barras/SKU"}),c.jsx("input",{type:"text",name:"codigo",value:o.codigo||"",onChange:N,className:q})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Categoría"}),c.jsxs("button",{ref:A,type:"button",onClick:()=>S(!k),className:`${q} text-left flex justify-between items-center`,children:[c.jsx("span",{className:"truncate",children:Y(o.categoria)}),c.jsx(Kl,{className:"w-4 h-4 text-gray-500 transform rotate-90"})]}),k&&c.jsx(Dhe,{allCategories:t,onSelect:P,onClose:()=>S(!1),parentRef:A})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Laboratorio"}),c.jsx("input",{type:"text",name:"laboratorio",value:o.laboratorio||"",onChange:N,className:q})]})]})}),c.jsx(ml,{title:"Detalles Farmacéuticos",isOpen:C==="pharma",onToggle:()=>W("pharma"),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Principio Activo"}),c.jsx("input",{type:"text",name:"principio_activo",value:o.principio_activo||"",onChange:N,className:q})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Acción Terapéutica"}),c.jsx("textarea",{name:"accion_terapeutica",value:o.accion_terapeutica||"",onChange:N,rows:2,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Código DIGEMID"}),c.jsx("input",{type:"text",name:"codigo_digemid",value:o.codigo_digemid||"",onChange:N,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Registro Sanitario"}),c.jsx("input",{type:"text",name:"r_sanitario",value:o.r_sanitario||"",onChange:N,className:q})]})]})}),c.jsx(ml,{title:"Precios y Unidades",isOpen:C==="prices",onToggle:()=>W("prices"),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Costo por Unidad (S/)"}),c.jsx("input",{type:"number",step:"0.01",name:"costo_x_unid",value:o.costo_x_unid??"",onChange:N,className:q})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Precio Venta por Unidad (S/)"}),c.jsx("input",{type:"number",step:"0.01",name:"unid_pv",value:o.unid_pv??"",onChange:N,className:q})]}),c.jsx("hr",{className:"md:col-span-4 my-2 dark:border-gray-600"}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Unidades por Blister"}),c.jsx("input",{type:"number",name:"blister_u",value:o.blister_u??"",onChange:N,className:q})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Precio Venta Blister (S/)"}),c.jsx("input",{type:"number",step:"0.01",name:"blister_pv",value:o.blister_pv??"",onChange:N,className:q})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Unidades por Caja"}),c.jsx("input",{type:"number",name:"caja_u",value:o.caja_u??"",onChange:N,className:q})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm mb-1",children:"Precio Venta Caja (S/)"}),c.jsx("input",{type:"number",step:"0.01",name:"caja_pv",value:o.caja_pv??"",onChange:N,className:q})]})]})}),c.jsx(ml,{title:"Inventario y Lote",isOpen:C==="stock",onToggle:()=>W("stock"),children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Stock Actual (Unidades)"}),c.jsx("input",{type:"number",name:"stock_unid",value:o.stock_unid??"",onChange:N,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Stock Mínimo"}),c.jsx("input",{type:"number",name:"stock_min",value:o.stock_min??"",onChange:N,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Lote"}),c.jsx("input",{type:"text",name:"lote",value:o.lote||"",onChange:N,className:q})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm mb-1",children:"Fecha de Vencimiento"}),c.jsx("input",{type:"date",name:"f_vencimiento",value:o.f_vencimiento||"",onChange:N,className:q})]})]})}),c.jsx(ml,{title:"Control y Clasificación",isOpen:C==="flags",onToggle:()=>W("flags"),children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"psicotropico",checked:!!o.psicotropico,onChange:N,className:"h-4 w-4 rounded mr-2"})," Es Psicotrópico"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"controlado",checked:!!o.controlado,onChange:N,className:"h-4 w-4 rounded mr-2"})," Es Controlado"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"is_combo",checked:!!o.is_combo,onChange:N,className:"h-4 w-4 rounded mr-2"})," Es un Combo/Kit"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"activo",checked:!!o.activo,onChange:N,className:"h-4 w-4 rounded mr-2"})," Producto Activo (visible para venta)"]})]})}),c.jsx(ml,{title:"Imagen del Producto",isOpen:C==="image",onToggle:()=>W("image"),children:c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-md flex items-center justify-center overflow-hidden",children:h?c.jsx("img",{src:h,alt:"Vista previa",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs text-gray-500",children:"Sin imagen"})}),c.jsxs("div",{children:[c.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:O,className:"hidden"}),c.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer px-4 py-2 bg-blue-100 text-blue-700 text-sm font-semibold rounded-lg hover:bg-blue-200",children:"Subir Imagen"}),h&&c.jsx("button",{type:"button",onClick:M,className:"ml-2 px-4 py-2 text-sm font-semibold text-red-700 hover:bg-red-100 rounded-lg",children:"Quitar"})]})]})})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2 mt-auto flex-shrink-0",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",onClick:D,disabled:y,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:y?"Guardando...":"Guardar Producto"})]})]})})},Dhe=({allCategories:e,onSelect:t,onClose:n,parentRef:r})=>{const[i,a]=_.useState(""),o=_.useRef(null);_.useEffect(()=>{const h=m=>{o.current&&!o.current.contains(m.target)&&r.current&&!r.current.contains(m.target)&&n()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[n,r]);const u=_.useMemo(()=>{if(!i)return e;const h=i.toLowerCase(),m=new Set;return e.forEach(y=>{if(y.nombre.toLowerCase().includes(h)){m.add(y.id);let v=y;for(;v.parent_id;)m.add(v.parent_id),v=e.find(k=>k.id===v.parent_id)}}),e.filter(y=>m.has(y.id))},[i,e]),f=_.useMemo(()=>{const h=new Map,m=[];return u.forEach(y=>h.set(y.id,{...y,children:[]})),u.forEach(y=>{y.parent_id&&h.has(y.parent_id)?h.get(y.parent_id).children.push(h.get(y.id)):m.push(h.get(y.id))}),m},[u]),d=({node:h,level:m})=>{const[y,v]=_.useState(!!i);return c.jsxs("div",{style:{paddingLeft:`${m*1}rem`},children:[c.jsxs("div",{className:"flex items-center p-2 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/50",children:[h.children.length>0?c.jsx("div",{onClick:()=>v(!y),className:"cursor-pointer p-1 -ml-1",children:c.jsx(Kl,{className:`w-4 h-4 transform transition-transform ${y?"rotate-90":""}`})}):c.jsx("span",{className:"w-6 h-4"}),c.jsx("div",{onClick:()=>t(h.id),className:"ml-1 cursor-pointer flex-grow",children:h.nombre})]}),y&&h.children.map(k=>c.jsx(d,{node:k,level:m+1},k.id))]})};return c.jsxs("div",{ref:o,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-lg shadow-lg max-h-64 flex flex-col",children:[c.jsx("div",{className:"p-2 border-b dark:border-gray-700",children:c.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),placeholder:"Buscar categoría...",className:"w-full text-sm p-1.5 border rounded-md dark:bg-gray-700 dark:border-gray-600"})}),c.jsx("div",{className:"overflow-y-auto p-2",children:f.map(h=>c.jsx(d,{node:h,level:0},h.id))})]})},Lhe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState("productos");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Almacén"})}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx("button",{onClick:()=>r("productos"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${n==="productos"?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:"Productos"}),c.jsx("button",{onClick:()=>r("categorias"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${n==="categorias"?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:"Categorías"})]}),n==="productos"&&c.jsx(Rhe,{sede:e,empresa:t}),n==="categorias"&&c.jsx(Ohe,{sede:e,empresa:t})]})},Uhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),qhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),$he=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState(""),[i,a]=_.useState([]),[o,u]=_.useState(null),[f,d]=_.useState([]),[h,m]=_.useState({totalSold:0,totalRevenue:0,lastSaleDate:"-"}),[y,v]=_.useState(!1),[k,S]=_.useState(null),[C,T]=_.useState(null),[A,N]=_.useState(!1),[O,M]=_.useState(null),P=_.useCallback(async $=>{if($.length<2||!e||!t){a([]);return}const{data:R,error:z}=await te.from("productos").select("id, nombre, stock_unid").eq("sede_id",e.id).eq("empresa_id",t.id).or(`nombre.ilike.%${$}%,codigo.ilike.%${$}%`).limit(10);z?console.error("Error searching products:",z):a(R||[])},[e,t]);_.useEffect(()=>{const $=setTimeout(()=>P(n),300);return()=>clearTimeout($)},[n,P]);const D=$=>{r($.nombre),u($),a([])},Y=async()=>{if(!o||!e||!t){S("Por favor, selecciona un producto de la lista.");return}v(!0),S(null),d([]),T(null);try{const{data:$,error:R}=await te.from("detalle_ventas").select("*").eq("producto_id",o.id).eq("sede_id",e.id).eq("empresa_id",t.id);if(R)throw R;let z=[];if($&&$.length>0){const Z=[...new Set($.map(me=>me.venta_id))],{data:I,error:X}=await te.from("ventas").select("*").in("id",Z).eq("sede_id",e.id).eq("empresa_id",t.id);if(X)throw X;const re=new Map(I.map(me=>[me.id,me]));z=$.map(me=>({...me,ventas:re.get(me.venta_id)})).filter(me=>me.ventas).sort((me,we)=>{const $e=me.ventas.fecha_venta?new Date(me.ventas.fecha_venta).getTime():0;return(we.ventas.fecha_venta?new Date(we.ventas.fecha_venta).getTime():0)-$e})}const{data:V,error:U}=await te.from("ingresos").select("*").eq("producto",o.nombre).eq("sede_id",e.id).eq("empresa_id",t.id).order("f_ingreso",{ascending:!1});if(U)throw U;const G=[...z.map(Z=>({...Z,type:"Venta",date:Z.ventas.fecha_venta})),...V.map(Z=>({...Z,type:"Ingreso",date:Z.f_ingreso}))];G.sort((Z,I)=>{const X=Z.date?new Date(Z.date).getTime():0;return(I.date?new Date(I.date).getTime():0)-X});let le=o.stock_unid??0;const ye=[];let B=0,H=0;for(const Z of G){let I=0,X="",re=null,me=null;Z.type==="Venta"?(I=-Z.cantidad,X=`Venta a ${Z.ventas.cliente||"Cliente Varios"}`,re=Z.ventas.id,me=Z.precio_unitario,B+=Z.cantidad,H+=Z.subtotal):Z.type==="Ingreso"&&(I=Z.unidades,X=`Ingreso de ${Z.proveedor} (Fact. ${Z.numero_factura||"N/A"})`,re=Z.id,me=Z.precio_compra),ye.push({date:Z.date,type:Z.type,details:X,quantityChange:I,resultingStock:le,documentId:re,unitValue:me}),le-=I}d(ye),m({totalSold:B,totalRevenue:H,lastSaleDate:z.length>0&&z[0].ventas.fecha_venta?new Date(z[0].ventas.fecha_venta).toLocaleDateString("es-PE"):"-"})}catch($){S(`Error al obtener el historial del producto: ${$.message}`)}finally{v(!1)}},q=async()=>{if(!o||!e||!t)return;N(!0),T(null);const $=`Analiza el historial de movimientos para el producto "${o.nombre}". Basándote en sus ventas e ingresos, ¿cuál es su tendencia de venta? ¿Qué tan rápido rota el stock? ¿Hay alguna estacionalidad o patrón evidente? Proporciona un resumen conciso y accionable para el administrador de la farmacia.`;try{const R=await Ub($,e.id,t.id);T(R.displayText)}catch{T("Ocurrió un error al contactar al servicio de IA.")}finally{N(!1)}},W=async $=>{const R=Number($);if(isNaN(R)||!e||!t)return;S(null);const{data:z,error:V}=await te.from("ventas").select("*").eq("id",R).eq("sede_id",e.id).eq("empresa_id",t.id).single();V?S(`No se pudo cargar la venta N° ${R}: ${V.message}`):M(z)},F=({type:$})=>{const R="w-10 h-10 rounded-full flex items-center justify-center ring-8 ring-white dark:ring-gray-800";return $==="Venta"?c.jsx("div",{className:`${R} bg-red-500 text-white`,children:c.jsx(PB,{className:"w-5 h-5"})}):$==="Ingreso"?c.jsx("div",{className:`${R} bg-green-500 text-white`,children:c.jsx(jB,{className:"w-5 h-5"})}):null};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm text-center",children:[c.jsx(Tb,{className:"mx-auto h-12 w-12 text-clinical-blue"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mt-2",children:"Kardex Valorizado y Análisis de Producto"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 max-w-2xl mx-auto",children:"Busca un producto para ver su historial completo de movimientos, analizar su rendimiento y obtener insights con IA."}),c.jsxs("div",{className:"mt-6 max-w-2xl mx-auto relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:n,onChange:$=>r($.target.value),placeholder:"Empieza a escribir el nombre o código del producto...",className:"w-full pl-12 pr-28 py-4 text-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-full focus:ring-clinical-blue focus:border-clinical-blue transition-all"}),c.jsx(Uhe,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-6 w-6 text-gray-400"}),c.jsx("button",{onClick:Y,disabled:!o||y,className:"absolute right-2 top-1/2 -translate-y-1/2 px-6 py-2.5 bg-clinical-blue text-white font-semibold rounded-full hover:bg-blue-700 disabled:bg-blue-300 transition-colors",children:y?"Buscando...":"Buscar"})]}),i.length>0&&c.jsx("ul",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-xl max-h-60 overflow-y-auto text-left",children:i.map($=>c.jsxs("li",{onClick:()=>D($),className:"px-4 py-3 hover:bg-soft-gray-100 dark:hover:bg-gray-600 cursor-pointer",children:[c.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:$.nombre}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["(Stock: ",$.stock_unid,")"]})]},$.id))})]})]}),k&&c.jsx("div",{className:"text-red-500 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-4 rounded-lg",children:k}),y&&c.jsx("div",{className:"flex justify-center items-center h-40",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}),f.length>0&&o&&!y&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:["Kardex 360°: ",o.nombre]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[c.jsxs("div",{className:"p-4 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsx(Wc,{className:"w-8 h-8 mx-auto text-gray-600 dark:text-gray-300"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Stock Actual"}),c.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:o.stock_unid})]}),c.jsxs("div",{className:"p-4 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsx(AB,{className:"w-8 h-8 mx-auto text-red-500"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Unidades Vendidas (Hist.)"}),c.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:h.totalSold})]}),c.jsxs("div",{className:"p-4 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsx(qhe,{className:"w-8 h-8 mx-auto text-green-500"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Ingresos Generados (Hist.)"}),c.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["S/ ",h.totalRevenue.toFixed(2)]})]}),c.jsxs("div",{className:"p-4 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsx(JM,{className:"w-8 h-8 mx-auto text-blue-500"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Última Venta"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:h.lastSaleDate})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Análisis con IA"}),c.jsxs("button",{onClick:q,disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-purple-300 transition-colors",children:[c.jsx(Gl,{className:"w-5 h-5"}),A?"Analizando...":"Generar Análisis"]})]}),A&&c.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse [animation-delay:0.2s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 animate-pulse [animation-delay:0.4s]"}),c.jsx("span",{children:"La IA está procesando los datos..."})]}),C&&c.jsx("div",{className:"prose prose-sm max-w-none prose-zinc dark:prose-invert p-4 bg-soft-gray-100 dark:bg-gray-900 border dark:border-gray-700 rounded-md",children:c.jsx(Zb,{children:C})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Línea de Tiempo de Movimientos"}),c.jsxs("div",{className:"relative pl-8",children:[c.jsx("div",{className:"absolute left-12 top-0 h-full border-l-2 border-gray-200 dark:border-gray-700"}),c.jsx("div",{className:"space-y-8",children:f.map(($,R)=>c.jsxs("div",{className:"relative flex items-start",children:[c.jsx(F,{type:$.type}),c.jsxs("div",{className:"ml-8 w-full bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-600",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:$.details}),$.type==="Venta"&&$.documentId&&c.jsxs("button",{onClick:()=>W($.documentId),className:"text-xs font-semibold text-clinical-blue hover:underline mt-1",children:["Ver Venta N° ",$.documentId]})]}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex-shrink-0 ml-4",children:$.date?new Date($.date).toLocaleString("es-PE"):"Fecha no disponible"})]}),c.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase",children:"Movimiento"}),c.jsx("p",{className:`font-bold text-lg ${$.quantityChange>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:$.quantityChange>0?`+${$.quantityChange}`:$.quantityChange})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase",children:"Valor Unit."}),c.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300 text-lg",children:["S/ ",$.unitValue?$.unitValue.toFixed(2):"0.00"]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase",children:"Stock Resultante"}),c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-100 text-lg",children:$.resultingStock})]})]})]})]},R))})]})]})]}),c.jsx(Q1,{sale:O,onClose:()=>M(null)})]})},Bhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),zhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Fhe=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Vhe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(!1),[h,m]=_.useState(null),[y,v]=_.useState(!1),[k,S]=_.useState(null),[C,T]=_.useState(""),A=_.useCallback(async()=>{if(!e||!t)return;a(!0);const{data:R,error:z}=await te.from("proveedores").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("nombre",{ascending:!0});z?(console.error("Error fetching suppliers:",z),u(`Error al cargar proveedores: ${z.message}.`)):(r(R||[]),u(null)),a(!1)},[e,t]);_.useEffect(()=>{A()},[A]);const N=()=>{m({nombre:"",ruc:"",nombre_contacto:"",cel1:"",cel2:"",direccion:"",email:""}),d(!0)},O=R=>{m(R),d(!0)},M=()=>{d(!1),m(null)},P=R=>{S(R),v(!0)},D=()=>{v(!1),S(null)},Y=async()=>{if(!k)return;const{error:R}=await te.from("proveedores").delete().eq("id",k.id);D(),R?alert(`Error al eliminar el proveedor: ${R.message}`):A()},q=async R=>{if(R.preventDefault(),!h||!e||!t)return;const{id:z,created_at:V,...U}=h;Object.keys(U).forEach(ye=>{const B=ye;U[B]===""&&(U[B]=null)});const G={...U,sede_id:e.id,empresa_id:t.id};let le;z?le=await te.from("proveedores").update(G).eq("id",z):le=await te.from("proveedores").insert([G]),le.error?alert(`Error al guardar el proveedor: ${le.error.message}`):(M(),A())},W=R=>{const{name:z,value:V}=R.target;m(U=>({...U,[z]:V}))},F=_.useMemo(()=>n.filter(R=>{var z;return R.nombre.toLowerCase().includes(C.toLowerCase())||((z=R.ruc)==null?void 0:z.toLowerCase().includes(C.toLowerCase()))}),[C,n]),$=[{header:"Nombre",accessor:"nombre"},{header:"RUC",accessor:"ruc"},{header:"Contacto",accessor:"nombre_contacto"},{header:"Celular",accessor:"cel1"},{header:"Email",accessor:"email"},{header:"Acciones",accessor:"id",render:R=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>O(R),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:c.jsx(Bhe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>P(R),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:c.jsx(zhe,{className:"w-4 h-4"})})]})}];return i?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-red-500 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-4 rounded-lg",children:o}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Proveedores"}),c.jsx("button",{onClick:N,className:"px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors",children:"Añadir Proveedor"})]}),c.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o RUC...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-clinical-blue focus:border-clinical-blue bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:C,onChange:R=>T(R.target.value)})}),c.jsx(Bn,{title:"Listado de Proveedores",columns:$,data:F}),f&&h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl z-50 max-h-[90vh] overflow-y-auto",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 dark:text-gray-100",children:h.id?"Editar Proveedor":"Añadir Proveedor"}),c.jsxs("form",{onSubmit:q,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombre o Razón Social"}),c.jsx("input",{type:"text",name:"nombre",id:"nombre",value:h.nombre||"",onChange:W,required:!0,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ruc",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"RUC"}),c.jsx("input",{type:"text",name:"ruc",id:"ruc",value:h.ruc||"",onChange:W,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombre_contacto",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombre de Contacto"}),c.jsx("input",{type:"text",name:"nombre_contacto",id:"nombre_contacto",value:h.nombre_contacto||"",onChange:W,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cel1",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Celular 1"}),c.jsx("input",{type:"tel",name:"cel1",id:"cel1",value:h.cel1||"",onChange:W,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cel2",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Celular 2"}),c.jsx("input",{type:"tel",name:"cel2",id:"cel2",value:h.cel2||"",onChange:W,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"direccion",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Dirección"}),c.jsx("input",{type:"text",name:"direccion",id:"direccion",value:h.direccion||"",onChange:W,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Email"}),c.jsx("input",{type:"email",name:"email",id:"email",value:h.email||"",onChange:W,className:"mt-1 block w-full input-style"})]}),c.jsx("style",{children:`
                                .input-style {
                                    @apply bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-200 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400 dark:placeholder-gray-500;
                                }
                            `}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Guardar"})]})]})]})}),y&&k&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-lg sm:w-full sm:p-6",children:[c.jsxs("div",{className:"sm:flex sm:items-start",children:[c.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/40 sm:mx-0 sm:h-10 sm:w-10",children:c.jsx(Fhe,{className:"h-6 w-6 text-red-600"})}),c.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[c.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Confirmar Eliminación"}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["¿Estás seguro de que quieres eliminar a ",c.jsx("strong",{children:k.nombre}),"? Esta acción no se puede deshacer."]})})]})]}),c.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[c.jsx("button",{type:"button",onClick:Y,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Eliminar"}),c.jsx("button",{type:"button",onClick:D,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})},Hhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Ghe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Khe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M1 4v6h6"}),c.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),Yhe=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Whe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(!1),[h,m]=_.useState(null),[y,v]=_.useState(!1),[k,S]=_.useState(null),[C,T]=_.useState(""),[A,N]=_.useState(!1),[O,M]=_.useState([]),[P,D]=_.useState(!1),[Y,q]=_.useState(null),W=_.useCallback(async()=>{if(!e||!t)return;a(!0);const{data:X,error:re}=await te.from("clientes").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("nombres",{ascending:!0});re?u(`Error al cargar clientes: ${re.message}.`):(r(X||[]),u(null)),a(!1)},[e,t]);_.useEffect(()=>{W()},[W]);const F=()=>{m({nombres:"",dni:"",nacimiento:"",lugar_nacimiento:"",celular:"",puntos:0}),d(!0)},$=X=>{m(X),d(!0)},R=()=>{d(!1),m(null)},z=X=>{S(X),v(!0)},V=()=>{v(!1),S(null)},U=async X=>{if(!e||!t)return;q(X),N(!0),D(!0);const{data:re,error:me}=await te.from("historial_canjes").select("*").eq("cliente_id",X.id).eq("sede_id",e.id).eq("empresa_id",t.id).order("fecha",{ascending:!1});me?alert(`Error al cargar el historial: ${me.message}`):M(re||[]),D(!1)},G=()=>{N(!1),q(null),M([])},le=async()=>{if(!k)return;const{error:X}=await te.from("clientes").delete().eq("id",k.id);V(),X?alert(`Error al eliminar el cliente: ${X.message}`):W()},ye=async X=>{if(X.preventDefault(),!h||!e||!t)return;const{id:re,...me}=h,we={...me};we.dni===""&&(we.dni=null),we.nacimiento===""&&(we.nacimiento=null),we.celular===""&&(we.celular=null),we.lugar_nacimiento===""&&(we.lugar_nacimiento=null),(we.puntos===null||we.puntos===void 0||isNaN(we.puntos))&&(we.puntos=0),we.sede_id=e.id,we.empresa_id=t.id;let $e;re?$e=await te.from("clientes").update(we).eq("id",re).select().single():$e=await te.from("clientes").insert([we]).select().single(),$e.error?alert(`Error al guardar el cliente: ${$e.error.message}`):(!re&&$e.data&&e&&t&&che($e.data,e.id,t.id),R(),W())},B=X=>{const{name:re,value:me,type:we}=X.target;m($e=>({...$e,[re]:we==="number"?me===""?null:parseInt(me,10):me}))},H=_.useMemo(()=>n.filter(X=>{var re;return X.nombres.toLowerCase().includes(C.toLowerCase())||((re=X.dni)==null?void 0:re.toLowerCase().includes(C.toLowerCase()))}),[C,n]),Z=[{header:"Nombres",accessor:"nombres"},{header:"DNI",accessor:"dni"},{header:"Celular",accessor:"celular"},{header:"Puntos",accessor:"puntos"},{header:"Acciones",accessor:"id",render:X=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>U(X),className:"p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:"Historial de Canjes",children:c.jsx(Khe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>$(X),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Editar",children:c.jsx(Hhe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>z(X),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:c.jsx(Ghe,{className:"w-4 h-4"})})]})}],I=[{header:"Producto Canjeado",accessor:"producto"},{header:"Fecha",accessor:"fecha",render:X=>new Date(X.fecha).toLocaleDateString("es-PE")},{header:"Puntos Gastados",accessor:"puntos_gastados"},{header:"Usuario",accessor:"usuario"}];return i?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-red-500 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-4 rounded-lg",children:o}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Clientes"}),c.jsx("button",{onClick:F,className:"px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:"Añadir Cliente"})]}),c.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:c.jsx("input",{type:"text",placeholder:"Buscar por nombres o DNI...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-clinical-blue focus:border-clinical-blue bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:C,onChange:X=>T(X.target.value)})}),c.jsx(Bn,{title:"Listado de Clientes",columns:Z,data:H}),f&&h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl z-50 max-h-[90vh] overflow-y-auto",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 dark:text-gray-100",children:h.id?"Editar Cliente":"Añadir Nuevo Cliente"}),c.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombres",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombres"}),c.jsx("input",{type:"text",name:"nombres",id:"nombres",value:h.nombres||"",onChange:B,required:!0,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dni",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"DNI"}),c.jsx("input",{type:"text",name:"dni",id:"dni",value:h.dni||"",onChange:B,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"celular",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Celular"}),c.jsx("input",{type:"tel",name:"celular",id:"celular",value:h.celular||"",onChange:B,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nacimiento",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Fecha de Nacimiento"}),c.jsx("input",{type:"date",name:"nacimiento",id:"nacimiento",value:h.nacimiento||"",onChange:B,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"lugar_nacimiento",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Lugar de Nacimiento"}),c.jsx("input",{type:"text",name:"lugar_nacimiento",id:"lugar_nacimiento",value:h.lugar_nacimiento||"",onChange:B,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"puntos",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Puntos"}),c.jsx("input",{type:"number",name:"puntos",id:"puntos",value:h.puntos??"",onChange:B,className:"mt-1 block w-full input-style"})]})]}),c.jsx("style",{children:`
                                .input-style {
                                    @apply bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-200 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400 dark:placeholder-gray-500;
                                }
                            `}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Guardar"})]})]})]})}),y&&k&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-lg sm:w-full sm:p-6",children:[c.jsxs("div",{className:"sm:flex sm:items-start",children:[c.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/40 sm:mx-0 sm:h-10 sm:w-10",children:c.jsx(Yhe,{className:"h-6 w-6 text-red-600"})}),c.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[c.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Confirmar Eliminación"}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["¿Estás seguro de que quieres eliminar a ",c.jsx("strong",{children:k.nombres}),"?"]})})]})]}),c.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[c.jsx("button",{type:"button",onClick:le,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Eliminar"}),c.jsx("button",{type:"button",onClick:V,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})}),A&&Y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-3xl z-50 max-h-[90vh] flex flex-col",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:["Historial de Canjes de: ",c.jsx("span",{className:"text-clinical-blue",children:Y.nombres})]}),P?c.jsx("div",{className:"flex justify-center items-center h-48",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}):O.length>0?c.jsx("div",{className:"overflow-y-auto",children:c.jsx(Bn,{title:"",columns:I,data:O})}):c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Este cliente no tiene canjes registrados."}),c.jsx("div",{className:"flex justify-end pt-4 mt-auto",children:c.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cerrar"})})]})})]})},Jhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Xhe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Qhe=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Zhe=()=>{const{empresa:e}=Mt(),[t,n]=_.useState([]),[r,i]=_.useState([]),[a,o]=_.useState([]),[u,f]=_.useState(!0),[d,h]=_.useState(null),[m,y]=_.useState(!1),[v,k]=_.useState(null),[S,C]=_.useState(!1),[T,A]=_.useState(null),[N,O]=_.useState(""),M=_.useCallback(async()=>{if(!e){f(!1);return}f(!0);const[G,le,ye]=await Promise.all([te.from("usuarios").select("*").eq("empresa_id",e.id).order("nombres",{ascending:!0}),te.from("cargos").select("*").order("nombre",{ascending:!0}),te.from("sedes").select("*").eq("empresa_id",e.id).order("nombre",{ascending:!0})]);G.error?h(`Error al cargar usuarios: ${G.error.message}.`):n(G.data||[]),le.error?h(B=>(B?`${B} `:"")+le.error.message):i(le.data||[]),ye.error?h(B=>(B?`${B} `:"")+ye.error.message):o(ye.data||[]),f(!1)},[e]);_.useEffect(()=>{M()},[M]);const P=()=>{var G,le;k({nombres:"",apellidos:"",dni:"",cel:"",email:"",role_id:(G=r[0])==null?void 0:G.id,sede_id:(le=a[0])==null?void 0:le.id}),y(!0)},D=G=>{k(G),y(!0)},Y=()=>{y(!1),k(null)},q=G=>{A(G),C(!0)},W=()=>{C(!1),A(null)},F=async()=>{if(!T)return;const{error:G}=await te.from("usuarios").delete().eq("id",T.id);W(),G?alert(`Error al eliminar el usuario: ${G.message}`):M()},$=async G=>{if(G.preventDefault(),!v||!e)return;const{id:le,created_at:ye,sedes:B,empresas:H,...Z}=v,I={...Z,empresa_id:e.id};let X;le?X=await te.from("usuarios").update(I).eq("id",le):X=await te.from("usuarios").insert([I]),X.error?alert(`Error al guardar el usuario: ${X.error.message}`):(Y(),M())},R=G=>{const{name:le,value:ye,type:B}=G.target;k(H=>({...H,[le]:B==="select-one"?parseInt(ye):ye}))},z=_.useMemo(()=>t.filter(G=>{var le;return`${G.nombres} ${G.apellidos}`.toLowerCase().includes(N.toLowerCase())||((le=G.dni)==null?void 0:le.toLowerCase().includes(N.toLowerCase()))||G.email.toLowerCase().includes(N.toLowerCase())}),[N,t]),V=G=>{var le;return((le=r.find(ye=>ye.id===G))==null?void 0:le.nombre)||"Desconocido"},U=[{header:"Nombre Completo",accessor:"nombres",render:G=>`${G.nombres} ${G.apellidos}`},{header:"Email de Acceso",accessor:"email"},{header:"DNI",accessor:"dni"},{header:"Cargo",accessor:"role_id",render:G=>V(G.role_id)},{header:"Acciones",accessor:"id",render:G=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>D(G),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:c.jsx(Jhe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>q(G),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:c.jsx(Xhe,{className:"w-4 h-4"})})]})}];return u?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):d?c.jsx("div",{className:"text-red-500 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-4 rounded-lg",children:d}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Usuarios"}),c.jsx("button",{onClick:P,className:"px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors",children:"Añadir Usuario"})]}),c.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre, DNI o email...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-clinical-blue focus:border-clinical-blue bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:N,onChange:G=>O(G.target.value)})}),c.jsx(Bn,{title:"Listado de Usuarios",columns:U,data:z}),m&&v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl z-50 max-h-[90vh] overflow-y-auto",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 dark:text-gray-100",children:v.id?"Editar Usuario":"Añadir Usuario"}),c.jsxs("div",{className:"text-sm p-3 mb-4 bg-yellow-100 text-yellow-800 rounded-md dark:bg-yellow-900/50 dark:text-yellow-200",children:[c.jsx("strong",{children:"Nota:"})," Este formulario gestiona el perfil del usuario. El acceso (login) debe ser creado por un administrador en el panel de Autenticación de Supabase."]}),c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombres",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombres"}),c.jsx("input",{type:"text",name:"nombres",id:"nombres",value:v.nombres||"",onChange:R,required:!0,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"apellidos",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Apellidos"}),c.jsx("input",{type:"text",name:"apellidos",id:"apellidos",value:v.apellidos||"",onChange:R,required:!0,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dni",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"DNI"}),c.jsx("input",{type:"text",name:"dni",id:"dni",value:v.dni||"",onChange:R,required:!0,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cel",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Celular"}),c.jsx("input",{type:"tel",name:"cel",id:"cel",value:v.cel||"",onChange:R,className:"mt-1 block w-full input-style"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Email de Acceso"}),c.jsx("input",{type:"email",name:"email",id:"email",value:v.email||"",onChange:R,required:!0,className:"mt-1 block w-full input-style"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role_id",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Cargo"}),c.jsx("select",{name:"role_id",id:"role_id",value:v.role_id||"",onChange:R,required:!0,className:"mt-1 block w-full input-style",children:r.map(G=>c.jsx("option",{value:G.id,children:G.nombre},G.id))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"sede_id",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Sede Asignada"}),c.jsx("select",{name:"sede_id",id:"sede_id",value:v.sede_id||"",onChange:R,required:!0,className:"mt-1 block w-full input-style",children:a.map(G=>c.jsx("option",{value:G.id,children:G.nombre},G.id))})]})]}),c.jsx("style",{children:`
                                .input-style {
                                    @apply bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-200 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400 dark:placeholder-gray-500;
                                }
                            `}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Guardar"})]})]})]})}),S&&T&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-lg sm:w-full sm:p-6",children:[c.jsxs("div",{className:"sm:flex sm:items-start",children:[c.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/40 sm:mx-0 sm:h-10 sm:w-10",children:c.jsx(Qhe,{className:"h-6 w-6 text-red-600"})}),c.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[c.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Confirmar Eliminación"}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["¿Estás seguro de que quieres eliminar a ",c.jsxs("strong",{children:[T.nombres," ",T.apellidos]}),"?"]})})]})]}),c.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[c.jsx("button",{type:"button",onClick:F,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Eliminar"}),c.jsx("button",{type:"button",onClick:W,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})},Tn="w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-clinical-blue focus:border-clinical-blue transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",OP={whatsapp:Pb,facebook:rO,instagram:iO,twitter:aO,tiktok:sO,email:oO},epe={whatsapp:"WhatsApp",facebook:"Facebook",instagram:"Instagram",twitter:"X (Twitter)",tiktok:"TikTok",email:"Correo"},tpe=()=>{const[e,t]=_.useState({empresa_nombre:"",empresa_ruc:"",empresa_direccion:"",empresa_telefono:"",empresa_email:""}),[n,r]=_.useState(!0),[i,a]=_.useState(!1),[o,u]=_.useState(null),f=Object.keys(e);_.useEffect(()=>{(async()=>{r(!0);const{data:y,error:v}=await te.from("configuraciones").select("key, value").in("key",f);if(v)u("Error al cargar la configuración de la empresa: "+v.message);else{const k=new Map((y||[]).map(S=>[S.key,S.value]));t({empresa_nombre:String(k.get("empresa_nombre")||""),empresa_ruc:String(k.get("empresa_ruc")||""),empresa_direccion:String(k.get("empresa_direccion")||""),empresa_telefono:String(k.get("empresa_telefono")||""),empresa_email:String(k.get("empresa_email")||"")})}r(!1)})()},[]);const d=m=>{const{name:y,value:v}=m.target;t(k=>({...k,[y]:v}))},h=async()=>{a(!0),u(null);const m=Object.entries(e).map(([v,k])=>({key:v,value:k})),{error:y}=await te.from("configuraciones").upsert(m,{onConflict:"key"});y?u("Error al guardar la configuración: "+y.message):alert("Datos de la empresa guardados exitosamente."),a(!1)};return n?c.jsx("div",{className:"text-center p-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Datos de la Empresa"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Esta información se usará en boletas, facturas y otros documentos."})]}),o&&c.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md dark:bg-red-900/50 dark:text-red-200",children:o}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre o Razón Social"}),c.jsx("input",{type:"text",name:"empresa_nombre",value:e.empresa_nombre,onChange:d,className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"RUC"}),c.jsx("input",{type:"text",name:"empresa_ruc",value:e.empresa_ruc,onChange:d,className:Tn})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dirección"}),c.jsx("input",{type:"text",name:"empresa_direccion",value:e.empresa_direccion,onChange:d,className:Tn})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Teléfono"}),c.jsx("input",{type:"text",name:"empresa_telefono",value:e.empresa_telefono,onChange:d,className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),c.jsx("input",{type:"email",name:"empresa_email",value:e.empresa_email,onChange:d,className:Tn})]})]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("button",{onClick:h,disabled:i,className:"inline-flex items-center px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:[c.jsx(_p,{className:"mr-2 w-5 h-5"}),i?"Guardando...":"Guardar Cambios"]})})]})},vc=({title:e,children:t,isOpen:n,onToggle:r})=>c.jsxs("div",{className:"border rounded-md dark:border-gray-700 overflow-hidden",children:[c.jsxs("button",{onClick:r,className:"w-full flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700",children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100",children:e}),c.jsx(Kl,{className:`w-5 h-5 transform transition-transform ${n?"rotate-90":""}`})]}),n&&c.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:t})]}),as={hero:{title:"Tu salud, nuestra prioridad.",subtitle:"Encuentra los medicamentos y productos de cuidado personal que necesitas.",mediaUrl:"",mediaType:"image",overlayEnabled:!0},logo:{base64:""},socials:{whatsapp:{enabled:!1,url:""},facebook:{enabled:!1,url:""},instagram:{enabled:!1,url:""},twitter:{enabled:!1,url:""},tiktok:{enabled:!1,url:""},email:{enabled:!1,url:""}},productSections:[],registration:{enabled:!1}},npe=()=>{const{empresa:e}=Mt(),t=_.useMemo(()=>e?`landing_page_settings_empresa_${e.id}`:null,[e]),[n,r]=_.useState(as),[i,a]=_.useState({}),[o,u]=_.useState({}),[f,d]=_.useState("hero"),[h,m]=_.useState(!0),[y,v]=_.useState(!1),[k,S]=_.useState(null);_.useEffect(()=>{(async()=>{if(!t){S("Debes pertenecer a una empresa para configurar la página de bienvenida."),r(as),m(!1);return}m(!0),S(null);const{data:z,error:V}=await te.from("configuraciones").select("value").eq("key",t).single();if(V&&V.code!=="PGRST116")S("Error al cargar la configuración: "+V.message);else if(z&&z.value)try{const U=JSON.parse(z.value),G={...as,...U,hero:{...as.hero,...U.hero},logo:{...as.logo,...U.logo},socials:{...as.socials,...U.socials},registration:{...as.registration,...U.registration}},le=(U.productSections||[]).flatMap(ye=>ye.productIds||[]);if(le.length>0){const{data:ye,error:B}=await te.from("productos").select("*").in("id",le);if(B)throw B;const H=new Map(ye==null?void 0:ye.map(Z=>[Z.id,Z]));G.productSections=U.productSections.map(Z=>({...Z,products:(Z.productIds||[]).map(I=>H.get(I)).filter(Boolean)}))}r(G)}catch{S("Error al procesar la configuración guardada.")}else r(as);m(!1)})()},[t]);const C=(R,z,V)=>{r(U=>({...U,[R]:{...U[R],[z]:V}}))},T=(R,z,V)=>{r(U=>({...U,socials:{...U.socials,[R]:{...U.socials[R],[z]:V}}}))},A=R=>{var V;const z=(V=R.target.files)==null?void 0:V[0];if(z){const U=new FileReader;U.onloadend=()=>{C("logo","base64",U.result)},U.readAsDataURL(z)}},N=async(R,z)=>{if(a(U=>({...U,[R]:z})),z.length<2){u(U=>({...U,[R]:[]}));return}const{data:V}=await te.from("productos").select("*").ilike("nombre",`%${z}%`).limit(5);u(U=>({...U,[R]:V||[]}))},O=()=>{r(R=>({...R,productSections:[...R.productSections,{id:`new_${Date.now()}`,title:"Nueva Sección",products:[]}]}))},M=R=>{window.confirm("¿Estás seguro de que quieres eliminar esta sección?")&&r(z=>({...z,productSections:z.productSections.filter(V=>V.id!==R)}))},P=(R,z)=>{r(V=>({...V,productSections:V.productSections.map(U=>U.id===R?{...U,title:z}:U)}))},D=(R,z)=>{r(V=>({...V,productSections:V.productSections.map(U=>U.id===R&&!U.products.some(G=>G.id===z.id)?{...U,products:[...U.products,z]}:U)})),a(V=>({...V,[R]:""})),u(V=>({...V,[R]:[]}))},Y=(R,z)=>{r(V=>({...V,productSections:V.productSections.map(U=>U.id===R?{...U,products:U.products.filter(G=>G.id!==z)}:U)}))},q=async()=>{if(!t){S("No se puede guardar. No perteneces a una empresa.");return}v(!0),S(null);const R={...n,productSections:n.productSections.map(V=>({id:V.id,title:V.title,productIds:V.products.map(U=>U.id)}))},{error:z}=await te.from("configuraciones").upsert({key:t,value:JSON.stringify(R)},{onConflict:"key"});z?S("Error al guardar la configuración: "+z.message):alert("Configuración de la página de bienvenida guardada exitosamente."),v(!1)},W=R=>{if(!R)return null;const z=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,V=R.match(z);return V&&V[2].length===11?V[2]:null},F=()=>{if(!n.hero.mediaUrl)return null;if(n.hero.mediaType==="video"){const R=W(n.hero.mediaUrl);return R?c.jsx("iframe",{className:"absolute inset-0 w-full h-full object-cover pointer-events-none",src:`https://www.youtube.com/embed/${R}?autoplay=1&mute=1&loop=1&playlist=${R}&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1`,frameBorder:"0",allow:"autoplay; encrypted-media",title:"YouTube Preview"}):c.jsx("video",{src:n.hero.mediaUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover pointer-events-none"})}return c.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n.hero.mediaUrl})`}})};if(h)return c.jsx("div",{className:"text-center p-10",children:"Cargando constructor visual..."});const $=Object.entries(n.socials).filter(([,R])=>R.enabled&&R.url);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:["Editor Visual (Empresa: ",c.jsx("span",{className:"text-clinical-blue",children:(e==null?void 0:e.nombre)||"Ninguna"}),")"]}),c.jsxs("button",{onClick:q,disabled:y||!t,className:"inline-flex items-center px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:[c.jsx(_p,{className:"mr-2 w-5 h-5"}),y?"Guardando...":"Guardar Cambios"]})]}),k&&c.jsx("p",{className:"text-red-500 bg-red-100 p-2 rounded-md",children:k}),c.jsxs("div",{className:`grid grid-cols-1 xl:grid-cols-2 gap-8 ${t?"":"opacity-50 pointer-events-none"}`,children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 space-y-4 max-h-[70vh] overflow-y-auto",children:[c.jsx(vc,{title:"Sección Principal (Hero)",isOpen:f==="hero",onToggle:()=>d(f==="hero"?null:"hero"),children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Título Principal"}),c.jsx("input",{type:"text",value:n.hero.title,onChange:R=>C("hero","title",R.target.value),className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Subtítulo"}),c.jsx("input",{type:"text",value:n.hero.subtitle,onChange:R=>C("hero","subtitle",R.target.value),className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"URL de Imagen o Video de Fondo"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Puedes usar un enlace a una imagen, un video directo (.mp4) o un link de YouTube."}),c.jsx("input",{type:"text",value:n.hero.mediaUrl,onChange:R=>C("hero","mediaUrl",R.target.value),className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Tipo de Fondo"}),c.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[c.jsxs("label",{children:[c.jsx("input",{type:"radio",name:"mediaType",value:"image",checked:n.hero.mediaType==="image",onChange:R=>C("hero","mediaType",R.target.value)})," Imagen"]}),c.jsxs("label",{children:[c.jsx("input",{type:"radio",name:"mediaType",value:"video",checked:n.hero.mediaType==="video",onChange:R=>C("hero","mediaType",R.target.value)})," Video"]})]})]}),c.jsx("div",{children:c.jsxs("label",{className:"flex items-center space-x-2 mt-2",children:[c.jsx("input",{type:"checkbox",checked:n.hero.overlayEnabled,onChange:R=>C("hero","overlayEnabled",R.target.checked),className:"h-4 w-4 rounded text-clinical-blue focus:ring-clinical-blue"}),c.jsx("span",{className:"text-sm font-medium",children:"Habilitar sombreado sobre el fondo (mejora legibilidad)"})]})})]})}),c.jsx(vc,{title:"Logo de la Empresa",isOpen:f==="logo",onToggle:()=>d(f==="logo"?null:"logo"),children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Subir Logo"}),c.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),n.logo.base64&&c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Vista Previa:"}),c.jsx("img",{src:n.logo.base64,alt:"Logo Preview",className:"mt-2 h-16 w-auto bg-gray-200 p-1 rounded-md"})]})]})}),c.jsx(vc,{title:"Redes Sociales",isOpen:f==="socials",onToggle:()=>d(f==="socials"?null:"socials"),children:c.jsx("div",{className:"space-y-4",children:Object.keys(n.socials).map(R=>{const z=R,V=n.socials[z],U=OP[R];return c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("input",{type:"checkbox",checked:V.enabled,onChange:G=>T(R,"enabled",G.target.checked),className:"h-5 w-5 rounded"}),c.jsx(U,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"font-medium",children:epe[R]}),c.jsx("input",{type:"text",placeholder:"URL completa...",value:V.url,onChange:G=>T(R,"url",G.target.value),disabled:!V.enabled,className:`${Tn} !mt-0 disabled:bg-gray-100 dark:disabled:bg-gray-900`})]})]},R)})})}),c.jsx(vc,{title:"Secciones de Productos",isOpen:f==="products",onToggle:()=>d(f==="products"?null:"products"),children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:O,className:"px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-200",children:"Añadir Sección"})}),n.productSections.map(R=>{var z;return c.jsxs("div",{className:"p-4 border rounded-md dark:border-gray-600 space-y-3 bg-gray-50 dark:bg-gray-900",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("input",{type:"text",value:R.title,onChange:V=>P(R.id,V.target.value),className:`${Tn} text-lg font-semibold !mt-0`}),c.jsx("button",{onClick:()=>M(R.id),className:"ml-4 text-red-500 hover:text-red-700",children:c.jsx(io,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:i[R.id]||"",onChange:V=>N(R.id,V.target.value),placeholder:"Buscar producto para añadir...",className:Tn}),((z=o[R.id])==null?void 0:z.length)>0&&c.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-md shadow-lg max-h-40 overflow-y-auto",children:o[R.id].map(V=>c.jsx("li",{onClick:()=>D(R.id,V),className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer text-sm",children:V.nombre},V.id))})]}),c.jsxs("div",{className:"space-y-2",children:[R.products.map(V=>c.jsxs("div",{className:"flex items-center justify-between p-2 text-sm bg-white dark:bg-gray-800 rounded-md border dark:border-gray-700",children:[c.jsx("span",{className:"font-medium truncate",children:V.nombre}),c.jsx("button",{onClick:()=>Y(R.id,V.id),className:"text-red-500 hover:text-red-700",children:c.jsx(io,{className:"w-4 h-4"})})]},V.id)),R.products.length===0&&c.jsx("p",{className:"text-xs text-center text-gray-500 py-2",children:"No hay productos en esta sección."})]})]},R.id)})]})}),c.jsx(vc,{title:"Opciones Generales",isOpen:f==="general",onToggle:()=>d(f==="general"?null:"general"),children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{id:"enable-reg",type:"checkbox",checked:n.registration.enabled,onChange:R=>C("registration","enabled",R.target.checked),className:"h-5 w-5 rounded"}),c.jsx("label",{htmlFor:"enable-reg",className:"ml-2 font-medium",children:"Habilitar botón de registro para clientes"})]})})]}),c.jsx("div",{className:"bg-gray-200 dark:bg-black p-4 rounded-xl",children:c.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full h-full max-h-[65vh] overflow-y-auto",children:[c.jsxs("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center sticky top-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm",children:[c.jsx("div",{className:"flex items-center",children:n.logo.base64?c.jsx("img",{src:n.logo.base64,alt:"Logo",className:"h-8 w-auto"}):c.jsxs(c.Fragment,{children:[c.jsx(Gl,{className:"h-8 w-8 text-clinical-blue"})," ",c.jsx("h1",{className:"ml-2 text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Logo"})]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[n.registration.enabled&&c.jsx("span",{className:"px-4 py-1.5 text-sm border-2 border-clinical-blue text-clinical-blue font-semibold rounded-md",children:"Registrarse"}),c.jsx("span",{className:"px-4 py-1.5 text-sm bg-clinical-blue text-white font-semibold rounded-md",children:"Iniciar Sesión"})]})]}),c.jsxs("section",{className:"relative w-full h-64 bg-gray-300 dark:bg-gray-700 bg-cover bg-center flex items-center justify-center text-center p-4 overflow-hidden",children:[F(),n.hero.overlayEnabled&&c.jsx("div",{className:"absolute inset-0 bg-black/50"}),c.jsxs("div",{className:"relative text-white",children:[c.jsx("h2",{className:"text-2xl font-bold",children:n.hero.title}),c.jsx("p",{className:"mt-2 text-sm max-w-lg mx-auto",children:n.hero.subtitle})]})]}),c.jsx("div",{className:"p-4 space-y-8",children:n.productSections.map(R=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:R.title}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R.products.map(z=>{var V;return c.jsxs("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"w-full h-24 bg-gray-200 dark:bg-gray-700"}),c.jsxs("div",{className:"p-2",children:[c.jsx("h4",{className:"text-sm font-semibold truncate",children:z.nombre}),c.jsxs("p",{className:"mt-1 text-sm font-bold text-clinical-blue",children:["S/ ",(V=z.unid_pv)==null?void 0:V.toFixed(2)]})]})]},z.id)}),R.products.length===0&&c.jsx("p",{className:"text-xs text-gray-400 col-span-2 text-center py-4",children:"Añade productos para ver la vista previa."})]})]},R.id))}),c.jsxs("footer",{className:"bg-gray-100 dark:bg-gray-800 p-4 border-t dark:border-gray-700 flex justify-between items-center",children:[c.jsxs("p",{className:"text-xs text-gray-500",children:["© ",new Date().getFullYear()," GestionFarma"]}),$.length>0&&c.jsx("div",{className:"flex items-center space-x-3",children:$.map(([R])=>{const z=OP[R];return c.jsx(z,{className:"w-5 h-5 text-gray-500"},R)})})]})]})})]})]})},rpe=()=>{const[e,t]=_.useState({whatsapp_provider:"api",whatsapp_api_url:"",whatsapp_api_key:"",whatsapp_session_name:"my-session"}),[n,r]=_.useState(!0),[i,a]=_.useState(!1),[o,u]=_.useState(null),[f,d]=_.useState(null),[h,m]=_.useState({status:"LOADING",message:"Cargando estado..."}),[y,v]=_.useState(!1),k=_.useRef(null),S=Object.keys(e),C=_.useCallback(async()=>{r(!0);const{data:P,error:D}=await te.from("configuraciones").select("key, value").in("key",S);if(D)u("Error al cargar la configuración de WhatsApp: "+D.message);else{const Y=new Map((P||[]).map(q=>[q.key,q.value]));t(q=>({...q,whatsapp_provider:String(Y.get("whatsapp_provider")||"api"),whatsapp_api_url:String(Y.get("whatsapp_api_url")||""),whatsapp_api_key:String(Y.get("whatsapp_api_key")||""),whatsapp_session_name:String(Y.get("whatsapp_session_name")||"my-session")}))}r(!1)},[]);_.useEffect(()=>{C()},[C]);const T=_.useCallback(async()=>{if(!e.whatsapp_api_url){m({status:"ERROR",message:"URL del servicio no configurada."});return}try{const P=await dhe(e.whatsapp_api_url,e.whatsapp_api_key);let D=`Estado: ${P.status}`;if(P.status==="CONNECTED")D="¡Conectado! Listo para enviar mensajes.",d(null),k.current&&(clearInterval(k.current),v(!1));else if(P.status==="QR_READY"){D="Escanea el código QR con tu celular.";const Y=await fhe(e.whatsapp_api_url,e.whatsapp_api_key);d(Y.qr)}else(P.status==="DISCONNECTED"||P.status==="ERROR")&&(D="Desconectado. Inicia la sesión.",d(null));m({status:P.status,message:D})}catch(P){m({status:"ERROR",message:`Fallo de conexión: ${P.message}`}),d(null),k.current&&(clearInterval(k.current),v(!1))}},[e.whatsapp_api_url,e.whatsapp_api_key]);_.useEffect(()=>(e.whatsapp_provider==="web-qr"&&y&&(T(),k.current=setInterval(T,5e3)),()=>{k.current&&clearInterval(k.current)}),[e.whatsapp_provider,y,T]);const A=P=>{t(D=>({...D,whatsapp_provider:P})),P==="web-qr"&&!y?v(!0):P!=="web-qr"&&k.current&&(clearInterval(k.current),v(!1))},N=P=>{const{name:D,value:Y}=P.target;t(q=>({...q,[D]:Y}))},O=async()=>{a(!0),u(null);const P=Object.entries(e).map(([Y,q])=>({key:Y,value:q})),{error:D}=await te.from("configuraciones").upsert(P,{onConflict:"key"});D?u("Error al guardar la configuración: "+D.message):alert("Configuración de WhatsApp guardada."),a(!1)};if(n)return c.jsx("div",{className:"text-center p-10",children:"Cargando..."});const M=({provider:P,label:D})=>c.jsx("button",{onClick:()=>A(P),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${e.whatsapp_provider===P?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:D});return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Integración con WhatsApp"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Elige tu método de conexión para enviar boletas y notificaciones."})]}),c.jsxs("div",{className:"flex space-x-2 border-b dark:border-gray-700 pb-2",children:[c.jsx(M,{provider:"api",label:"API Externa"}),c.jsx(M,{provider:"web-qr",label:"WhatsApp Web (QR)"})]}),o&&c.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md dark:bg-red-900/50 dark:text-red-200",children:o}),e.whatsapp_provider==="api"?c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Conecta un servicio externo (ej: Evolution API) que gestiona tu WhatsApp."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"URL del Servicio API"}),c.jsx("input",{type:"text",name:"whatsapp_api_url",value:e.whatsapp_api_url,onChange:N,placeholder:"http://localhost:3000",className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"API Key (si es requerida)"}),c.jsx("input",{type:"password",name:"whatsapp_api_key",value:e.whatsapp_api_key,onChange:N,className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre de la Sesión"}),c.jsx("input",{type:"text",name:"whatsapp_session_name",value:e.whatsapp_session_name,onChange:N,className:Tn})]})]}):c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Conecta directamente escaneando un código QR. Requiere un servicio compatible (ej: whatsapp-web.js) corriendo en tu servidor."}),c.jsx("div",{className:"p-4 rounded-md bg-gray-100 dark:bg-gray-700",children:c.jsx("p",{className:"font-semibold",children:h.message})}),f?c.jsx("img",{src:`data:image/png;base64,${f}`,alt:"Escanea para conectar WhatsApp",className:"mx-auto border-4 border-white dark:border-gray-600 rounded-lg shadow-lg"}):h.status==="LOADING"||h.status==="QR_READY"?c.jsx("div",{className:"w-64 h-64 bg-gray-200 dark:bg-gray-600 rounded-lg mx-auto flex items-center justify-center animate-pulse",children:c.jsx("p",{className:"text-gray-500",children:"Esperando QR..."})}):null,!y&&h.status!=="CONNECTED"&&c.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg",children:"Iniciar Sesión y Obtener QR"})]}),c.jsx("div",{className:"text-right",children:c.jsxs("button",{onClick:O,disabled:i,className:"inline-flex items-center px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:[c.jsx(_p,{className:"mr-2 w-5 h-5"}),i?"Guardando...":"Guardar Cambios"]})})]})},ipe=()=>{const[e,t]=_.useState({ai_service_provider:"gemini",openai_api_key:"",public_chatbot_instruction:""}),[n,r]=_.useState(!0),[i,a]=_.useState(!1);_.useEffect(()=>{(async()=>{r(!0);const{data:f}=await te.from("configuraciones").select("key, value").in("key",["ai_service_provider","openai_api_key","public_chatbot_instruction"]),d=new Map(f==null?void 0:f.map(h=>[h.key,h.value]));t({ai_service_provider:String(d.get("ai_service_provider")||"gemini"),openai_api_key:String(d.get("openai_api_key")||""),public_chatbot_instruction:String(d.get("public_chatbot_instruction")||"")}),r(!1)})()},[]);const o=async()=>{a(!0);const u=Object.entries(e).map(([d,h])=>({key:d,value:h})),{error:f}=await te.from("configuraciones").upsert(u,{onConflict:"key"});alert(f?"Error al guardar: "+f.message:"Configuración de IA guardada."),a(!1)};return n?c.jsx("div",{className:"text-center p-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Servicios de IA"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Configura el motor de inteligencia artificial para las consultas y el chatbot."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Proveedor de IA"}),c.jsxs("div",{className:"mt-2 flex space-x-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"ai_service_provider",value:"gemini",checked:e.ai_service_provider==="gemini",onChange:u=>t(f=>({...f,ai_service_provider:u.target.value})),className:"h-4 w-4 text-clinical-blue focus:ring-clinical-blue"})," ",c.jsx("span",{className:"ml-2",children:"Google Gemini"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"ai_service_provider",value:"openai",checked:e.ai_service_provider==="openai",onChange:u=>t(f=>({...f,ai_service_provider:u.target.value})),className:"h-4 w-4 text-clinical-blue focus:ring-clinical-blue"})," ",c.jsx("span",{className:"ml-2",children:"OpenAI"})]})]})]}),e.ai_service_provider==="gemini"&&c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg dark:bg-blue-900/40 dark:border-blue-700",children:c.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"La API Key para Gemini se gestiona de forma segura a través de variables de entorno y no requiere configuración aquí."})}),e.ai_service_provider==="openai"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"OpenAI API Key"}),c.jsx("input",{type:"password",value:e.openai_api_key,onChange:u=>t(f=>({...f,openai_api_key:u.target.value})),className:Tn})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instrucción de Sistema para el Chatbot Público"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Define el comportamiento del chatbot en tu página de bienvenida."}),c.jsx("textarea",{value:e.public_chatbot_instruction,onChange:u=>t(f=>({...f,public_chatbot_instruction:u.target.value})),rows:6,className:Tn,placeholder:"Ej: Eres un asistente amigable..."})]}),c.jsx("div",{className:"text-right",children:c.jsxs("button",{onClick:o,disabled:i,className:"inline-flex items-center px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:[c.jsx(_p,{className:"mr-2 w-5 h-5"}),i?"Guardando...":"Guardar Configuración de IA"]})})]})},ape="https://qohzstheshebjlscuihc.supabase.co",spe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvaHpzdGhlc2hlYmpsc2N1aWhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODY3NDEsImV4cCI6MjA3MTY2Mjc0MX0.eNT-YtX0ALCky-dHTmM9GaTXfcCCdTEn0n8hwpyWneU",ope=()=>{const e=()=>{if(window.confirm("¿Estás seguro? Esta acción borrará los datos de la aplicación almacenados en tu navegador, como ventas pendientes no guardadas. Serás desconectado.")){const t=localStorage.getItem("theme");localStorage.clear(),t&&localStorage.setItem("theme",t),window.location.reload()}};return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Modo Desarrollador"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Configuraciones avanzadas y de depuración."})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg space-y-4",children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Conexión a Base de Datos (Supabase)"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Estos valores están definidos en el código fuente por seguridad y no pueden ser modificados desde aquí."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Supabase URL"}),c.jsx("input",{type:"text",readOnly:!0,value:ape,className:`${Tn} bg-gray-200 dark:bg-gray-900/50 cursor-not-allowed`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Supabase Anon Key"}),c.jsx("input",{type:"text",readOnly:!0,value:spe,className:`${Tn} bg-gray-200 dark:bg-gray-900/50 cursor-not-allowed`})]})]}),c.jsxs("div",{className:"p-4 border border-red-300 bg-red-50 rounded-lg dark:border-red-700 dark:bg-red-900/40",children:[c.jsxs("h4",{className:"font-bold text-red-800 dark:text-red-200 flex items-center gap-2",children:[c.jsx(nO,{className:"w-5 h-5"})," Zona Peligrosa"]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:"Limpia el almacenamiento local del navegador. Útil si la aplicación no funciona correctamente. Se cerrará tu sesión."}),c.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Limpiar Caché del Navegador"})]})]})]})},lpe=()=>{const[e,t]=_.useState("empresa"),n=({tabId:r,label:i,Icon:a})=>c.jsxs("button",{onClick:()=>t(r),className:`flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${e===r?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[c.jsx(a,{className:"w-5 h-5"}),c.jsx("span",{children:i})]});return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Configuraciones del Sistema"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx(n,{tabId:"empresa",label:"Empresa",Icon:Ab}),c.jsx(n,{tabId:"pagina_bienvenida",label:"Página de Bienvenida",Icon:qB}),c.jsx(n,{tabId:"ia_servicios",label:"IA y Servicios",Icon:Gl}),c.jsx(n,{tabId:"whatsapp",label:"WhatsApp",Icon:Pb}),c.jsx(n,{tabId:"desarrollador",label:"Modo Desarrollador",Icon:IB})]}),e==="empresa"&&c.jsx(tpe,{}),e==="pagina_bienvenida"&&c.jsx(npe,{}),e==="ia_servicios"&&c.jsx(ipe,{}),e==="whatsapp"&&c.jsx(rpe,{}),e==="desarrollador"&&c.jsx(ope,{})]})},upe=()=>{const{empresa:e}=Mt(),[t,n]=_.useState([]),[r,i]=_.useState(!0),[a,o]=_.useState(null),[u,f]=_.useState(!1),[d,h]=_.useState(null),[m,y]=_.useState(!1),[v,k]=_.useState(null),S=_.useCallback(async()=>{if(!e){o("Usuario no asignado a una empresa. No se pueden cargar las sedes."),i(!1);return}i(!0);const{data:D,error:Y}=await te.from("sedes").select("*").eq("empresa_id",e.id).order("nombre",{ascending:!0});Y?o(`Error al cargar las sedes: ${Y.message}. Asegúrate de que la tabla 'sedes' exista y tenga RLS habilitado para lectura.`):(n(D||[]),o(null)),i(!1)},[e]);_.useEffect(()=>{S()},[S]);const C=()=>{h({nombre:"",direccion:"",telefono:""}),f(!0)},T=D=>{h(D),f(!0)},A=()=>{f(!1),h(null)},N=D=>{k(D),y(!0)},O=()=>{y(!1),k(null)},M=async()=>{if(!v)return;const{error:D}=await te.from("sedes").delete().eq("id",v.id);O(),D?alert(`Error al eliminar la sede: ${D.message}`):S()},P=[{header:"Nombre de la Sede",accessor:"nombre"},{header:"Dirección",accessor:"direccion"},{header:"Teléfono",accessor:"telefono"},{header:"Acciones",accessor:"id",render:D=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>T(D),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Editar",children:c.jsx(yo,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>N(D),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:c.jsx(io,{className:"w-5 h-5"})})]})}];return r?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Ab,{className:"h-8 w-8 text-gray-700 dark:text-gray-200"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Sedes"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las diferentes sucursales o locales de tu farmacia."})]})]}),c.jsx("button",{onClick:C,disabled:!e,className:"px-4 py-2 bg-clinical-blue text-white font-semibold rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Añadir Nueva Sede"})]}),a?c.jsx("div",{className:"text-red-500 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-4 rounded-lg",children:a}):c.jsx(Bn,{title:"Listado de Sedes",columns:P,data:t}),u&&c.jsx(cpe,{sede:d,empresaId:e==null?void 0:e.id,onClose:A,onSave:()=>{A(),S()}}),m&&v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-lg sm:w-full sm:p-6",children:[c.jsxs("div",{className:"sm:flex sm:items-start",children:[c.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/40 sm:mx-0 sm:h-10 sm:w-10",children:c.jsx(nO,{className:"h-6 w-6 text-red-600"})}),c.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[c.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Confirmar Eliminación"}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["¿Estás seguro de que quieres eliminar la sede ",c.jsx("strong",{children:v.nombre}),"? Esta acción no se puede deshacer."]})})]})]}),c.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[c.jsx("button",{type:"button",onClick:M,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Eliminar"}),c.jsx("button",{type:"button",onClick:O,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})},cpe=({sede:e,empresaId:t,onClose:n,onSave:r})=>{const[i,a]=_.useState(e),[o,u]=_.useState(!1),f=m=>{const{name:y,value:v}=m.target;a(k=>({...k,[y]:v}))},d=async m=>{if(m.preventDefault(),!i||!i.nombre)return;if(!t){alert("Error: No se ha podido identificar la empresa actual.");return}u(!0);const{id:y,created_at:v,...k}=i,S={...k,empresa_id:t},{error:C}=y?await te.from("sedes").update(S).eq("id",y):await te.from("sedes").insert([S]);C?alert(`Error al guardar la sede: ${C.message}`):r(),u(!1)},h="bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-200 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400 dark:placeholder-gray-500";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg z-50",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 dark:text-gray-100",children:i!=null&&i.id?"Editar Sede":"Añadir Nueva Sede"}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombre de la Sede"}),c.jsx("input",{type:"text",name:"nombre",id:"nombre",value:(i==null?void 0:i.nombre)||"",onChange:f,required:!0,className:`mt-1 ${h}`})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"direccion",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Dirección"}),c.jsx("input",{type:"text",name:"direccion",id:"direccion",value:(i==null?void 0:i.direccion)||"",onChange:f,className:`mt-1 ${h}`})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Teléfono"}),c.jsx("input",{type:"tel",name:"telefono",id:"telefono",value:(i==null?void 0:i.telefono)||"",onChange:f,className:`mt-1 ${h}`})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-pharmacy-green text-white font-semibold rounded-lg hover:bg-green-600 disabled:bg-green-300",children:o?"Guardando...":"Guardar"})]})]})]})})},dpe=()=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Módulo de Administración"}),c.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Este módulo para el control maestro de operaciones, cierres y reportes financieros está en construcción."})]}),fpe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),RP=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),hpe=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor","aria-hidden":"true",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),ppe=({className:e})=>c.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),c.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),c.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),c.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),c.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),mpe=({className:e})=>c.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),gpe=()=>c.jsx("svg",{className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),IP=()=>c.jsx("svg",{className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),ype=()=>c.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),vpe=()=>c.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),xpe=()=>{const{sede:e,empresa:t,user:n}=Mt(),[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState(!1),[m,y]=_.useState(null),[v,k]=_.useState(!1),[S,C]=_.useState(null),[T,A]=_.useState(""),[N,O]=_.useState(!1),[M,P]=_.useState(null),[D,Y]=_.useState([]),[q,W]=_.useState(!1),[F,$]=_.useState({nombre:"",puntos_requeridos:void 0,stock:1}),[R,z]=_.useState(!1),[V,U]=_.useState(null),[G,le]=_.useState([]),[ye,B]=_.useState(!1),[H,Z]=_.useState(""),[I,X]=_.useState([]),[re,me]=_.useState(null),[we,$e]=_.useState(null),[ne,Se]=_.useState(null),Ee=(ve,Ie)=>{Se({message:ve,type:Ie})};_.useEffect(()=>{if(ne){const ve=setTimeout(()=>Se(null),5e3);return()=>clearTimeout(ve)}},[ne]);const ge=_.useCallback(async()=>{if(!e||!t){o(!1);return}o(!0);const{data:ve,error:Ie}=await te.from("promociones").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("fecha_inicio",{ascending:!1});Ie?f(`Error al cargar promociones: ${Ie.message}.`):(i(ve||[]),f(null)),o(!1)},[e,t]);_.useEffect(()=>{ge()},[ge]),_.useEffect(()=>{if(H.length<2||!e||!t){X([]);return}const Ie=setTimeout(async()=>{const{data:et}=await te.from("clientes").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).or(`nombres.ilike.%${H}%,dni.ilike.%${H}%`).limit(5);X(et||[])},300);return()=>clearTimeout(Ie)},[H,e,t]);const bt=()=>{const ve=new Date().toISOString().split("T")[0];y({nombre:"",fecha_inicio:ve,fecha_fin:"",multiplicador:1}),h(!0)},We=ve=>{y(ve),h(!0)},ct=()=>{h(!1),y(null)},Ft=ve=>{C(ve),k(!0)},Pn=()=>{k(!1),C(null)},Xn=_.useCallback(async ve=>{if(!e||!t)return;W(!0);const{data:Ie,error:et}=await te.from("productos_canje").select("*").eq("id_promo",ve).eq("sede_id",e.id).eq("empresa_id",t.id).order("nombre");et?(Ee(`Error al cargar productos de canje: ${et.message}`,"error"),Y([])):Y(Ie||[]),W(!1)},[e,t]),Ni=ve=>{P(ve),O(!0),Xn(ve.id)},ci=()=>{O(!1),P(null),Y([]),$({nombre:"",puntos_requeridos:void 0,stock:1})},di=ve=>{const{name:Ie,value:et,type:Te}=ve.target;$(On=>({...On,[Ie]:Te==="number"?et===""?void 0:parseInt(et,10):et}))},Pa=async ve=>{if(ve.preventDefault(),!F.nombre||!F.puntos_requeridos||!M||!e||!t)return;const Ie=F.stock??0,et=Ie>0?"Disponible":"Agotado",{error:Te}=await te.from("productos_canje").insert({id_promo:M.id,nombre:F.nombre,puntos_requeridos:F.puntos_requeridos,stock:Ie,estado:et,sede_id:e.id,empresa_id:t.id});Te?Ee(`Error al añadir producto: ${Te.message}`,"error"):($({nombre:"",puntos_requeridos:void 0,stock:1}),Xn(M.id))},ws=async ve=>{if(M&&window.confirm("¿Estás seguro de que quieres eliminar este producto de canje?")){const{error:Ie}=await te.from("productos_canje").delete().eq("id",ve);Ie?Ee(`Error al eliminar: ${Ie.message}`,"error"):Xn(M.id)}},nn=async ve=>{if(!e||!t)return;B(!0);const{data:Ie,error:et}=await te.from("productos_canje").select("*").eq("id_promo",ve).eq("sede_id",e.id).eq("empresa_id",t.id).gt("stock",0);et?(Ee("No se pudieron cargar los productos para canje.","error"),le([])):le(Ie||[]),B(!1)},_s=async ve=>{U(ve),z(!0),await nn(ve.id)},fe=()=>{z(!1),U(null),le([]),Z(""),X([]),me(null)},_e=async ve=>{if(!re||we||!V||!e||!t||!n)return;if((re.puntos||0)<ve.puntos_requeridos){Ee("El cliente no tiene puntos suficientes.","warning");return}$e(ve.id);const Ie=re.puntos||0,et=Ie-ve.puntos_requeridos;try{const{error:Te}=await te.from("clientes").update({puntos:et}).eq("id",re.id);if(Te)throw new Error(`Al actualizar puntos del cliente: ${Te.message}`);const{error:On}=await te.from("historial_canjes").insert({cliente_id:re.id,cliente:re.nombres,producto_id:ve.id,producto:ve.nombre,usuario:n.email||"sistema",puntos_gastados:ve.puntos_requeridos,fecha:new Date().toISOString(),sede_id:e.id,empresa_id:t.id});if(On)throw new Error(`Al registrar el canje: ${On.message}`);const Ai=ve.stock||0;if(Ai<1)throw new Error("El producto ya no tiene stock.");const Bi=Ai-1,Ma=Bi>0?"Disponible":"Agotado",{error:xr}=await te.from("productos_canje").update({stock:Bi,estado:Ma}).eq("id",ve.id);if(xr)throw new Error(`Al actualizar el stock del producto: ${xr.message}`);Ee("Canje realizado con éxito.","success"),me(zi=>zi?{...zi,puntos:et}:null),await nn(V.id)}catch(Te){await te.from("clientes").update({puntos:Ie}).eq("id",re.id),Ee(`Ocurrió un error: ${Te.message}`,"error")}finally{$e(null)}},Ue=async()=>{if(!S)return;const{error:ve}=await te.from("promociones").delete().eq("id",S.id);Pn(),ve?Ee(`Error al eliminar: ${ve.message}`,"error"):ge()},Xe=async ve=>{if(ve.preventDefault(),!m||!e||!t)return;const{id:Ie,...et}=m;(et.multiplicador===null||et.multiplicador===void 0||isNaN(et.multiplicador))&&(et.multiplicador=null);const Te={...et,sede_id:e.id,empresa_id:t.id};let On;Ie?On=await te.from("promociones").update(Te).eq("id",Ie):On=await te.from("promociones").insert([Te]),On.error?Ee(`Error al guardar: ${On.error.message}`,"error"):(ct(),ge())},tt=ve=>{const{name:Ie,value:et,type:Te}=ve.target;y(On=>({...On,[Ie]:Te==="number"?et===""?null:parseFloat(et):et}))},Mn=_.useMemo(()=>r.filter(ve=>ve.nombre.toLowerCase().includes(T.toLowerCase())),[T,r]),vr=[{header:"Nombre",accessor:"nombre"},{header:"Fecha Inicio",accessor:"fecha_inicio"},{header:"Fecha Fin",accessor:"fecha_fin"},{header:"Multiplicador Puntos",accessor:"multiplicador",render:ve=>ve.multiplicador?`x${ve.multiplicador}`:"-"},{header:"Acciones",accessor:"id",render:ve=>c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>_s(ve),className:"p-1 text-yellow-500 hover:text-yellow-700",title:"Canjear Puntos",children:c.jsx(mpe,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>Ni(ve),className:"p-1 text-green-500 hover:text-green-700",title:"Añadir Productos de Canje",children:c.jsx(ppe,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>We(ve),className:"p-1 text-blue-500 hover:text-blue-700",title:"Editar",children:c.jsx(fpe,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>Ft(ve),className:"p-1 text-red-500 hover:text-red-700",title:"Eliminar",children:c.jsx(RP,{className:"w-5 h-5"})})]})}];if(a)return c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})});if(u)return c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg",children:u});const Ot="bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-200 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 placeholder-gray-400 dark:placeholder-gray-500",Et={success:{bg:"bg-green-100 dark:bg-green-900/40",border:"border-green-500",text:"text-green-800 dark:text-green-200",icon:c.jsx(gpe,{})},warning:{bg:"bg-yellow-100 dark:bg-yellow-900/40",border:"border-yellow-500",text:"text-yellow-800 dark:text-yellow-200",icon:c.jsx(IP,{})},error:{bg:"bg-red-100 dark:bg-red-900/40",border:"border-red-500",text:"text-red-800 dark:text-red-200",icon:c.jsx(ype,{})},info:{bg:"bg-blue-100 dark:bg-blue-900/40",border:"border-blue-500",text:"text-blue-800 dark:text-blue-200",icon:c.jsx(IP,{})}};return c.jsxs("div",{className:"space-y-6",children:[ne&&c.jsxs("div",{className:`fixed top-24 right-8 z-50 p-4 border-l-4 rounded-md shadow-lg flex items-center max-w-sm ${Et[ne.type].bg} ${Et[ne.type].border} ${Et[ne.type].text}`,role:"alert",children:[" ",c.jsx("div",{className:"flex-shrink-0",children:Et[ne.type].icon})," ",c.jsx("div",{className:"ml-3 flex-1",children:c.jsx("p",{className:"text-sm font-medium",children:ne.message})})," ",c.jsxs("button",{onClick:()=>Se(null),className:`ml-auto -mx-1.5 -my-1.5 p-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${Et[ne.type].bg}`,children:[" ",c.jsx("span",{className:"sr-only",children:"Cerrar"}),c.jsx(vpe,{})," "]})," "]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Promociones"}),c.jsx("button",{onClick:bt,className:"px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:"Crear Promoción"})]}),c.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre de promoción...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-clinical-blue focus:border-clinical-blue bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",value:T,onChange:ve=>A(ve.target.value)})}),c.jsx(Bn,{title:"Listado de Promociones",columns:vr,data:Mn}),d&&m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg z-50",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 dark:text-gray-100",children:m.id?"Editar Promoción":"Crear Promoción"}),c.jsxs("form",{onSubmit:Xe,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombre"}),c.jsx("input",{type:"text",name:"nombre",value:m.nombre||"",onChange:tt,required:!0,className:`mt-1 block w-full ${Ot}`})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fecha_inicio",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Fecha de Inicio"}),c.jsx("input",{type:"date",name:"fecha_inicio",value:m.fecha_inicio||"",onChange:tt,required:!0,className:`mt-1 block w-full ${Ot}`})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fecha_fin",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Fecha de Fin"}),c.jsx("input",{type:"date",name:"fecha_fin",value:m.fecha_fin||"",onChange:tt,required:!0,className:`mt-1 block w-full ${Ot}`})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"multiplicador",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Multiplicador de Puntos (opcional)"}),c.jsx("input",{type:"number",step:"0.1",name:"multiplicador",value:m.multiplicador??"",onChange:tt,placeholder:"Ej: 1.5",className:`mt-1 block w-full ${Ot}`})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:ct,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Guardar"})]})]})]})}),v&&S&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl sm:my-8 sm:max-w-lg sm:w-full sm:p-6",children:[c.jsxs("div",{className:"sm:flex sm:items-start",children:[c.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/40 sm:mx-0 sm:h-10 sm:w-10",children:c.jsx(hpe,{className:"h-6 w-6 text-red-600"})}),c.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[c.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:"Confirmar Eliminación"}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["¿Estás seguro de que quieres eliminar la promoción ",c.jsx("strong",{children:S.nombre}),"?"]})})]})]}),c.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[c.jsx("button",{type:"button",onClick:Ue,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Eliminar"}),c.jsx("button",{type:"button",onClick:Pn,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-500 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})}),N&&M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-3xl z-50 max-h-[90vh] flex flex-col",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:["Productos de Canje para: ",c.jsx("span",{className:"text-clinical-blue",children:M.nombre})]}),c.jsx("div",{className:"flex-grow overflow-y-auto pr-2 mb-4 border-b dark:border-gray-700 pb-4",children:q?c.jsx("div",{className:"flex justify-center items-center h-24",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}):D.length>0?c.jsx("ul",{className:"space-y-3",children:D.map(ve=>c.jsxs("li",{className:"flex justify-between items-center p-3 bg-soft-gray-100 dark:bg-gray-700/50 rounded-lg",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:ve.nombre}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[ve.puntos_requeridos," puntos"]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Stock: ",c.jsx("span",{className:"font-bold",children:ve.stock??0})]}),c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ve.estado==="Disponible"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:ve.estado}),c.jsx("button",{onClick:()=>ws(ve.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50",children:c.jsx(RP,{className:"w-4 h-4"})})]})]},ve.id))}):c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-6",children:"No hay productos de canje para esta promoción."})}),c.jsxs("form",{onSubmit:Pa,className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-lg dark:text-gray-100",children:"Añadir Nuevo Producto de Canje"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[c.jsx("label",{htmlFor:"nombre_canje",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Nombre del Producto"}),c.jsx("input",{type:"text",name:"nombre",id:"nombre_canje",value:F.nombre||"",onChange:di,required:!0,className:`mt-1 block w-full ${Ot}`})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"puntos_canje",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Puntos Requeridos"}),c.jsx("input",{type:"number",name:"puntos_requeridos",id:"puntos_canje",value:F.puntos_requeridos||"",onChange:di,required:!0,className:`mt-1 block w-full ${Ot}`})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"stock_canje",className:"block text-sm font-medium text-gray-900 dark:text-gray-300",children:"Stock Inicial"}),c.jsx("input",{type:"number",name:"stock",id:"stock_canje",value:F.stock||"",onChange:di,required:!0,className:`mt-1 block w-full ${Ot}`})]})]}),c.jsx("div",{className:"flex justify-end pt-2 space-x-2",children:c.jsx("button",{type:"submit",className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600",children:"Añadir Producto"})})]}),c.jsx("div",{className:"flex justify-end pt-4 mt-auto",children:c.jsx("button",{type:"button",onClick:ci,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cerrar"})})]})}),R&&V&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-40 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-3xl z-50 max-h-[90vh] flex flex-col",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:["Canjear Puntos de Promoción: ",c.jsx("span",{className:"text-clinical-blue",children:V.nombre})]}),re?c.jsxs("div",{className:"flex-grow flex flex-col min-h-0",children:[c.jsxs("div",{className:"p-3 mb-4 bg-blue-50 dark:bg-blue-900/40 border border-blue-200 dark:border-blue-700 rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:re.nombres}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Puntos: ",c.jsx("span",{className:"font-bold text-clinical-blue",children:re.puntos||0})]})]}),c.jsx("button",{onClick:()=>me(null),className:"text-sm text-red-600 hover:underline",children:"Cambiar Cliente"})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto pr-2",children:[c.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Productos Disponibles para Canje"}),ye?c.jsx("div",{className:"flex justify-center items-center h-24",children:c.jsx("div",{className:"w-8 h-8 border-2 border-dashed rounded-full animate-spin border-clinical-blue"})}):G.length>0?c.jsx("ul",{className:"space-y-2",children:G.map(ve=>{const Ie=(re.puntos||0)>=ve.puntos_requeridos,et=(ve.stock||0)>0;return c.jsxs("li",{className:`flex justify-between items-center p-2 rounded-md ${Ie&&et?"bg-soft-gray-100 dark:bg-gray-700":"bg-red-50 dark:bg-red-900/40 text-gray-500"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:ve.nombre}),c.jsxs("p",{className:"text-sm dark:text-gray-300",children:[ve.puntos_requeridos," puntos ",!et&&c.jsx("span",{className:"font-bold text-red-500",children:"(Agotado)"})]})]}),c.jsx("button",{onClick:()=>_e(ve),disabled:!Ie||we!==null||!et,className:"px-3 py-1 text-sm bg-pharmacy-green text-white rounded-md hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center w-24",children:we===ve.id?c.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Canjear"})]},ve.id)})}):c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-6",children:"No hay productos de canje con stock para esta promoción."})]})]}):c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar cliente por nombre o DNI...",value:H,onChange:ve=>Z(ve.target.value),className:`w-full pl-4 pr-4 py-2 ${Ot}`}),I.length>0&&c.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:I.map(ve=>c.jsxs("li",{onClick:()=>{me(ve),X([]),Z("")},className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer text-gray-900 dark:text-gray-200",children:[ve.nombres," - ",ve.dni]},ve.id))})]}),c.jsx("div",{className:"flex justify-end pt-4 mt-auto",children:c.jsx("button",{type:"button",onClick:fe,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cerrar"})})]})})]})},bpe=()=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Módulo de Registros"}),c.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Este módulo para la visualización de la bitácora de acciones y modificaciones del sistema está en construcción."})]}),wpe=()=>{const[e,t]=_.useState("mis_comisiones");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(QM,{className:"h-8 w-8 text-gray-700 dark:text-gray-200"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Comisiones"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analiza tus comisiones generadas o administra las reglas de comisión para los productos."})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx(DP,{tabId:"mis_comisiones",label:"Mis Comisiones",activeTab:e,setActiveTab:t}),c.jsx(DP,{tabId:"admin_reglas",label:"Administrar Reglas",activeTab:e,setActiveTab:t})]}),e==="mis_comisiones"&&c.jsx(_pe,{}),e==="admin_reglas"&&!0&&c.jsx(Spe,{})]})},DP=({tabId:e,label:t,activeTab:n,setActiveTab:r})=>c.jsx("button",{onClick:()=>r(e),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${n===e?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:t}),_pe=()=>{const{user:e,sede:t,empresa:n}=Mt(),[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState("este_mes"),[m,y]=_.useState(null),{startDate:v,endDate:k}=_.useMemo(()=>{const A=new Date;let N=new Date(A.getFullYear(),A.getMonth(),1),O=new Date(A.getFullYear(),A.getMonth()+1,0,23,59,59);return d==="ultimos_30"?(N=new Date(A.getTime()-720*60*60*1e3),N.setHours(0,0,0,0),O=new Date):d==="mes_pasado"&&(N=new Date(A.getFullYear(),A.getMonth()-1,1),O=new Date(A.getFullYear(),A.getMonth(),0,23,59,59)),{startDate:N.toISOString(),endDate:O.toISOString()}},[d]),S=_.useCallback(async()=>{if(!e||!e.email||!t||!n){f("No se ha podido identificar al usuario o su sede/empresa. Por favor, inicie sesión de nuevo."),o(!1);return}o(!0);const{data:A,error:N}=await te.from("usuarios").select("id").eq("email",e.email).single();if(N||!A){f("No se pudo encontrar el perfil de usuario para cargar las comisiones."),o(!1);return}const{data:O,error:M}=await te.from("comisiones_generadas").select("*, detalle_ventas(subtotal), productos(nombre), ventas(*)").eq("usuario_id",A.id).eq("sede_id",t.id).eq("empresa_id",n.id).gte("fecha_generacion",v).lte("fecha_generacion",k).order("fecha_generacion",{ascending:!1});M?f(`Error al cargar comisiones: ${M.message}`):i(O||[]),o(!1)},[e,v,k,t,n]);_.useEffect(()=>{S()},[S]);const C=_.useMemo(()=>{const A=r.reduce((O,M)=>O+M.monto_comision,0),N=new Set(r.map(O=>O.venta_id));return{totalComision:A,numVentas:N.size,numProductos:r.length}},[r]),T=[{header:"Fecha",accessor:"fecha_generacion",render:A=>new Date(A.fecha_generacion).toLocaleString("es-PE")},{header:"ID Venta",accessor:"venta_id",render:A=>c.jsx("button",{onClick:()=>y(A.ventas),className:"text-clinical-blue font-semibold hover:underline",children:A.venta_id})},{header:"Producto",accessor:"productos",render:A=>{var N;return((N=A.productos)==null?void 0:N.nombre)||"Desconocido"}},{header:"Monto Venta (Item)",accessor:"detalle_ventas",render:A=>{var N,O;return`S/ ${((O=(N=A.detalle_ventas)==null?void 0:N.subtotal)==null?void 0:O.toFixed(2))||"0.00"}`}},{header:"Comisión Ganada",accessor:"monto_comision",render:A=>c.jsxs("span",{className:"font-bold text-pharmacy-green",children:["S/ ",A.monto_comision.toFixed(2)]})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Ov,{icon:c.jsx(jb,{className:"w-8 h-8"}),title:"Comisión Total (Periodo)",value:`S/ ${C.totalComision.toFixed(2)}`,color:"green"}),c.jsx(Ov,{icon:c.jsx(Cb,{className:"w-8 h-8"}),title:"Ventas con Comisión",value:C.numVentas,color:"blue"}),c.jsx(Ov,{icon:c.jsx(Wc,{className:"w-8 h-8"}),title:"Productos Comisionables",value:C.numProductos,color:"yellow"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Detalle de Comisiones Generadas"}),c.jsxs("select",{value:d,onChange:A=>h(A.target.value),className:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-sm p-2",children:[c.jsx("option",{value:"este_mes",children:"Este Mes"}),c.jsx("option",{value:"ultimos_30",children:"Últimos 30 días"}),c.jsx("option",{value:"mes_pasado",children:"Mes Pasado"})]})]}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):u?c.jsx("div",{className:"text-red-500",children:u}):c.jsx(Bn,{data:r,columns:T,title:""})]}),c.jsx(Q1,{sale:m,onClose:()=>y(null)})]})},Ov=({icon:e,title:t,value:n,color:r})=>{const i={green:{bg:"bg-green-100 text-green-600 dark:bg-green-900/50",accent:"bg-green-500"},blue:{bg:"bg-blue-100 text-blue-600 dark:bg-blue-900/50",accent:"bg-blue-500"},yellow:{bg:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/50",accent:"bg-yellow-500"}};return c.jsxs("div",{className:"relative bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm overflow-hidden h-40",children:[c.jsx("div",{className:`absolute -right-16 -bottom-16 w-48 h-48 rounded-full opacity-10 ${i[r].accent}`}),c.jsxs("div",{className:"relative z-10 flex justify-between items-center h-full",children:[c.jsx("div",{className:`p-4 rounded-full ${i[r].bg}`,children:e}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:t}),c.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n})]})]})]})},Spe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(!1),[h,m]=_.useState(null),y=_.useCallback(async()=>{if(!e||!t){a(!1);return}a(!0);const{data:S,error:C}=await te.from("comisiones_reglas").select("*, productos (nombre)").eq("sede_id",e.id).eq("empresa_id",t.id).order("created_at",{ascending:!1});C?u(`Error al cargar reglas: ${C.message}`):r(S||[]),a(!1)},[e,t]);_.useEffect(()=>{y()},[y]);const v=()=>{m({producto_id:void 0,tipo_comision:"porcentaje",valor_comision:5,fecha_inicio:new Date().toISOString().split("T")[0],fecha_fin:null,activa:!0}),d(!0)},k=[{header:"Producto",accessor:"productos",render:S=>{var C;return((C=S.productos)==null?void 0:C.nombre)||"Producto no encontrado"}},{header:"Tipo",accessor:"tipo_comision",render:S=>S.tipo_comision==="porcentaje"?"Porcentaje":"Monto Fijo"},{header:"Valor",accessor:"valor_comision",render:S=>S.tipo_comision==="porcentaje"?`${S.valor_comision}%`:`S/ ${S.valor_comision.toFixed(2)}`},{header:"Vigencia",accessor:"fecha_inicio",render:S=>`${S.fecha_inicio} al ${S.fecha_fin||"Indefinido"}`},{header:"Estado",accessor:"activa",render:S=>c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.activa?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.activa?"Activa":"Inactiva"})},{header:"Acciones",accessor:"id",render:S=>c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>{m(S),d(!0)},children:c.jsx(yo,{className:"w-5 h-5 text-blue-500"})})})}];return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Reglas de Comisión"}),c.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"})," Crear Regla"]})]}),i?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):o?c.jsx("div",{className:"text-red-500",children:o}):c.jsx(Bn,{data:n,columns:k,title:""}),f&&c.jsx(kpe,{regla:h,onClose:()=>d(!1),onSave:()=>{d(!1),y()},sede:e,empresa:t})]})},kpe=({regla:e,onClose:t,onSave:n,sede:r,empresa:i})=>{const[a,o]=_.useState(e),[u,f]=_.useState(""),[d,h]=_.useState([]),[m,y]=_.useState(null),[v,k]=_.useState(!1);_.useEffect(()=>{a&&a.producto_id&&(async()=>{const{data:O}=await te.from("productos").select("id, nombre").eq("id",a.producto_id).single();O&&y(O)})()},[a]),_.useEffect(()=>{if(u.length<2||!r||!i){h([]);return}const O=setTimeout(async()=>{const{data:M}=await te.from("productos").select("id, nombre").eq("sede_id",r.id).eq("empresa_id",i.id).ilike("nombre",`%${u}%`).limit(5);h(M||[])},300);return()=>clearTimeout(O)},[u,r,i]);const S=N=>{y(N),o(O=>({...O,producto_id:N.id})),f(""),h([])},C=N=>{const{name:O,value:M,type:P,checked:D}=N.target;o(Y=>({...Y,[O]:P==="checkbox"?D:P==="number"?parseFloat(M):M}))},T=async N=>{if(N.preventDefault(),!a||!a.producto_id||!r||!i){alert("Selecciona un producto y asegúrate de que la sesión sea válida.");return}k(!0);const{id:O,...M}=a,P={...M,sede_id:r.id,empresa_id:i.id},{error:D}=O?await te.from("comisiones_reglas").update(P).eq("id",O):await te.from("comisiones_reglas").insert([P]);D?alert(`Error: ${D.message}`):n(),k(!1)},A="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:[a!=null&&a.id?"Editar":"Crear"," Regla de Comisión"]}),c.jsxs("form",{onSubmit:T,className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Producto"}),m?c.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[c.jsx("span",{className:"font-semibold",children:m.nombre}),c.jsx("button",{type:"button",onClick:()=>{y(null),o(N=>({...N,producto_id:void 0}))},className:"text-red-500 text-sm",children:"Cambiar"})]}):c.jsx("input",{type:"text",value:u,onChange:N=>f(N.target.value),placeholder:"Buscar producto...",className:A}),d.length>0&&c.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:d.map(N=>c.jsx("li",{onClick:()=>S(N),className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",children:N.nombre},N.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Comisión"}),c.jsxs("select",{name:"tipo_comision",value:a==null?void 0:a.tipo_comision,onChange:C,className:A,children:[c.jsx("option",{value:"porcentaje",children:"Porcentaje"}),c.jsx("option",{value:"monto_fijo",children:"Monto Fijo"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor"}),c.jsx("input",{type:"number",step:"0.01",name:"valor_comision",value:a==null?void 0:a.valor_comision,onChange:C,required:!0,className:A})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Inicio"}),c.jsx("input",{type:"date",name:"fecha_inicio",value:a==null?void 0:a.fecha_inicio,onChange:C,required:!0,className:A})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha de Fin (opcional)"}),c.jsx("input",{type:"date",name:"fecha_fin",value:(a==null?void 0:a.fecha_fin)||"",onChange:C,className:A})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",name:"activa",id:"activa",checked:a==null?void 0:a.activa,onChange:C,className:"h-4 w-4 rounded border-gray-300 text-clinical-blue focus:ring-clinical-blue"}),c.jsx("label",{htmlFor:"activa",className:"ml-2 block text-sm",children:"Regla activa"})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:v?"Guardando...":"Guardar"})]})]})]})})},Epe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),f=_.useCallback(async()=>{if(!e||!t)return;a(!0);const{data:y,error:v}=await te.from("pedidos_clientes").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("created_at",{ascending:!1});v?u(`Error al cargar pedidos: ${v.message}`):r(y||[]),a(!1)},[e,t]);_.useEffect(()=>{f()},[f]);const d=async(y,v)=>{const{error:k}=await te.from("pedidos_clientes").update({estado:v}).eq("id",y);k?alert(`Error al actualizar estado: ${k.message}`):f()},h=y=>{const v="px-2 py-1 text-xs font-semibold rounded-full";return y==="Pendiente"?c.jsx("span",{className:`${v} bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-200`,children:"Pendiente"}):y==="Notificado"?c.jsx("span",{className:`${v} bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200`,children:"Notificado"}):y==="Completado"?c.jsx("span",{className:`${v} bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300`,children:"Completado"}):null},m=[{header:"Fecha",accessor:"created_at",render:y=>new Date(y.created_at).toLocaleString("es-PE")},{header:"Cliente",accessor:"cliente_nombre",render:y=>y.cliente_nombre||"No especificado"},{header:"Producto Solicitado",accessor:"producto_nombre"},{header:"Cantidad",accessor:"cantidad"},{header:"Notas",accessor:"notas"},{header:"Estado",accessor:"estado",render:y=>h(y.estado)},{header:"Acciones",accessor:"id",render:y=>c.jsxs("div",{className:"flex items-center space-x-2",children:[y.estado==="Pendiente"&&c.jsx("button",{onClick:()=>d(y.id,"Notificado"),className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Notificar"}),y.estado!=="Completado"&&c.jsx("button",{onClick:()=>d(y.id,"Completado"),className:"px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600",children:"Completar"})]})}];return i?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-clinical-blue"})}):o?c.jsx("div",{className:"text-red-500 bg-red-100 p-4 rounded-lg dark:bg-red-900/40 dark:text-red-300",children:o}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(tO,{className:"h-8 w-8 text-gray-700 dark:text-gray-200"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Pedidos de Clientes (Faltantes)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aquí se registran los productos que los clientes solicitaron y no tenías en stock."})]})]}),c.jsx(Bn,{title:"Listado de Pedidos Pendientes",columns:m,data:n})]})},Cpe=()=>{const[e,t]=_.useState("listado");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(NB,{className:"h-8 w-8 text-gray-700 dark:text-gray-200"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:"Gestión de Gastos"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Registra y categoriza todas las salidas de dinero para un mejor control financiero."})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-white rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsx(LP,{tabId:"listado",label:"Listado de Gastos",activeTab:e,setActiveTab:t}),c.jsx(LP,{tabId:"categorias",label:"Gestionar Categorías",activeTab:e,setActiveTab:t})]}),e==="listado"&&c.jsx(Tpe,{}),e==="categorias"&&c.jsx(Npe,{})]})},LP=({tabId:e,label:t,activeTab:n,setActiveTab:r})=>c.jsx("button",{onClick:()=>r(e),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${n===e?"bg-clinical-blue text-white":"text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:t}),Tpe=()=>{const{sede:e,empresa:t,profile:n}=Mt(),[r,i]=_.useState([]),[a,o]=_.useState(!0),[u,f]=_.useState(null),[d,h]=_.useState(!1),[m,y]=_.useState(null),v=_.useCallback(async()=>{if(!e||!t)return;o(!0);const{data:T,error:A}=await te.from("gastos").select("*, gastos_categorias(nombre), usuarios(nombres, apellidos)").eq("sede_id",e.id).eq("empresa_id",t.id).order("fecha",{ascending:!1});A?f(`Error al cargar gastos: ${A.message}`):i(T||[]),o(!1)},[e,t]);_.useEffect(()=>{v()},[v]);const k=()=>{y({fecha:new Date().toISOString().split("T")[0],monto:void 0,descripcion:"",categoria_id:void 0}),h(!0)},S=_.useMemo(()=>r.reduce((T,A)=>T+A.monto,0),[r]),C=[{header:"Fecha",accessor:"fecha",render:T=>new Date(T.fecha+"T00:00:00").toLocaleDateString("es-PE")},{header:"Descripción",accessor:"descripcion"},{header:"Categoría",accessor:"gastos_categorias",render:T=>{var A;return((A=T.gastos_categorias)==null?void 0:A.nombre)||"Sin categoría"}},{header:"Monto",accessor:"monto",render:T=>c.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:["S/ ",T.monto.toFixed(2)]})},{header:"Usuario",accessor:"usuarios",render:T=>T.usuarios?`${T.usuarios.nombres} ${T.usuarios.apellidos}`:n==null?void 0:n.nombres},{header:"Acciones",accessor:"id",render:T=>c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>{y(T),h(!0)},children:c.jsx(yo,{className:"w-5 h-5 text-blue-500"})})})}];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm flex items-center col-span-1 md:col-span-3",children:[c.jsx("div",{className:"p-3 rounded-full bg-red-100 text-red-600 dark:bg-red-900/50",children:c.jsx(jb,{})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total de Gastos Registrados"}),c.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["S/ ",S.toFixed(2)]})]})]})}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Historial de Gastos"}),c.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"})," Registrar Gasto"]})]}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):u?c.jsx("div",{className:"text-red-500",children:u}):c.jsx(Bn,{data:r,columns:C,title:""})]}),d&&c.jsx(Ape,{gasto:m,onClose:()=>h(!1),onSave:()=>{h(!1),v()}})]})},Npe=()=>{const{sede:e,empresa:t}=Mt(),[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,u]=_.useState(null),[f,d]=_.useState(!1),[h,m]=_.useState(null),y=_.useCallback(async()=>{if(!e||!t)return;a(!0);const{data:S,error:C}=await te.from("gastos_categorias").select("*").eq("sede_id",e.id).eq("empresa_id",t.id).order("nombre");C?u(`Error al cargar categorías: ${C.message}`):r(S||[]),a(!1)},[e,t]);_.useEffect(()=>{y()},[y]);const v=()=>{m({nombre:"",descripcion:""}),d(!0)},k=[{header:"Nombre",accessor:"nombre"},{header:"Descripción",accessor:"descripcion"},{header:"Acciones",accessor:"id",render:S=>c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>{m(S),d(!0)},children:c.jsx(yo,{className:"w-5 h-5 text-blue-500"})})})}];return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm dark:bg-gray-800",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Categorías de Gastos"}),c.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-clinical-blue text-white rounded-lg hover:bg-blue-600",children:[c.jsx(ms,{className:"w-5 h-5"})," Crear Categoría"]})]}),i?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):o?c.jsx("div",{className:"text-red-500",children:o}):c.jsx(Bn,{data:n,columns:k,title:""}),f&&c.jsx(jpe,{categoria:h,onClose:()=>d(!1),onSave:()=>{d(!1),y()}})]})},Ape=({gasto:e,onClose:t,onSave:n})=>{const{sede:r,empresa:i,profile:a}=Mt(),[o,u]=_.useState(e),[f,d]=_.useState([]),[h,m]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!r||!i)return;const{data:C}=await te.from("gastos_categorias").select("*").eq("sede_id",r.id).eq("empresa_id",i.id);d(C||[])})()},[r,i]);const y=S=>{const{name:C,value:T,type:A}=S.target;u(N=>({...N,[C]:A==="number"?parseFloat(T):T}))},v=async S=>{if(S.preventDefault(),!(o!=null&&o.categoria_id)){alert("Selecciona una categoría.");return}if(!a||!r||!i){alert("No se pudo identificar la sesión del usuario.");return}m(!0);const{id:C,...T}=o,A={...T,usuario_id:a.id,sede_id:r.id,empresa_id:i.id},{error:N}=C?await te.from("gastos").update(A).eq("id",C):await te.from("gastos").insert([A]);N?alert(`Error al guardar el gasto: ${N.message}`):n(),m(!1)},k="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:[o!=null&&o.id?"Editar":"Registrar"," Gasto"]}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha"}),c.jsx("input",{type:"date",name:"fecha",value:o==null?void 0:o.fecha,onChange:y,required:!0,className:k})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Monto (S/)"}),c.jsx("input",{type:"number",step:"0.01",name:"monto",value:(o==null?void 0:o.monto)||"",onChange:y,required:!0,className:k})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Categoría"}),c.jsxs("select",{name:"categoria_id",value:(o==null?void 0:o.categoria_id)||"",onChange:y,required:!0,className:k,children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccionar..."}),f.map(S=>c.jsx("option",{value:S.id,children:S.nombre},S.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción"}),c.jsx("textarea",{name:"descripcion",value:o==null?void 0:o.descripcion,onChange:y,required:!0,rows:3,className:k})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:h?"Guardando...":"Guardar"})]})]})]})})},jpe=({categoria:e,onClose:t,onSave:n})=>{const{sede:r,empresa:i}=Mt(),[a,o]=_.useState(e),[u,f]=_.useState(!1),d=y=>{const{name:v,value:k}=y.target;o(S=>({...S,[v]:k}))},h=async y=>{if(y.preventDefault(),!r||!i){alert("No se pudo identificar la sesión.");return}f(!0);const{id:v,...k}=a,S={...k,sede_id:r.id,empresa_id:i.id},{error:C}=v?await te.from("gastos_categorias").update(S).eq("id",v):await te.from("gastos_categorias").insert([S]);C?alert(`Error al guardar la categoría: ${C.message}`):n(),f(!1)},m="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:[a!=null&&a.id?"Editar":"Crear"," Categoría"]}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),c.jsx("input",{type:"text",name:"nombre",value:(a==null?void 0:a.nombre)||"",onChange:d,required:!0,className:m})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripción (opcional)"}),c.jsx("textarea",{name:"descripcion",value:(a==null?void 0:a.descripcion)||"",onChange:d,rows:3,className:m})]}),c.jsxs("div",{className:"flex justify-end pt-4 space-x-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-pharmacy-green text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:u?"Guardando...":"Guardar"})]})]})]})})},Ppe=()=>c.jsx(KB,{children:c.jsx(SB,{children:c.jsx($6,{children:c.jsxs(y6,{children:[c.jsx($t,{path:"/login",element:c.jsx(xW,{})}),c.jsx($t,{path:"/",element:c.jsx(vW,{})}),c.jsx($t,{element:c.jsx(kB,{}),children:c.jsxs($t,{element:c.jsx(n8,{}),children:[c.jsx($t,{path:"/app/dashboard",element:c.jsx(Vfe,{})}),c.jsx($t,{path:"/app/ventas",element:c.jsx(Kfe,{})}),c.jsx($t,{path:"/app/inventario",element:c.jsx(ehe,{})}),c.jsx($t,{path:"/app/consultas-ia",element:c.jsx(she,{})}),c.jsx($t,{path:"/app/caja",element:c.jsx(Phe,{})}),c.jsx($t,{path:"/app/almacen",element:c.jsx(Lhe,{})}),c.jsx($t,{path:"/app/kardex",element:c.jsx($he,{})}),c.jsx($t,{path:"/app/proveedores",element:c.jsx(Vhe,{})}),c.jsx($t,{path:"/app/clientes",element:c.jsx(Whe,{})}),c.jsx($t,{path:"/app/usuarios",element:c.jsx(Zhe,{})}),c.jsx($t,{path:"/app/configuraciones",element:c.jsx(lpe,{})}),c.jsx($t,{path:"/app/sedes",element:c.jsx(upe,{})}),c.jsx($t,{path:"/app/administracion",element:c.jsx(dpe,{})}),c.jsx($t,{path:"/app/promociones",element:c.jsx(xpe,{})}),c.jsx($t,{path:"/app/pedidos",element:c.jsx(Epe,{})}),c.jsx($t,{path:"/app/registros",element:c.jsx(bpe,{})}),c.jsx($t,{path:"/app/comisiones",element:c.jsx(wpe,{})}),c.jsx($t,{path:"/app/gastos",element:c.jsx(Cpe,{})}),c.jsx($t,{path:"/app",element:c.jsx(Iv,{to:"/app/dashboard",replace:!0})})]})}),c.jsx($t,{path:"*",element:c.jsx(Iv,{to:"/"})})]})})})}),a3=document.getElementById("root");if(!a3)throw new Error("Could not find root element to mount to");const Mpe=EU.createRoot(a3);Mpe.render(c.jsx(qP.StrictMode,{children:c.jsx(Ppe,{})}));
